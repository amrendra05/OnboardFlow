var tw=n=>{throw TypeError(n)};var fp=(n,e,t)=>e.has(n)||tw("Cannot "+t);var Ct=(n,e,t)=>(fp(n,e,"read from private field"),t?t.call(n):e.get(n)),qr=(n,e,t)=>e.has(n)?tw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),$n=(n,e,t,r)=>(fp(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Yr=(n,e,t)=>(fp(n,e,"access private method"),t);var nw=(n,e,t,r)=>({set _(s){$n(n,e,s,t)},get _(){return Ct(n,e,r)}});function HT(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function i0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var pp={exports:{}},fl={},mp={exports:{}},Ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rw;function WT(){if(rw)return Ke;rw=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),g=Symbol.iterator;function y(L){return L===null||typeof L!="object"?null:(L=g&&L[g]||L["@@iterator"],typeof L=="function"?L:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,v={};function _(L,Q,fe){this.props=L,this.context=Q,this.refs=v,this.updater=fe||w}_.prototype.isReactComponent={},_.prototype.setState=function(L,Q){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,Q,"setState")},_.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function A(){}A.prototype=_.prototype;function E(L,Q,fe){this.props=L,this.context=Q,this.refs=v,this.updater=fe||w}var k=E.prototype=new A;k.constructor=E,S(k,_.prototype),k.isPureReactComponent=!0;var P=Array.isArray,N=Object.prototype.hasOwnProperty,R={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function $(L,Q,fe){var Te,De={},Me=null,ie=null;if(Q!=null)for(Te in Q.ref!==void 0&&(ie=Q.ref),Q.key!==void 0&&(Me=""+Q.key),Q)N.call(Q,Te)&&!M.hasOwnProperty(Te)&&(De[Te]=Q[Te]);var Ae=arguments.length-2;if(Ae===1)De.children=fe;else if(1<Ae){for(var $e=Array(Ae),Ue=0;Ue<Ae;Ue++)$e[Ue]=arguments[Ue+2];De.children=$e}if(L&&L.defaultProps)for(Te in Ae=L.defaultProps,Ae)De[Te]===void 0&&(De[Te]=Ae[Te]);return{$$typeof:n,type:L,key:Me,ref:ie,props:De,_owner:R.current}}function G(L,Q){return{$$typeof:n,type:L.type,key:Q,ref:L.ref,props:L.props,_owner:L._owner}}function F(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function V(L){var Q={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(fe){return Q[fe]})}var X=/\/+/g;function Z(L,Q){return typeof L=="object"&&L!==null&&L.key!=null?V(""+L.key):Q.toString(36)}function W(L,Q,fe,Te,De){var Me=typeof L;(Me==="undefined"||Me==="boolean")&&(L=null);var ie=!1;if(L===null)ie=!0;else switch(Me){case"string":case"number":ie=!0;break;case"object":switch(L.$$typeof){case n:case e:ie=!0}}if(ie)return ie=L,De=De(ie),L=Te===""?"."+Z(ie,0):Te,P(De)?(fe="",L!=null&&(fe=L.replace(X,"$&/")+"/"),W(De,Q,fe,"",function(Ue){return Ue})):De!=null&&(F(De)&&(De=G(De,fe+(!De.key||ie&&ie.key===De.key?"":(""+De.key).replace(X,"$&/")+"/")+L)),Q.push(De)),1;if(ie=0,Te=Te===""?".":Te+":",P(L))for(var Ae=0;Ae<L.length;Ae++){Me=L[Ae];var $e=Te+Z(Me,Ae);ie+=W(Me,Q,fe,$e,De)}else if($e=y(L),typeof $e=="function")for(L=$e.call(L),Ae=0;!(Me=L.next()).done;)Me=Me.value,$e=Te+Z(Me,Ae++),ie+=W(Me,Q,fe,$e,De);else if(Me==="object")throw Q=String(L),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return ie}function oe(L,Q,fe){if(L==null)return L;var Te=[],De=0;return W(L,Te,"","",function(Me){return Q.call(fe,Me,De++)}),Te}function K(L){if(L._status===-1){var Q=L._result;Q=Q(),Q.then(function(fe){(L._status===0||L._status===-1)&&(L._status=1,L._result=fe)},function(fe){(L._status===0||L._status===-1)&&(L._status=2,L._result=fe)}),L._status===-1&&(L._status=0,L._result=Q)}if(L._status===1)return L._result.default;throw L._result}var z={current:null},O={transition:null},ee={ReactCurrentDispatcher:z,ReactCurrentBatchConfig:O,ReactCurrentOwner:R};function te(){throw Error("act(...) is not supported in production builds of React.")}return Ke.Children={map:oe,forEach:function(L,Q,fe){oe(L,function(){Q.apply(this,arguments)},fe)},count:function(L){var Q=0;return oe(L,function(){Q++}),Q},toArray:function(L){return oe(L,function(Q){return Q})||[]},only:function(L){if(!F(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Ke.Component=_,Ke.Fragment=t,Ke.Profiler=s,Ke.PureComponent=E,Ke.StrictMode=r,Ke.Suspense=u,Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,Ke.act=te,Ke.cloneElement=function(L,Q,fe){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Te=S({},L.props),De=L.key,Me=L.ref,ie=L._owner;if(Q!=null){if(Q.ref!==void 0&&(Me=Q.ref,ie=R.current),Q.key!==void 0&&(De=""+Q.key),L.type&&L.type.defaultProps)var Ae=L.type.defaultProps;for($e in Q)N.call(Q,$e)&&!M.hasOwnProperty($e)&&(Te[$e]=Q[$e]===void 0&&Ae!==void 0?Ae[$e]:Q[$e])}var $e=arguments.length-2;if($e===1)Te.children=fe;else if(1<$e){Ae=Array($e);for(var Ue=0;Ue<$e;Ue++)Ae[Ue]=arguments[Ue+2];Te.children=Ae}return{$$typeof:n,type:L.type,key:De,ref:Me,props:Te,_owner:ie}},Ke.createContext=function(L){return L={$$typeof:a,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:i,_context:L},L.Consumer=L},Ke.createElement=$,Ke.createFactory=function(L){var Q=$.bind(null,L);return Q.type=L,Q},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(L){return{$$typeof:c,render:L}},Ke.isValidElement=F,Ke.lazy=function(L){return{$$typeof:f,_payload:{_status:-1,_result:L},_init:K}},Ke.memo=function(L,Q){return{$$typeof:h,type:L,compare:Q===void 0?null:Q}},Ke.startTransition=function(L){var Q=O.transition;O.transition={};try{L()}finally{O.transition=Q}},Ke.unstable_act=te,Ke.useCallback=function(L,Q){return z.current.useCallback(L,Q)},Ke.useContext=function(L){return z.current.useContext(L)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(L){return z.current.useDeferredValue(L)},Ke.useEffect=function(L,Q){return z.current.useEffect(L,Q)},Ke.useId=function(){return z.current.useId()},Ke.useImperativeHandle=function(L,Q,fe){return z.current.useImperativeHandle(L,Q,fe)},Ke.useInsertionEffect=function(L,Q){return z.current.useInsertionEffect(L,Q)},Ke.useLayoutEffect=function(L,Q){return z.current.useLayoutEffect(L,Q)},Ke.useMemo=function(L,Q){return z.current.useMemo(L,Q)},Ke.useReducer=function(L,Q,fe){return z.current.useReducer(L,Q,fe)},Ke.useRef=function(L){return z.current.useRef(L)},Ke.useState=function(L){return z.current.useState(L)},Ke.useSyncExternalStore=function(L,Q,fe){return z.current.useSyncExternalStore(L,Q,fe)},Ke.useTransition=function(){return z.current.useTransition()},Ke.version="18.3.1",Ke}var sw;function Vd(){return sw||(sw=1,mp.exports=WT()),mp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iw;function GT(){if(iw)return fl;iw=1;var n=Vd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(c,u,h){var f,g={},y=null,w=null;h!==void 0&&(y=""+h),u.key!==void 0&&(y=""+u.key),u.ref!==void 0&&(w=u.ref);for(f in u)r.call(u,f)&&!i.hasOwnProperty(f)&&(g[f]=u[f]);if(c&&c.defaultProps)for(f in u=c.defaultProps,u)g[f]===void 0&&(g[f]=u[f]);return{$$typeof:e,type:c,key:y,ref:w,props:g,_owner:s.current}}return fl.Fragment=t,fl.jsx=a,fl.jsxs=a,fl}var ow;function qT(){return ow||(ow=1,pp.exports=GT()),pp.exports}var p=qT(),Ou={},gp={exports:{}},zn={},yp={exports:{}},vp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aw;function YT(){return aw||(aw=1,function(n){function e(O,ee){var te=O.length;O.push(ee);e:for(;0<te;){var L=te-1>>>1,Q=O[L];if(0<s(Q,ee))O[L]=ee,O[te]=Q,te=L;else break e}}function t(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var ee=O[0],te=O.pop();if(te!==ee){O[0]=te;e:for(var L=0,Q=O.length,fe=Q>>>1;L<fe;){var Te=2*(L+1)-1,De=O[Te],Me=Te+1,ie=O[Me];if(0>s(De,te))Me<Q&&0>s(ie,De)?(O[L]=ie,O[Me]=te,L=Me):(O[L]=De,O[Te]=te,L=Te);else if(Me<Q&&0>s(ie,te))O[L]=ie,O[Me]=te,L=Me;else break e}}return ee}function s(O,ee){var te=O.sortIndex-ee.sortIndex;return te!==0?te:O.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var a=Date,c=a.now();n.unstable_now=function(){return a.now()-c}}var u=[],h=[],f=1,g=null,y=3,w=!1,S=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(O){for(var ee=t(h);ee!==null;){if(ee.callback===null)r(h);else if(ee.startTime<=O)r(h),ee.sortIndex=ee.expirationTime,e(u,ee);else break;ee=t(h)}}function P(O){if(v=!1,k(O),!S)if(t(u)!==null)S=!0,K(N);else{var ee=t(h);ee!==null&&z(P,ee.startTime-O)}}function N(O,ee){S=!1,v&&(v=!1,A($),$=-1),w=!0;var te=y;try{for(k(ee),g=t(u);g!==null&&(!(g.expirationTime>ee)||O&&!V());){var L=g.callback;if(typeof L=="function"){g.callback=null,y=g.priorityLevel;var Q=L(g.expirationTime<=ee);ee=n.unstable_now(),typeof Q=="function"?g.callback=Q:g===t(u)&&r(u),k(ee)}else r(u);g=t(u)}if(g!==null)var fe=!0;else{var Te=t(h);Te!==null&&z(P,Te.startTime-ee),fe=!1}return fe}finally{g=null,y=te,w=!1}}var R=!1,M=null,$=-1,G=5,F=-1;function V(){return!(n.unstable_now()-F<G)}function X(){if(M!==null){var O=n.unstable_now();F=O;var ee=!0;try{ee=M(!0,O)}finally{ee?Z():(R=!1,M=null)}}else R=!1}var Z;if(typeof E=="function")Z=function(){E(X)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,oe=W.port2;W.port1.onmessage=X,Z=function(){oe.postMessage(null)}}else Z=function(){_(X,0)};function K(O){M=O,R||(R=!0,Z())}function z(O,ee){$=_(function(){O(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){S||w||(S=!0,K(N))},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return t(u)},n.unstable_next=function(O){switch(y){case 1:case 2:case 3:var ee=3;break;default:ee=y}var te=y;y=ee;try{return O()}finally{y=te}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,ee){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var te=y;y=O;try{return ee()}finally{y=te}},n.unstable_scheduleCallback=function(O,ee,te){var L=n.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?L+te:L):te=L,O){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=te+Q,O={id:f++,callback:ee,priorityLevel:O,startTime:te,expirationTime:Q,sortIndex:-1},te>L?(O.sortIndex=te,e(h,O),t(u)===null&&O===t(h)&&(v?(A($),$=-1):v=!0,z(P,te-L))):(O.sortIndex=Q,e(u,O),S||w||(S=!0,K(N))),O},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(O){var ee=y;return function(){var te=y;y=ee;try{return O.apply(this,arguments)}finally{y=te}}}}(vp)),vp}var lw;function XT(){return lw||(lw=1,yp.exports=YT()),yp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cw;function KT(){if(cw)return zn;cw=1;var n=Vd(),e=XT();function t(o){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+o,d=1;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function i(o,l){a(o,l),a(o+"Capture",l)}function a(o,l){for(s[o]=l,o=0;o<l.length;o++)r.add(l[o])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},g={};function y(o){return u.call(g,o)?!0:u.call(f,o)?!1:h.test(o)?g[o]=!0:(f[o]=!0,!1)}function w(o,l,d,m){if(d!==null&&d.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return m?!1:d!==null?!d.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function S(o,l,d,m){if(l===null||typeof l>"u"||w(o,l,d,m))return!0;if(m)return!1;if(d!==null)switch(d.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function v(o,l,d,m,x,b,T){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=m,this.attributeNamespace=x,this.mustUseProperty=d,this.propertyName=o,this.type=l,this.sanitizeURL=b,this.removeEmptyString=T}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){_[o]=new v(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var l=o[0];_[l]=new v(l,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){_[o]=new v(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){_[o]=new v(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){_[o]=new v(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){_[o]=new v(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){_[o]=new v(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){_[o]=new v(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){_[o]=new v(o,5,!1,o.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function E(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var l=o.replace(A,E);_[l]=new v(l,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var l=o.replace(A,E);_[l]=new v(l,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var l=o.replace(A,E);_[l]=new v(l,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){_[o]=new v(o,1,!1,o.toLowerCase(),null,!1,!1)}),_.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){_[o]=new v(o,1,!1,o.toLowerCase(),null,!0,!0)});function k(o,l,d,m){var x=_.hasOwnProperty(l)?_[l]:null;(x!==null?x.type!==0:m||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(S(l,d,x,m)&&(d=null),m||x===null?y(l)&&(d===null?o.removeAttribute(l):o.setAttribute(l,""+d)):x.mustUseProperty?o[x.propertyName]=d===null?x.type===3?!1:"":d:(l=x.attributeName,m=x.attributeNamespace,d===null?o.removeAttribute(l):(x=x.type,d=x===3||x===4&&d===!0?"":""+d,m?o.setAttributeNS(m,l,d):o.setAttribute(l,d))))}var P=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),R=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),V=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),z=Symbol.for("react.offscreen"),O=Symbol.iterator;function ee(o){return o===null||typeof o!="object"?null:(o=O&&o[O]||o["@@iterator"],typeof o=="function"?o:null)}var te=Object.assign,L;function Q(o){if(L===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);L=l&&l[1]||""}return`
`+L+o}var fe=!1;function Te(o,l){if(!o||fe)return"";fe=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(Y){var m=Y}Reflect.construct(o,[],l)}else{try{l.call()}catch(Y){m=Y}o.call(l.prototype)}else{try{throw Error()}catch(Y){m=Y}o()}}catch(Y){if(Y&&m&&typeof Y.stack=="string"){for(var x=Y.stack.split(`
`),b=m.stack.split(`
`),T=x.length-1,D=b.length-1;1<=T&&0<=D&&x[T]!==b[D];)D--;for(;1<=T&&0<=D;T--,D--)if(x[T]!==b[D]){if(T!==1||D!==1)do if(T--,D--,0>D||x[T]!==b[D]){var j=`
`+x[T].replace(" at new "," at ");return o.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",o.displayName)),j}while(1<=T&&0<=D);break}}}finally{fe=!1,Error.prepareStackTrace=d}return(o=o?o.displayName||o.name:"")?Q(o):""}function De(o){switch(o.tag){case 5:return Q(o.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return o=Te(o.type,!1),o;case 11:return o=Te(o.type.render,!1),o;case 1:return o=Te(o.type,!0),o;default:return""}}function Me(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case M:return"Fragment";case R:return"Portal";case G:return"Profiler";case $:return"StrictMode";case Z:return"Suspense";case W:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case V:return(o.displayName||"Context")+".Consumer";case F:return(o._context.displayName||"Context")+".Provider";case X:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case oe:return l=o.displayName||null,l!==null?l:Me(o.type)||"Memo";case K:l=o._payload,o=o._init;try{return Me(o(l))}catch{}}return null}function ie(o){var l=o.type;switch(o.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=l.render,o=o.displayName||o.name||"",l.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Me(l);case 8:return l===$?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Ae(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function $e(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Ue(o){var l=$e(o)?"checked":"value",d=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),m=""+o[l];if(!o.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var x=d.get,b=d.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return x.call(this)},set:function(T){m=""+T,b.call(this,T)}}),Object.defineProperty(o,l,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(T){m=""+T},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function Je(o){o._valueTracker||(o._valueTracker=Ue(o))}function ut(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var d=l.getValue(),m="";return o&&(m=$e(o)?o.checked?"true":"false":o.value),o=m,o!==d?(l.setValue(o),!0):!1}function Mt(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function gn(o,l){var d=l.checked;return te({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??o._wrapperState.initialChecked})}function js(o,l){var d=l.defaultValue==null?"":l.defaultValue,m=l.checked!=null?l.checked:l.defaultChecked;d=Ae(l.value!=null?l.value:d),o._wrapperState={initialChecked:m,initialValue:d,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function hs(o,l){l=l.checked,l!=null&&k(o,"checked",l,!1)}function zr(o,l){hs(o,l);var d=Ae(l.value),m=l.type;if(d!=null)m==="number"?(d===0&&o.value===""||o.value!=d)&&(o.value=""+d):o.value!==""+d&&(o.value=""+d);else if(m==="submit"||m==="reset"){o.removeAttribute("value");return}l.hasOwnProperty("value")?Pa(o,l.type,d):l.hasOwnProperty("defaultValue")&&Pa(o,l.type,Ae(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(o.defaultChecked=!!l.defaultChecked)}function kc(o,l,d){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var m=l.type;if(!(m!=="submit"&&m!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+o._wrapperState.initialValue,d||l===o.value||(o.value=l),o.defaultValue=l}d=o.name,d!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,d!==""&&(o.name=d)}function Pa(o,l,d){(l!=="number"||Mt(o.ownerDocument)!==o)&&(d==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+d&&(o.defaultValue=""+d))}var ao=Array.isArray;function fs(o,l,d,m){if(o=o.options,l){l={};for(var x=0;x<d.length;x++)l["$"+d[x]]=!0;for(d=0;d<o.length;d++)x=l.hasOwnProperty("$"+o[d].value),o[d].selected!==x&&(o[d].selected=x),x&&m&&(o[d].defaultSelected=!0)}else{for(d=""+Ae(d),l=null,x=0;x<o.length;x++){if(o[x].value===d){o[x].selected=!0,m&&(o[x].defaultSelected=!0);return}l!==null||o[x].disabled||(l=o[x])}l!==null&&(l.selected=!0)}}function I(o,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return te({},l,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function q(o,l){var d=l.value;if(d==null){if(d=l.children,l=l.defaultValue,d!=null){if(l!=null)throw Error(t(92));if(ao(d)){if(1<d.length)throw Error(t(93));d=d[0]}l=d}l==null&&(l=""),d=l}o._wrapperState={initialValue:Ae(d)}}function J(o,l){var d=Ae(l.value),m=Ae(l.defaultValue);d!=null&&(d=""+d,d!==o.value&&(o.value=d),l.defaultValue==null&&o.defaultValue!==d&&(o.defaultValue=d)),m!=null&&(o.defaultValue=""+m)}function me(o){var l=o.textContent;l===o._wrapperState.initialValue&&l!==""&&l!==null&&(o.value=l)}function de(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(o,l){return o==null||o==="http://www.w3.org/1999/xhtml"?de(l):o==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var ve,et=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,d,m,x){MSApp.execUnsafeLocalFunction(function(){return o(l,d,m,x)})}:o}(function(o,l){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=l;else{for(ve=ve||document.createElement("div"),ve.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=ve.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;l.firstChild;)o.appendChild(l.firstChild)}});function gt(o,l){if(l){var d=o.firstChild;if(d&&d===o.lastChild&&d.nodeType===3){d.nodeValue=l;return}}o.textContent=l}var It={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ch=["Webkit","ms","Moz","O"];Object.keys(It).forEach(function(o){Ch.forEach(function(l){l=l+o.charAt(0).toUpperCase()+o.substring(1),It[l]=It[o]})});function lo(o,l,d){return l==null||typeof l=="boolean"||l===""?"":d||typeof l!="number"||l===0||It.hasOwnProperty(o)&&It[o]?(""+l).trim():l+"px"}function co(o,l){o=o.style;for(var d in l)if(l.hasOwnProperty(d)){var m=d.indexOf("--")===0,x=lo(d,l[d],m);d==="float"&&(d="cssFloat"),m?o.setProperty(d,x):o[d]=x}}var Eh=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function uo(o,l){if(l){if(Eh[o]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function Na(o,l){if(o.indexOf("-")===-1)return typeof l.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ho=null;function Th(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var kh=null,fo=null,po=null;function vy(o){if(o=Za(o)){if(typeof kh!="function")throw Error(t(280));var l=o.stateNode;l&&(l=Qc(l),kh(o.stateNode,o.type,l))}}function xy(o){fo?po?po.push(o):po=[o]:fo=o}function wy(){if(fo){var o=fo,l=po;if(po=fo=null,vy(o),l)for(o=0;o<l.length;o++)vy(l[o])}}function by(o,l){return o(l)}function _y(){}var Ph=!1;function Sy(o,l,d){if(Ph)return o(l,d);Ph=!0;try{return by(o,l,d)}finally{Ph=!1,(fo!==null||po!==null)&&(_y(),wy())}}function Ra(o,l){var d=o.stateNode;if(d===null)return null;var m=Qc(d);if(m===null)return null;d=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(o=o.type,m=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!m;break e;default:o=!1}if(o)return null;if(d&&typeof d!="function")throw Error(t(231,l,typeof d));return d}var Nh=!1;if(c)try{var Da={};Object.defineProperty(Da,"passive",{get:function(){Nh=!0}}),window.addEventListener("test",Da,Da),window.removeEventListener("test",Da,Da)}catch{Nh=!1}function KC(o,l,d,m,x,b,T,D,j){var Y=Array.prototype.slice.call(arguments,3);try{l.apply(d,Y)}catch(se){this.onError(se)}}var Ma=!1,Pc=null,Nc=!1,Rh=null,QC={onError:function(o){Ma=!0,Pc=o}};function ZC(o,l,d,m,x,b,T,D,j){Ma=!1,Pc=null,KC.apply(QC,arguments)}function JC(o,l,d,m,x,b,T,D,j){if(ZC.apply(this,arguments),Ma){if(Ma){var Y=Pc;Ma=!1,Pc=null}else throw Error(t(198));Nc||(Nc=!0,Rh=Y)}}function _i(o){var l=o,d=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(d=l.return),o=l.return;while(o)}return l.tag===3?d:null}function Ay(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function Cy(o){if(_i(o)!==o)throw Error(t(188))}function eE(o){var l=o.alternate;if(!l){if(l=_i(o),l===null)throw Error(t(188));return l!==o?null:o}for(var d=o,m=l;;){var x=d.return;if(x===null)break;var b=x.alternate;if(b===null){if(m=x.return,m!==null){d=m;continue}break}if(x.child===b.child){for(b=x.child;b;){if(b===d)return Cy(x),o;if(b===m)return Cy(x),l;b=b.sibling}throw Error(t(188))}if(d.return!==m.return)d=x,m=b;else{for(var T=!1,D=x.child;D;){if(D===d){T=!0,d=x,m=b;break}if(D===m){T=!0,m=x,d=b;break}D=D.sibling}if(!T){for(D=b.child;D;){if(D===d){T=!0,d=b,m=x;break}if(D===m){T=!0,m=b,d=x;break}D=D.sibling}if(!T)throw Error(t(189))}}if(d.alternate!==m)throw Error(t(190))}if(d.tag!==3)throw Error(t(188));return d.stateNode.current===d?o:l}function Ey(o){return o=eE(o),o!==null?Ty(o):null}function Ty(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var l=Ty(o);if(l!==null)return l;o=o.sibling}return null}var ky=e.unstable_scheduleCallback,Py=e.unstable_cancelCallback,tE=e.unstable_shouldYield,nE=e.unstable_requestPaint,Lt=e.unstable_now,rE=e.unstable_getCurrentPriorityLevel,Dh=e.unstable_ImmediatePriority,Ny=e.unstable_UserBlockingPriority,Rc=e.unstable_NormalPriority,sE=e.unstable_LowPriority,Ry=e.unstable_IdlePriority,Dc=null,Vr=null;function iE(o){if(Vr&&typeof Vr.onCommitFiberRoot=="function")try{Vr.onCommitFiberRoot(Dc,o,void 0,(o.current.flags&128)===128)}catch{}}var xr=Math.clz32?Math.clz32:lE,oE=Math.log,aE=Math.LN2;function lE(o){return o>>>=0,o===0?32:31-(oE(o)/aE|0)|0}var Mc=64,Ic=4194304;function Ia(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function jc(o,l){var d=o.pendingLanes;if(d===0)return 0;var m=0,x=o.suspendedLanes,b=o.pingedLanes,T=d&268435455;if(T!==0){var D=T&~x;D!==0?m=Ia(D):(b&=T,b!==0&&(m=Ia(b)))}else T=d&~x,T!==0?m=Ia(T):b!==0&&(m=Ia(b));if(m===0)return 0;if(l!==0&&l!==m&&(l&x)===0&&(x=m&-m,b=l&-l,x>=b||x===16&&(b&4194240)!==0))return l;if((m&4)!==0&&(m|=d&16),l=o.entangledLanes,l!==0)for(o=o.entanglements,l&=m;0<l;)d=31-xr(l),x=1<<d,m|=o[d],l&=~x;return m}function cE(o,l){switch(o){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uE(o,l){for(var d=o.suspendedLanes,m=o.pingedLanes,x=o.expirationTimes,b=o.pendingLanes;0<b;){var T=31-xr(b),D=1<<T,j=x[T];j===-1?((D&d)===0||(D&m)!==0)&&(x[T]=cE(D,l)):j<=l&&(o.expiredLanes|=D),b&=~D}}function Mh(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Dy(){var o=Mc;return Mc<<=1,(Mc&4194240)===0&&(Mc=64),o}function Ih(o){for(var l=[],d=0;31>d;d++)l.push(o);return l}function ja(o,l,d){o.pendingLanes|=l,l!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,l=31-xr(l),o[l]=d}function dE(o,l){var d=o.pendingLanes&~l;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=l,o.mutableReadLanes&=l,o.entangledLanes&=l,l=o.entanglements;var m=o.eventTimes;for(o=o.expirationTimes;0<d;){var x=31-xr(d),b=1<<x;l[x]=0,m[x]=-1,o[x]=-1,d&=~b}}function jh(o,l){var d=o.entangledLanes|=l;for(o=o.entanglements;d;){var m=31-xr(d),x=1<<m;x&l|o[m]&l&&(o[m]|=l),d&=~x}}var ht=0;function My(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var Iy,Oh,jy,Oy,Ly,Lh=!1,Oc=[],Os=null,Ls=null,Fs=null,Oa=new Map,La=new Map,Bs=[],hE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fy(o,l){switch(o){case"focusin":case"focusout":Os=null;break;case"dragenter":case"dragleave":Ls=null;break;case"mouseover":case"mouseout":Fs=null;break;case"pointerover":case"pointerout":Oa.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":La.delete(l.pointerId)}}function Fa(o,l,d,m,x,b){return o===null||o.nativeEvent!==b?(o={blockedOn:l,domEventName:d,eventSystemFlags:m,nativeEvent:b,targetContainers:[x]},l!==null&&(l=Za(l),l!==null&&Oh(l)),o):(o.eventSystemFlags|=m,l=o.targetContainers,x!==null&&l.indexOf(x)===-1&&l.push(x),o)}function fE(o,l,d,m,x){switch(l){case"focusin":return Os=Fa(Os,o,l,d,m,x),!0;case"dragenter":return Ls=Fa(Ls,o,l,d,m,x),!0;case"mouseover":return Fs=Fa(Fs,o,l,d,m,x),!0;case"pointerover":var b=x.pointerId;return Oa.set(b,Fa(Oa.get(b)||null,o,l,d,m,x)),!0;case"gotpointercapture":return b=x.pointerId,La.set(b,Fa(La.get(b)||null,o,l,d,m,x)),!0}return!1}function By(o){var l=Si(o.target);if(l!==null){var d=_i(l);if(d!==null){if(l=d.tag,l===13){if(l=Ay(d),l!==null){o.blockedOn=l,Ly(o.priority,function(){jy(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){o.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Lc(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var d=Bh(o.domEventName,o.eventSystemFlags,l[0],o.nativeEvent);if(d===null){d=o.nativeEvent;var m=new d.constructor(d.type,d);ho=m,d.target.dispatchEvent(m),ho=null}else return l=Za(d),l!==null&&Oh(l),o.blockedOn=d,!1;l.shift()}return!0}function $y(o,l,d){Lc(o)&&d.delete(l)}function pE(){Lh=!1,Os!==null&&Lc(Os)&&(Os=null),Ls!==null&&Lc(Ls)&&(Ls=null),Fs!==null&&Lc(Fs)&&(Fs=null),Oa.forEach($y),La.forEach($y)}function Ba(o,l){o.blockedOn===l&&(o.blockedOn=null,Lh||(Lh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,pE)))}function $a(o){function l(x){return Ba(x,o)}if(0<Oc.length){Ba(Oc[0],o);for(var d=1;d<Oc.length;d++){var m=Oc[d];m.blockedOn===o&&(m.blockedOn=null)}}for(Os!==null&&Ba(Os,o),Ls!==null&&Ba(Ls,o),Fs!==null&&Ba(Fs,o),Oa.forEach(l),La.forEach(l),d=0;d<Bs.length;d++)m=Bs[d],m.blockedOn===o&&(m.blockedOn=null);for(;0<Bs.length&&(d=Bs[0],d.blockedOn===null);)By(d),d.blockedOn===null&&Bs.shift()}var mo=P.ReactCurrentBatchConfig,Fc=!0;function mE(o,l,d,m){var x=ht,b=mo.transition;mo.transition=null;try{ht=1,Fh(o,l,d,m)}finally{ht=x,mo.transition=b}}function gE(o,l,d,m){var x=ht,b=mo.transition;mo.transition=null;try{ht=4,Fh(o,l,d,m)}finally{ht=x,mo.transition=b}}function Fh(o,l,d,m){if(Fc){var x=Bh(o,l,d,m);if(x===null)nf(o,l,m,Bc,d),Fy(o,m);else if(fE(x,o,l,d,m))m.stopPropagation();else if(Fy(o,m),l&4&&-1<hE.indexOf(o)){for(;x!==null;){var b=Za(x);if(b!==null&&Iy(b),b=Bh(o,l,d,m),b===null&&nf(o,l,m,Bc,d),b===x)break;x=b}x!==null&&m.stopPropagation()}else nf(o,l,m,null,d)}}var Bc=null;function Bh(o,l,d,m){if(Bc=null,o=Th(m),o=Si(o),o!==null)if(l=_i(o),l===null)o=null;else if(d=l.tag,d===13){if(o=Ay(l),o!==null)return o;o=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null);return Bc=o,null}function zy(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rE()){case Dh:return 1;case Ny:return 4;case Rc:case sE:return 16;case Ry:return 536870912;default:return 16}default:return 16}}var $s=null,$h=null,$c=null;function Vy(){if($c)return $c;var o,l=$h,d=l.length,m,x="value"in $s?$s.value:$s.textContent,b=x.length;for(o=0;o<d&&l[o]===x[o];o++);var T=d-o;for(m=1;m<=T&&l[d-m]===x[b-m];m++);return $c=x.slice(o,1<m?1-m:void 0)}function zc(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function Vc(){return!0}function Uy(){return!1}function Gn(o){function l(d,m,x,b,T){this._reactName=d,this._targetInst=x,this.type=m,this.nativeEvent=b,this.target=T,this.currentTarget=null;for(var D in o)o.hasOwnProperty(D)&&(d=o[D],this[D]=d?d(b):b[D]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Vc:Uy,this.isPropagationStopped=Uy,this}return te(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Vc)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Vc)},persist:function(){},isPersistent:Vc}),l}var go={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zh=Gn(go),za=te({},go,{view:0,detail:0}),yE=Gn(za),Vh,Uh,Va,Uc=te({},za,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wh,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Va&&(Va&&o.type==="mousemove"?(Vh=o.screenX-Va.screenX,Uh=o.screenY-Va.screenY):Uh=Vh=0,Va=o),Vh)},movementY:function(o){return"movementY"in o?o.movementY:Uh}}),Hy=Gn(Uc),vE=te({},Uc,{dataTransfer:0}),xE=Gn(vE),wE=te({},za,{relatedTarget:0}),Hh=Gn(wE),bE=te({},go,{animationName:0,elapsedTime:0,pseudoElement:0}),_E=Gn(bE),SE=te({},go,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),AE=Gn(SE),CE=te({},go,{data:0}),Wy=Gn(CE),EE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PE(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=kE[o])?!!l[o]:!1}function Wh(){return PE}var NE=te({},za,{key:function(o){if(o.key){var l=EE[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=zc(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?TE[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wh,charCode:function(o){return o.type==="keypress"?zc(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?zc(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),RE=Gn(NE),DE=te({},Uc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gy=Gn(DE),ME=te({},za,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wh}),IE=Gn(ME),jE=te({},go,{propertyName:0,elapsedTime:0,pseudoElement:0}),OE=Gn(jE),LE=te({},Uc,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),FE=Gn(LE),BE=[9,13,27,32],Gh=c&&"CompositionEvent"in window,Ua=null;c&&"documentMode"in document&&(Ua=document.documentMode);var $E=c&&"TextEvent"in window&&!Ua,qy=c&&(!Gh||Ua&&8<Ua&&11>=Ua),Yy=" ",Xy=!1;function Ky(o,l){switch(o){case"keyup":return BE.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qy(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var yo=!1;function zE(o,l){switch(o){case"compositionend":return Qy(l);case"keypress":return l.which!==32?null:(Xy=!0,Yy);case"textInput":return o=l.data,o===Yy&&Xy?null:o;default:return null}}function VE(o,l){if(yo)return o==="compositionend"||!Gh&&Ky(o,l)?(o=Vy(),$c=$h=$s=null,yo=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return qy&&l.locale!=="ko"?null:l.data;default:return null}}var UE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zy(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!UE[o.type]:l==="textarea"}function Jy(o,l,d,m){xy(m),l=Yc(l,"onChange"),0<l.length&&(d=new zh("onChange","change",null,d,m),o.push({event:d,listeners:l}))}var Ha=null,Wa=null;function HE(o){yv(o,0)}function Hc(o){var l=_o(o);if(ut(l))return o}function WE(o,l){if(o==="change")return l}var ev=!1;if(c){var qh;if(c){var Yh="oninput"in document;if(!Yh){var tv=document.createElement("div");tv.setAttribute("oninput","return;"),Yh=typeof tv.oninput=="function"}qh=Yh}else qh=!1;ev=qh&&(!document.documentMode||9<document.documentMode)}function nv(){Ha&&(Ha.detachEvent("onpropertychange",rv),Wa=Ha=null)}function rv(o){if(o.propertyName==="value"&&Hc(Wa)){var l=[];Jy(l,Wa,o,Th(o)),Sy(HE,l)}}function GE(o,l,d){o==="focusin"?(nv(),Ha=l,Wa=d,Ha.attachEvent("onpropertychange",rv)):o==="focusout"&&nv()}function qE(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Hc(Wa)}function YE(o,l){if(o==="click")return Hc(l)}function XE(o,l){if(o==="input"||o==="change")return Hc(l)}function KE(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var wr=typeof Object.is=="function"?Object.is:KE;function Ga(o,l){if(wr(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var d=Object.keys(o),m=Object.keys(l);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var x=d[m];if(!u.call(l,x)||!wr(o[x],l[x]))return!1}return!0}function sv(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function iv(o,l){var d=sv(o);o=0;for(var m;d;){if(d.nodeType===3){if(m=o+d.textContent.length,o<=l&&m>=l)return{node:d,offset:l-o};o=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=sv(d)}}function ov(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?ov(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function av(){for(var o=window,l=Mt();l instanceof o.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)o=l.contentWindow;else break;l=Mt(o.document)}return l}function Xh(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}function QE(o){var l=av(),d=o.focusedElem,m=o.selectionRange;if(l!==d&&d&&d.ownerDocument&&ov(d.ownerDocument.documentElement,d)){if(m!==null&&Xh(d)){if(l=m.start,o=m.end,o===void 0&&(o=l),"selectionStart"in d)d.selectionStart=l,d.selectionEnd=Math.min(o,d.value.length);else if(o=(l=d.ownerDocument||document)&&l.defaultView||window,o.getSelection){o=o.getSelection();var x=d.textContent.length,b=Math.min(m.start,x);m=m.end===void 0?b:Math.min(m.end,x),!o.extend&&b>m&&(x=m,m=b,b=x),x=iv(d,b);var T=iv(d,m);x&&T&&(o.rangeCount!==1||o.anchorNode!==x.node||o.anchorOffset!==x.offset||o.focusNode!==T.node||o.focusOffset!==T.offset)&&(l=l.createRange(),l.setStart(x.node,x.offset),o.removeAllRanges(),b>m?(o.addRange(l),o.extend(T.node,T.offset)):(l.setEnd(T.node,T.offset),o.addRange(l)))}}for(l=[],o=d;o=o.parentNode;)o.nodeType===1&&l.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<l.length;d++)o=l[d],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var ZE=c&&"documentMode"in document&&11>=document.documentMode,vo=null,Kh=null,qa=null,Qh=!1;function lv(o,l,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Qh||vo==null||vo!==Mt(m)||(m=vo,"selectionStart"in m&&Xh(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),qa&&Ga(qa,m)||(qa=m,m=Yc(Kh,"onSelect"),0<m.length&&(l=new zh("onSelect","select",null,l,d),o.push({event:l,listeners:m}),l.target=vo)))}function Wc(o,l){var d={};return d[o.toLowerCase()]=l.toLowerCase(),d["Webkit"+o]="webkit"+l,d["Moz"+o]="moz"+l,d}var xo={animationend:Wc("Animation","AnimationEnd"),animationiteration:Wc("Animation","AnimationIteration"),animationstart:Wc("Animation","AnimationStart"),transitionend:Wc("Transition","TransitionEnd")},Zh={},cv={};c&&(cv=document.createElement("div").style,"AnimationEvent"in window||(delete xo.animationend.animation,delete xo.animationiteration.animation,delete xo.animationstart.animation),"TransitionEvent"in window||delete xo.transitionend.transition);function Gc(o){if(Zh[o])return Zh[o];if(!xo[o])return o;var l=xo[o],d;for(d in l)if(l.hasOwnProperty(d)&&d in cv)return Zh[o]=l[d];return o}var uv=Gc("animationend"),dv=Gc("animationiteration"),hv=Gc("animationstart"),fv=Gc("transitionend"),pv=new Map,mv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zs(o,l){pv.set(o,l),i(l,[o])}for(var Jh=0;Jh<mv.length;Jh++){var ef=mv[Jh],JE=ef.toLowerCase(),eT=ef[0].toUpperCase()+ef.slice(1);zs(JE,"on"+eT)}zs(uv,"onAnimationEnd"),zs(dv,"onAnimationIteration"),zs(hv,"onAnimationStart"),zs("dblclick","onDoubleClick"),zs("focusin","onFocus"),zs("focusout","onBlur"),zs(fv,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ya="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ya));function gv(o,l,d){var m=o.type||"unknown-event";o.currentTarget=d,JC(m,l,void 0,o),o.currentTarget=null}function yv(o,l){l=(l&4)!==0;for(var d=0;d<o.length;d++){var m=o[d],x=m.event;m=m.listeners;e:{var b=void 0;if(l)for(var T=m.length-1;0<=T;T--){var D=m[T],j=D.instance,Y=D.currentTarget;if(D=D.listener,j!==b&&x.isPropagationStopped())break e;gv(x,D,Y),b=j}else for(T=0;T<m.length;T++){if(D=m[T],j=D.instance,Y=D.currentTarget,D=D.listener,j!==b&&x.isPropagationStopped())break e;gv(x,D,Y),b=j}}}if(Nc)throw o=Rh,Nc=!1,Rh=null,o}function bt(o,l){var d=l[cf];d===void 0&&(d=l[cf]=new Set);var m=o+"__bubble";d.has(m)||(vv(l,o,2,!1),d.add(m))}function tf(o,l,d){var m=0;l&&(m|=4),vv(d,o,m,l)}var qc="_reactListening"+Math.random().toString(36).slice(2);function Xa(o){if(!o[qc]){o[qc]=!0,r.forEach(function(d){d!=="selectionchange"&&(tT.has(d)||tf(d,!1,o),tf(d,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[qc]||(l[qc]=!0,tf("selectionchange",!1,l))}}function vv(o,l,d,m){switch(zy(l)){case 1:var x=mE;break;case 4:x=gE;break;default:x=Fh}d=x.bind(null,l,d,o),x=void 0,!Nh||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(x=!0),m?x!==void 0?o.addEventListener(l,d,{capture:!0,passive:x}):o.addEventListener(l,d,!0):x!==void 0?o.addEventListener(l,d,{passive:x}):o.addEventListener(l,d,!1)}function nf(o,l,d,m,x){var b=m;if((l&1)===0&&(l&2)===0&&m!==null)e:for(;;){if(m===null)return;var T=m.tag;if(T===3||T===4){var D=m.stateNode.containerInfo;if(D===x||D.nodeType===8&&D.parentNode===x)break;if(T===4)for(T=m.return;T!==null;){var j=T.tag;if((j===3||j===4)&&(j=T.stateNode.containerInfo,j===x||j.nodeType===8&&j.parentNode===x))return;T=T.return}for(;D!==null;){if(T=Si(D),T===null)return;if(j=T.tag,j===5||j===6){m=b=T;continue e}D=D.parentNode}}m=m.return}Sy(function(){var Y=b,se=Th(d),ae=[];e:{var ne=pv.get(o);if(ne!==void 0){var ge=zh,be=o;switch(o){case"keypress":if(zc(d)===0)break e;case"keydown":case"keyup":ge=RE;break;case"focusin":be="focus",ge=Hh;break;case"focusout":be="blur",ge=Hh;break;case"beforeblur":case"afterblur":ge=Hh;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=Hy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=xE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=IE;break;case uv:case dv:case hv:ge=_E;break;case fv:ge=OE;break;case"scroll":ge=yE;break;case"wheel":ge=FE;break;case"copy":case"cut":case"paste":ge=AE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=Gy}var Se=(l&4)!==0,Ft=!Se&&o==="scroll",U=Se?ne!==null?ne+"Capture":null:ne;Se=[];for(var B=Y,H;B!==null;){H=B;var ue=H.stateNode;if(H.tag===5&&ue!==null&&(H=ue,U!==null&&(ue=Ra(B,U),ue!=null&&Se.push(Ka(B,ue,H)))),Ft)break;B=B.return}0<Se.length&&(ne=new ge(ne,be,null,d,se),ae.push({event:ne,listeners:Se}))}}if((l&7)===0){e:{if(ne=o==="mouseover"||o==="pointerover",ge=o==="mouseout"||o==="pointerout",ne&&d!==ho&&(be=d.relatedTarget||d.fromElement)&&(Si(be)||be[ps]))break e;if((ge||ne)&&(ne=se.window===se?se:(ne=se.ownerDocument)?ne.defaultView||ne.parentWindow:window,ge?(be=d.relatedTarget||d.toElement,ge=Y,be=be?Si(be):null,be!==null&&(Ft=_i(be),be!==Ft||be.tag!==5&&be.tag!==6)&&(be=null)):(ge=null,be=Y),ge!==be)){if(Se=Hy,ue="onMouseLeave",U="onMouseEnter",B="mouse",(o==="pointerout"||o==="pointerover")&&(Se=Gy,ue="onPointerLeave",U="onPointerEnter",B="pointer"),Ft=ge==null?ne:_o(ge),H=be==null?ne:_o(be),ne=new Se(ue,B+"leave",ge,d,se),ne.target=Ft,ne.relatedTarget=H,ue=null,Si(se)===Y&&(Se=new Se(U,B+"enter",be,d,se),Se.target=H,Se.relatedTarget=Ft,ue=Se),Ft=ue,ge&&be)t:{for(Se=ge,U=be,B=0,H=Se;H;H=wo(H))B++;for(H=0,ue=U;ue;ue=wo(ue))H++;for(;0<B-H;)Se=wo(Se),B--;for(;0<H-B;)U=wo(U),H--;for(;B--;){if(Se===U||U!==null&&Se===U.alternate)break t;Se=wo(Se),U=wo(U)}Se=null}else Se=null;ge!==null&&xv(ae,ne,ge,Se,!1),be!==null&&Ft!==null&&xv(ae,Ft,be,Se,!0)}}e:{if(ne=Y?_o(Y):window,ge=ne.nodeName&&ne.nodeName.toLowerCase(),ge==="select"||ge==="input"&&ne.type==="file")var Ce=WE;else if(Zy(ne))if(ev)Ce=XE;else{Ce=qE;var Pe=GE}else(ge=ne.nodeName)&&ge.toLowerCase()==="input"&&(ne.type==="checkbox"||ne.type==="radio")&&(Ce=YE);if(Ce&&(Ce=Ce(o,Y))){Jy(ae,Ce,d,se);break e}Pe&&Pe(o,ne,Y),o==="focusout"&&(Pe=ne._wrapperState)&&Pe.controlled&&ne.type==="number"&&Pa(ne,"number",ne.value)}switch(Pe=Y?_o(Y):window,o){case"focusin":(Zy(Pe)||Pe.contentEditable==="true")&&(vo=Pe,Kh=Y,qa=null);break;case"focusout":qa=Kh=vo=null;break;case"mousedown":Qh=!0;break;case"contextmenu":case"mouseup":case"dragend":Qh=!1,lv(ae,d,se);break;case"selectionchange":if(ZE)break;case"keydown":case"keyup":lv(ae,d,se)}var Ne;if(Gh)e:{switch(o){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else yo?Ky(o,d)&&(Be="onCompositionEnd"):o==="keydown"&&d.keyCode===229&&(Be="onCompositionStart");Be&&(qy&&d.locale!=="ko"&&(yo||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&yo&&(Ne=Vy()):($s=se,$h="value"in $s?$s.value:$s.textContent,yo=!0)),Pe=Yc(Y,Be),0<Pe.length&&(Be=new Wy(Be,o,null,d,se),ae.push({event:Be,listeners:Pe}),Ne?Be.data=Ne:(Ne=Qy(d),Ne!==null&&(Be.data=Ne)))),(Ne=$E?zE(o,d):VE(o,d))&&(Y=Yc(Y,"onBeforeInput"),0<Y.length&&(se=new Wy("onBeforeInput","beforeinput",null,d,se),ae.push({event:se,listeners:Y}),se.data=Ne))}yv(ae,l)})}function Ka(o,l,d){return{instance:o,listener:l,currentTarget:d}}function Yc(o,l){for(var d=l+"Capture",m=[];o!==null;){var x=o,b=x.stateNode;x.tag===5&&b!==null&&(x=b,b=Ra(o,d),b!=null&&m.unshift(Ka(o,b,x)),b=Ra(o,l),b!=null&&m.push(Ka(o,b,x))),o=o.return}return m}function wo(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function xv(o,l,d,m,x){for(var b=l._reactName,T=[];d!==null&&d!==m;){var D=d,j=D.alternate,Y=D.stateNode;if(j!==null&&j===m)break;D.tag===5&&Y!==null&&(D=Y,x?(j=Ra(d,b),j!=null&&T.unshift(Ka(d,j,D))):x||(j=Ra(d,b),j!=null&&T.push(Ka(d,j,D)))),d=d.return}T.length!==0&&o.push({event:l,listeners:T})}var nT=/\r\n?/g,rT=/\u0000|\uFFFD/g;function wv(o){return(typeof o=="string"?o:""+o).replace(nT,`
`).replace(rT,"")}function Xc(o,l,d){if(l=wv(l),wv(o)!==l&&d)throw Error(t(425))}function Kc(){}var rf=null,sf=null;function of(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var af=typeof setTimeout=="function"?setTimeout:void 0,sT=typeof clearTimeout=="function"?clearTimeout:void 0,bv=typeof Promise=="function"?Promise:void 0,iT=typeof queueMicrotask=="function"?queueMicrotask:typeof bv<"u"?function(o){return bv.resolve(null).then(o).catch(oT)}:af;function oT(o){setTimeout(function(){throw o})}function lf(o,l){var d=l,m=0;do{var x=d.nextSibling;if(o.removeChild(d),x&&x.nodeType===8)if(d=x.data,d==="/$"){if(m===0){o.removeChild(x),$a(l);return}m--}else d!=="$"&&d!=="$?"&&d!=="$!"||m++;d=x}while(d);$a(l)}function Vs(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return o}function _v(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var d=o.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return o;l--}else d==="/$"&&l++}o=o.previousSibling}return null}var bo=Math.random().toString(36).slice(2),Ur="__reactFiber$"+bo,Qa="__reactProps$"+bo,ps="__reactContainer$"+bo,cf="__reactEvents$"+bo,aT="__reactListeners$"+bo,lT="__reactHandles$"+bo;function Si(o){var l=o[Ur];if(l)return l;for(var d=o.parentNode;d;){if(l=d[ps]||d[Ur]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(o=_v(o);o!==null;){if(d=o[Ur])return d;o=_v(o)}return l}o=d,d=o.parentNode}return null}function Za(o){return o=o[Ur]||o[ps],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function _o(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function Qc(o){return o[Qa]||null}var uf=[],So=-1;function Us(o){return{current:o}}function _t(o){0>So||(o.current=uf[So],uf[So]=null,So--)}function yt(o,l){So++,uf[So]=o.current,o.current=l}var Hs={},yn=Us(Hs),jn=Us(!1),Ai=Hs;function Ao(o,l){var d=o.type.contextTypes;if(!d)return Hs;var m=o.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===l)return m.__reactInternalMemoizedMaskedChildContext;var x={},b;for(b in d)x[b]=l[b];return m&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=l,o.__reactInternalMemoizedMaskedChildContext=x),x}function On(o){return o=o.childContextTypes,o!=null}function Zc(){_t(jn),_t(yn)}function Sv(o,l,d){if(yn.current!==Hs)throw Error(t(168));yt(yn,l),yt(jn,d)}function Av(o,l,d){var m=o.stateNode;if(l=l.childContextTypes,typeof m.getChildContext!="function")return d;m=m.getChildContext();for(var x in m)if(!(x in l))throw Error(t(108,ie(o)||"Unknown",x));return te({},d,m)}function Jc(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Hs,Ai=yn.current,yt(yn,o),yt(jn,jn.current),!0}function Cv(o,l,d){var m=o.stateNode;if(!m)throw Error(t(169));d?(o=Av(o,l,Ai),m.__reactInternalMemoizedMergedChildContext=o,_t(jn),_t(yn),yt(yn,o)):_t(jn),yt(jn,d)}var ms=null,eu=!1,df=!1;function Ev(o){ms===null?ms=[o]:ms.push(o)}function cT(o){eu=!0,Ev(o)}function Ws(){if(!df&&ms!==null){df=!0;var o=0,l=ht;try{var d=ms;for(ht=1;o<d.length;o++){var m=d[o];do m=m(!0);while(m!==null)}ms=null,eu=!1}catch(x){throw ms!==null&&(ms=ms.slice(o+1)),ky(Dh,Ws),x}finally{ht=l,df=!1}}return null}var Co=[],Eo=0,tu=null,nu=0,ar=[],lr=0,Ci=null,gs=1,ys="";function Ei(o,l){Co[Eo++]=nu,Co[Eo++]=tu,tu=o,nu=l}function Tv(o,l,d){ar[lr++]=gs,ar[lr++]=ys,ar[lr++]=Ci,Ci=o;var m=gs;o=ys;var x=32-xr(m)-1;m&=~(1<<x),d+=1;var b=32-xr(l)+x;if(30<b){var T=x-x%5;b=(m&(1<<T)-1).toString(32),m>>=T,x-=T,gs=1<<32-xr(l)+x|d<<x|m,ys=b+o}else gs=1<<b|d<<x|m,ys=o}function hf(o){o.return!==null&&(Ei(o,1),Tv(o,1,0))}function ff(o){for(;o===tu;)tu=Co[--Eo],Co[Eo]=null,nu=Co[--Eo],Co[Eo]=null;for(;o===Ci;)Ci=ar[--lr],ar[lr]=null,ys=ar[--lr],ar[lr]=null,gs=ar[--lr],ar[lr]=null}var qn=null,Yn=null,At=!1,br=null;function kv(o,l){var d=hr(5,null,null,0);d.elementType="DELETED",d.stateNode=l,d.return=o,l=o.deletions,l===null?(o.deletions=[d],o.flags|=16):l.push(d)}function Pv(o,l){switch(o.tag){case 5:var d=o.type;return l=l.nodeType!==1||d.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(o.stateNode=l,qn=o,Yn=Vs(l.firstChild),!0):!1;case 6:return l=o.pendingProps===""||l.nodeType!==3?null:l,l!==null?(o.stateNode=l,qn=o,Yn=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(d=Ci!==null?{id:gs,overflow:ys}:null,o.memoizedState={dehydrated:l,treeContext:d,retryLane:1073741824},d=hr(18,null,null,0),d.stateNode=l,d.return=o,o.child=d,qn=o,Yn=null,!0):!1;default:return!1}}function pf(o){return(o.mode&1)!==0&&(o.flags&128)===0}function mf(o){if(At){var l=Yn;if(l){var d=l;if(!Pv(o,l)){if(pf(o))throw Error(t(418));l=Vs(d.nextSibling);var m=qn;l&&Pv(o,l)?kv(m,d):(o.flags=o.flags&-4097|2,At=!1,qn=o)}}else{if(pf(o))throw Error(t(418));o.flags=o.flags&-4097|2,At=!1,qn=o}}}function Nv(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;qn=o}function ru(o){if(o!==qn)return!1;if(!At)return Nv(o),At=!0,!1;var l;if((l=o.tag!==3)&&!(l=o.tag!==5)&&(l=o.type,l=l!=="head"&&l!=="body"&&!of(o.type,o.memoizedProps)),l&&(l=Yn)){if(pf(o))throw Rv(),Error(t(418));for(;l;)kv(o,l),l=Vs(l.nextSibling)}if(Nv(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8){var d=o.data;if(d==="/$"){if(l===0){Yn=Vs(o.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++}o=o.nextSibling}Yn=null}}else Yn=qn?Vs(o.stateNode.nextSibling):null;return!0}function Rv(){for(var o=Yn;o;)o=Vs(o.nextSibling)}function To(){Yn=qn=null,At=!1}function gf(o){br===null?br=[o]:br.push(o)}var uT=P.ReactCurrentBatchConfig;function Ja(o,l,d){if(o=d.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(t(309));var m=d.stateNode}if(!m)throw Error(t(147,o));var x=m,b=""+o;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===b?l.ref:(l=function(T){var D=x.refs;T===null?delete D[b]:D[b]=T},l._stringRef=b,l)}if(typeof o!="string")throw Error(t(284));if(!d._owner)throw Error(t(290,o))}return o}function su(o,l){throw o=Object.prototype.toString.call(l),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o))}function Dv(o){var l=o._init;return l(o._payload)}function Mv(o){function l(U,B){if(o){var H=U.deletions;H===null?(U.deletions=[B],U.flags|=16):H.push(B)}}function d(U,B){if(!o)return null;for(;B!==null;)l(U,B),B=B.sibling;return null}function m(U,B){for(U=new Map;B!==null;)B.key!==null?U.set(B.key,B):U.set(B.index,B),B=B.sibling;return U}function x(U,B){return U=Js(U,B),U.index=0,U.sibling=null,U}function b(U,B,H){return U.index=H,o?(H=U.alternate,H!==null?(H=H.index,H<B?(U.flags|=2,B):H):(U.flags|=2,B)):(U.flags|=1048576,B)}function T(U){return o&&U.alternate===null&&(U.flags|=2),U}function D(U,B,H,ue){return B===null||B.tag!==6?(B=ap(H,U.mode,ue),B.return=U,B):(B=x(B,H),B.return=U,B)}function j(U,B,H,ue){var Ce=H.type;return Ce===M?se(U,B,H.props.children,ue,H.key):B!==null&&(B.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===K&&Dv(Ce)===B.type)?(ue=x(B,H.props),ue.ref=Ja(U,B,H),ue.return=U,ue):(ue=ku(H.type,H.key,H.props,null,U.mode,ue),ue.ref=Ja(U,B,H),ue.return=U,ue)}function Y(U,B,H,ue){return B===null||B.tag!==4||B.stateNode.containerInfo!==H.containerInfo||B.stateNode.implementation!==H.implementation?(B=lp(H,U.mode,ue),B.return=U,B):(B=x(B,H.children||[]),B.return=U,B)}function se(U,B,H,ue,Ce){return B===null||B.tag!==7?(B=Ii(H,U.mode,ue,Ce),B.return=U,B):(B=x(B,H),B.return=U,B)}function ae(U,B,H){if(typeof B=="string"&&B!==""||typeof B=="number")return B=ap(""+B,U.mode,H),B.return=U,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case N:return H=ku(B.type,B.key,B.props,null,U.mode,H),H.ref=Ja(U,null,B),H.return=U,H;case R:return B=lp(B,U.mode,H),B.return=U,B;case K:var ue=B._init;return ae(U,ue(B._payload),H)}if(ao(B)||ee(B))return B=Ii(B,U.mode,H,null),B.return=U,B;su(U,B)}return null}function ne(U,B,H,ue){var Ce=B!==null?B.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return Ce!==null?null:D(U,B,""+H,ue);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case N:return H.key===Ce?j(U,B,H,ue):null;case R:return H.key===Ce?Y(U,B,H,ue):null;case K:return Ce=H._init,ne(U,B,Ce(H._payload),ue)}if(ao(H)||ee(H))return Ce!==null?null:se(U,B,H,ue,null);su(U,H)}return null}function ge(U,B,H,ue,Ce){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return U=U.get(H)||null,D(B,U,""+ue,Ce);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case N:return U=U.get(ue.key===null?H:ue.key)||null,j(B,U,ue,Ce);case R:return U=U.get(ue.key===null?H:ue.key)||null,Y(B,U,ue,Ce);case K:var Pe=ue._init;return ge(U,B,H,Pe(ue._payload),Ce)}if(ao(ue)||ee(ue))return U=U.get(H)||null,se(B,U,ue,Ce,null);su(B,ue)}return null}function be(U,B,H,ue){for(var Ce=null,Pe=null,Ne=B,Be=B=0,rn=null;Ne!==null&&Be<H.length;Be++){Ne.index>Be?(rn=Ne,Ne=null):rn=Ne.sibling;var ot=ne(U,Ne,H[Be],ue);if(ot===null){Ne===null&&(Ne=rn);break}o&&Ne&&ot.alternate===null&&l(U,Ne),B=b(ot,B,Be),Pe===null?Ce=ot:Pe.sibling=ot,Pe=ot,Ne=rn}if(Be===H.length)return d(U,Ne),At&&Ei(U,Be),Ce;if(Ne===null){for(;Be<H.length;Be++)Ne=ae(U,H[Be],ue),Ne!==null&&(B=b(Ne,B,Be),Pe===null?Ce=Ne:Pe.sibling=Ne,Pe=Ne);return At&&Ei(U,Be),Ce}for(Ne=m(U,Ne);Be<H.length;Be++)rn=ge(Ne,U,Be,H[Be],ue),rn!==null&&(o&&rn.alternate!==null&&Ne.delete(rn.key===null?Be:rn.key),B=b(rn,B,Be),Pe===null?Ce=rn:Pe.sibling=rn,Pe=rn);return o&&Ne.forEach(function(ei){return l(U,ei)}),At&&Ei(U,Be),Ce}function Se(U,B,H,ue){var Ce=ee(H);if(typeof Ce!="function")throw Error(t(150));if(H=Ce.call(H),H==null)throw Error(t(151));for(var Pe=Ce=null,Ne=B,Be=B=0,rn=null,ot=H.next();Ne!==null&&!ot.done;Be++,ot=H.next()){Ne.index>Be?(rn=Ne,Ne=null):rn=Ne.sibling;var ei=ne(U,Ne,ot.value,ue);if(ei===null){Ne===null&&(Ne=rn);break}o&&Ne&&ei.alternate===null&&l(U,Ne),B=b(ei,B,Be),Pe===null?Ce=ei:Pe.sibling=ei,Pe=ei,Ne=rn}if(ot.done)return d(U,Ne),At&&Ei(U,Be),Ce;if(Ne===null){for(;!ot.done;Be++,ot=H.next())ot=ae(U,ot.value,ue),ot!==null&&(B=b(ot,B,Be),Pe===null?Ce=ot:Pe.sibling=ot,Pe=ot);return At&&Ei(U,Be),Ce}for(Ne=m(U,Ne);!ot.done;Be++,ot=H.next())ot=ge(Ne,U,Be,ot.value,ue),ot!==null&&(o&&ot.alternate!==null&&Ne.delete(ot.key===null?Be:ot.key),B=b(ot,B,Be),Pe===null?Ce=ot:Pe.sibling=ot,Pe=ot);return o&&Ne.forEach(function(UT){return l(U,UT)}),At&&Ei(U,Be),Ce}function Ft(U,B,H,ue){if(typeof H=="object"&&H!==null&&H.type===M&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case N:e:{for(var Ce=H.key,Pe=B;Pe!==null;){if(Pe.key===Ce){if(Ce=H.type,Ce===M){if(Pe.tag===7){d(U,Pe.sibling),B=x(Pe,H.props.children),B.return=U,U=B;break e}}else if(Pe.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===K&&Dv(Ce)===Pe.type){d(U,Pe.sibling),B=x(Pe,H.props),B.ref=Ja(U,Pe,H),B.return=U,U=B;break e}d(U,Pe);break}else l(U,Pe);Pe=Pe.sibling}H.type===M?(B=Ii(H.props.children,U.mode,ue,H.key),B.return=U,U=B):(ue=ku(H.type,H.key,H.props,null,U.mode,ue),ue.ref=Ja(U,B,H),ue.return=U,U=ue)}return T(U);case R:e:{for(Pe=H.key;B!==null;){if(B.key===Pe)if(B.tag===4&&B.stateNode.containerInfo===H.containerInfo&&B.stateNode.implementation===H.implementation){d(U,B.sibling),B=x(B,H.children||[]),B.return=U,U=B;break e}else{d(U,B);break}else l(U,B);B=B.sibling}B=lp(H,U.mode,ue),B.return=U,U=B}return T(U);case K:return Pe=H._init,Ft(U,B,Pe(H._payload),ue)}if(ao(H))return be(U,B,H,ue);if(ee(H))return Se(U,B,H,ue);su(U,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,B!==null&&B.tag===6?(d(U,B.sibling),B=x(B,H),B.return=U,U=B):(d(U,B),B=ap(H,U.mode,ue),B.return=U,U=B),T(U)):d(U,B)}return Ft}var ko=Mv(!0),Iv=Mv(!1),iu=Us(null),ou=null,Po=null,yf=null;function vf(){yf=Po=ou=null}function xf(o){var l=iu.current;_t(iu),o._currentValue=l}function wf(o,l,d){for(;o!==null;){var m=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),o===d)break;o=o.return}}function No(o,l){ou=o,yf=Po=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&l)!==0&&(Ln=!0),o.firstContext=null)}function cr(o){var l=o._currentValue;if(yf!==o)if(o={context:o,memoizedValue:l,next:null},Po===null){if(ou===null)throw Error(t(308));Po=o,ou.dependencies={lanes:0,firstContext:o}}else Po=Po.next=o;return l}var Ti=null;function bf(o){Ti===null?Ti=[o]:Ti.push(o)}function jv(o,l,d,m){var x=l.interleaved;return x===null?(d.next=d,bf(l)):(d.next=x.next,x.next=d),l.interleaved=d,vs(o,m)}function vs(o,l){o.lanes|=l;var d=o.alternate;for(d!==null&&(d.lanes|=l),d=o,o=o.return;o!==null;)o.childLanes|=l,d=o.alternate,d!==null&&(d.childLanes|=l),d=o,o=o.return;return d.tag===3?d.stateNode:null}var Gs=!1;function _f(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ov(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function xs(o,l){return{eventTime:o,lane:l,tag:0,payload:null,callback:null,next:null}}function qs(o,l,d){var m=o.updateQueue;if(m===null)return null;if(m=m.shared,(rt&2)!==0){var x=m.pending;return x===null?l.next=l:(l.next=x.next,x.next=l),m.pending=l,vs(o,d)}return x=m.interleaved,x===null?(l.next=l,bf(m)):(l.next=x.next,x.next=l),m.interleaved=l,vs(o,d)}function au(o,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194240)!==0)){var m=l.lanes;m&=o.pendingLanes,d|=m,l.lanes=d,jh(o,d)}}function Lv(o,l){var d=o.updateQueue,m=o.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var x=null,b=null;if(d=d.firstBaseUpdate,d!==null){do{var T={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};b===null?x=b=T:b=b.next=T,d=d.next}while(d!==null);b===null?x=b=l:b=b.next=l}else x=b=l;d={baseState:m.baseState,firstBaseUpdate:x,lastBaseUpdate:b,shared:m.shared,effects:m.effects},o.updateQueue=d;return}o=d.lastBaseUpdate,o===null?d.firstBaseUpdate=l:o.next=l,d.lastBaseUpdate=l}function lu(o,l,d,m){var x=o.updateQueue;Gs=!1;var b=x.firstBaseUpdate,T=x.lastBaseUpdate,D=x.shared.pending;if(D!==null){x.shared.pending=null;var j=D,Y=j.next;j.next=null,T===null?b=Y:T.next=Y,T=j;var se=o.alternate;se!==null&&(se=se.updateQueue,D=se.lastBaseUpdate,D!==T&&(D===null?se.firstBaseUpdate=Y:D.next=Y,se.lastBaseUpdate=j))}if(b!==null){var ae=x.baseState;T=0,se=Y=j=null,D=b;do{var ne=D.lane,ge=D.eventTime;if((m&ne)===ne){se!==null&&(se=se.next={eventTime:ge,lane:0,tag:D.tag,payload:D.payload,callback:D.callback,next:null});e:{var be=o,Se=D;switch(ne=l,ge=d,Se.tag){case 1:if(be=Se.payload,typeof be=="function"){ae=be.call(ge,ae,ne);break e}ae=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Se.payload,ne=typeof be=="function"?be.call(ge,ae,ne):be,ne==null)break e;ae=te({},ae,ne);break e;case 2:Gs=!0}}D.callback!==null&&D.lane!==0&&(o.flags|=64,ne=x.effects,ne===null?x.effects=[D]:ne.push(D))}else ge={eventTime:ge,lane:ne,tag:D.tag,payload:D.payload,callback:D.callback,next:null},se===null?(Y=se=ge,j=ae):se=se.next=ge,T|=ne;if(D=D.next,D===null){if(D=x.shared.pending,D===null)break;ne=D,D=ne.next,ne.next=null,x.lastBaseUpdate=ne,x.shared.pending=null}}while(!0);if(se===null&&(j=ae),x.baseState=j,x.firstBaseUpdate=Y,x.lastBaseUpdate=se,l=x.shared.interleaved,l!==null){x=l;do T|=x.lane,x=x.next;while(x!==l)}else b===null&&(x.shared.lanes=0);Ni|=T,o.lanes=T,o.memoizedState=ae}}function Fv(o,l,d){if(o=l.effects,l.effects=null,o!==null)for(l=0;l<o.length;l++){var m=o[l],x=m.callback;if(x!==null){if(m.callback=null,m=d,typeof x!="function")throw Error(t(191,x));x.call(m)}}}var el={},Hr=Us(el),tl=Us(el),nl=Us(el);function ki(o){if(o===el)throw Error(t(174));return o}function Sf(o,l){switch(yt(nl,l),yt(tl,o),yt(Hr,el),o=l.nodeType,o){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:ce(null,"");break;default:o=o===8?l.parentNode:l,l=o.namespaceURI||null,o=o.tagName,l=ce(l,o)}_t(Hr),yt(Hr,l)}function Ro(){_t(Hr),_t(tl),_t(nl)}function Bv(o){ki(nl.current);var l=ki(Hr.current),d=ce(l,o.type);l!==d&&(yt(tl,o),yt(Hr,d))}function Af(o){tl.current===o&&(_t(Hr),_t(tl))}var Tt=Us(0);function cu(o){for(var l=o;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Cf=[];function Ef(){for(var o=0;o<Cf.length;o++)Cf[o]._workInProgressVersionPrimary=null;Cf.length=0}var uu=P.ReactCurrentDispatcher,Tf=P.ReactCurrentBatchConfig,Pi=0,kt=null,Xt=null,tn=null,du=!1,rl=!1,sl=0,dT=0;function vn(){throw Error(t(321))}function kf(o,l){if(l===null)return!1;for(var d=0;d<l.length&&d<o.length;d++)if(!wr(o[d],l[d]))return!1;return!0}function Pf(o,l,d,m,x,b){if(Pi=b,kt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,uu.current=o===null||o.memoizedState===null?mT:gT,o=d(m,x),rl){b=0;do{if(rl=!1,sl=0,25<=b)throw Error(t(301));b+=1,tn=Xt=null,l.updateQueue=null,uu.current=yT,o=d(m,x)}while(rl)}if(uu.current=pu,l=Xt!==null&&Xt.next!==null,Pi=0,tn=Xt=kt=null,du=!1,l)throw Error(t(300));return o}function Nf(){var o=sl!==0;return sl=0,o}function Wr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?kt.memoizedState=tn=o:tn=tn.next=o,tn}function ur(){if(Xt===null){var o=kt.alternate;o=o!==null?o.memoizedState:null}else o=Xt.next;var l=tn===null?kt.memoizedState:tn.next;if(l!==null)tn=l,Xt=o;else{if(o===null)throw Error(t(310));Xt=o,o={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},tn===null?kt.memoizedState=tn=o:tn=tn.next=o}return tn}function il(o,l){return typeof l=="function"?l(o):l}function Rf(o){var l=ur(),d=l.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=o;var m=Xt,x=m.baseQueue,b=d.pending;if(b!==null){if(x!==null){var T=x.next;x.next=b.next,b.next=T}m.baseQueue=x=b,d.pending=null}if(x!==null){b=x.next,m=m.baseState;var D=T=null,j=null,Y=b;do{var se=Y.lane;if((Pi&se)===se)j!==null&&(j=j.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),m=Y.hasEagerState?Y.eagerState:o(m,Y.action);else{var ae={lane:se,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};j===null?(D=j=ae,T=m):j=j.next=ae,kt.lanes|=se,Ni|=se}Y=Y.next}while(Y!==null&&Y!==b);j===null?T=m:j.next=D,wr(m,l.memoizedState)||(Ln=!0),l.memoizedState=m,l.baseState=T,l.baseQueue=j,d.lastRenderedState=m}if(o=d.interleaved,o!==null){x=o;do b=x.lane,kt.lanes|=b,Ni|=b,x=x.next;while(x!==o)}else x===null&&(d.lanes=0);return[l.memoizedState,d.dispatch]}function Df(o){var l=ur(),d=l.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=o;var m=d.dispatch,x=d.pending,b=l.memoizedState;if(x!==null){d.pending=null;var T=x=x.next;do b=o(b,T.action),T=T.next;while(T!==x);wr(b,l.memoizedState)||(Ln=!0),l.memoizedState=b,l.baseQueue===null&&(l.baseState=b),d.lastRenderedState=b}return[b,m]}function $v(){}function zv(o,l){var d=kt,m=ur(),x=l(),b=!wr(m.memoizedState,x);if(b&&(m.memoizedState=x,Ln=!0),m=m.queue,Mf(Hv.bind(null,d,m,o),[o]),m.getSnapshot!==l||b||tn!==null&&tn.memoizedState.tag&1){if(d.flags|=2048,ol(9,Uv.bind(null,d,m,x,l),void 0,null),nn===null)throw Error(t(349));(Pi&30)!==0||Vv(d,l,x)}return x}function Vv(o,l,d){o.flags|=16384,o={getSnapshot:l,value:d},l=kt.updateQueue,l===null?(l={lastEffect:null,stores:null},kt.updateQueue=l,l.stores=[o]):(d=l.stores,d===null?l.stores=[o]:d.push(o))}function Uv(o,l,d,m){l.value=d,l.getSnapshot=m,Wv(l)&&Gv(o)}function Hv(o,l,d){return d(function(){Wv(l)&&Gv(o)})}function Wv(o){var l=o.getSnapshot;o=o.value;try{var d=l();return!wr(o,d)}catch{return!0}}function Gv(o){var l=vs(o,1);l!==null&&Cr(l,o,1,-1)}function qv(o){var l=Wr();return typeof o=="function"&&(o=o()),l.memoizedState=l.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:il,lastRenderedState:o},l.queue=o,o=o.dispatch=pT.bind(null,kt,o),[l.memoizedState,o]}function ol(o,l,d,m){return o={tag:o,create:l,destroy:d,deps:m,next:null},l=kt.updateQueue,l===null?(l={lastEffect:null,stores:null},kt.updateQueue=l,l.lastEffect=o.next=o):(d=l.lastEffect,d===null?l.lastEffect=o.next=o:(m=d.next,d.next=o,o.next=m,l.lastEffect=o)),o}function Yv(){return ur().memoizedState}function hu(o,l,d,m){var x=Wr();kt.flags|=o,x.memoizedState=ol(1|l,d,void 0,m===void 0?null:m)}function fu(o,l,d,m){var x=ur();m=m===void 0?null:m;var b=void 0;if(Xt!==null){var T=Xt.memoizedState;if(b=T.destroy,m!==null&&kf(m,T.deps)){x.memoizedState=ol(l,d,b,m);return}}kt.flags|=o,x.memoizedState=ol(1|l,d,b,m)}function Xv(o,l){return hu(8390656,8,o,l)}function Mf(o,l){return fu(2048,8,o,l)}function Kv(o,l){return fu(4,2,o,l)}function Qv(o,l){return fu(4,4,o,l)}function Zv(o,l){if(typeof l=="function")return o=o(),l(o),function(){l(null)};if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function Jv(o,l,d){return d=d!=null?d.concat([o]):null,fu(4,4,Zv.bind(null,l,o),d)}function If(){}function ex(o,l){var d=ur();l=l===void 0?null:l;var m=d.memoizedState;return m!==null&&l!==null&&kf(l,m[1])?m[0]:(d.memoizedState=[o,l],o)}function tx(o,l){var d=ur();l=l===void 0?null:l;var m=d.memoizedState;return m!==null&&l!==null&&kf(l,m[1])?m[0]:(o=o(),d.memoizedState=[o,l],o)}function nx(o,l,d){return(Pi&21)===0?(o.baseState&&(o.baseState=!1,Ln=!0),o.memoizedState=d):(wr(d,l)||(d=Dy(),kt.lanes|=d,Ni|=d,o.baseState=!0),l)}function hT(o,l){var d=ht;ht=d!==0&&4>d?d:4,o(!0);var m=Tf.transition;Tf.transition={};try{o(!1),l()}finally{ht=d,Tf.transition=m}}function rx(){return ur().memoizedState}function fT(o,l,d){var m=Qs(o);if(d={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null},sx(o))ix(l,d);else if(d=jv(o,l,d,m),d!==null){var x=Sn();Cr(d,o,m,x),ox(d,l,m)}}function pT(o,l,d){var m=Qs(o),x={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null};if(sx(o))ix(l,x);else{var b=o.alternate;if(o.lanes===0&&(b===null||b.lanes===0)&&(b=l.lastRenderedReducer,b!==null))try{var T=l.lastRenderedState,D=b(T,d);if(x.hasEagerState=!0,x.eagerState=D,wr(D,T)){var j=l.interleaved;j===null?(x.next=x,bf(l)):(x.next=j.next,j.next=x),l.interleaved=x;return}}catch{}finally{}d=jv(o,l,x,m),d!==null&&(x=Sn(),Cr(d,o,m,x),ox(d,l,m))}}function sx(o){var l=o.alternate;return o===kt||l!==null&&l===kt}function ix(o,l){rl=du=!0;var d=o.pending;d===null?l.next=l:(l.next=d.next,d.next=l),o.pending=l}function ox(o,l,d){if((d&4194240)!==0){var m=l.lanes;m&=o.pendingLanes,d|=m,l.lanes=d,jh(o,d)}}var pu={readContext:cr,useCallback:vn,useContext:vn,useEffect:vn,useImperativeHandle:vn,useInsertionEffect:vn,useLayoutEffect:vn,useMemo:vn,useReducer:vn,useRef:vn,useState:vn,useDebugValue:vn,useDeferredValue:vn,useTransition:vn,useMutableSource:vn,useSyncExternalStore:vn,useId:vn,unstable_isNewReconciler:!1},mT={readContext:cr,useCallback:function(o,l){return Wr().memoizedState=[o,l===void 0?null:l],o},useContext:cr,useEffect:Xv,useImperativeHandle:function(o,l,d){return d=d!=null?d.concat([o]):null,hu(4194308,4,Zv.bind(null,l,o),d)},useLayoutEffect:function(o,l){return hu(4194308,4,o,l)},useInsertionEffect:function(o,l){return hu(4,2,o,l)},useMemo:function(o,l){var d=Wr();return l=l===void 0?null:l,o=o(),d.memoizedState=[o,l],o},useReducer:function(o,l,d){var m=Wr();return l=d!==void 0?d(l):l,m.memoizedState=m.baseState=l,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:l},m.queue=o,o=o.dispatch=fT.bind(null,kt,o),[m.memoizedState,o]},useRef:function(o){var l=Wr();return o={current:o},l.memoizedState=o},useState:qv,useDebugValue:If,useDeferredValue:function(o){return Wr().memoizedState=o},useTransition:function(){var o=qv(!1),l=o[0];return o=hT.bind(null,o[1]),Wr().memoizedState=o,[l,o]},useMutableSource:function(){},useSyncExternalStore:function(o,l,d){var m=kt,x=Wr();if(At){if(d===void 0)throw Error(t(407));d=d()}else{if(d=l(),nn===null)throw Error(t(349));(Pi&30)!==0||Vv(m,l,d)}x.memoizedState=d;var b={value:d,getSnapshot:l};return x.queue=b,Xv(Hv.bind(null,m,b,o),[o]),m.flags|=2048,ol(9,Uv.bind(null,m,b,d,l),void 0,null),d},useId:function(){var o=Wr(),l=nn.identifierPrefix;if(At){var d=ys,m=gs;d=(m&~(1<<32-xr(m)-1)).toString(32)+d,l=":"+l+"R"+d,d=sl++,0<d&&(l+="H"+d.toString(32)),l+=":"}else d=dT++,l=":"+l+"r"+d.toString(32)+":";return o.memoizedState=l},unstable_isNewReconciler:!1},gT={readContext:cr,useCallback:ex,useContext:cr,useEffect:Mf,useImperativeHandle:Jv,useInsertionEffect:Kv,useLayoutEffect:Qv,useMemo:tx,useReducer:Rf,useRef:Yv,useState:function(){return Rf(il)},useDebugValue:If,useDeferredValue:function(o){var l=ur();return nx(l,Xt.memoizedState,o)},useTransition:function(){var o=Rf(il)[0],l=ur().memoizedState;return[o,l]},useMutableSource:$v,useSyncExternalStore:zv,useId:rx,unstable_isNewReconciler:!1},yT={readContext:cr,useCallback:ex,useContext:cr,useEffect:Mf,useImperativeHandle:Jv,useInsertionEffect:Kv,useLayoutEffect:Qv,useMemo:tx,useReducer:Df,useRef:Yv,useState:function(){return Df(il)},useDebugValue:If,useDeferredValue:function(o){var l=ur();return Xt===null?l.memoizedState=o:nx(l,Xt.memoizedState,o)},useTransition:function(){var o=Df(il)[0],l=ur().memoizedState;return[o,l]},useMutableSource:$v,useSyncExternalStore:zv,useId:rx,unstable_isNewReconciler:!1};function _r(o,l){if(o&&o.defaultProps){l=te({},l),o=o.defaultProps;for(var d in o)l[d]===void 0&&(l[d]=o[d]);return l}return l}function jf(o,l,d,m){l=o.memoizedState,d=d(m,l),d=d==null?l:te({},l,d),o.memoizedState=d,o.lanes===0&&(o.updateQueue.baseState=d)}var mu={isMounted:function(o){return(o=o._reactInternals)?_i(o)===o:!1},enqueueSetState:function(o,l,d){o=o._reactInternals;var m=Sn(),x=Qs(o),b=xs(m,x);b.payload=l,d!=null&&(b.callback=d),l=qs(o,b,x),l!==null&&(Cr(l,o,x,m),au(l,o,x))},enqueueReplaceState:function(o,l,d){o=o._reactInternals;var m=Sn(),x=Qs(o),b=xs(m,x);b.tag=1,b.payload=l,d!=null&&(b.callback=d),l=qs(o,b,x),l!==null&&(Cr(l,o,x,m),au(l,o,x))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var d=Sn(),m=Qs(o),x=xs(d,m);x.tag=2,l!=null&&(x.callback=l),l=qs(o,x,m),l!==null&&(Cr(l,o,m,d),au(l,o,m))}};function ax(o,l,d,m,x,b,T){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(m,b,T):l.prototype&&l.prototype.isPureReactComponent?!Ga(d,m)||!Ga(x,b):!0}function lx(o,l,d){var m=!1,x=Hs,b=l.contextType;return typeof b=="object"&&b!==null?b=cr(b):(x=On(l)?Ai:yn.current,m=l.contextTypes,b=(m=m!=null)?Ao(o,x):Hs),l=new l(d,b),o.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=mu,o.stateNode=l,l._reactInternals=o,m&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=x,o.__reactInternalMemoizedMaskedChildContext=b),l}function cx(o,l,d,m){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,m),l.state!==o&&mu.enqueueReplaceState(l,l.state,null)}function Of(o,l,d,m){var x=o.stateNode;x.props=d,x.state=o.memoizedState,x.refs={},_f(o);var b=l.contextType;typeof b=="object"&&b!==null?x.context=cr(b):(b=On(l)?Ai:yn.current,x.context=Ao(o,b)),x.state=o.memoizedState,b=l.getDerivedStateFromProps,typeof b=="function"&&(jf(o,l,b,d),x.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(l=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),l!==x.state&&mu.enqueueReplaceState(x,x.state,null),lu(o,d,x,m),x.state=o.memoizedState),typeof x.componentDidMount=="function"&&(o.flags|=4194308)}function Do(o,l){try{var d="",m=l;do d+=De(m),m=m.return;while(m);var x=d}catch(b){x=`
Error generating stack: `+b.message+`
`+b.stack}return{value:o,source:l,stack:x,digest:null}}function Lf(o,l,d){return{value:o,source:null,stack:d??null,digest:l??null}}function Ff(o,l){try{console.error(l.value)}catch(d){setTimeout(function(){throw d})}}var vT=typeof WeakMap=="function"?WeakMap:Map;function ux(o,l,d){d=xs(-1,d),d.tag=3,d.payload={element:null};var m=l.value;return d.callback=function(){_u||(_u=!0,Jf=m),Ff(o,l)},d}function dx(o,l,d){d=xs(-1,d),d.tag=3;var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var x=l.value;d.payload=function(){return m(x)},d.callback=function(){Ff(o,l)}}var b=o.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(d.callback=function(){Ff(o,l),typeof m!="function"&&(Xs===null?Xs=new Set([this]):Xs.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})}),d}function hx(o,l,d){var m=o.pingCache;if(m===null){m=o.pingCache=new vT;var x=new Set;m.set(l,x)}else x=m.get(l),x===void 0&&(x=new Set,m.set(l,x));x.has(d)||(x.add(d),o=DT.bind(null,o,l,d),l.then(o,o))}function fx(o){do{var l;if((l=o.tag===13)&&(l=o.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return o;o=o.return}while(o!==null);return null}function px(o,l,d,m,x){return(o.mode&1)===0?(o===l?o.flags|=65536:(o.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(l=xs(-1,1),l.tag=2,qs(d,l,1))),d.lanes|=1),o):(o.flags|=65536,o.lanes=x,o)}var xT=P.ReactCurrentOwner,Ln=!1;function _n(o,l,d,m){l.child=o===null?Iv(l,null,d,m):ko(l,o.child,d,m)}function mx(o,l,d,m,x){d=d.render;var b=l.ref;return No(l,x),m=Pf(o,l,d,m,b,x),d=Nf(),o!==null&&!Ln?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~x,ws(o,l,x)):(At&&d&&hf(l),l.flags|=1,_n(o,l,m,x),l.child)}function gx(o,l,d,m,x){if(o===null){var b=d.type;return typeof b=="function"&&!op(b)&&b.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(l.tag=15,l.type=b,yx(o,l,b,m,x)):(o=ku(d.type,null,m,l,l.mode,x),o.ref=l.ref,o.return=l,l.child=o)}if(b=o.child,(o.lanes&x)===0){var T=b.memoizedProps;if(d=d.compare,d=d!==null?d:Ga,d(T,m)&&o.ref===l.ref)return ws(o,l,x)}return l.flags|=1,o=Js(b,m),o.ref=l.ref,o.return=l,l.child=o}function yx(o,l,d,m,x){if(o!==null){var b=o.memoizedProps;if(Ga(b,m)&&o.ref===l.ref)if(Ln=!1,l.pendingProps=m=b,(o.lanes&x)!==0)(o.flags&131072)!==0&&(Ln=!0);else return l.lanes=o.lanes,ws(o,l,x)}return Bf(o,l,d,m,x)}function vx(o,l,d){var m=l.pendingProps,x=m.children,b=o!==null?o.memoizedState:null;if(m.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},yt(Io,Xn),Xn|=d;else{if((d&1073741824)===0)return o=b!==null?b.baseLanes|d:d,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:o,cachePool:null,transitions:null},l.updateQueue=null,yt(Io,Xn),Xn|=o,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=b!==null?b.baseLanes:d,yt(Io,Xn),Xn|=m}else b!==null?(m=b.baseLanes|d,l.memoizedState=null):m=d,yt(Io,Xn),Xn|=m;return _n(o,l,x,d),l.child}function xx(o,l){var d=l.ref;(o===null&&d!==null||o!==null&&o.ref!==d)&&(l.flags|=512,l.flags|=2097152)}function Bf(o,l,d,m,x){var b=On(d)?Ai:yn.current;return b=Ao(l,b),No(l,x),d=Pf(o,l,d,m,b,x),m=Nf(),o!==null&&!Ln?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~x,ws(o,l,x)):(At&&m&&hf(l),l.flags|=1,_n(o,l,d,x),l.child)}function wx(o,l,d,m,x){if(On(d)){var b=!0;Jc(l)}else b=!1;if(No(l,x),l.stateNode===null)yu(o,l),lx(l,d,m),Of(l,d,m,x),m=!0;else if(o===null){var T=l.stateNode,D=l.memoizedProps;T.props=D;var j=T.context,Y=d.contextType;typeof Y=="object"&&Y!==null?Y=cr(Y):(Y=On(d)?Ai:yn.current,Y=Ao(l,Y));var se=d.getDerivedStateFromProps,ae=typeof se=="function"||typeof T.getSnapshotBeforeUpdate=="function";ae||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(D!==m||j!==Y)&&cx(l,T,m,Y),Gs=!1;var ne=l.memoizedState;T.state=ne,lu(l,m,T,x),j=l.memoizedState,D!==m||ne!==j||jn.current||Gs?(typeof se=="function"&&(jf(l,d,se,m),j=l.memoizedState),(D=Gs||ax(l,d,D,m,ne,j,Y))?(ae||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(l.flags|=4194308)):(typeof T.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=j),T.props=m,T.state=j,T.context=Y,m=D):(typeof T.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{T=l.stateNode,Ov(o,l),D=l.memoizedProps,Y=l.type===l.elementType?D:_r(l.type,D),T.props=Y,ae=l.pendingProps,ne=T.context,j=d.contextType,typeof j=="object"&&j!==null?j=cr(j):(j=On(d)?Ai:yn.current,j=Ao(l,j));var ge=d.getDerivedStateFromProps;(se=typeof ge=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(D!==ae||ne!==j)&&cx(l,T,m,j),Gs=!1,ne=l.memoizedState,T.state=ne,lu(l,m,T,x);var be=l.memoizedState;D!==ae||ne!==be||jn.current||Gs?(typeof ge=="function"&&(jf(l,d,ge,m),be=l.memoizedState),(Y=Gs||ax(l,d,Y,m,ne,be,j)||!1)?(se||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(m,be,j),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(m,be,j)),typeof T.componentDidUpdate=="function"&&(l.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof T.componentDidUpdate!="function"||D===o.memoizedProps&&ne===o.memoizedState||(l.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||D===o.memoizedProps&&ne===o.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=be),T.props=m,T.state=be,T.context=j,m=Y):(typeof T.componentDidUpdate!="function"||D===o.memoizedProps&&ne===o.memoizedState||(l.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||D===o.memoizedProps&&ne===o.memoizedState||(l.flags|=1024),m=!1)}return $f(o,l,d,m,b,x)}function $f(o,l,d,m,x,b){xx(o,l);var T=(l.flags&128)!==0;if(!m&&!T)return x&&Cv(l,d,!1),ws(o,l,b);m=l.stateNode,xT.current=l;var D=T&&typeof d.getDerivedStateFromError!="function"?null:m.render();return l.flags|=1,o!==null&&T?(l.child=ko(l,o.child,null,b),l.child=ko(l,null,D,b)):_n(o,l,D,b),l.memoizedState=m.state,x&&Cv(l,d,!0),l.child}function bx(o){var l=o.stateNode;l.pendingContext?Sv(o,l.pendingContext,l.pendingContext!==l.context):l.context&&Sv(o,l.context,!1),Sf(o,l.containerInfo)}function _x(o,l,d,m,x){return To(),gf(x),l.flags|=256,_n(o,l,d,m),l.child}var zf={dehydrated:null,treeContext:null,retryLane:0};function Vf(o){return{baseLanes:o,cachePool:null,transitions:null}}function Sx(o,l,d){var m=l.pendingProps,x=Tt.current,b=!1,T=(l.flags&128)!==0,D;if((D=T)||(D=o!==null&&o.memoizedState===null?!1:(x&2)!==0),D?(b=!0,l.flags&=-129):(o===null||o.memoizedState!==null)&&(x|=1),yt(Tt,x&1),o===null)return mf(l),o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((l.mode&1)===0?l.lanes=1:o.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(T=m.children,o=m.fallback,b?(m=l.mode,b=l.child,T={mode:"hidden",children:T},(m&1)===0&&b!==null?(b.childLanes=0,b.pendingProps=T):b=Pu(T,m,0,null),o=Ii(o,m,d,null),b.return=l,o.return=l,b.sibling=o,l.child=b,l.child.memoizedState=Vf(d),l.memoizedState=zf,o):Uf(l,T));if(x=o.memoizedState,x!==null&&(D=x.dehydrated,D!==null))return wT(o,l,T,m,D,x,d);if(b){b=m.fallback,T=l.mode,x=o.child,D=x.sibling;var j={mode:"hidden",children:m.children};return(T&1)===0&&l.child!==x?(m=l.child,m.childLanes=0,m.pendingProps=j,l.deletions=null):(m=Js(x,j),m.subtreeFlags=x.subtreeFlags&14680064),D!==null?b=Js(D,b):(b=Ii(b,T,d,null),b.flags|=2),b.return=l,m.return=l,m.sibling=b,l.child=m,m=b,b=l.child,T=o.child.memoizedState,T=T===null?Vf(d):{baseLanes:T.baseLanes|d,cachePool:null,transitions:T.transitions},b.memoizedState=T,b.childLanes=o.childLanes&~d,l.memoizedState=zf,m}return b=o.child,o=b.sibling,m=Js(b,{mode:"visible",children:m.children}),(l.mode&1)===0&&(m.lanes=d),m.return=l,m.sibling=null,o!==null&&(d=l.deletions,d===null?(l.deletions=[o],l.flags|=16):d.push(o)),l.child=m,l.memoizedState=null,m}function Uf(o,l){return l=Pu({mode:"visible",children:l},o.mode,0,null),l.return=o,o.child=l}function gu(o,l,d,m){return m!==null&&gf(m),ko(l,o.child,null,d),o=Uf(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function wT(o,l,d,m,x,b,T){if(d)return l.flags&256?(l.flags&=-257,m=Lf(Error(t(422))),gu(o,l,T,m)):l.memoizedState!==null?(l.child=o.child,l.flags|=128,null):(b=m.fallback,x=l.mode,m=Pu({mode:"visible",children:m.children},x,0,null),b=Ii(b,x,T,null),b.flags|=2,m.return=l,b.return=l,m.sibling=b,l.child=m,(l.mode&1)!==0&&ko(l,o.child,null,T),l.child.memoizedState=Vf(T),l.memoizedState=zf,b);if((l.mode&1)===0)return gu(o,l,T,null);if(x.data==="$!"){if(m=x.nextSibling&&x.nextSibling.dataset,m)var D=m.dgst;return m=D,b=Error(t(419)),m=Lf(b,m,void 0),gu(o,l,T,m)}if(D=(T&o.childLanes)!==0,Ln||D){if(m=nn,m!==null){switch(T&-T){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(m.suspendedLanes|T))!==0?0:x,x!==0&&x!==b.retryLane&&(b.retryLane=x,vs(o,x),Cr(m,o,x,-1))}return ip(),m=Lf(Error(t(421))),gu(o,l,T,m)}return x.data==="$?"?(l.flags|=128,l.child=o.child,l=MT.bind(null,o),x._reactRetry=l,null):(o=b.treeContext,Yn=Vs(x.nextSibling),qn=l,At=!0,br=null,o!==null&&(ar[lr++]=gs,ar[lr++]=ys,ar[lr++]=Ci,gs=o.id,ys=o.overflow,Ci=l),l=Uf(l,m.children),l.flags|=4096,l)}function Ax(o,l,d){o.lanes|=l;var m=o.alternate;m!==null&&(m.lanes|=l),wf(o.return,l,d)}function Hf(o,l,d,m,x){var b=o.memoizedState;b===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:x}:(b.isBackwards=l,b.rendering=null,b.renderingStartTime=0,b.last=m,b.tail=d,b.tailMode=x)}function Cx(o,l,d){var m=l.pendingProps,x=m.revealOrder,b=m.tail;if(_n(o,l,m.children,d),m=Tt.current,(m&2)!==0)m=m&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Ax(o,d,l);else if(o.tag===19)Ax(o,d,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}m&=1}if(yt(Tt,m),(l.mode&1)===0)l.memoizedState=null;else switch(x){case"forwards":for(d=l.child,x=null;d!==null;)o=d.alternate,o!==null&&cu(o)===null&&(x=d),d=d.sibling;d=x,d===null?(x=l.child,l.child=null):(x=d.sibling,d.sibling=null),Hf(l,!1,x,d,b);break;case"backwards":for(d=null,x=l.child,l.child=null;x!==null;){if(o=x.alternate,o!==null&&cu(o)===null){l.child=x;break}o=x.sibling,x.sibling=d,d=x,x=o}Hf(l,!0,d,null,b);break;case"together":Hf(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function yu(o,l){(l.mode&1)===0&&o!==null&&(o.alternate=null,l.alternate=null,l.flags|=2)}function ws(o,l,d){if(o!==null&&(l.dependencies=o.dependencies),Ni|=l.lanes,(d&l.childLanes)===0)return null;if(o!==null&&l.child!==o.child)throw Error(t(153));if(l.child!==null){for(o=l.child,d=Js(o,o.pendingProps),l.child=d,d.return=l;o.sibling!==null;)o=o.sibling,d=d.sibling=Js(o,o.pendingProps),d.return=l;d.sibling=null}return l.child}function bT(o,l,d){switch(l.tag){case 3:bx(l),To();break;case 5:Bv(l);break;case 1:On(l.type)&&Jc(l);break;case 4:Sf(l,l.stateNode.containerInfo);break;case 10:var m=l.type._context,x=l.memoizedProps.value;yt(iu,m._currentValue),m._currentValue=x;break;case 13:if(m=l.memoizedState,m!==null)return m.dehydrated!==null?(yt(Tt,Tt.current&1),l.flags|=128,null):(d&l.child.childLanes)!==0?Sx(o,l,d):(yt(Tt,Tt.current&1),o=ws(o,l,d),o!==null?o.sibling:null);yt(Tt,Tt.current&1);break;case 19:if(m=(d&l.childLanes)!==0,(o.flags&128)!==0){if(m)return Cx(o,l,d);l.flags|=128}if(x=l.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),yt(Tt,Tt.current),m)break;return null;case 22:case 23:return l.lanes=0,vx(o,l,d)}return ws(o,l,d)}var Ex,Wf,Tx,kx;Ex=function(o,l){for(var d=l.child;d!==null;){if(d.tag===5||d.tag===6)o.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Wf=function(){},Tx=function(o,l,d,m){var x=o.memoizedProps;if(x!==m){o=l.stateNode,ki(Hr.current);var b=null;switch(d){case"input":x=gn(o,x),m=gn(o,m),b=[];break;case"select":x=te({},x,{value:void 0}),m=te({},m,{value:void 0}),b=[];break;case"textarea":x=I(o,x),m=I(o,m),b=[];break;default:typeof x.onClick!="function"&&typeof m.onClick=="function"&&(o.onclick=Kc)}uo(d,m);var T;d=null;for(Y in x)if(!m.hasOwnProperty(Y)&&x.hasOwnProperty(Y)&&x[Y]!=null)if(Y==="style"){var D=x[Y];for(T in D)D.hasOwnProperty(T)&&(d||(d={}),d[T]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(s.hasOwnProperty(Y)?b||(b=[]):(b=b||[]).push(Y,null));for(Y in m){var j=m[Y];if(D=x?.[Y],m.hasOwnProperty(Y)&&j!==D&&(j!=null||D!=null))if(Y==="style")if(D){for(T in D)!D.hasOwnProperty(T)||j&&j.hasOwnProperty(T)||(d||(d={}),d[T]="");for(T in j)j.hasOwnProperty(T)&&D[T]!==j[T]&&(d||(d={}),d[T]=j[T])}else d||(b||(b=[]),b.push(Y,d)),d=j;else Y==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,D=D?D.__html:void 0,j!=null&&D!==j&&(b=b||[]).push(Y,j)):Y==="children"?typeof j!="string"&&typeof j!="number"||(b=b||[]).push(Y,""+j):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(s.hasOwnProperty(Y)?(j!=null&&Y==="onScroll"&&bt("scroll",o),b||D===j||(b=[])):(b=b||[]).push(Y,j))}d&&(b=b||[]).push("style",d);var Y=b;(l.updateQueue=Y)&&(l.flags|=4)}},kx=function(o,l,d,m){d!==m&&(l.flags|=4)};function al(o,l){if(!At)switch(o.tailMode){case"hidden":l=o.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?o.tail=null:d.sibling=null;break;case"collapsed":d=o.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:m.sibling=null}}function xn(o){var l=o.alternate!==null&&o.alternate.child===o.child,d=0,m=0;if(l)for(var x=o.child;x!==null;)d|=x.lanes|x.childLanes,m|=x.subtreeFlags&14680064,m|=x.flags&14680064,x.return=o,x=x.sibling;else for(x=o.child;x!==null;)d|=x.lanes|x.childLanes,m|=x.subtreeFlags,m|=x.flags,x.return=o,x=x.sibling;return o.subtreeFlags|=m,o.childLanes=d,l}function _T(o,l,d){var m=l.pendingProps;switch(ff(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xn(l),null;case 1:return On(l.type)&&Zc(),xn(l),null;case 3:return m=l.stateNode,Ro(),_t(jn),_t(yn),Ef(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(o===null||o.child===null)&&(ru(l)?l.flags|=4:o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,br!==null&&(np(br),br=null))),Wf(o,l),xn(l),null;case 5:Af(l);var x=ki(nl.current);if(d=l.type,o!==null&&l.stateNode!=null)Tx(o,l,d,m,x),o.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!m){if(l.stateNode===null)throw Error(t(166));return xn(l),null}if(o=ki(Hr.current),ru(l)){m=l.stateNode,d=l.type;var b=l.memoizedProps;switch(m[Ur]=l,m[Qa]=b,o=(l.mode&1)!==0,d){case"dialog":bt("cancel",m),bt("close",m);break;case"iframe":case"object":case"embed":bt("load",m);break;case"video":case"audio":for(x=0;x<Ya.length;x++)bt(Ya[x],m);break;case"source":bt("error",m);break;case"img":case"image":case"link":bt("error",m),bt("load",m);break;case"details":bt("toggle",m);break;case"input":js(m,b),bt("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!b.multiple},bt("invalid",m);break;case"textarea":q(m,b),bt("invalid",m)}uo(d,b),x=null;for(var T in b)if(b.hasOwnProperty(T)){var D=b[T];T==="children"?typeof D=="string"?m.textContent!==D&&(b.suppressHydrationWarning!==!0&&Xc(m.textContent,D,o),x=["children",D]):typeof D=="number"&&m.textContent!==""+D&&(b.suppressHydrationWarning!==!0&&Xc(m.textContent,D,o),x=["children",""+D]):s.hasOwnProperty(T)&&D!=null&&T==="onScroll"&&bt("scroll",m)}switch(d){case"input":Je(m),kc(m,b,!0);break;case"textarea":Je(m),me(m);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(m.onclick=Kc)}m=x,l.updateQueue=m,m!==null&&(l.flags|=4)}else{T=x.nodeType===9?x:x.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=de(d)),o==="http://www.w3.org/1999/xhtml"?d==="script"?(o=T.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof m.is=="string"?o=T.createElement(d,{is:m.is}):(o=T.createElement(d),d==="select"&&(T=o,m.multiple?T.multiple=!0:m.size&&(T.size=m.size))):o=T.createElementNS(o,d),o[Ur]=l,o[Qa]=m,Ex(o,l,!1,!1),l.stateNode=o;e:{switch(T=Na(d,m),d){case"dialog":bt("cancel",o),bt("close",o),x=m;break;case"iframe":case"object":case"embed":bt("load",o),x=m;break;case"video":case"audio":for(x=0;x<Ya.length;x++)bt(Ya[x],o);x=m;break;case"source":bt("error",o),x=m;break;case"img":case"image":case"link":bt("error",o),bt("load",o),x=m;break;case"details":bt("toggle",o),x=m;break;case"input":js(o,m),x=gn(o,m),bt("invalid",o);break;case"option":x=m;break;case"select":o._wrapperState={wasMultiple:!!m.multiple},x=te({},m,{value:void 0}),bt("invalid",o);break;case"textarea":q(o,m),x=I(o,m),bt("invalid",o);break;default:x=m}uo(d,x),D=x;for(b in D)if(D.hasOwnProperty(b)){var j=D[b];b==="style"?co(o,j):b==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&et(o,j)):b==="children"?typeof j=="string"?(d!=="textarea"||j!=="")&&gt(o,j):typeof j=="number"&&gt(o,""+j):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(s.hasOwnProperty(b)?j!=null&&b==="onScroll"&&bt("scroll",o):j!=null&&k(o,b,j,T))}switch(d){case"input":Je(o),kc(o,m,!1);break;case"textarea":Je(o),me(o);break;case"option":m.value!=null&&o.setAttribute("value",""+Ae(m.value));break;case"select":o.multiple=!!m.multiple,b=m.value,b!=null?fs(o,!!m.multiple,b,!1):m.defaultValue!=null&&fs(o,!!m.multiple,m.defaultValue,!0);break;default:typeof x.onClick=="function"&&(o.onclick=Kc)}switch(d){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return xn(l),null;case 6:if(o&&l.stateNode!=null)kx(o,l,o.memoizedProps,m);else{if(typeof m!="string"&&l.stateNode===null)throw Error(t(166));if(d=ki(nl.current),ki(Hr.current),ru(l)){if(m=l.stateNode,d=l.memoizedProps,m[Ur]=l,(b=m.nodeValue!==d)&&(o=qn,o!==null))switch(o.tag){case 3:Xc(m.nodeValue,d,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Xc(m.nodeValue,d,(o.mode&1)!==0)}b&&(l.flags|=4)}else m=(d.nodeType===9?d:d.ownerDocument).createTextNode(m),m[Ur]=l,l.stateNode=m}return xn(l),null;case 13:if(_t(Tt),m=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(At&&Yn!==null&&(l.mode&1)!==0&&(l.flags&128)===0)Rv(),To(),l.flags|=98560,b=!1;else if(b=ru(l),m!==null&&m.dehydrated!==null){if(o===null){if(!b)throw Error(t(318));if(b=l.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(t(317));b[Ur]=l}else To(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;xn(l),b=!1}else br!==null&&(np(br),br=null),b=!0;if(!b)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=d,l):(m=m!==null,m!==(o!==null&&o.memoizedState!==null)&&m&&(l.child.flags|=8192,(l.mode&1)!==0&&(o===null||(Tt.current&1)!==0?Kt===0&&(Kt=3):ip())),l.updateQueue!==null&&(l.flags|=4),xn(l),null);case 4:return Ro(),Wf(o,l),o===null&&Xa(l.stateNode.containerInfo),xn(l),null;case 10:return xf(l.type._context),xn(l),null;case 17:return On(l.type)&&Zc(),xn(l),null;case 19:if(_t(Tt),b=l.memoizedState,b===null)return xn(l),null;if(m=(l.flags&128)!==0,T=b.rendering,T===null)if(m)al(b,!1);else{if(Kt!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(T=cu(o),T!==null){for(l.flags|=128,al(b,!1),m=T.updateQueue,m!==null&&(l.updateQueue=m,l.flags|=4),l.subtreeFlags=0,m=d,d=l.child;d!==null;)b=d,o=m,b.flags&=14680066,T=b.alternate,T===null?(b.childLanes=0,b.lanes=o,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=T.childLanes,b.lanes=T.lanes,b.child=T.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=T.memoizedProps,b.memoizedState=T.memoizedState,b.updateQueue=T.updateQueue,b.type=T.type,o=T.dependencies,b.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),d=d.sibling;return yt(Tt,Tt.current&1|2),l.child}o=o.sibling}b.tail!==null&&Lt()>jo&&(l.flags|=128,m=!0,al(b,!1),l.lanes=4194304)}else{if(!m)if(o=cu(T),o!==null){if(l.flags|=128,m=!0,d=o.updateQueue,d!==null&&(l.updateQueue=d,l.flags|=4),al(b,!0),b.tail===null&&b.tailMode==="hidden"&&!T.alternate&&!At)return xn(l),null}else 2*Lt()-b.renderingStartTime>jo&&d!==1073741824&&(l.flags|=128,m=!0,al(b,!1),l.lanes=4194304);b.isBackwards?(T.sibling=l.child,l.child=T):(d=b.last,d!==null?d.sibling=T:l.child=T,b.last=T)}return b.tail!==null?(l=b.tail,b.rendering=l,b.tail=l.sibling,b.renderingStartTime=Lt(),l.sibling=null,d=Tt.current,yt(Tt,m?d&1|2:d&1),l):(xn(l),null);case 22:case 23:return sp(),m=l.memoizedState!==null,o!==null&&o.memoizedState!==null!==m&&(l.flags|=8192),m&&(l.mode&1)!==0?(Xn&1073741824)!==0&&(xn(l),l.subtreeFlags&6&&(l.flags|=8192)):xn(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function ST(o,l){switch(ff(l),l.tag){case 1:return On(l.type)&&Zc(),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return Ro(),_t(jn),_t(yn),Ef(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 5:return Af(l),null;case 13:if(_t(Tt),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(t(340));To()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return _t(Tt),null;case 4:return Ro(),null;case 10:return xf(l.type._context),null;case 22:case 23:return sp(),null;case 24:return null;default:return null}}var vu=!1,wn=!1,AT=typeof WeakSet=="function"?WeakSet:Set,xe=null;function Mo(o,l){var d=o.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(m){jt(o,l,m)}else d.current=null}function Gf(o,l,d){try{d()}catch(m){jt(o,l,m)}}var Px=!1;function CT(o,l){if(rf=Fc,o=av(),Xh(o)){if("selectionStart"in o)var d={start:o.selectionStart,end:o.selectionEnd};else e:{d=(d=o.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var x=m.anchorOffset,b=m.focusNode;m=m.focusOffset;try{d.nodeType,b.nodeType}catch{d=null;break e}var T=0,D=-1,j=-1,Y=0,se=0,ae=o,ne=null;t:for(;;){for(var ge;ae!==d||x!==0&&ae.nodeType!==3||(D=T+x),ae!==b||m!==0&&ae.nodeType!==3||(j=T+m),ae.nodeType===3&&(T+=ae.nodeValue.length),(ge=ae.firstChild)!==null;)ne=ae,ae=ge;for(;;){if(ae===o)break t;if(ne===d&&++Y===x&&(D=T),ne===b&&++se===m&&(j=T),(ge=ae.nextSibling)!==null)break;ae=ne,ne=ae.parentNode}ae=ge}d=D===-1||j===-1?null:{start:D,end:j}}else d=null}d=d||{start:0,end:0}}else d=null;for(sf={focusedElem:o,selectionRange:d},Fc=!1,xe=l;xe!==null;)if(l=xe,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,xe=o;else for(;xe!==null;){l=xe;try{var be=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(be!==null){var Se=be.memoizedProps,Ft=be.memoizedState,U=l.stateNode,B=U.getSnapshotBeforeUpdate(l.elementType===l.type?Se:_r(l.type,Se),Ft);U.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var H=l.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ue){jt(l,l.return,ue)}if(o=l.sibling,o!==null){o.return=l.return,xe=o;break}xe=l.return}return be=Px,Px=!1,be}function ll(o,l,d){var m=l.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var x=m=m.next;do{if((x.tag&o)===o){var b=x.destroy;x.destroy=void 0,b!==void 0&&Gf(l,d,b)}x=x.next}while(x!==m)}}function xu(o,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&o)===o){var m=d.create;d.destroy=m()}d=d.next}while(d!==l)}}function qf(o){var l=o.ref;if(l!==null){var d=o.stateNode;switch(o.tag){case 5:o=d;break;default:o=d}typeof l=="function"?l(o):l.current=o}}function Nx(o){var l=o.alternate;l!==null&&(o.alternate=null,Nx(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&(delete l[Ur],delete l[Qa],delete l[cf],delete l[aT],delete l[lT])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Rx(o){return o.tag===5||o.tag===3||o.tag===4}function Dx(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Rx(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Yf(o,l,d){var m=o.tag;if(m===5||m===6)o=o.stateNode,l?d.nodeType===8?d.parentNode.insertBefore(o,l):d.insertBefore(o,l):(d.nodeType===8?(l=d.parentNode,l.insertBefore(o,d)):(l=d,l.appendChild(o)),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=Kc));else if(m!==4&&(o=o.child,o!==null))for(Yf(o,l,d),o=o.sibling;o!==null;)Yf(o,l,d),o=o.sibling}function Xf(o,l,d){var m=o.tag;if(m===5||m===6)o=o.stateNode,l?d.insertBefore(o,l):d.appendChild(o);else if(m!==4&&(o=o.child,o!==null))for(Xf(o,l,d),o=o.sibling;o!==null;)Xf(o,l,d),o=o.sibling}var ln=null,Sr=!1;function Ys(o,l,d){for(d=d.child;d!==null;)Mx(o,l,d),d=d.sibling}function Mx(o,l,d){if(Vr&&typeof Vr.onCommitFiberUnmount=="function")try{Vr.onCommitFiberUnmount(Dc,d)}catch{}switch(d.tag){case 5:wn||Mo(d,l);case 6:var m=ln,x=Sr;ln=null,Ys(o,l,d),ln=m,Sr=x,ln!==null&&(Sr?(o=ln,d=d.stateNode,o.nodeType===8?o.parentNode.removeChild(d):o.removeChild(d)):ln.removeChild(d.stateNode));break;case 18:ln!==null&&(Sr?(o=ln,d=d.stateNode,o.nodeType===8?lf(o.parentNode,d):o.nodeType===1&&lf(o,d),$a(o)):lf(ln,d.stateNode));break;case 4:m=ln,x=Sr,ln=d.stateNode.containerInfo,Sr=!0,Ys(o,l,d),ln=m,Sr=x;break;case 0:case 11:case 14:case 15:if(!wn&&(m=d.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){x=m=m.next;do{var b=x,T=b.destroy;b=b.tag,T!==void 0&&((b&2)!==0||(b&4)!==0)&&Gf(d,l,T),x=x.next}while(x!==m)}Ys(o,l,d);break;case 1:if(!wn&&(Mo(d,l),m=d.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=d.memoizedProps,m.state=d.memoizedState,m.componentWillUnmount()}catch(D){jt(d,l,D)}Ys(o,l,d);break;case 21:Ys(o,l,d);break;case 22:d.mode&1?(wn=(m=wn)||d.memoizedState!==null,Ys(o,l,d),wn=m):Ys(o,l,d);break;default:Ys(o,l,d)}}function Ix(o){var l=o.updateQueue;if(l!==null){o.updateQueue=null;var d=o.stateNode;d===null&&(d=o.stateNode=new AT),l.forEach(function(m){var x=IT.bind(null,o,m);d.has(m)||(d.add(m),m.then(x,x))})}}function Ar(o,l){var d=l.deletions;if(d!==null)for(var m=0;m<d.length;m++){var x=d[m];try{var b=o,T=l,D=T;e:for(;D!==null;){switch(D.tag){case 5:ln=D.stateNode,Sr=!1;break e;case 3:ln=D.stateNode.containerInfo,Sr=!0;break e;case 4:ln=D.stateNode.containerInfo,Sr=!0;break e}D=D.return}if(ln===null)throw Error(t(160));Mx(b,T,x),ln=null,Sr=!1;var j=x.alternate;j!==null&&(j.return=null),x.return=null}catch(Y){jt(x,l,Y)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)jx(l,o),l=l.sibling}function jx(o,l){var d=o.alternate,m=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Ar(l,o),Gr(o),m&4){try{ll(3,o,o.return),xu(3,o)}catch(Se){jt(o,o.return,Se)}try{ll(5,o,o.return)}catch(Se){jt(o,o.return,Se)}}break;case 1:Ar(l,o),Gr(o),m&512&&d!==null&&Mo(d,d.return);break;case 5:if(Ar(l,o),Gr(o),m&512&&d!==null&&Mo(d,d.return),o.flags&32){var x=o.stateNode;try{gt(x,"")}catch(Se){jt(o,o.return,Se)}}if(m&4&&(x=o.stateNode,x!=null)){var b=o.memoizedProps,T=d!==null?d.memoizedProps:b,D=o.type,j=o.updateQueue;if(o.updateQueue=null,j!==null)try{D==="input"&&b.type==="radio"&&b.name!=null&&hs(x,b),Na(D,T);var Y=Na(D,b);for(T=0;T<j.length;T+=2){var se=j[T],ae=j[T+1];se==="style"?co(x,ae):se==="dangerouslySetInnerHTML"?et(x,ae):se==="children"?gt(x,ae):k(x,se,ae,Y)}switch(D){case"input":zr(x,b);break;case"textarea":J(x,b);break;case"select":var ne=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!b.multiple;var ge=b.value;ge!=null?fs(x,!!b.multiple,ge,!1):ne!==!!b.multiple&&(b.defaultValue!=null?fs(x,!!b.multiple,b.defaultValue,!0):fs(x,!!b.multiple,b.multiple?[]:"",!1))}x[Qa]=b}catch(Se){jt(o,o.return,Se)}}break;case 6:if(Ar(l,o),Gr(o),m&4){if(o.stateNode===null)throw Error(t(162));x=o.stateNode,b=o.memoizedProps;try{x.nodeValue=b}catch(Se){jt(o,o.return,Se)}}break;case 3:if(Ar(l,o),Gr(o),m&4&&d!==null&&d.memoizedState.isDehydrated)try{$a(l.containerInfo)}catch(Se){jt(o,o.return,Se)}break;case 4:Ar(l,o),Gr(o);break;case 13:Ar(l,o),Gr(o),x=o.child,x.flags&8192&&(b=x.memoizedState!==null,x.stateNode.isHidden=b,!b||x.alternate!==null&&x.alternate.memoizedState!==null||(Zf=Lt())),m&4&&Ix(o);break;case 22:if(se=d!==null&&d.memoizedState!==null,o.mode&1?(wn=(Y=wn)||se,Ar(l,o),wn=Y):Ar(l,o),Gr(o),m&8192){if(Y=o.memoizedState!==null,(o.stateNode.isHidden=Y)&&!se&&(o.mode&1)!==0)for(xe=o,se=o.child;se!==null;){for(ae=xe=se;xe!==null;){switch(ne=xe,ge=ne.child,ne.tag){case 0:case 11:case 14:case 15:ll(4,ne,ne.return);break;case 1:Mo(ne,ne.return);var be=ne.stateNode;if(typeof be.componentWillUnmount=="function"){m=ne,d=ne.return;try{l=m,be.props=l.memoizedProps,be.state=l.memoizedState,be.componentWillUnmount()}catch(Se){jt(m,d,Se)}}break;case 5:Mo(ne,ne.return);break;case 22:if(ne.memoizedState!==null){Fx(ae);continue}}ge!==null?(ge.return=ne,xe=ge):Fx(ae)}se=se.sibling}e:for(se=null,ae=o;;){if(ae.tag===5){if(se===null){se=ae;try{x=ae.stateNode,Y?(b=x.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):(D=ae.stateNode,j=ae.memoizedProps.style,T=j!=null&&j.hasOwnProperty("display")?j.display:null,D.style.display=lo("display",T))}catch(Se){jt(o,o.return,Se)}}}else if(ae.tag===6){if(se===null)try{ae.stateNode.nodeValue=Y?"":ae.memoizedProps}catch(Se){jt(o,o.return,Se)}}else if((ae.tag!==22&&ae.tag!==23||ae.memoizedState===null||ae===o)&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===o)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===o)break e;se===ae&&(se=null),ae=ae.return}se===ae&&(se=null),ae.sibling.return=ae.return,ae=ae.sibling}}break;case 19:Ar(l,o),Gr(o),m&4&&Ix(o);break;case 21:break;default:Ar(l,o),Gr(o)}}function Gr(o){var l=o.flags;if(l&2){try{e:{for(var d=o.return;d!==null;){if(Rx(d)){var m=d;break e}d=d.return}throw Error(t(160))}switch(m.tag){case 5:var x=m.stateNode;m.flags&32&&(gt(x,""),m.flags&=-33);var b=Dx(o);Xf(o,b,x);break;case 3:case 4:var T=m.stateNode.containerInfo,D=Dx(o);Yf(o,D,T);break;default:throw Error(t(161))}}catch(j){jt(o,o.return,j)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function ET(o,l,d){xe=o,Ox(o)}function Ox(o,l,d){for(var m=(o.mode&1)!==0;xe!==null;){var x=xe,b=x.child;if(x.tag===22&&m){var T=x.memoizedState!==null||vu;if(!T){var D=x.alternate,j=D!==null&&D.memoizedState!==null||wn;D=vu;var Y=wn;if(vu=T,(wn=j)&&!Y)for(xe=x;xe!==null;)T=xe,j=T.child,T.tag===22&&T.memoizedState!==null?Bx(x):j!==null?(j.return=T,xe=j):Bx(x);for(;b!==null;)xe=b,Ox(b),b=b.sibling;xe=x,vu=D,wn=Y}Lx(o)}else(x.subtreeFlags&8772)!==0&&b!==null?(b.return=x,xe=b):Lx(o)}}function Lx(o){for(;xe!==null;){var l=xe;if((l.flags&8772)!==0){var d=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:wn||xu(5,l);break;case 1:var m=l.stateNode;if(l.flags&4&&!wn)if(d===null)m.componentDidMount();else{var x=l.elementType===l.type?d.memoizedProps:_r(l.type,d.memoizedProps);m.componentDidUpdate(x,d.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var b=l.updateQueue;b!==null&&Fv(l,b,m);break;case 3:var T=l.updateQueue;if(T!==null){if(d=null,l.child!==null)switch(l.child.tag){case 5:d=l.child.stateNode;break;case 1:d=l.child.stateNode}Fv(l,T,d)}break;case 5:var D=l.stateNode;if(d===null&&l.flags&4){d=D;var j=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&d.focus();break;case"img":j.src&&(d.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var Y=l.alternate;if(Y!==null){var se=Y.memoizedState;if(se!==null){var ae=se.dehydrated;ae!==null&&$a(ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}wn||l.flags&512&&qf(l)}catch(ne){jt(l,l.return,ne)}}if(l===o){xe=null;break}if(d=l.sibling,d!==null){d.return=l.return,xe=d;break}xe=l.return}}function Fx(o){for(;xe!==null;){var l=xe;if(l===o){xe=null;break}var d=l.sibling;if(d!==null){d.return=l.return,xe=d;break}xe=l.return}}function Bx(o){for(;xe!==null;){var l=xe;try{switch(l.tag){case 0:case 11:case 15:var d=l.return;try{xu(4,l)}catch(j){jt(l,d,j)}break;case 1:var m=l.stateNode;if(typeof m.componentDidMount=="function"){var x=l.return;try{m.componentDidMount()}catch(j){jt(l,x,j)}}var b=l.return;try{qf(l)}catch(j){jt(l,b,j)}break;case 5:var T=l.return;try{qf(l)}catch(j){jt(l,T,j)}}}catch(j){jt(l,l.return,j)}if(l===o){xe=null;break}var D=l.sibling;if(D!==null){D.return=l.return,xe=D;break}xe=l.return}}var TT=Math.ceil,wu=P.ReactCurrentDispatcher,Kf=P.ReactCurrentOwner,dr=P.ReactCurrentBatchConfig,rt=0,nn=null,Ht=null,cn=0,Xn=0,Io=Us(0),Kt=0,cl=null,Ni=0,bu=0,Qf=0,ul=null,Fn=null,Zf=0,jo=1/0,bs=null,_u=!1,Jf=null,Xs=null,Su=!1,Ks=null,Au=0,dl=0,ep=null,Cu=-1,Eu=0;function Sn(){return(rt&6)!==0?Lt():Cu!==-1?Cu:Cu=Lt()}function Qs(o){return(o.mode&1)===0?1:(rt&2)!==0&&cn!==0?cn&-cn:uT.transition!==null?(Eu===0&&(Eu=Dy()),Eu):(o=ht,o!==0||(o=window.event,o=o===void 0?16:zy(o.type)),o)}function Cr(o,l,d,m){if(50<dl)throw dl=0,ep=null,Error(t(185));ja(o,d,m),((rt&2)===0||o!==nn)&&(o===nn&&((rt&2)===0&&(bu|=d),Kt===4&&Zs(o,cn)),Bn(o,m),d===1&&rt===0&&(l.mode&1)===0&&(jo=Lt()+500,eu&&Ws()))}function Bn(o,l){var d=o.callbackNode;uE(o,l);var m=jc(o,o===nn?cn:0);if(m===0)d!==null&&Py(d),o.callbackNode=null,o.callbackPriority=0;else if(l=m&-m,o.callbackPriority!==l){if(d!=null&&Py(d),l===1)o.tag===0?cT(zx.bind(null,o)):Ev(zx.bind(null,o)),iT(function(){(rt&6)===0&&Ws()}),d=null;else{switch(My(m)){case 1:d=Dh;break;case 4:d=Ny;break;case 16:d=Rc;break;case 536870912:d=Ry;break;default:d=Rc}d=Xx(d,$x.bind(null,o))}o.callbackPriority=l,o.callbackNode=d}}function $x(o,l){if(Cu=-1,Eu=0,(rt&6)!==0)throw Error(t(327));var d=o.callbackNode;if(Oo()&&o.callbackNode!==d)return null;var m=jc(o,o===nn?cn:0);if(m===0)return null;if((m&30)!==0||(m&o.expiredLanes)!==0||l)l=Tu(o,m);else{l=m;var x=rt;rt|=2;var b=Ux();(nn!==o||cn!==l)&&(bs=null,jo=Lt()+500,Di(o,l));do try{NT();break}catch(D){Vx(o,D)}while(!0);vf(),wu.current=b,rt=x,Ht!==null?l=0:(nn=null,cn=0,l=Kt)}if(l!==0){if(l===2&&(x=Mh(o),x!==0&&(m=x,l=tp(o,x))),l===1)throw d=cl,Di(o,0),Zs(o,m),Bn(o,Lt()),d;if(l===6)Zs(o,m);else{if(x=o.current.alternate,(m&30)===0&&!kT(x)&&(l=Tu(o,m),l===2&&(b=Mh(o),b!==0&&(m=b,l=tp(o,b))),l===1))throw d=cl,Di(o,0),Zs(o,m),Bn(o,Lt()),d;switch(o.finishedWork=x,o.finishedLanes=m,l){case 0:case 1:throw Error(t(345));case 2:Mi(o,Fn,bs);break;case 3:if(Zs(o,m),(m&130023424)===m&&(l=Zf+500-Lt(),10<l)){if(jc(o,0)!==0)break;if(x=o.suspendedLanes,(x&m)!==m){Sn(),o.pingedLanes|=o.suspendedLanes&x;break}o.timeoutHandle=af(Mi.bind(null,o,Fn,bs),l);break}Mi(o,Fn,bs);break;case 4:if(Zs(o,m),(m&4194240)===m)break;for(l=o.eventTimes,x=-1;0<m;){var T=31-xr(m);b=1<<T,T=l[T],T>x&&(x=T),m&=~b}if(m=x,m=Lt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*TT(m/1960))-m,10<m){o.timeoutHandle=af(Mi.bind(null,o,Fn,bs),m);break}Mi(o,Fn,bs);break;case 5:Mi(o,Fn,bs);break;default:throw Error(t(329))}}}return Bn(o,Lt()),o.callbackNode===d?$x.bind(null,o):null}function tp(o,l){var d=ul;return o.current.memoizedState.isDehydrated&&(Di(o,l).flags|=256),o=Tu(o,l),o!==2&&(l=Fn,Fn=d,l!==null&&np(l)),o}function np(o){Fn===null?Fn=o:Fn.push.apply(Fn,o)}function kT(o){for(var l=o;;){if(l.flags&16384){var d=l.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var m=0;m<d.length;m++){var x=d[m],b=x.getSnapshot;x=x.value;try{if(!wr(b(),x))return!1}catch{return!1}}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Zs(o,l){for(l&=~Qf,l&=~bu,o.suspendedLanes|=l,o.pingedLanes&=~l,o=o.expirationTimes;0<l;){var d=31-xr(l),m=1<<d;o[d]=-1,l&=~m}}function zx(o){if((rt&6)!==0)throw Error(t(327));Oo();var l=jc(o,0);if((l&1)===0)return Bn(o,Lt()),null;var d=Tu(o,l);if(o.tag!==0&&d===2){var m=Mh(o);m!==0&&(l=m,d=tp(o,m))}if(d===1)throw d=cl,Di(o,0),Zs(o,l),Bn(o,Lt()),d;if(d===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=l,Mi(o,Fn,bs),Bn(o,Lt()),null}function rp(o,l){var d=rt;rt|=1;try{return o(l)}finally{rt=d,rt===0&&(jo=Lt()+500,eu&&Ws())}}function Ri(o){Ks!==null&&Ks.tag===0&&(rt&6)===0&&Oo();var l=rt;rt|=1;var d=dr.transition,m=ht;try{if(dr.transition=null,ht=1,o)return o()}finally{ht=m,dr.transition=d,rt=l,(rt&6)===0&&Ws()}}function sp(){Xn=Io.current,_t(Io)}function Di(o,l){o.finishedWork=null,o.finishedLanes=0;var d=o.timeoutHandle;if(d!==-1&&(o.timeoutHandle=-1,sT(d)),Ht!==null)for(d=Ht.return;d!==null;){var m=d;switch(ff(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Zc();break;case 3:Ro(),_t(jn),_t(yn),Ef();break;case 5:Af(m);break;case 4:Ro();break;case 13:_t(Tt);break;case 19:_t(Tt);break;case 10:xf(m.type._context);break;case 22:case 23:sp()}d=d.return}if(nn=o,Ht=o=Js(o.current,null),cn=Xn=l,Kt=0,cl=null,Qf=bu=Ni=0,Fn=ul=null,Ti!==null){for(l=0;l<Ti.length;l++)if(d=Ti[l],m=d.interleaved,m!==null){d.interleaved=null;var x=m.next,b=d.pending;if(b!==null){var T=b.next;b.next=x,m.next=T}d.pending=m}Ti=null}return o}function Vx(o,l){do{var d=Ht;try{if(vf(),uu.current=pu,du){for(var m=kt.memoizedState;m!==null;){var x=m.queue;x!==null&&(x.pending=null),m=m.next}du=!1}if(Pi=0,tn=Xt=kt=null,rl=!1,sl=0,Kf.current=null,d===null||d.return===null){Kt=1,cl=l,Ht=null;break}e:{var b=o,T=d.return,D=d,j=l;if(l=cn,D.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var Y=j,se=D,ae=se.tag;if((se.mode&1)===0&&(ae===0||ae===11||ae===15)){var ne=se.alternate;ne?(se.updateQueue=ne.updateQueue,se.memoizedState=ne.memoizedState,se.lanes=ne.lanes):(se.updateQueue=null,se.memoizedState=null)}var ge=fx(T);if(ge!==null){ge.flags&=-257,px(ge,T,D,b,l),ge.mode&1&&hx(b,Y,l),l=ge,j=Y;var be=l.updateQueue;if(be===null){var Se=new Set;Se.add(j),l.updateQueue=Se}else be.add(j);break e}else{if((l&1)===0){hx(b,Y,l),ip();break e}j=Error(t(426))}}else if(At&&D.mode&1){var Ft=fx(T);if(Ft!==null){(Ft.flags&65536)===0&&(Ft.flags|=256),px(Ft,T,D,b,l),gf(Do(j,D));break e}}b=j=Do(j,D),Kt!==4&&(Kt=2),ul===null?ul=[b]:ul.push(b),b=T;do{switch(b.tag){case 3:b.flags|=65536,l&=-l,b.lanes|=l;var U=ux(b,j,l);Lv(b,U);break e;case 1:D=j;var B=b.type,H=b.stateNode;if((b.flags&128)===0&&(typeof B.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(Xs===null||!Xs.has(H)))){b.flags|=65536,l&=-l,b.lanes|=l;var ue=dx(b,D,l);Lv(b,ue);break e}}b=b.return}while(b!==null)}Wx(d)}catch(Ce){l=Ce,Ht===d&&d!==null&&(Ht=d=d.return);continue}break}while(!0)}function Ux(){var o=wu.current;return wu.current=pu,o===null?pu:o}function ip(){(Kt===0||Kt===3||Kt===2)&&(Kt=4),nn===null||(Ni&268435455)===0&&(bu&268435455)===0||Zs(nn,cn)}function Tu(o,l){var d=rt;rt|=2;var m=Ux();(nn!==o||cn!==l)&&(bs=null,Di(o,l));do try{PT();break}catch(x){Vx(o,x)}while(!0);if(vf(),rt=d,wu.current=m,Ht!==null)throw Error(t(261));return nn=null,cn=0,Kt}function PT(){for(;Ht!==null;)Hx(Ht)}function NT(){for(;Ht!==null&&!tE();)Hx(Ht)}function Hx(o){var l=Yx(o.alternate,o,Xn);o.memoizedProps=o.pendingProps,l===null?Wx(o):Ht=l,Kf.current=null}function Wx(o){var l=o;do{var d=l.alternate;if(o=l.return,(l.flags&32768)===0){if(d=_T(d,l,Xn),d!==null){Ht=d;return}}else{if(d=ST(d,l),d!==null){d.flags&=32767,Ht=d;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{Kt=6,Ht=null;return}}if(l=l.sibling,l!==null){Ht=l;return}Ht=l=o}while(l!==null);Kt===0&&(Kt=5)}function Mi(o,l,d){var m=ht,x=dr.transition;try{dr.transition=null,ht=1,RT(o,l,d,m)}finally{dr.transition=x,ht=m}return null}function RT(o,l,d,m){do Oo();while(Ks!==null);if((rt&6)!==0)throw Error(t(327));d=o.finishedWork;var x=o.finishedLanes;if(d===null)return null;if(o.finishedWork=null,o.finishedLanes=0,d===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var b=d.lanes|d.childLanes;if(dE(o,b),o===nn&&(Ht=nn=null,cn=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||Su||(Su=!0,Xx(Rc,function(){return Oo(),null})),b=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||b){b=dr.transition,dr.transition=null;var T=ht;ht=1;var D=rt;rt|=4,Kf.current=null,CT(o,d),jx(d,o),QE(sf),Fc=!!rf,sf=rf=null,o.current=d,ET(d),nE(),rt=D,ht=T,dr.transition=b}else o.current=d;if(Su&&(Su=!1,Ks=o,Au=x),b=o.pendingLanes,b===0&&(Xs=null),iE(d.stateNode),Bn(o,Lt()),l!==null)for(m=o.onRecoverableError,d=0;d<l.length;d++)x=l[d],m(x.value,{componentStack:x.stack,digest:x.digest});if(_u)throw _u=!1,o=Jf,Jf=null,o;return(Au&1)!==0&&o.tag!==0&&Oo(),b=o.pendingLanes,(b&1)!==0?o===ep?dl++:(dl=0,ep=o):dl=0,Ws(),null}function Oo(){if(Ks!==null){var o=My(Au),l=dr.transition,d=ht;try{if(dr.transition=null,ht=16>o?16:o,Ks===null)var m=!1;else{if(o=Ks,Ks=null,Au=0,(rt&6)!==0)throw Error(t(331));var x=rt;for(rt|=4,xe=o.current;xe!==null;){var b=xe,T=b.child;if((xe.flags&16)!==0){var D=b.deletions;if(D!==null){for(var j=0;j<D.length;j++){var Y=D[j];for(xe=Y;xe!==null;){var se=xe;switch(se.tag){case 0:case 11:case 15:ll(8,se,b)}var ae=se.child;if(ae!==null)ae.return=se,xe=ae;else for(;xe!==null;){se=xe;var ne=se.sibling,ge=se.return;if(Nx(se),se===Y){xe=null;break}if(ne!==null){ne.return=ge,xe=ne;break}xe=ge}}}var be=b.alternate;if(be!==null){var Se=be.child;if(Se!==null){be.child=null;do{var Ft=Se.sibling;Se.sibling=null,Se=Ft}while(Se!==null)}}xe=b}}if((b.subtreeFlags&2064)!==0&&T!==null)T.return=b,xe=T;else e:for(;xe!==null;){if(b=xe,(b.flags&2048)!==0)switch(b.tag){case 0:case 11:case 15:ll(9,b,b.return)}var U=b.sibling;if(U!==null){U.return=b.return,xe=U;break e}xe=b.return}}var B=o.current;for(xe=B;xe!==null;){T=xe;var H=T.child;if((T.subtreeFlags&2064)!==0&&H!==null)H.return=T,xe=H;else e:for(T=B;xe!==null;){if(D=xe,(D.flags&2048)!==0)try{switch(D.tag){case 0:case 11:case 15:xu(9,D)}}catch(Ce){jt(D,D.return,Ce)}if(D===T){xe=null;break e}var ue=D.sibling;if(ue!==null){ue.return=D.return,xe=ue;break e}xe=D.return}}if(rt=x,Ws(),Vr&&typeof Vr.onPostCommitFiberRoot=="function")try{Vr.onPostCommitFiberRoot(Dc,o)}catch{}m=!0}return m}finally{ht=d,dr.transition=l}}return!1}function Gx(o,l,d){l=Do(d,l),l=ux(o,l,1),o=qs(o,l,1),l=Sn(),o!==null&&(ja(o,1,l),Bn(o,l))}function jt(o,l,d){if(o.tag===3)Gx(o,o,d);else for(;l!==null;){if(l.tag===3){Gx(l,o,d);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Xs===null||!Xs.has(m))){o=Do(d,o),o=dx(l,o,1),l=qs(l,o,1),o=Sn(),l!==null&&(ja(l,1,o),Bn(l,o));break}}l=l.return}}function DT(o,l,d){var m=o.pingCache;m!==null&&m.delete(l),l=Sn(),o.pingedLanes|=o.suspendedLanes&d,nn===o&&(cn&d)===d&&(Kt===4||Kt===3&&(cn&130023424)===cn&&500>Lt()-Zf?Di(o,0):Qf|=d),Bn(o,l)}function qx(o,l){l===0&&((o.mode&1)===0?l=1:(l=Ic,Ic<<=1,(Ic&130023424)===0&&(Ic=4194304)));var d=Sn();o=vs(o,l),o!==null&&(ja(o,l,d),Bn(o,d))}function MT(o){var l=o.memoizedState,d=0;l!==null&&(d=l.retryLane),qx(o,d)}function IT(o,l){var d=0;switch(o.tag){case 13:var m=o.stateNode,x=o.memoizedState;x!==null&&(d=x.retryLane);break;case 19:m=o.stateNode;break;default:throw Error(t(314))}m!==null&&m.delete(l),qx(o,d)}var Yx;Yx=function(o,l,d){if(o!==null)if(o.memoizedProps!==l.pendingProps||jn.current)Ln=!0;else{if((o.lanes&d)===0&&(l.flags&128)===0)return Ln=!1,bT(o,l,d);Ln=(o.flags&131072)!==0}else Ln=!1,At&&(l.flags&1048576)!==0&&Tv(l,nu,l.index);switch(l.lanes=0,l.tag){case 2:var m=l.type;yu(o,l),o=l.pendingProps;var x=Ao(l,yn.current);No(l,d),x=Pf(null,l,m,o,x,d);var b=Nf();return l.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,On(m)?(b=!0,Jc(l)):b=!1,l.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,_f(l),x.updater=mu,l.stateNode=x,x._reactInternals=l,Of(l,m,o,d),l=$f(null,l,m,!0,b,d)):(l.tag=0,At&&b&&hf(l),_n(null,l,x,d),l=l.child),l;case 16:m=l.elementType;e:{switch(yu(o,l),o=l.pendingProps,x=m._init,m=x(m._payload),l.type=m,x=l.tag=OT(m),o=_r(m,o),x){case 0:l=Bf(null,l,m,o,d);break e;case 1:l=wx(null,l,m,o,d);break e;case 11:l=mx(null,l,m,o,d);break e;case 14:l=gx(null,l,m,_r(m.type,o),d);break e}throw Error(t(306,m,""))}return l;case 0:return m=l.type,x=l.pendingProps,x=l.elementType===m?x:_r(m,x),Bf(o,l,m,x,d);case 1:return m=l.type,x=l.pendingProps,x=l.elementType===m?x:_r(m,x),wx(o,l,m,x,d);case 3:e:{if(bx(l),o===null)throw Error(t(387));m=l.pendingProps,b=l.memoizedState,x=b.element,Ov(o,l),lu(l,m,null,d);var T=l.memoizedState;if(m=T.element,b.isDehydrated)if(b={element:m,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},l.updateQueue.baseState=b,l.memoizedState=b,l.flags&256){x=Do(Error(t(423)),l),l=_x(o,l,m,d,x);break e}else if(m!==x){x=Do(Error(t(424)),l),l=_x(o,l,m,d,x);break e}else for(Yn=Vs(l.stateNode.containerInfo.firstChild),qn=l,At=!0,br=null,d=Iv(l,null,m,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(To(),m===x){l=ws(o,l,d);break e}_n(o,l,m,d)}l=l.child}return l;case 5:return Bv(l),o===null&&mf(l),m=l.type,x=l.pendingProps,b=o!==null?o.memoizedProps:null,T=x.children,of(m,x)?T=null:b!==null&&of(m,b)&&(l.flags|=32),xx(o,l),_n(o,l,T,d),l.child;case 6:return o===null&&mf(l),null;case 13:return Sx(o,l,d);case 4:return Sf(l,l.stateNode.containerInfo),m=l.pendingProps,o===null?l.child=ko(l,null,m,d):_n(o,l,m,d),l.child;case 11:return m=l.type,x=l.pendingProps,x=l.elementType===m?x:_r(m,x),mx(o,l,m,x,d);case 7:return _n(o,l,l.pendingProps,d),l.child;case 8:return _n(o,l,l.pendingProps.children,d),l.child;case 12:return _n(o,l,l.pendingProps.children,d),l.child;case 10:e:{if(m=l.type._context,x=l.pendingProps,b=l.memoizedProps,T=x.value,yt(iu,m._currentValue),m._currentValue=T,b!==null)if(wr(b.value,T)){if(b.children===x.children&&!jn.current){l=ws(o,l,d);break e}}else for(b=l.child,b!==null&&(b.return=l);b!==null;){var D=b.dependencies;if(D!==null){T=b.child;for(var j=D.firstContext;j!==null;){if(j.context===m){if(b.tag===1){j=xs(-1,d&-d),j.tag=2;var Y=b.updateQueue;if(Y!==null){Y=Y.shared;var se=Y.pending;se===null?j.next=j:(j.next=se.next,se.next=j),Y.pending=j}}b.lanes|=d,j=b.alternate,j!==null&&(j.lanes|=d),wf(b.return,d,l),D.lanes|=d;break}j=j.next}}else if(b.tag===10)T=b.type===l.type?null:b.child;else if(b.tag===18){if(T=b.return,T===null)throw Error(t(341));T.lanes|=d,D=T.alternate,D!==null&&(D.lanes|=d),wf(T,d,l),T=b.sibling}else T=b.child;if(T!==null)T.return=b;else for(T=b;T!==null;){if(T===l){T=null;break}if(b=T.sibling,b!==null){b.return=T.return,T=b;break}T=T.return}b=T}_n(o,l,x.children,d),l=l.child}return l;case 9:return x=l.type,m=l.pendingProps.children,No(l,d),x=cr(x),m=m(x),l.flags|=1,_n(o,l,m,d),l.child;case 14:return m=l.type,x=_r(m,l.pendingProps),x=_r(m.type,x),gx(o,l,m,x,d);case 15:return yx(o,l,l.type,l.pendingProps,d);case 17:return m=l.type,x=l.pendingProps,x=l.elementType===m?x:_r(m,x),yu(o,l),l.tag=1,On(m)?(o=!0,Jc(l)):o=!1,No(l,d),lx(l,m,x),Of(l,m,x,d),$f(null,l,m,!0,o,d);case 19:return Cx(o,l,d);case 22:return vx(o,l,d)}throw Error(t(156,l.tag))};function Xx(o,l){return ky(o,l)}function jT(o,l,d,m){this.tag=o,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hr(o,l,d,m){return new jT(o,l,d,m)}function op(o){return o=o.prototype,!(!o||!o.isReactComponent)}function OT(o){if(typeof o=="function")return op(o)?1:0;if(o!=null){if(o=o.$$typeof,o===X)return 11;if(o===oe)return 14}return 2}function Js(o,l){var d=o.alternate;return d===null?(d=hr(o.tag,l,o.key,o.mode),d.elementType=o.elementType,d.type=o.type,d.stateNode=o.stateNode,d.alternate=o,o.alternate=d):(d.pendingProps=l,d.type=o.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=o.flags&14680064,d.childLanes=o.childLanes,d.lanes=o.lanes,d.child=o.child,d.memoizedProps=o.memoizedProps,d.memoizedState=o.memoizedState,d.updateQueue=o.updateQueue,l=o.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=o.sibling,d.index=o.index,d.ref=o.ref,d}function ku(o,l,d,m,x,b){var T=2;if(m=o,typeof o=="function")op(o)&&(T=1);else if(typeof o=="string")T=5;else e:switch(o){case M:return Ii(d.children,x,b,l);case $:T=8,x|=8;break;case G:return o=hr(12,d,l,x|2),o.elementType=G,o.lanes=b,o;case Z:return o=hr(13,d,l,x),o.elementType=Z,o.lanes=b,o;case W:return o=hr(19,d,l,x),o.elementType=W,o.lanes=b,o;case z:return Pu(d,x,b,l);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case F:T=10;break e;case V:T=9;break e;case X:T=11;break e;case oe:T=14;break e;case K:T=16,m=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return l=hr(T,d,l,x),l.elementType=o,l.type=m,l.lanes=b,l}function Ii(o,l,d,m){return o=hr(7,o,m,l),o.lanes=d,o}function Pu(o,l,d,m){return o=hr(22,o,m,l),o.elementType=z,o.lanes=d,o.stateNode={isHidden:!1},o}function ap(o,l,d){return o=hr(6,o,null,l),o.lanes=d,o}function lp(o,l,d){return l=hr(4,o.children!==null?o.children:[],o.key,l),l.lanes=d,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function LT(o,l,d,m,x){this.tag=l,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ih(0),this.expirationTimes=Ih(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ih(0),this.identifierPrefix=m,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function cp(o,l,d,m,x,b,T,D,j){return o=new LT(o,l,d,D,j),l===1?(l=1,b===!0&&(l|=8)):l=0,b=hr(3,null,null,l),o.current=b,b.stateNode=o,b.memoizedState={element:m,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},_f(b),o}function FT(o,l,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:R,key:m==null?null:""+m,children:o,containerInfo:l,implementation:d}}function Kx(o){if(!o)return Hs;o=o._reactInternals;e:{if(_i(o)!==o||o.tag!==1)throw Error(t(170));var l=o;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(On(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(o.tag===1){var d=o.type;if(On(d))return Av(o,d,l)}return l}function Qx(o,l,d,m,x,b,T,D,j){return o=cp(d,m,!0,o,x,b,T,D,j),o.context=Kx(null),d=o.current,m=Sn(),x=Qs(d),b=xs(m,x),b.callback=l??null,qs(d,b,x),o.current.lanes=x,ja(o,x,m),Bn(o,m),o}function Nu(o,l,d,m){var x=l.current,b=Sn(),T=Qs(x);return d=Kx(d),l.context===null?l.context=d:l.pendingContext=d,l=xs(b,T),l.payload={element:o},m=m===void 0?null:m,m!==null&&(l.callback=m),o=qs(x,l,T),o!==null&&(Cr(o,x,T,b),au(o,x,T)),T}function Ru(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Zx(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var d=o.retryLane;o.retryLane=d!==0&&d<l?d:l}}function up(o,l){Zx(o,l),(o=o.alternate)&&Zx(o,l)}function BT(){return null}var Jx=typeof reportError=="function"?reportError:function(o){console.error(o)};function dp(o){this._internalRoot=o}Du.prototype.render=dp.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(t(409));Nu(o,l,null,null)},Du.prototype.unmount=dp.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;Ri(function(){Nu(null,o,null,null)}),l[ps]=null}};function Du(o){this._internalRoot=o}Du.prototype.unstable_scheduleHydration=function(o){if(o){var l=Oy();o={blockedOn:null,target:o,priority:l};for(var d=0;d<Bs.length&&l!==0&&l<Bs[d].priority;d++);Bs.splice(d,0,o),d===0&&By(o)}};function hp(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Mu(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function ew(){}function $T(o,l,d,m,x){if(x){if(typeof m=="function"){var b=m;m=function(){var Y=Ru(T);b.call(Y)}}var T=Qx(l,m,o,0,null,!1,!1,"",ew);return o._reactRootContainer=T,o[ps]=T.current,Xa(o.nodeType===8?o.parentNode:o),Ri(),T}for(;x=o.lastChild;)o.removeChild(x);if(typeof m=="function"){var D=m;m=function(){var Y=Ru(j);D.call(Y)}}var j=cp(o,0,!1,null,null,!1,!1,"",ew);return o._reactRootContainer=j,o[ps]=j.current,Xa(o.nodeType===8?o.parentNode:o),Ri(function(){Nu(l,j,d,m)}),j}function Iu(o,l,d,m,x){var b=d._reactRootContainer;if(b){var T=b;if(typeof x=="function"){var D=x;x=function(){var j=Ru(T);D.call(j)}}Nu(l,T,o,x)}else T=$T(d,l,o,x,m);return Ru(T)}Iy=function(o){switch(o.tag){case 3:var l=o.stateNode;if(l.current.memoizedState.isDehydrated){var d=Ia(l.pendingLanes);d!==0&&(jh(l,d|1),Bn(l,Lt()),(rt&6)===0&&(jo=Lt()+500,Ws()))}break;case 13:Ri(function(){var m=vs(o,1);if(m!==null){var x=Sn();Cr(m,o,1,x)}}),up(o,1)}},Oh=function(o){if(o.tag===13){var l=vs(o,134217728);if(l!==null){var d=Sn();Cr(l,o,134217728,d)}up(o,134217728)}},jy=function(o){if(o.tag===13){var l=Qs(o),d=vs(o,l);if(d!==null){var m=Sn();Cr(d,o,l,m)}up(o,l)}},Oy=function(){return ht},Ly=function(o,l){var d=ht;try{return ht=o,l()}finally{ht=d}},kh=function(o,l,d){switch(l){case"input":if(zr(o,d),l=d.name,d.type==="radio"&&l!=null){for(d=o;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<d.length;l++){var m=d[l];if(m!==o&&m.form===o.form){var x=Qc(m);if(!x)throw Error(t(90));ut(m),zr(m,x)}}}break;case"textarea":J(o,d);break;case"select":l=d.value,l!=null&&fs(o,!!d.multiple,l,!1)}},by=rp,_y=Ri;var zT={usingClientEntryPoint:!1,Events:[Za,_o,Qc,xy,wy,rp]},hl={findFiberByHostInstance:Si,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VT={bundleType:hl.bundleType,version:hl.version,rendererPackageName:hl.rendererPackageName,rendererConfig:hl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Ey(o),o===null?null:o.stateNode},findFiberByHostInstance:hl.findFiberByHostInstance||BT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ju=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ju.isDisabled&&ju.supportsFiber)try{Dc=ju.inject(VT),Vr=ju}catch{}}return zn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zT,zn.createPortal=function(o,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hp(l))throw Error(t(200));return FT(o,l,null,d)},zn.createRoot=function(o,l){if(!hp(o))throw Error(t(299));var d=!1,m="",x=Jx;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onRecoverableError!==void 0&&(x=l.onRecoverableError)),l=cp(o,1,!1,null,null,d,!1,m,x),o[ps]=l.current,Xa(o.nodeType===8?o.parentNode:o),new dp(l)},zn.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=Ey(l),o=o===null?null:o.stateNode,o},zn.flushSync=function(o){return Ri(o)},zn.hydrate=function(o,l,d){if(!Mu(l))throw Error(t(200));return Iu(null,o,l,!0,d)},zn.hydrateRoot=function(o,l,d){if(!hp(o))throw Error(t(405));var m=d!=null&&d.hydratedSources||null,x=!1,b="",T=Jx;if(d!=null&&(d.unstable_strictMode===!0&&(x=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onRecoverableError!==void 0&&(T=d.onRecoverableError)),l=Qx(l,null,o,1,d??null,x,!1,b,T),o[ps]=l.current,Xa(o),m)for(o=0;o<m.length;o++)d=m[o],x=d._getVersion,x=x(d._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[d,x]:l.mutableSourceEagerHydrationData.push(d,x);return new Du(l)},zn.render=function(o,l,d){if(!Mu(l))throw Error(t(200));return Iu(null,o,l,!1,d)},zn.unmountComponentAtNode=function(o){if(!Mu(o))throw Error(t(40));return o._reactRootContainer?(Ri(function(){Iu(null,null,o,!1,function(){o._reactRootContainer=null,o[ps]=null})}),!0):!1},zn.unstable_batchedUpdates=rp,zn.unstable_renderSubtreeIntoContainer=function(o,l,d,m){if(!Mu(d))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return Iu(o,l,d,!1,m)},zn.version="18.3.1-next-f1338f8080-20240426",zn}var uw;function o0(){if(uw)return gp.exports;uw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),gp.exports=KT(),gp.exports}var dw;function QT(){if(dw)return Ou;dw=1;var n=o0();return Ou.createRoot=n.createRoot,Ou.hydrateRoot=n.hydrateRoot,Ou}var ZT=QT();function JT(n,e){if(n instanceof RegExp)return{keys:!1,pattern:n};var t,r,s,i,a=[],c="",u=n.split("/");for(u[0]||u.shift();s=u.shift();)t=s[0],t==="*"?(a.push(t),c+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):t===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),a.push(s.substring(1,~r?r:~i?i:s.length)),c+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(c+=(~r?"?":"")+"\\"+s.substring(i))):c+="/"+s;return{keys:a,pattern:new RegExp("^"+c+(e?"(?=$|/)":"/?$"),"i")}}var C=Vd();const We=i0(C),a0=HT({__proto__:null,default:We},[C]);var xp={exports:{}},wp={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hw;function ek(){if(hw)return wp;hw=1;var n=Vd();function e(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,s=n.useEffect,i=n.useLayoutEffect,a=n.useDebugValue;function c(g,y){var w=y(),S=r({inst:{value:w,getSnapshot:y}}),v=S[0].inst,_=S[1];return i(function(){v.value=w,v.getSnapshot=y,u(v)&&_({inst:v})},[g,w,y]),s(function(){return u(v)&&_({inst:v}),g(function(){u(v)&&_({inst:v})})},[g]),a(w),w}function u(g){var y=g.getSnapshot;g=g.value;try{var w=y();return!t(g,w)}catch{return!0}}function h(g,y){return y()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:c;return wp.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:f,wp}var fw;function tk(){return fw||(fw=1,xp.exports=ek()),xp.exports}var nk=tk();const rk=a0.useInsertionEffect,sk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ik=sk?C.useLayoutEffect:C.useEffect,ok=rk||ik,l0=n=>{const e=C.useRef([n,(...t)=>e[0](...t)]).current;return ok(()=>{e[0]=n}),e[1]},ak="popstate",Km="pushState",Qm="replaceState",lk="hashchange",pw=[ak,Km,Qm,lk],ck=n=>{for(const e of pw)addEventListener(e,n);return()=>{for(const e of pw)removeEventListener(e,n)}},c0=(n,e)=>nk.useSyncExternalStore(ck,n,e),uk=()=>location.search,dk=({ssrSearch:n=""}={})=>c0(uk,()=>n),mw=()=>location.pathname,hk=({ssrPath:n}={})=>c0(mw,n?()=>n:mw),fk=(n,{replace:e=!1,state:t=null}={})=>history[e?Qm:Km](t,"",n),pk=(n={})=>[hk(n),fk],gw=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[gw]>"u"){for(const n of[Km,Qm]){const e=history[n];history[n]=function(){const t=e.apply(this,arguments),r=new Event(n);return r.arguments=arguments,dispatchEvent(r),t}}Object.defineProperty(window,gw,{value:!0})}const mk=(n,e)=>e.toLowerCase().indexOf(n.toLowerCase())?"~"+e:e.slice(n.length)||"/",u0=(n="")=>n==="/"?"":n,gk=(n,e)=>n[0]==="~"?n.slice(1):u0(e)+n,yk=(n="",e)=>mk(yw(u0(n)),yw(e)),yw=n=>{try{return decodeURI(n)}catch{return n}},d0={hook:pk,searchHook:dk,parser:JT,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:n=>n},h0=C.createContext(d0),ac=()=>C.useContext(h0),f0={},p0=C.createContext(f0),m0=()=>C.useContext(p0),Ud=n=>{const[e,t]=n.hook(n);return[yk(n.base,e),l0((r,s)=>t(gk(r,n.base),s))]},g0=()=>Ud(ac()),y0=(n,e,t,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:n(e||"*",r),a=s.exec(t)||[],[c,...u]=a;return c!==void 0?[!0,(()=>{const h=i!==!1?Object.fromEntries(i.map((g,y)=>[g,u[y]])):a.groups;let f={...u};return h&&Object.assign(f,h),f})(),...r?[c]:[]]:[!1,null]},vk=({children:n,...e})=>{const t=ac(),r=e.hook?d0:t;let s=r;const[i,a]=e.ssrPath?.split("?")??[];a&&(e.ssrSearch=a,e.ssrPath=i),e.hrefs=e.hrefs??e.hook?.hrefs;let c=C.useRef({}),u=c.current,h=u;for(let f in r){const g=f==="base"?r[f]+(e[f]||""):e[f]||r[f];u===h&&g!==h[f]&&(c.current=h={...h}),h[f]=g,g!==r[f]&&(s=h)}return C.createElement(h0.Provider,{value:s,children:n})},vw=({children:n,component:e},t)=>e?C.createElement(e,{params:t}):typeof n=="function"?n(t):n,xk=n=>{let e=C.useRef(f0),t=e.current;for(const r in n)n[r]!==t[r]&&(t=n);return Object.keys(n).length===0&&(t=n),e.current=t},ti=({path:n,nest:e,match:t,...r})=>{const s=ac(),[i]=Ud(s),[a,c,u]=t??y0(s.parser,n,i,e),h=xk({...m0(),...c});if(!a)return null;const f=u?C.createElement(vk,{base:u},vw(r,h)):vw(r,h);return C.createElement(p0.Provider,{value:h,children:f})},wk=C.forwardRef((n,e)=>{const t=ac(),[r,s]=Ud(t),{to:i="",href:a=i,onClick:c,asChild:u,children:h,className:f,replace:g,state:y,...w}=n,S=l0(_=>{_.ctrlKey||_.metaKey||_.altKey||_.shiftKey||_.button!==0||(c?.(_),_.defaultPrevented||(_.preventDefault(),s(a,n)))}),v=t.hrefs(a[0]==="~"?a.slice(1):t.base+a,t);return u&&C.isValidElement(h)?C.cloneElement(h,{onClick:S,href:v}):C.createElement("a",{...w,onClick:S,href:v,className:f?.call?f(r===a):f,children:h,ref:e})}),v0=n=>Array.isArray(n)?n.flatMap(e=>v0(e&&e.type===C.Fragment?e.props.children:e)):[n],bk=({children:n,location:e})=>{const t=ac(),[r]=Ud(t);for(const s of v0(n)){let i=0;if(C.isValidElement(s)&&(i=y0(t.parser,s.props.path,e||r,s.props.nest))[0])return C.cloneElement(s,{match:i})}return null};var wa=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Hi=typeof window>"u"||"Deno"in globalThis;function gr(){}function _k(n,e){return typeof n=="function"?n(e):n}function rm(n){return typeof n=="number"&&n>=0&&n!==1/0}function x0(n,e){return Math.max(n+(e||0)-Date.now(),0)}function ea(n,e){return typeof n=="function"?n(e):n}function Pr(n,e){return typeof n=="function"?n(e):n}function xw(n,e){const{type:t="all",exact:r,fetchStatus:s,predicate:i,queryKey:a,stale:c}=n;if(a){if(r){if(e.queryHash!==Zm(a,e.options))return!1}else if(!jl(e.queryKey,a))return!1}if(t!=="all"){const u=e.isActive();if(t==="active"&&!u||t==="inactive"&&u)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||s&&s!==e.state.fetchStatus||i&&!i(e))}function ww(n,e){const{exact:t,status:r,predicate:s,mutationKey:i}=n;if(i){if(!e.options.mutationKey)return!1;if(t){if(Wi(e.options.mutationKey)!==Wi(i))return!1}else if(!jl(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Zm(n,e){return(e?.queryKeyHashFn||Wi)(n)}function Wi(n){return JSON.stringify(n,(e,t)=>sm(t)?Object.keys(t).sort().reduce((r,s)=>(r[s]=t[s],r),{}):t)}function jl(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!jl(n[t],e[t])):!1}function w0(n,e){if(n===e)return n;const t=bw(n)&&bw(e);if(t||sm(n)&&sm(e)){const r=t?n:Object.keys(n),s=r.length,i=t?e:Object.keys(e),a=i.length,c=t?[]:{};let u=0;for(let h=0;h<a;h++){const f=t?h:i[h];(!t&&r.includes(f)||t)&&n[f]===void 0&&e[f]===void 0?(c[f]=void 0,u++):(c[f]=w0(n[f],e[f]),c[f]===n[f]&&n[f]!==void 0&&u++)}return s===a&&u===s?n:c}return e}function dd(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function bw(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function sm(n){if(!_w(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!_w(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function _w(n){return Object.prototype.toString.call(n)==="[object Object]"}function Sk(n){return new Promise(e=>{setTimeout(e,n)})}function im(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?w0(n,e):e}function Ak(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function Ck(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var Jm=Symbol();function b0(n,e){return!n.queryFn&&e?.initialPromise?()=>e.initialPromise:!n.queryFn||n.queryFn===Jm?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var Ek=class extends wa{#e;#t;#n;constructor(){super(),this.#n=n=>{if(!Hi&&window.addEventListener){const e=()=>n();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(n){this.#n=n,this.#t?.(),this.#t=n(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(n){this.#e!==n&&(this.#e=n,this.onFocus())}onFocus(){const n=this.isFocused();this.listeners.forEach(e=>{e(n)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},eg=new Ek,Tk=class extends wa{#e=!0;#t;#n;constructor(){super(),this.#n=n=>{if(!Hi&&window.addEventListener){const e=()=>n(!0),t=()=>n(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",t,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(n){this.#n=n,this.#t?.(),this.#t=n(this.setOnline.bind(this))}setOnline(n){this.#e!==n&&(this.#e=n,this.listeners.forEach(t=>{t(n)}))}isOnline(){return this.#e}},hd=new Tk;function om(){let n,e;const t=new Promise((s,i)=>{n=s,e=i});t.status="pending",t.catch(()=>{});function r(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{r({status:"fulfilled",value:s}),n(s)},t.reject=s=>{r({status:"rejected",reason:s}),e(s)},t}function kk(n){return Math.min(1e3*2**n,3e4)}function _0(n){return(n??"online")==="online"?hd.isOnline():!0}var S0=class extends Error{constructor(n){super("CancelledError"),this.revert=n?.revert,this.silent=n?.silent}};function bp(n){return n instanceof S0}function A0(n){let e=!1,t=0,r=!1,s;const i=om(),a=v=>{r||(y(new S0(v)),n.abort?.())},c=()=>{e=!0},u=()=>{e=!1},h=()=>eg.isFocused()&&(n.networkMode==="always"||hd.isOnline())&&n.canRun(),f=()=>_0(n.networkMode)&&n.canRun(),g=v=>{r||(r=!0,n.onSuccess?.(v),s?.(),i.resolve(v))},y=v=>{r||(r=!0,n.onError?.(v),s?.(),i.reject(v))},w=()=>new Promise(v=>{s=_=>{(r||h())&&v(_)},n.onPause?.()}).then(()=>{s=void 0,r||n.onContinue?.()}),S=()=>{if(r)return;let v;const _=t===0?n.initialPromise:void 0;try{v=_??n.fn()}catch(A){v=Promise.reject(A)}Promise.resolve(v).then(g).catch(A=>{if(r)return;const E=n.retry??(Hi?0:3),k=n.retryDelay??kk,P=typeof k=="function"?k(t,A):k,N=E===!0||typeof E=="number"&&t<E||typeof E=="function"&&E(t,A);if(e||!N){y(A);return}t++,n.onFail?.(t,A),Sk(P).then(()=>h()?void 0:w()).then(()=>{e?y(A):S()})})};return{promise:i,cancel:a,continue:()=>(s?.(),i),cancelRetry:c,continueRetry:u,canStart:f,start:()=>(f()?S():w().then(S),i)}}function Pk(){let n=[],e=0,t=c=>{c()},r=c=>{c()},s=c=>setTimeout(c,0);const i=c=>{e?n.push(c):s(()=>{t(c)})},a=()=>{const c=n;n=[],c.length&&s(()=>{r(()=>{c.forEach(u=>{t(u)})})})};return{batch:c=>{let u;e++;try{u=c()}finally{e--,e||a()}return u},batchCalls:c=>(...u)=>{i(()=>{c(...u)})},schedule:i,setNotifyFunction:c=>{t=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{s=c}}}var Zt=Pk(),C0=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),rm(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Hi?1/0:5*60*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},Nk=class extends C0{#e;#t;#n;#r;#i;#s;constructor(n){super(),this.#s=!1,this.#i=n.defaultOptions,this.setOptions(n.options),this.observers=[],this.#n=n.cache,this.queryKey=n.queryKey,this.queryHash=n.queryHash,this.#e=Rk(this.options),this.state=n.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(n){this.options={...this.#i,...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(n,e){const t=im(this.state.data,n,this.options);return this.#o({data:t,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),t}setState(n,e){this.#o({type:"setState",state:n,setStateOptions:e})}cancel(n){const e=this.#r?.promise;return this.#r?.cancel(n),e?e.then(gr).catch(gr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(n=>Pr(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Jm||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!x0(this.state.dataUpdatedAt,n)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(e=>e!==n),this.observers.length||(this.#r&&(this.#s?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#o({type:"invalidate"})}fetch(n,e){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(n&&this.setOptions(n),!this.options.queryFn){const c=this.observers.find(u=>u.options.queryFn);c&&this.setOptions(c.options)}const t=new AbortController,r=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#s=!0,t.signal)})},s=()=>{const c=b0(this.options,e),u={queryKey:this.queryKey,meta:this.meta};return r(u),this.#s=!1,this.options.persister?this.options.persister(c,u,this):c(u)},i={fetchOptions:e,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:s};r(i),this.options.behavior?.onFetch(i,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==i.fetchOptions?.meta)&&this.#o({type:"fetch",meta:i.fetchOptions?.meta});const a=c=>{bp(c)&&c.silent||this.#o({type:"error",error:c}),bp(c)||(this.#n.config.onError?.(c,this),this.#n.config.onSettled?.(this.state.data,c,this)),this.scheduleGc()};return this.#r=A0({initialPromise:e?.initialPromise,fn:i.fetchFn,abort:t.abort.bind(t),onSuccess:c=>{if(c===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(c)}catch(u){a(u);return}this.#n.config.onSuccess?.(c,this),this.#n.config.onSettled?.(c,this.state.error,this),this.scheduleGc()},onError:a,onFail:(c,u)=>{this.#o({type:"failed",failureCount:c,error:u})},onPause:()=>{this.#o({type:"pause"})},onContinue:()=>{this.#o({type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0}),this.#r.start()}#o(n){const e=t=>{switch(n.type){case"failed":return{...t,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...E0(t.data,this.options),fetchMeta:n.meta??null};case"success":return{...t,data:n.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=n.error;return bp(r)&&r.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...t,error:r,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...n.state}}};this.state=e(this.state),Zt.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:n})})}};function E0(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:_0(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function Rk(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Dk=class extends wa{constructor(n={}){super(),this.config=n,this.#e=new Map}#e;build(n,e,t){const r=e.queryKey,s=e.queryHash??Zm(r,e);let i=this.get(s);return i||(i=new Nk({cache:this,queryKey:r,queryHash:s,options:n.defaultQueryOptions(e),state:t,defaultOptions:n.getQueryDefaults(r)}),this.add(i)),i}add(n){this.#e.has(n.queryHash)||(this.#e.set(n.queryHash,n),this.notify({type:"added",query:n}))}remove(n){const e=this.#e.get(n.queryHash);e&&(n.destroy(),e===n&&this.#e.delete(n.queryHash),this.notify({type:"removed",query:n}))}clear(){Zt.batch(()=>{this.getAll().forEach(n=>{this.remove(n)})})}get(n){return this.#e.get(n)}getAll(){return[...this.#e.values()]}find(n){const e={exact:!0,...n};return this.getAll().find(t=>xw(e,t))}findAll(n={}){const e=this.getAll();return Object.keys(n).length>0?e.filter(t=>xw(n,t)):e}notify(n){Zt.batch(()=>{this.listeners.forEach(e=>{e(n)})})}onFocus(){Zt.batch(()=>{this.getAll().forEach(n=>{n.onFocus()})})}onOnline(){Zt.batch(()=>{this.getAll().forEach(n=>{n.onOnline()})})}},Mk=class extends C0{#e;#t;#n;constructor(n){super(),this.mutationId=n.mutationId,this.#t=n.mutationCache,this.#e=[],this.state=n.state||T0(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){this.#e.includes(n)||(this.#e.push(n),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){this.#e=this.#e.filter(e=>e!==n),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(n){this.#n=A0({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(r,s)=>{this.#r({type:"failed",failureCount:r,error:s})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const e=this.state.status==="pending",t=!this.#n.canStart();try{if(!e){this.#r({type:"pending",variables:n,isPaused:t}),await this.#t.config.onMutate?.(n,this);const s=await this.options.onMutate?.(n);s!==this.state.context&&this.#r({type:"pending",context:s,variables:n,isPaused:t})}const r=await this.#n.start();return await this.#t.config.onSuccess?.(r,n,this.state.context,this),await this.options.onSuccess?.(r,n,this.state.context),await this.#t.config.onSettled?.(r,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(r,null,n,this.state.context),this.#r({type:"success",data:r}),r}catch(r){try{throw await this.#t.config.onError?.(r,n,this.state.context,this),await this.options.onError?.(r,n,this.state.context),await this.#t.config.onSettled?.(void 0,r,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,r,n,this.state.context),r}finally{this.#r({type:"error",error:r})}}finally{this.#t.runNext(this)}}#r(n){const e=t=>{switch(n.type){case"failed":return{...t,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...t,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:n.error,failureCount:t.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Zt.batch(()=>{this.#e.forEach(t=>{t.onMutationUpdate(n)}),this.#t.notify({mutation:this,type:"updated",action:n})})}};function T0(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ik=class extends wa{constructor(n={}){super(),this.config=n,this.#e=new Map,this.#t=Date.now()}#e;#t;build(n,e,t){const r=new Mk({mutationCache:this,mutationId:++this.#t,options:n.defaultMutationOptions(e),state:t});return this.add(r),r}add(n){const e=Lu(n),t=this.#e.get(e)??[];t.push(n),this.#e.set(e,t),this.notify({type:"added",mutation:n})}remove(n){const e=Lu(n);if(this.#e.has(e)){const t=this.#e.get(e)?.filter(r=>r!==n);t&&(t.length===0?this.#e.delete(e):this.#e.set(e,t))}this.notify({type:"removed",mutation:n})}canRun(n){const e=this.#e.get(Lu(n))?.find(t=>t.state.status==="pending");return!e||e===n}runNext(n){return this.#e.get(Lu(n))?.find(t=>t!==n&&t.state.isPaused)?.continue()??Promise.resolve()}clear(){Zt.batch(()=>{this.getAll().forEach(n=>{this.remove(n)})})}getAll(){return[...this.#e.values()].flat()}find(n){const e={exact:!0,...n};return this.getAll().find(t=>ww(e,t))}findAll(n={}){return this.getAll().filter(e=>ww(n,e))}notify(n){Zt.batch(()=>{this.listeners.forEach(e=>{e(n)})})}resumePausedMutations(){const n=this.getAll().filter(e=>e.state.isPaused);return Zt.batch(()=>Promise.all(n.map(e=>e.continue().catch(gr))))}};function Lu(n){return n.options.scope?.id??String(n.mutationId)}function Sw(n){return{onFetch:(e,t)=>{const r=e.options,s=e.fetchOptions?.meta?.fetchMore?.direction,i=e.state.data?.pages||[],a=e.state.data?.pageParams||[];let c={pages:[],pageParams:[]},u=0;const h=async()=>{let f=!1;const g=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?f=!0:e.signal.addEventListener("abort",()=>{f=!0}),e.signal)})},y=b0(e.options,e.fetchOptions),w=async(S,v,_)=>{if(f)return Promise.reject();if(v==null&&S.pages.length)return Promise.resolve(S);const A={queryKey:e.queryKey,pageParam:v,direction:_?"backward":"forward",meta:e.options.meta};g(A);const E=await y(A),{maxPages:k}=e.options,P=_?Ck:Ak;return{pages:P(S.pages,E,k),pageParams:P(S.pageParams,v,k)}};if(s&&i.length){const S=s==="backward",v=S?jk:Aw,_={pages:i,pageParams:a},A=v(r,_);c=await w(_,A,S)}else{const S=n??i.length;do{const v=u===0?a[0]??r.initialPageParam:Aw(r,c);if(u>0&&v==null)break;c=await w(c,v),u++}while(u<S)}return c};e.options.persister?e.fetchFn=()=>e.options.persister?.(h,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t):e.fetchFn=h}}}function Aw(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function jk(n,{pages:e,pageParams:t}){return e.length>0?n.getPreviousPageParam?.(e[0],e,t[0],t):void 0}var Ok=class{#e;#t;#n;#r;#i;#s;#o;#a;constructor(n={}){this.#e=n.queryCache||new Dk,this.#t=n.mutationCache||new Ik,this.#n=n.defaultOptions||{},this.#r=new Map,this.#i=new Map,this.#s=0}mount(){this.#s++,this.#s===1&&(this.#o=eg.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=hd.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#s--,this.#s===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(n){return this.#e.findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return this.#t.findAll({...n,status:"pending"}).length}getQueryData(n){const e=this.defaultQueryOptions({queryKey:n});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(n){const e=this.getQueryData(n.queryKey);if(e===void 0)return this.fetchQuery(n);{const t=this.defaultQueryOptions(n),r=this.#e.build(this,t);return n.revalidateIfStale&&r.isStaleByTime(ea(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(e)}}getQueriesData(n){return this.#e.findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),i=this.#e.get(r.queryHash)?.state.data,a=_k(e,i);if(a!==void 0)return this.#e.build(this,r).setData(a,{...t,manual:!0})}setQueriesData(n,e,t){return Zt.batch(()=>this.#e.findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){const e=this.defaultQueryOptions({queryKey:n});return this.#e.get(e.queryHash)?.state}removeQueries(n){const e=this.#e;Zt.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=this.#e,r={type:"active",...n};return Zt.batch(()=>(t.findAll(n).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(n={},e={}){const t={revert:!0,...e},r=Zt.batch(()=>this.#e.findAll(n).map(s=>s.cancel(t)));return Promise.all(r).then(gr).catch(gr)}invalidateQueries(n={},e={}){return Zt.batch(()=>{if(this.#e.findAll(n).forEach(r=>{r.invalidate()}),n.refetchType==="none")return Promise.resolve();const t={...n,type:n.refetchType??n.type??"active"};return this.refetchQueries(t,e)})}refetchQueries(n={},e){const t={...e,cancelRefetch:e?.cancelRefetch??!0},r=Zt.batch(()=>this.#e.findAll(n).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,t);return t.throwOnError||(i=i.catch(gr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(gr)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=this.#e.build(this,e);return t.isStaleByTime(ea(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(gr).catch(gr)}fetchInfiniteQuery(n){return n.behavior=Sw(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(gr).catch(gr)}ensureInfiniteQueryData(n){return n.behavior=Sw(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return hd.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(n){this.#n=n}setQueryDefaults(n,e){this.#r.set(Wi(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...this.#r.values()];let t={};return e.forEach(r=>{jl(n,r.queryKey)&&(t={...t,...r.defaultOptions})}),t}setMutationDefaults(n,e){this.#i.set(Wi(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...this.#i.values()];let t={};return e.forEach(r=>{jl(n,r.mutationKey)&&(t={...t,...r.defaultOptions})}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...this.#n.queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=Zm(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Jm&&(e.enabled=!1),e}defaultMutationOptions(n){return n?._defaulted?n:{...this.#n.mutations,...n?.mutationKey&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Lk=class extends wa{constructor(n,e){super(),this.options=e,this.#e=n,this.#a=null,this.#o=om(),this.options.experimental_prefetchInRender||this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#r=void 0;#i;#s;#o;#a;#l;#c;#h;#u;#f;#m;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Cw(this.#t,this.options)?this.#d():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return am(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return am(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#_(),this.#v(),this.#t.removeObserver(this)}setOptions(n,e){const t=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(n),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Pr(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#S(),this.#t.setOptions(this.options),t._defaulted&&!dd(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const s=this.hasListeners();s&&Ew(this.#t,r,this.options,t)&&this.#d(),this.updateResult(e),s&&(this.#t!==r||Pr(this.options.enabled,this.#t)!==Pr(t.enabled,this.#t)||ea(this.options.staleTime,this.#t)!==ea(t.staleTime,this.#t))&&this.#g();const i=this.#x();s&&(this.#t!==r||Pr(this.options.enabled,this.#t)!==Pr(t.enabled,this.#t)||i!==this.#m)&&this.#y(i)}getOptimisticResult(n){const e=this.#e.getQueryCache().build(this.#e,n),t=this.createResult(e,n);return Bk(this,t)&&(this.#r=t,this.#s=this.options,this.#i=this.#t.state),t}getCurrentResult(){return this.#r}trackResult(n,e){const t={};return Object.keys(n).forEach(r=>{Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),e?.(r),n[r])})}),t}trackProp(n){this.#p.add(n)}getCurrentQuery(){return this.#t}refetch({...n}={}){return this.fetch({...n})}fetchOptimistic(n){const e=this.#e.defaultQueryOptions(n),t=this.#e.getQueryCache().build(this.#e,e);return t.fetch().then(()=>this.createResult(t,e))}fetch(n){return this.#d({...n,cancelRefetch:n.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#d(n){this.#S();let e=this.#t.fetch(this.options,n);return n?.throwOnError||(e=e.catch(gr)),e}#g(){this.#_();const n=ea(this.options.staleTime,this.#t);if(Hi||this.#r.isStale||!rm(n))return;const t=x0(this.#r.dataUpdatedAt,n)+1;this.#u=setTimeout(()=>{this.#r.isStale||this.updateResult()},t)}#x(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(n){this.#v(),this.#m=n,!(Hi||Pr(this.options.enabled,this.#t)===!1||!rm(this.#m)||this.#m===0)&&(this.#f=setInterval(()=>{(this.options.refetchIntervalInBackground||eg.isFocused())&&this.#d()},this.#m))}#b(){this.#g(),this.#y(this.#x())}#_(){this.#u&&(clearTimeout(this.#u),this.#u=void 0)}#v(){this.#f&&(clearInterval(this.#f),this.#f=void 0)}createResult(n,e){const t=this.#t,r=this.options,s=this.#r,i=this.#i,a=this.#s,u=n!==t?n.state:this.#n,{state:h}=n;let f={...h},g=!1,y;if(e._optimisticResults){const M=this.hasListeners(),$=!M&&Cw(n,e),G=M&&Ew(n,t,e,r);($||G)&&(f={...f,...E0(h.data,n.options)}),e._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:w,errorUpdatedAt:S,status:v}=f;if(e.select&&f.data!==void 0)if(s&&f.data===i?.data&&e.select===this.#l)y=this.#c;else try{this.#l=e.select,y=e.select(f.data),y=im(s?.data,y,e),this.#c=y,this.#a=null}catch(M){this.#a=M}else y=f.data;if(e.placeholderData!==void 0&&y===void 0&&v==="pending"){let M;if(s?.isPlaceholderData&&e.placeholderData===a?.placeholderData)M=s.data;else if(M=typeof e.placeholderData=="function"?e.placeholderData(this.#h?.state.data,this.#h):e.placeholderData,e.select&&M!==void 0)try{M=e.select(M),this.#a=null}catch($){this.#a=$}M!==void 0&&(v="success",y=im(s?.data,M,e),g=!0)}this.#a&&(w=this.#a,y=this.#c,S=Date.now(),v="error");const _=f.fetchStatus==="fetching",A=v==="pending",E=v==="error",k=A&&_,P=y!==void 0,R={status:v,fetchStatus:f.fetchStatus,isPending:A,isSuccess:v==="success",isError:E,isInitialLoading:k,isLoading:k,data:y,dataUpdatedAt:f.dataUpdatedAt,error:w,errorUpdatedAt:S,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:_,isRefetching:_&&!A,isLoadingError:E&&!P,isPaused:f.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:E&&P,isStale:tg(n,e),refetch:this.refetch,promise:this.#o};if(this.options.experimental_prefetchInRender){const M=F=>{R.status==="error"?F.reject(R.error):R.data!==void 0&&F.resolve(R.data)},$=()=>{const F=this.#o=R.promise=om();M(F)},G=this.#o;switch(G.status){case"pending":n.queryHash===t.queryHash&&M(G);break;case"fulfilled":(R.status==="error"||R.data!==G.value)&&$();break;case"rejected":(R.status!=="error"||R.error!==G.reason)&&$();break}}return R}updateResult(n){const e=this.#r,t=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#s=this.options,this.#i.data!==void 0&&(this.#h=this.#t),dd(t,e))return;this.#r=t;const r={},s=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,a=typeof i=="function"?i():i;if(a==="all"||!a&&!this.#p.size)return!0;const c=new Set(a??this.#p);return this.options.throwOnError&&c.add("error"),Object.keys(this.#r).some(u=>{const h=u;return this.#r[h]!==e[h]&&c.has(h)})};n?.listeners!==!1&&s()&&(r.listeners=!0),this.#k({...r,...n})}#S(){const n=this.#e.getQueryCache().build(this.#e,this.options);if(n===this.#t)return;const e=this.#t;this.#t=n,this.#n=n.state,this.hasListeners()&&(e?.removeObserver(this),n.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#k(n){Zt.batch(()=>{n.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function Fk(n,e){return Pr(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function Cw(n,e){return Fk(n,e)||n.state.data!==void 0&&am(n,e,e.refetchOnMount)}function am(n,e,t){if(Pr(e.enabled,n)!==!1){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&tg(n,e)}return!1}function Ew(n,e,t,r){return(n!==e||Pr(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&tg(n,t)}function tg(n,e){return Pr(e.enabled,n)!==!1&&n.isStaleByTime(ea(e.staleTime,n))}function Bk(n,e){return!dd(n.getCurrentResult(),e)}var $k=class extends wa{#e;#t=void 0;#n;#r;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.#e.defaultMutationOptions(e),dd(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),t?.mutationKey&&this.options.mutationKey&&Wi(t.mutationKey)!==Wi(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#s(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#i(),this.#s()}mutate(e,t){return this.#r=t,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#i(){const e=this.#n?.state??T0();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#s(e){Zt.batch(()=>{if(this.#r&&this.hasListeners()){const t=this.#t.variables,r=this.#t.context;e?.type==="success"?(this.#r.onSuccess?.(e.data,t,r),this.#r.onSettled?.(e.data,null,t,r)):e?.type==="error"&&(this.#r.onError?.(e.error,t,r),this.#r.onSettled?.(void 0,e.error,t,r))}this.listeners.forEach(t=>{t(this.#t)})})}},k0=C.createContext(void 0),ba=n=>{const e=C.useContext(k0);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},zk=({client:n,children:e})=>(C.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),p.jsx(k0.Provider,{value:n,children:e})),P0=C.createContext(!1),Vk=()=>C.useContext(P0);P0.Provider;function Uk(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var Hk=C.createContext(Uk()),Wk=()=>C.useContext(Hk);function N0(n,e){return typeof n=="function"?n(...e):!!n}function lm(){}var Gk=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},qk=n=>{C.useEffect(()=>{n.clearReset()},[n])},Yk=({result:n,errorResetBoundary:e,throwOnError:t,query:r})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&N0(t,[n.error,r]),Xk=n=>{n.suspense&&(n.staleTime===void 0&&(n.staleTime=1e3),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3)))},Kk=(n,e)=>n.isLoading&&n.isFetching&&!e,Qk=(n,e)=>n?.suspense&&e.isPending,Tw=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function Zk(n,e,t){const r=ba(),s=Vk(),i=Wk(),a=r.defaultQueryOptions(n);r.getDefaultOptions().queries?._experimental_beforeQuery?.(a),a._optimisticResults=s?"isRestoring":"optimistic",Xk(a),Gk(a,i),qk(i);const c=!r.getQueryCache().get(a.queryHash),[u]=C.useState(()=>new e(r,a)),h=u.getOptimisticResult(a);if(C.useSyncExternalStore(C.useCallback(f=>{const g=s?lm:u.subscribe(Zt.batchCalls(f));return u.updateResult(),g},[u,s]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),C.useEffect(()=>{u.setOptions(a,{listeners:!1})},[a,u]),Qk(a,h))throw Tw(a,u,i);if(Yk({result:h,errorResetBoundary:i,throwOnError:a.throwOnError,query:r.getQueryCache().get(a.queryHash)}))throw h.error;return r.getDefaultOptions().queries?._experimental_afterQuery?.(a,h),a.experimental_prefetchInRender&&!Hi&&Kk(h,s)&&(c?Tw(a,u,i):r.getQueryCache().get(a.queryHash)?.promise)?.catch(lm).finally(()=>{u.updateResult()}),a.notifyOnChangeProps?h:u.trackResult(h)}function tr(n,e){return Zk(n,Lk)}function Ol(n,e){const t=ba(),[r]=C.useState(()=>new $k(t,n));C.useEffect(()=>{r.setOptions(n)},[r,n]);const s=C.useSyncExternalStore(C.useCallback(a=>r.subscribe(Zt.batchCalls(a)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=C.useCallback((a,c)=>{r.mutate(a,c).catch(lm)},[r]);if(s.error&&N0(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}async function R0(n){if(!n.ok){const e=await n.text()||n.statusText;throw new Error(`${n.status}: ${e}`)}}async function ca(n,e,t){const r=await fetch(e,{method:n,headers:t?{"Content-Type":"application/json"}:{},body:t?JSON.stringify(t):void 0,credentials:"include"});return await R0(r),r}const Jk=({on401:n})=>async({queryKey:e})=>{const t=await fetch(e.join("/"),{credentials:"include"});return await R0(t),await t.json()},eP=new Ok({defaultOptions:{queries:{queryFn:Jk({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),tP=1,nP=1e6;let _p=0;function rP(){return _p=(_p+1)%Number.MAX_SAFE_INTEGER,_p.toString()}const Sp=new Map,kw=n=>{if(Sp.has(n))return;const e=setTimeout(()=>{Sp.delete(n),Rl({type:"REMOVE_TOAST",toastId:n})},nP);Sp.set(n,e)},sP=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,tP)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?kw(t):n.toasts.forEach(r=>{kw(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},Ju=[];let ed={toasts:[]};function Rl(n){ed=sP(ed,n),Ju.forEach(e=>{e(ed)})}function iP({...n}){const e=rP(),t=s=>Rl({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Rl({type:"DISMISS_TOAST",toastId:e});return Rl({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:t}}function Hd(){const[n,e]=C.useState(ed);return C.useEffect(()=>(Ju.push(e),()=>{const t=Ju.indexOf(e);t>-1&&Ju.splice(t,1)}),[n]),{...n,toast:iP,dismiss:t=>Rl({type:"DISMISS_TOAST",toastId:t})}}var _a=o0();const oP=i0(_a);function ke(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n?.(s),t===!1||!s.defaultPrevented)return e?.(s)}}function Pw(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function D0(...n){return e=>{let t=!1;const r=n.map(s=>{const i=Pw(s,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():Pw(n[s],null)}}}}function mt(...n){return C.useCallback(D0(...n),n)}function aP(n,e){const t=C.createContext(e),r=i=>{const{children:a,...c}=i,u=C.useMemo(()=>c,Object.values(c));return p.jsx(t.Provider,{value:u,children:a})};r.displayName=n+"Provider";function s(i){const a=C.useContext(t);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${n}\``)}return[r,s]}function Br(n,e=[]){let t=[];function r(i,a){const c=C.createContext(a),u=t.length;t=[...t,a];const h=g=>{const{scope:y,children:w,...S}=g,v=y?.[n]?.[u]||c,_=C.useMemo(()=>S,Object.values(S));return p.jsx(v.Provider,{value:_,children:w})};h.displayName=i+"Provider";function f(g,y){const w=y?.[n]?.[u]||c,S=C.useContext(w);if(S)return S;if(a!==void 0)return a;throw new Error(`\`${g}\` must be used within \`${i}\``)}return[h,f]}const s=()=>{const i=t.map(a=>C.createContext(a));return function(c){const u=c?.[n]||i;return C.useMemo(()=>({[`__scope${n}`]:{...c,[n]:u}}),[c,u])}};return s.scopeName=n,[r,lP(s,...e)]}function lP(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((c,{useScope:u,scopeName:h})=>{const g=u(i)[`__scope${h}`];return{...c,...g}},{});return C.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}function Gi(n){const e=cP(n),t=C.forwardRef((r,s)=>{const{children:i,...a}=r,c=C.Children.toArray(i),u=c.find(dP);if(u){const h=u.props.children,f=c.map(g=>g===u?C.Children.count(h)>1?C.Children.only(null):C.isValidElement(h)?h.props.children:null:g);return p.jsx(e,{...a,ref:s,children:C.isValidElement(h)?C.cloneElement(h,void 0,f):null})}return p.jsx(e,{...a,ref:s,children:i})});return t.displayName=`${n}.Slot`,t}var M0=Gi("Slot");function cP(n){const e=C.forwardRef((t,r)=>{const{children:s,...i}=t;if(C.isValidElement(s)){const a=fP(s),c=hP(i,s.props);return s.type!==C.Fragment&&(c.ref=r?D0(r,a):a),C.cloneElement(s,c)}return C.Children.count(s)>1?C.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var I0=Symbol("radix.slottable");function uP(n){const e=({children:t})=>p.jsx(p.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=I0,e}function dP(n){return C.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===I0}function hP(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...c)=>{i(...c),s(...c)}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function fP(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function ng(n){const e=n+"CollectionProvider",[t,r]=Br(e),[s,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),a=v=>{const{scope:_,children:A}=v,E=We.useRef(null),k=We.useRef(new Map).current;return p.jsx(s,{scope:_,itemMap:k,collectionRef:E,children:A})};a.displayName=e;const c=n+"CollectionSlot",u=Gi(c),h=We.forwardRef((v,_)=>{const{scope:A,children:E}=v,k=i(c,A),P=mt(_,k.collectionRef);return p.jsx(u,{ref:P,children:E})});h.displayName=c;const f=n+"CollectionItemSlot",g="data-radix-collection-item",y=Gi(f),w=We.forwardRef((v,_)=>{const{scope:A,children:E,...k}=v,P=We.useRef(null),N=mt(_,P),R=i(f,A);return We.useEffect(()=>(R.itemMap.set(P,{ref:P,...k}),()=>void R.itemMap.delete(P))),p.jsx(y,{[g]:"",ref:N,children:E})});w.displayName=f;function S(v){const _=i(n+"CollectionConsumer",v);return We.useCallback(()=>{const E=_.collectionRef.current;if(!E)return[];const k=Array.from(E.querySelectorAll(`[${g}]`));return Array.from(_.itemMap.values()).sort((R,M)=>k.indexOf(R.ref.current)-k.indexOf(M.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:a,Slot:h,ItemSlot:w},S,r]}var pP=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ve=pP.reduce((n,e)=>{const t=Gi(`Primitive.${e}`),r=C.forwardRef((s,i)=>{const{asChild:a,...c}=s,u=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(u,{...c,ref:i})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function j0(n,e){n&&_a.flushSync(()=>n.dispatchEvent(e))}function Mn(n){const e=C.useRef(n);return C.useEffect(()=>{e.current=n}),C.useMemo(()=>(...t)=>e.current?.(...t),[])}function mP(n,e=globalThis?.document){const t=Mn(n);C.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var gP="DismissableLayer",cm="dismissableLayer.update",yP="dismissableLayer.pointerDownOutside",vP="dismissableLayer.focusOutside",Nw,O0=C.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Sa=C.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:c,...u}=n,h=C.useContext(O0),[f,g]=C.useState(null),y=f?.ownerDocument??globalThis?.document,[,w]=C.useState({}),S=mt(e,M=>g(M)),v=Array.from(h.layers),[_]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),A=v.indexOf(_),E=f?v.indexOf(f):-1,k=h.layersWithOutsidePointerEventsDisabled.size>0,P=E>=A,N=wP(M=>{const $=M.target,G=[...h.branches].some(F=>F.contains($));!P||G||(s?.(M),a?.(M),M.defaultPrevented||c?.())},y),R=bP(M=>{const $=M.target;[...h.branches].some(F=>F.contains($))||(i?.(M),a?.(M),M.defaultPrevented||c?.())},y);return mP(M=>{E===h.layers.size-1&&(r?.(M),!M.defaultPrevented&&c&&(M.preventDefault(),c()))},y),C.useEffect(()=>{if(f)return t&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(Nw=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(f)),h.layers.add(f),Rw(),()=>{t&&h.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=Nw)}},[f,y,t,h]),C.useEffect(()=>()=>{f&&(h.layers.delete(f),h.layersWithOutsidePointerEventsDisabled.delete(f),Rw())},[f,h]),C.useEffect(()=>{const M=()=>w({});return document.addEventListener(cm,M),()=>document.removeEventListener(cm,M)},[]),p.jsx(Ve.div,{...u,ref:S,style:{pointerEvents:k?P?"auto":"none":void 0,...n.style},onFocusCapture:ke(n.onFocusCapture,R.onFocusCapture),onBlurCapture:ke(n.onBlurCapture,R.onBlurCapture),onPointerDownCapture:ke(n.onPointerDownCapture,N.onPointerDownCapture)})});Sa.displayName=gP;var xP="DismissableLayerBranch",L0=C.forwardRef((n,e)=>{const t=C.useContext(O0),r=C.useRef(null),s=mt(e,r);return C.useEffect(()=>{const i=r.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),p.jsx(Ve.div,{...n,ref:s})});L0.displayName=xP;function wP(n,e=globalThis?.document){const t=Mn(n),r=C.useRef(!1),s=C.useRef(()=>{});return C.useEffect(()=>{const i=c=>{if(c.target&&!r.current){let u=function(){F0(yP,t,h,{discrete:!0})};const h={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=u,e.addEventListener("click",s.current,{once:!0})):u()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function bP(n,e=globalThis?.document){const t=Mn(n),r=C.useRef(!1);return C.useEffect(()=>{const s=i=>{i.target&&!r.current&&F0(vP,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Rw(){const n=new CustomEvent(cm);document.dispatchEvent(n)}function F0(n,e,t,{discrete:r}){const s=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?j0(s,i):s.dispatchEvent(i)}var _P=Sa,SP=L0,en=globalThis?.document?C.useLayoutEffect:()=>{},AP="Portal",lc=C.forwardRef((n,e)=>{const{container:t,...r}=n,[s,i]=C.useState(!1);en(()=>i(!0),[]);const a=t||s&&globalThis?.document?.body;return a?oP.createPortal(p.jsx(Ve.div,{...r,ref:e}),a):null});lc.displayName=AP;function CP(n,e){return C.useReducer((t,r)=>e[t][r]??t,n)}var Is=n=>{const{present:e,children:t}=n,r=EP(e),s=typeof t=="function"?t({present:r.isPresent}):C.Children.only(t),i=mt(r.ref,TP(s));return typeof t=="function"||r.isPresent?C.cloneElement(s,{ref:i}):null};Is.displayName="Presence";function EP(n){const[e,t]=C.useState(),r=C.useRef({}),s=C.useRef(n),i=C.useRef("none"),a=n?"mounted":"unmounted",[c,u]=CP(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return C.useEffect(()=>{const h=Fu(r.current);i.current=c==="mounted"?h:"none"},[c]),en(()=>{const h=r.current,f=s.current;if(f!==n){const y=i.current,w=Fu(h);n?u("MOUNT"):w==="none"||h?.display==="none"?u("UNMOUNT"):u(f&&y!==w?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,u]),en(()=>{if(e){let h;const f=e.ownerDocument.defaultView??window,g=w=>{const v=Fu(r.current).includes(w.animationName);if(w.target===e&&v&&(u("ANIMATION_END"),!s.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",h=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},y=w=>{w.target===e&&(i.current=Fu(r.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{f.clearTimeout(h),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:C.useCallback(h=>{h&&(r.current=getComputedStyle(h)),t(h)},[])}}function Fu(n){return n?.animationName||"none"}function TP(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function qi({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,s]=kP({defaultProp:e,onChange:t}),i=n!==void 0,a=i?n:r,c=Mn(t),u=C.useCallback(h=>{if(i){const g=typeof h=="function"?h(n):h;g!==n&&c(g)}else s(h)},[i,n,s,c]);return[a,u]}function kP({defaultProp:n,onChange:e}){const t=C.useState(n),[r]=t,s=C.useRef(r),i=Mn(e);return C.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),t}var PP="VisuallyHidden",cc=C.forwardRef((n,e)=>p.jsx(Ve.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));cc.displayName=PP;var NP=cc,rg="ToastProvider",[sg,RP,DP]=ng("Toast"),[B0,fz]=Br("Toast",[DP]),[MP,Wd]=B0(rg),$0=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:a}=n,[c,u]=C.useState(null),[h,f]=C.useState(0),g=C.useRef(!1),y=C.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${rg}\`. Expected non-empty \`string\`.`),p.jsx(sg.Provider,{scope:e,children:p.jsx(MP,{scope:e,label:t,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:h,viewport:c,onViewportChange:u,onToastAdd:C.useCallback(()=>f(w=>w+1),[]),onToastRemove:C.useCallback(()=>f(w=>w-1),[]),isFocusedToastEscapeKeyDownRef:g,isClosePausedRef:y,children:a})})};$0.displayName=rg;var z0="ToastViewport",IP=["F8"],um="toast.viewportPause",dm="toast.viewportResume",V0=C.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=IP,label:s="Notifications ({hotkey})",...i}=n,a=Wd(z0,t),c=RP(t),u=C.useRef(null),h=C.useRef(null),f=C.useRef(null),g=C.useRef(null),y=mt(e,g,a.onViewportChange),w=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),S=a.toastCount>0;C.useEffect(()=>{const _=A=>{r.length!==0&&r.every(k=>A[k]||A.code===k)&&g.current?.focus()};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[r]),C.useEffect(()=>{const _=u.current,A=g.current;if(S&&_&&A){const E=()=>{if(!a.isClosePausedRef.current){const R=new CustomEvent(um);A.dispatchEvent(R),a.isClosePausedRef.current=!0}},k=()=>{if(a.isClosePausedRef.current){const R=new CustomEvent(dm);A.dispatchEvent(R),a.isClosePausedRef.current=!1}},P=R=>{!_.contains(R.relatedTarget)&&k()},N=()=>{_.contains(document.activeElement)||k()};return _.addEventListener("focusin",E),_.addEventListener("focusout",P),_.addEventListener("pointermove",E),_.addEventListener("pointerleave",N),window.addEventListener("blur",E),window.addEventListener("focus",k),()=>{_.removeEventListener("focusin",E),_.removeEventListener("focusout",P),_.removeEventListener("pointermove",E),_.removeEventListener("pointerleave",N),window.removeEventListener("blur",E),window.removeEventListener("focus",k)}}},[S,a.isClosePausedRef]);const v=C.useCallback(({tabbingDirection:_})=>{const E=c().map(k=>{const P=k.ref.current,N=[P,...qP(P)];return _==="forwards"?N:N.reverse()});return(_==="forwards"?E.reverse():E).flat()},[c]);return C.useEffect(()=>{const _=g.current;if(_){const A=E=>{const k=E.altKey||E.ctrlKey||E.metaKey;if(E.key==="Tab"&&!k){const N=document.activeElement,R=E.shiftKey;if(E.target===_&&R){h.current?.focus();return}const G=v({tabbingDirection:R?"backwards":"forwards"}),F=G.findIndex(V=>V===N);Ap(G.slice(F+1))?E.preventDefault():R?h.current?.focus():f.current?.focus()}};return _.addEventListener("keydown",A),()=>_.removeEventListener("keydown",A)}},[c,v]),p.jsxs(SP,{ref:u,role:"region","aria-label":s.replace("{hotkey}",w),tabIndex:-1,style:{pointerEvents:S?void 0:"none"},children:[S&&p.jsx(hm,{ref:h,onFocusFromOutsideViewport:()=>{const _=v({tabbingDirection:"forwards"});Ap(_)}}),p.jsx(sg.Slot,{scope:t,children:p.jsx(Ve.ol,{tabIndex:-1,...i,ref:y})}),S&&p.jsx(hm,{ref:f,onFocusFromOutsideViewport:()=>{const _=v({tabbingDirection:"backwards"});Ap(_)}})]})});V0.displayName=z0;var U0="ToastFocusProxy",hm=C.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...s}=n,i=Wd(U0,t);return p.jsx(cc,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:a=>{const c=a.relatedTarget;!i.viewport?.contains(c)&&r()}})});hm.displayName=U0;var Gd="Toast",jP="toast.swipeStart",OP="toast.swipeMove",LP="toast.swipeCancel",FP="toast.swipeEnd",H0=C.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:s,onOpenChange:i,...a}=n,[c=!0,u]=qi({prop:r,defaultProp:s,onChange:i});return p.jsx(Is,{present:t||c,children:p.jsx(zP,{open:c,...a,ref:e,onClose:()=>u(!1),onPause:Mn(n.onPause),onResume:Mn(n.onResume),onSwipeStart:ke(n.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ke(n.onSwipeMove,h=>{const{x:f,y:g}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${g}px`)}),onSwipeCancel:ke(n.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ke(n.onSwipeEnd,h=>{const{x:f,y:g}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${g}px`),u(!1)})})})});H0.displayName=Gd;var[BP,$P]=B0(Gd,{onClose(){}}),zP=C.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:s,open:i,onClose:a,onEscapeKeyDown:c,onPause:u,onResume:h,onSwipeStart:f,onSwipeMove:g,onSwipeCancel:y,onSwipeEnd:w,...S}=n,v=Wd(Gd,t),[_,A]=C.useState(null),E=mt(e,W=>A(W)),k=C.useRef(null),P=C.useRef(null),N=s||v.duration,R=C.useRef(0),M=C.useRef(N),$=C.useRef(0),{onToastAdd:G,onToastRemove:F}=v,V=Mn(()=>{_?.contains(document.activeElement)&&v.viewport?.focus(),a()}),X=C.useCallback(W=>{!W||W===1/0||(window.clearTimeout($.current),R.current=new Date().getTime(),$.current=window.setTimeout(V,W))},[V]);C.useEffect(()=>{const W=v.viewport;if(W){const oe=()=>{X(M.current),h?.()},K=()=>{const z=new Date().getTime()-R.current;M.current=M.current-z,window.clearTimeout($.current),u?.()};return W.addEventListener(um,K),W.addEventListener(dm,oe),()=>{W.removeEventListener(um,K),W.removeEventListener(dm,oe)}}},[v.viewport,N,u,h,X]),C.useEffect(()=>{i&&!v.isClosePausedRef.current&&X(N)},[i,N,v.isClosePausedRef,X]),C.useEffect(()=>(G(),()=>F()),[G,F]);const Z=C.useMemo(()=>_?Q0(_):null,[_]);return v.viewport?p.jsxs(p.Fragment,{children:[Z&&p.jsx(VP,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:Z}),p.jsx(BP,{scope:t,onClose:V,children:_a.createPortal(p.jsx(sg.ItemSlot,{scope:t,children:p.jsx(_P,{asChild:!0,onEscapeKeyDown:ke(c,()=>{v.isFocusedToastEscapeKeyDownRef.current||V(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:p.jsx(Ve.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":v.swipeDirection,...S,ref:E,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:ke(n.onKeyDown,W=>{W.key==="Escape"&&(c?.(W.nativeEvent),W.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,V()))}),onPointerDown:ke(n.onPointerDown,W=>{W.button===0&&(k.current={x:W.clientX,y:W.clientY})}),onPointerMove:ke(n.onPointerMove,W=>{if(!k.current)return;const oe=W.clientX-k.current.x,K=W.clientY-k.current.y,z=!!P.current,O=["left","right"].includes(v.swipeDirection),ee=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,te=O?ee(0,oe):0,L=O?0:ee(0,K),Q=W.pointerType==="touch"?10:2,fe={x:te,y:L},Te={originalEvent:W,delta:fe};z?(P.current=fe,Bu(OP,g,Te,{discrete:!1})):Dw(fe,v.swipeDirection,Q)?(P.current=fe,Bu(jP,f,Te,{discrete:!1}),W.target.setPointerCapture(W.pointerId)):(Math.abs(oe)>Q||Math.abs(K)>Q)&&(k.current=null)}),onPointerUp:ke(n.onPointerUp,W=>{const oe=P.current,K=W.target;if(K.hasPointerCapture(W.pointerId)&&K.releasePointerCapture(W.pointerId),P.current=null,k.current=null,oe){const z=W.currentTarget,O={originalEvent:W,delta:oe};Dw(oe,v.swipeDirection,v.swipeThreshold)?Bu(FP,w,O,{discrete:!0}):Bu(LP,y,O,{discrete:!0}),z.addEventListener("click",ee=>ee.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),VP=n=>{const{__scopeToast:e,children:t,...r}=n,s=Wd(Gd,e),[i,a]=C.useState(!1),[c,u]=C.useState(!1);return WP(()=>a(!0)),C.useEffect(()=>{const h=window.setTimeout(()=>u(!0),1e3);return()=>window.clearTimeout(h)},[]),c?null:p.jsx(lc,{asChild:!0,children:p.jsx(cc,{...r,children:i&&p.jsxs(p.Fragment,{children:[s.label," ",t]})})})},UP="ToastTitle",W0=C.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return p.jsx(Ve.div,{...r,ref:e})});W0.displayName=UP;var HP="ToastDescription",G0=C.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return p.jsx(Ve.div,{...r,ref:e})});G0.displayName=HP;var q0="ToastAction",Y0=C.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?p.jsx(K0,{altText:t,asChild:!0,children:p.jsx(ig,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${q0}\`. Expected non-empty \`string\`.`),null)});Y0.displayName=q0;var X0="ToastClose",ig=C.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,s=$P(X0,t);return p.jsx(K0,{asChild:!0,children:p.jsx(Ve.button,{type:"button",...r,ref:e,onClick:ke(n.onClick,s.onClose)})})});ig.displayName=X0;var K0=C.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...s}=n;return p.jsx(Ve.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function Q0(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),GP(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const a=r.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...Q0(r))}}),e}function Bu(n,e,t,{discrete:r}){const s=t.originalEvent.currentTarget,i=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?j0(s,i):s.dispatchEvent(i)}var Dw=(n,e,t=0)=>{const r=Math.abs(n.x),s=Math.abs(n.y),i=r>s;return e==="left"||e==="right"?i&&r>t:!i&&s>t};function WP(n=()=>{}){const e=Mn(n);en(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function GP(n){return n.nodeType===n.ELEMENT_NODE}function qP(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Ap(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var YP=$0,Z0=V0,J0=H0,e_=W0,t_=G0,n_=Y0,r_=ig;function s_(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=s_(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function i_(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=s_(n))&&(r&&(r+=" "),r+=e);return r}const Mw=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,Iw=i_,qd=(n,e)=>t=>{var r;if(e?.variants==null)return Iw(n,t?.class,t?.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(h=>{const f=t?.[h],g=i?.[h];if(f===null)return null;const y=Mw(f)||Mw(g);return s[h][y]}),c=t&&Object.entries(t).reduce((h,f)=>{let[g,y]=f;return y===void 0||(h[g]=y),h},{}),u=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((h,f)=>{let{class:g,className:y,...w}=f;return Object.entries(w).every(S=>{let[v,_]=S;return Array.isArray(_)?_.includes({...i,...c}[v]):{...i,...c}[v]===_})?[...h,g,y]:h},[]);return Iw(n,a,u,t?.class,t?.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XP=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o_=(...n)=>n.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var KP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QP=C.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...c},u)=>C.createElement("svg",{ref:u,...KP,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:o_("lucide",s),...c},[...a.map(([h,f])=>C.createElement(h,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=(n,e)=>{const t=C.forwardRef(({className:r,...s},i)=>C.createElement(QP,{ref:i,iconNode:e,className:o_(`lucide-${XP(n)}`,r),...s}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cp=Ze("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZP=Ze("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JP=Ze("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=Ze("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const td=Ze("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fd=Ze("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=Ze("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=Ze("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=Ze("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fm=Ze("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=Ze("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=Ze("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=Ze("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=Ze("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=Ze("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=Ze("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=Ze("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=Ze("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=Ze("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=Ze("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=Ze("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=Ze("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=Ze("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=Ze("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=Ze("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=Ze("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=Ze("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=Ze("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pm=Ze("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=Ze("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=Ze("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=Ze("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ll=Ze("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=Ze("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=Ze("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=Ze("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=Ze("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=Ze("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),og="-",xN=n=>{const e=bN(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:a=>{const c=a.split(og);return c[0]===""&&c.length!==1&&c.shift(),d_(c,e)||wN(a)},getConflictingClassGroupIds:(a,c)=>{const u=t[a]||[];return c&&r[a]?[...u,...r[a]]:u}}},d_=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),s=r?d_(n.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=n.join(og);return e.validators.find(({validator:a})=>a(i))?.classGroupId},jw=/^\[(.+)\]$/,wN=n=>{if(jw.test(n)){const e=jw.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},bN=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return SN(Object.entries(n.classGroups),t).forEach(([i,a])=>{mm(a,r,i,e)}),r},mm=(n,e,t,r)=>{n.forEach(s=>{if(typeof s=="string"){const i=s===""?e:Ow(e,s);i.classGroupId=t;return}if(typeof s=="function"){if(_N(s)){mm(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([i,a])=>{mm(a,Ow(e,i),t,r)})})},Ow=(n,e)=>{let t=n;return e.split(og).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},_N=n=>n.isThemeGetter,SN=(n,e)=>e?n.map(([t,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,c])=>[e+a,c])):i);return[t,s]}):n,AN=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const s=(i,a)=>{t.set(i,a),e++,e>n&&(e=0,r=t,t=new Map)};return{get(i){let a=t.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){t.has(i)?t.set(i,a):s(i,a)}}},h_="!",CN=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,s=e[0],i=e.length,a=c=>{const u=[];let h=0,f=0,g;for(let _=0;_<c.length;_++){let A=c[_];if(h===0){if(A===s&&(r||c.slice(_,_+i)===e)){u.push(c.slice(f,_)),f=_+i;continue}if(A==="/"){g=_;continue}}A==="["?h++:A==="]"&&h--}const y=u.length===0?c:c.substring(f),w=y.startsWith(h_),S=w?y.substring(1):y,v=g&&g>f?g-f:void 0;return{modifiers:u,hasImportantModifier:w,baseClassName:S,maybePostfixModifierPosition:v}};return t?c=>t({className:c,parseClassName:a}):a},EN=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},TN=n=>({cache:AN(n.cacheSize),parseClassName:CN(n),...xN(n)}),kN=/\s+/,PN=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],a=n.trim().split(kN);let c="";for(let u=a.length-1;u>=0;u-=1){const h=a[u],{modifiers:f,hasImportantModifier:g,baseClassName:y,maybePostfixModifierPosition:w}=t(h);let S=!!w,v=r(S?y.substring(0,w):y);if(!v){if(!S){c=h+(c.length>0?" "+c:c);continue}if(v=r(y),!v){c=h+(c.length>0?" "+c:c);continue}S=!1}const _=EN(f).join(":"),A=g?_+h_:_,E=A+v;if(i.includes(E))continue;i.push(E);const k=s(v,S);for(let P=0;P<k.length;++P){const N=k[P];i.push(A+N)}c=h+(c.length>0?" "+c:c)}return c};function NN(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=f_(e))&&(r&&(r+=" "),r+=t);return r}const f_=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=f_(n[r]))&&(t&&(t+=" "),t+=e);return t};function RN(n,...e){let t,r,s,i=a;function a(u){const h=e.reduce((f,g)=>g(f),n());return t=TN(h),r=t.cache.get,s=t.cache.set,i=c,c(u)}function c(u){const h=r(u);if(h)return h;const f=PN(u,t);return s(u,f),f}return function(){return i(NN.apply(null,arguments))}}const St=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},p_=/^\[(?:([a-z-]+):)?(.+)\]$/i,DN=/^\d+\/\d+$/,MN=new Set(["px","full","screen"]),IN=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,jN=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ON=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,LN=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,FN=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,_s=n=>ta(n)||MN.has(n)||DN.test(n),ni=n=>Aa(n,"length",GN),ta=n=>!!n&&!Number.isNaN(Number(n)),Ep=n=>Aa(n,"number",ta),pl=n=>!!n&&Number.isInteger(Number(n)),BN=n=>n.endsWith("%")&&ta(n.slice(0,-1)),qe=n=>p_.test(n),ri=n=>IN.test(n),$N=new Set(["length","size","percentage"]),zN=n=>Aa(n,$N,m_),VN=n=>Aa(n,"position",m_),UN=new Set(["image","url"]),HN=n=>Aa(n,UN,YN),WN=n=>Aa(n,"",qN),ml=()=>!0,Aa=(n,e,t)=>{const r=p_.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},GN=n=>jN.test(n)&&!ON.test(n),m_=()=>!1,qN=n=>LN.test(n),YN=n=>FN.test(n),XN=()=>{const n=St("colors"),e=St("spacing"),t=St("blur"),r=St("brightness"),s=St("borderColor"),i=St("borderRadius"),a=St("borderSpacing"),c=St("borderWidth"),u=St("contrast"),h=St("grayscale"),f=St("hueRotate"),g=St("invert"),y=St("gap"),w=St("gradientColorStops"),S=St("gradientColorStopPositions"),v=St("inset"),_=St("margin"),A=St("opacity"),E=St("padding"),k=St("saturate"),P=St("scale"),N=St("sepia"),R=St("skew"),M=St("space"),$=St("translate"),G=()=>["auto","contain","none"],F=()=>["auto","hidden","clip","visible","scroll"],V=()=>["auto",qe,e],X=()=>[qe,e],Z=()=>["",_s,ni],W=()=>["auto",ta,qe],oe=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],K=()=>["solid","dashed","dotted","double","none"],z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],ee=()=>["","0",qe],te=()=>["auto","avoid","all","avoid-page","page","left","right","column"],L=()=>[ta,qe];return{cacheSize:500,separator:":",theme:{colors:[ml],spacing:[_s,ni],blur:["none","",ri,qe],brightness:L(),borderColor:[n],borderRadius:["none","","full",ri,qe],borderSpacing:X(),borderWidth:Z(),contrast:L(),grayscale:ee(),hueRotate:L(),invert:ee(),gap:X(),gradientColorStops:[n],gradientColorStopPositions:[BN,ni],inset:V(),margin:V(),opacity:L(),padding:X(),saturate:L(),scale:L(),sepia:ee(),skew:L(),space:X(),translate:X()},classGroups:{aspect:[{aspect:["auto","square","video",qe]}],container:["container"],columns:[{columns:[ri]}],"break-after":[{"break-after":te()}],"break-before":[{"break-before":te()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...oe(),qe]}],overflow:[{overflow:F()}],"overflow-x":[{"overflow-x":F()}],"overflow-y":[{"overflow-y":F()}],overscroll:[{overscroll:G()}],"overscroll-x":[{"overscroll-x":G()}],"overscroll-y":[{"overscroll-y":G()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",pl,qe]}],basis:[{basis:V()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",qe]}],grow:[{grow:ee()}],shrink:[{shrink:ee()}],order:[{order:["first","last","none",pl,qe]}],"grid-cols":[{"grid-cols":[ml]}],"col-start-end":[{col:["auto",{span:["full",pl,qe]},qe]}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":[ml]}],"row-start-end":[{row:["auto",{span:[pl,qe]},qe]}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",qe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",qe]}],gap:[{gap:[y]}],"gap-x":[{"gap-x":[y]}],"gap-y":[{"gap-y":[y]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[E]}],px:[{px:[E]}],py:[{py:[E]}],ps:[{ps:[E]}],pe:[{pe:[E]}],pt:[{pt:[E]}],pr:[{pr:[E]}],pb:[{pb:[E]}],pl:[{pl:[E]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[M]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[M]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",qe,e]}],"min-w":[{"min-w":[qe,e,"min","max","fit"]}],"max-w":[{"max-w":[qe,e,"none","full","min","max","fit","prose",{screen:[ri]},ri]}],h:[{h:[qe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[qe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[qe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[qe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ri,ni]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ep]}],"font-family":[{font:[ml]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",qe]}],"line-clamp":[{"line-clamp":["none",ta,Ep]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",_s,qe]}],"list-image":[{"list-image":["none",qe]}],"list-style-type":[{list:["none","disc","decimal",qe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[A]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[A]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",_s,ni]}],"underline-offset":[{"underline-offset":["auto",_s,qe]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:X()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",qe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",qe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[A]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...oe(),VN]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",zN]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},HN]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[S]}],"gradient-via-pos":[{via:[S]}],"gradient-to-pos":[{to:[S]}],"gradient-from":[{from:[w]}],"gradient-via":[{via:[w]}],"gradient-to":[{to:[w]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[A]}],"border-style":[{border:[...K(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[A]}],"divide-style":[{divide:K()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...K()]}],"outline-offset":[{"outline-offset":[_s,qe]}],"outline-w":[{outline:[_s,ni]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:Z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[A]}],"ring-offset-w":[{"ring-offset":[_s,ni]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",ri,WN]}],"shadow-color":[{shadow:[ml]}],opacity:[{opacity:[A]}],"mix-blend":[{"mix-blend":[...z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",ri,qe]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[g]}],saturate:[{saturate:[k]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[g]}],"backdrop-opacity":[{"backdrop-opacity":[A]}],"backdrop-saturate":[{"backdrop-saturate":[k]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",qe]}],duration:[{duration:L()}],ease:[{ease:["linear","in","out","in-out",qe]}],delay:[{delay:L()}],animate:[{animate:["none","spin","ping","pulse","bounce",qe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[P]}],"scale-x":[{"scale-x":[P]}],"scale-y":[{"scale-y":[P]}],rotate:[{rotate:[pl,qe]}],"translate-x":[{"translate-x":[$]}],"translate-y":[{"translate-y":[$]}],"skew-x":[{"skew-x":[R]}],"skew-y":[{"skew-y":[R]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",qe]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",qe]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":X()}],"scroll-mx":[{"scroll-mx":X()}],"scroll-my":[{"scroll-my":X()}],"scroll-ms":[{"scroll-ms":X()}],"scroll-me":[{"scroll-me":X()}],"scroll-mt":[{"scroll-mt":X()}],"scroll-mr":[{"scroll-mr":X()}],"scroll-mb":[{"scroll-mb":X()}],"scroll-ml":[{"scroll-ml":X()}],"scroll-p":[{"scroll-p":X()}],"scroll-px":[{"scroll-px":X()}],"scroll-py":[{"scroll-py":X()}],"scroll-ps":[{"scroll-ps":X()}],"scroll-pe":[{"scroll-pe":X()}],"scroll-pt":[{"scroll-pt":X()}],"scroll-pr":[{"scroll-pr":X()}],"scroll-pb":[{"scroll-pb":X()}],"scroll-pl":[{"scroll-pl":X()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",qe]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[_s,ni,Ep]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},KN=RN(XN);function Fe(...n){return KN(i_(n))}const QN=YP,g_=C.forwardRef(({className:n,...e},t)=>p.jsx(Z0,{ref:t,className:Fe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));g_.displayName=Z0.displayName;const ZN=qd("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),y_=C.forwardRef(({className:n,variant:e,...t},r)=>p.jsx(J0,{ref:r,className:Fe(ZN({variant:e}),n),...t}));y_.displayName=J0.displayName;const JN=C.forwardRef(({className:n,...e},t)=>p.jsx(n_,{ref:t,className:Fe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));JN.displayName=n_.displayName;const v_=C.forwardRef(({className:n,...e},t)=>p.jsx(r_,{ref:t,className:Fe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:p.jsx(Yd,{className:"h-4 w-4"})}));v_.displayName=r_.displayName;const x_=C.forwardRef(({className:n,...e},t)=>p.jsx(e_,{ref:t,className:Fe("text-sm font-semibold",n),...e}));x_.displayName=e_.displayName;const w_=C.forwardRef(({className:n,...e},t)=>p.jsx(t_,{ref:t,className:Fe("text-sm opacity-90",n),...e}));w_.displayName=t_.displayName;function eR(){const{toasts:n}=Hd();return p.jsxs(QN,{children:[n.map(function({id:e,title:t,description:r,action:s,...i}){return p.jsxs(y_,{...i,children:[p.jsxs("div",{className:"grid gap-1",children:[t&&p.jsx(x_,{children:t}),r&&p.jsx(w_,{children:r})]}),s,p.jsx(v_,{})]},e)}),p.jsx(g_,{})]})}var tR=a0[" useId ".trim().toString()]||(()=>{}),nR=0;function Ns(n){const[e,t]=C.useState(tR());return en(()=>{t(r=>r??String(nR++))},[n]),e?`radix-${e}`:""}const rR=["top","right","bottom","left"],ui=Math.min,Jn=Math.max,md=Math.round,$u=Math.floor,ns=n=>({x:n,y:n}),sR={left:"right",right:"left",bottom:"top",top:"bottom"},iR={start:"end",end:"start"};function gm(n,e,t){return Jn(n,ui(e,t))}function Rs(n,e){return typeof n=="function"?n(e):n}function Ds(n){return n.split("-")[0]}function Ca(n){return n.split("-")[1]}function ag(n){return n==="x"?"y":"x"}function lg(n){return n==="y"?"height":"width"}function di(n){return["top","bottom"].includes(Ds(n))?"y":"x"}function cg(n){return ag(di(n))}function oR(n,e,t){t===void 0&&(t=!1);const r=Ca(n),s=cg(n),i=lg(s);let a=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=gd(a)),[a,gd(a)]}function aR(n){const e=gd(n);return[ym(n),e,ym(e)]}function ym(n){return n.replace(/start|end/g,e=>iR[e])}function lR(n,e,t){const r=["left","right"],s=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(n){case"top":case"bottom":return t?e?s:r:e?r:s;case"left":case"right":return e?i:a;default:return[]}}function cR(n,e,t,r){const s=Ca(n);let i=lR(Ds(n),t==="start",r);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(ym)))),i}function gd(n){return n.replace(/left|right|bottom|top/g,e=>sR[e])}function uR(n){return{top:0,right:0,bottom:0,left:0,...n}}function b_(n){return typeof n!="number"?uR(n):{top:n,right:n,bottom:n,left:n}}function yd(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function Lw(n,e,t){let{reference:r,floating:s}=n;const i=di(e),a=cg(e),c=lg(a),u=Ds(e),h=i==="y",f=r.x+r.width/2-s.width/2,g=r.y+r.height/2-s.height/2,y=r[c]/2-s[c]/2;let w;switch(u){case"top":w={x:f,y:r.y-s.height};break;case"bottom":w={x:f,y:r.y+r.height};break;case"right":w={x:r.x+r.width,y:g};break;case"left":w={x:r.x-s.width,y:g};break;default:w={x:r.x,y:r.y}}switch(Ca(e)){case"start":w[a]-=y*(t&&h?-1:1);break;case"end":w[a]+=y*(t&&h?-1:1);break}return w}const dR=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=t,c=i.filter(Boolean),u=await(a.isRTL==null?void 0:a.isRTL(e));let h=await a.getElementRects({reference:n,floating:e,strategy:s}),{x:f,y:g}=Lw(h,r,u),y=r,w={},S=0;for(let v=0;v<c.length;v++){const{name:_,fn:A}=c[v],{x:E,y:k,data:P,reset:N}=await A({x:f,y:g,initialPlacement:r,placement:y,strategy:s,middlewareData:w,rects:h,platform:a,elements:{reference:n,floating:e}});f=E??f,g=k??g,w={...w,[_]:{...w[_],...P}},N&&S<=50&&(S++,typeof N=="object"&&(N.placement&&(y=N.placement),N.rects&&(h=N.rects===!0?await a.getElementRects({reference:n,floating:e,strategy:s}):N.rects),{x:f,y:g}=Lw(h,y,u)),v=-1)}return{x:f,y:g,placement:y,strategy:s,middlewareData:w}};async function Fl(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:a,elements:c,strategy:u}=n,{boundary:h="clippingAncestors",rootBoundary:f="viewport",elementContext:g="floating",altBoundary:y=!1,padding:w=0}=Rs(e,n),S=b_(w),_=c[y?g==="floating"?"reference":"floating":g],A=yd(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(_)))==null||t?_:_.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(c.floating)),boundary:h,rootBoundary:f,strategy:u})),E=g==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,k=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c.floating)),P=await(i.isElement==null?void 0:i.isElement(k))?await(i.getScale==null?void 0:i.getScale(k))||{x:1,y:1}:{x:1,y:1},N=yd(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:E,offsetParent:k,strategy:u}):E);return{top:(A.top-N.top+S.top)/P.y,bottom:(N.bottom-A.bottom+S.bottom)/P.y,left:(A.left-N.left+S.left)/P.x,right:(N.right-A.right+S.right)/P.x}}const hR=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:i,platform:a,elements:c,middlewareData:u}=e,{element:h,padding:f=0}=Rs(n,e)||{};if(h==null)return{};const g=b_(f),y={x:t,y:r},w=cg(s),S=lg(w),v=await a.getDimensions(h),_=w==="y",A=_?"top":"left",E=_?"bottom":"right",k=_?"clientHeight":"clientWidth",P=i.reference[S]+i.reference[w]-y[w]-i.floating[S],N=y[w]-i.reference[w],R=await(a.getOffsetParent==null?void 0:a.getOffsetParent(h));let M=R?R[k]:0;(!M||!await(a.isElement==null?void 0:a.isElement(R)))&&(M=c.floating[k]||i.floating[S]);const $=P/2-N/2,G=M/2-v[S]/2-1,F=ui(g[A],G),V=ui(g[E],G),X=F,Z=M-v[S]-V,W=M/2-v[S]/2+$,oe=gm(X,W,Z),K=!u.arrow&&Ca(s)!=null&&W!==oe&&i.reference[S]/2-(W<X?F:V)-v[S]/2<0,z=K?W<X?W-X:W-Z:0;return{[w]:y[w]+z,data:{[w]:oe,centerOffset:W-oe-z,...K&&{alignmentOffset:z}},reset:K}}}),fR=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:c,platform:u,elements:h}=e,{mainAxis:f=!0,crossAxis:g=!0,fallbackPlacements:y,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:v=!0,..._}=Rs(n,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const A=Ds(s),E=di(c),k=Ds(c)===c,P=await(u.isRTL==null?void 0:u.isRTL(h.floating)),N=y||(k||!v?[gd(c)]:aR(c)),R=S!=="none";!y&&R&&N.push(...cR(c,v,S,P));const M=[c,...N],$=await Fl(e,_),G=[];let F=((r=i.flip)==null?void 0:r.overflows)||[];if(f&&G.push($[A]),g){const W=oR(s,a,P);G.push($[W[0]],$[W[1]])}if(F=[...F,{placement:s,overflows:G}],!G.every(W=>W<=0)){var V,X;const W=(((V=i.flip)==null?void 0:V.index)||0)+1,oe=M[W];if(oe)return{data:{index:W,overflows:F},reset:{placement:oe}};let K=(X=F.filter(z=>z.overflows[0]<=0).sort((z,O)=>z.overflows[1]-O.overflows[1])[0])==null?void 0:X.placement;if(!K)switch(w){case"bestFit":{var Z;const z=(Z=F.filter(O=>{if(R){const ee=di(O.placement);return ee===E||ee==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(ee=>ee>0).reduce((ee,te)=>ee+te,0)]).sort((O,ee)=>O[1]-ee[1])[0])==null?void 0:Z[0];z&&(K=z);break}case"initialPlacement":K=c;break}if(s!==K)return{reset:{placement:K}}}return{}}}};function Fw(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function Bw(n){return rR.some(e=>n[e]>=0)}const pR=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=Rs(n,e);switch(r){case"referenceHidden":{const i=await Fl(e,{...s,elementContext:"reference"}),a=Fw(i,t.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:Bw(a)}}}case"escaped":{const i=await Fl(e,{...s,altBoundary:!0}),a=Fw(i,t.floating);return{data:{escapedOffsets:a,escaped:Bw(a)}}}default:return{}}}}};async function mR(n,e){const{placement:t,platform:r,elements:s}=n,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=Ds(t),c=Ca(t),u=di(t)==="y",h=["left","top"].includes(a)?-1:1,f=i&&u?-1:1,g=Rs(e,n);let{mainAxis:y,crossAxis:w,alignmentAxis:S}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return c&&typeof S=="number"&&(w=c==="end"?S*-1:S),u?{x:w*f,y:y*h}:{x:y*h,y:w*f}}const gR=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:i,placement:a,middlewareData:c}=e,u=await mR(e,n);return a===((t=c.offset)==null?void 0:t.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:s+u.x,y:i+u.y,data:{...u,placement:a}}}}},yR=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:c={fn:_=>{let{x:A,y:E}=_;return{x:A,y:E}}},...u}=Rs(n,e),h={x:t,y:r},f=await Fl(e,u),g=di(Ds(s)),y=ag(g);let w=h[y],S=h[g];if(i){const _=y==="y"?"top":"left",A=y==="y"?"bottom":"right",E=w+f[_],k=w-f[A];w=gm(E,w,k)}if(a){const _=g==="y"?"top":"left",A=g==="y"?"bottom":"right",E=S+f[_],k=S-f[A];S=gm(E,S,k)}const v=c.fn({...e,[y]:w,[g]:S});return{...v,data:{x:v.x-t,y:v.y-r,enabled:{[y]:i,[g]:a}}}}}},vR=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:i,middlewareData:a}=e,{offset:c=0,mainAxis:u=!0,crossAxis:h=!0}=Rs(n,e),f={x:t,y:r},g=di(s),y=ag(g);let w=f[y],S=f[g];const v=Rs(c,e),_=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(u){const k=y==="y"?"height":"width",P=i.reference[y]-i.floating[k]+_.mainAxis,N=i.reference[y]+i.reference[k]-_.mainAxis;w<P?w=P:w>N&&(w=N)}if(h){var A,E;const k=y==="y"?"width":"height",P=["top","left"].includes(Ds(s)),N=i.reference[g]-i.floating[k]+(P&&((A=a.offset)==null?void 0:A[g])||0)+(P?0:_.crossAxis),R=i.reference[g]+i.reference[k]+(P?0:((E=a.offset)==null?void 0:E[g])||0)-(P?_.crossAxis:0);S<N?S=N:S>R&&(S=R)}return{[y]:w,[g]:S}}}},xR=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:i,platform:a,elements:c}=e,{apply:u=()=>{},...h}=Rs(n,e),f=await Fl(e,h),g=Ds(s),y=Ca(s),w=di(s)==="y",{width:S,height:v}=i.floating;let _,A;g==="top"||g==="bottom"?(_=g,A=y===(await(a.isRTL==null?void 0:a.isRTL(c.floating))?"start":"end")?"left":"right"):(A=g,_=y==="end"?"top":"bottom");const E=v-f.top-f.bottom,k=S-f.left-f.right,P=ui(v-f[_],E),N=ui(S-f[A],k),R=!e.middlewareData.shift;let M=P,$=N;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&($=k),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(M=E),R&&!y){const F=Jn(f.left,0),V=Jn(f.right,0),X=Jn(f.top,0),Z=Jn(f.bottom,0);w?$=S-2*(F!==0||V!==0?F+V:Jn(f.left,f.right)):M=v-2*(X!==0||Z!==0?X+Z:Jn(f.top,f.bottom))}await u({...e,availableWidth:$,availableHeight:M});const G=await a.getDimensions(c.floating);return S!==G.width||v!==G.height?{reset:{rects:!0}}:{}}}};function Xd(){return typeof window<"u"}function Ea(n){return __(n)?(n.nodeName||"").toLowerCase():"#document"}function nr(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function ds(n){var e;return(e=(__(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function __(n){return Xd()?n instanceof Node||n instanceof nr(n).Node:!1}function Ir(n){return Xd()?n instanceof Element||n instanceof nr(n).Element:!1}function is(n){return Xd()?n instanceof HTMLElement||n instanceof nr(n).HTMLElement:!1}function $w(n){return!Xd()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof nr(n).ShadowRoot}function dc(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=jr(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(s)}function wR(n){return["table","td","th"].includes(Ea(n))}function Kd(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function ug(n){const e=dg(),t=Ir(n)?jr(n):n;return["transform","translate","scale","rotate","perspective"].some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function bR(n){let e=hi(n);for(;is(e)&&!da(e);){if(ug(e))return e;if(Kd(e))return null;e=hi(e)}return null}function dg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function da(n){return["html","body","#document"].includes(Ea(n))}function jr(n){return nr(n).getComputedStyle(n)}function Qd(n){return Ir(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function hi(n){if(Ea(n)==="html")return n;const e=n.assignedSlot||n.parentNode||$w(n)&&n.host||ds(n);return $w(e)?e.host:e}function S_(n){const e=hi(n);return da(e)?n.ownerDocument?n.ownerDocument.body:n.body:is(e)&&dc(e)?e:S_(e)}function Bl(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=S_(n),i=s===((r=n.ownerDocument)==null?void 0:r.body),a=nr(s);if(i){const c=vm(a);return e.concat(a,a.visualViewport||[],dc(s)?s:[],c&&t?Bl(c):[])}return e.concat(s,Bl(s,[],t))}function vm(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function A_(n){const e=jr(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=is(n),i=s?n.offsetWidth:t,a=s?n.offsetHeight:r,c=md(t)!==i||md(r)!==a;return c&&(t=i,r=a),{width:t,height:r,$:c}}function hg(n){return Ir(n)?n:n.contextElement}function na(n){const e=hg(n);if(!is(e))return ns(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:i}=A_(e);let a=(i?md(t.width):t.width)/r,c=(i?md(t.height):t.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!c||!Number.isFinite(c))&&(c=1),{x:a,y:c}}const _R=ns(0);function C_(n){const e=nr(n);return!dg()||!e.visualViewport?_R:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function SR(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==nr(n)?!1:e}function Yi(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),i=hg(n);let a=ns(1);e&&(r?Ir(r)&&(a=na(r)):a=na(n));const c=SR(i,t,r)?C_(i):ns(0);let u=(s.left+c.x)/a.x,h=(s.top+c.y)/a.y,f=s.width/a.x,g=s.height/a.y;if(i){const y=nr(i),w=r&&Ir(r)?nr(r):r;let S=y,v=vm(S);for(;v&&r&&w!==S;){const _=na(v),A=v.getBoundingClientRect(),E=jr(v),k=A.left+(v.clientLeft+parseFloat(E.paddingLeft))*_.x,P=A.top+(v.clientTop+parseFloat(E.paddingTop))*_.y;u*=_.x,h*=_.y,f*=_.x,g*=_.y,u+=k,h+=P,S=nr(v),v=vm(S)}}return yd({width:f,height:g,x:u,y:h})}function fg(n,e){const t=Qd(n).scrollLeft;return e?e.left+t:Yi(ds(n)).left+t}function E_(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),s=r.left+e.scrollLeft-(t?0:fg(n,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function AR(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const i=s==="fixed",a=ds(r),c=e?Kd(e.floating):!1;if(r===a||c&&i)return t;let u={scrollLeft:0,scrollTop:0},h=ns(1);const f=ns(0),g=is(r);if((g||!g&&!i)&&((Ea(r)!=="body"||dc(a))&&(u=Qd(r)),is(r))){const w=Yi(r);h=na(r),f.x=w.x+r.clientLeft,f.y=w.y+r.clientTop}const y=a&&!g&&!i?E_(a,u,!0):ns(0);return{width:t.width*h.x,height:t.height*h.y,x:t.x*h.x-u.scrollLeft*h.x+f.x+y.x,y:t.y*h.y-u.scrollTop*h.y+f.y+y.y}}function CR(n){return Array.from(n.getClientRects())}function ER(n){const e=ds(n),t=Qd(n),r=n.ownerDocument.body,s=Jn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Jn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-t.scrollLeft+fg(n);const c=-t.scrollTop;return jr(r).direction==="rtl"&&(a+=Jn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:c}}function TR(n,e){const t=nr(n),r=ds(n),s=t.visualViewport;let i=r.clientWidth,a=r.clientHeight,c=0,u=0;if(s){i=s.width,a=s.height;const h=dg();(!h||h&&e==="fixed")&&(c=s.offsetLeft,u=s.offsetTop)}return{width:i,height:a,x:c,y:u}}function kR(n,e){const t=Yi(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,i=is(n)?na(n):ns(1),a=n.clientWidth*i.x,c=n.clientHeight*i.y,u=s*i.x,h=r*i.y;return{width:a,height:c,x:u,y:h}}function zw(n,e,t){let r;if(e==="viewport")r=TR(n,t);else if(e==="document")r=ER(ds(n));else if(Ir(e))r=kR(e,t);else{const s=C_(n);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return yd(r)}function T_(n,e){const t=hi(n);return t===e||!Ir(t)||da(t)?!1:jr(t).position==="fixed"||T_(t,e)}function PR(n,e){const t=e.get(n);if(t)return t;let r=Bl(n,[],!1).filter(c=>Ir(c)&&Ea(c)!=="body"),s=null;const i=jr(n).position==="fixed";let a=i?hi(n):n;for(;Ir(a)&&!da(a);){const c=jr(a),u=ug(a);!u&&c.position==="fixed"&&(s=null),(i?!u&&!s:!u&&c.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||dc(a)&&!u&&T_(n,a))?r=r.filter(f=>f!==a):s=c,a=hi(a)}return e.set(n,r),r}function NR(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const a=[...t==="clippingAncestors"?Kd(e)?[]:PR(e,this._c):[].concat(t),r],c=a[0],u=a.reduce((h,f)=>{const g=zw(e,f,s);return h.top=Jn(g.top,h.top),h.right=ui(g.right,h.right),h.bottom=ui(g.bottom,h.bottom),h.left=Jn(g.left,h.left),h},zw(e,c,s));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function RR(n){const{width:e,height:t}=A_(n);return{width:e,height:t}}function DR(n,e,t){const r=is(e),s=ds(e),i=t==="fixed",a=Yi(n,!0,i,e);let c={scrollLeft:0,scrollTop:0};const u=ns(0);if(r||!r&&!i)if((Ea(e)!=="body"||dc(s))&&(c=Qd(e)),r){const y=Yi(e,!0,i,e);u.x=y.x+e.clientLeft,u.y=y.y+e.clientTop}else s&&(u.x=fg(s));const h=s&&!r&&!i?E_(s,c):ns(0),f=a.left+c.scrollLeft-u.x-h.x,g=a.top+c.scrollTop-u.y-h.y;return{x:f,y:g,width:a.width,height:a.height}}function Tp(n){return jr(n).position==="static"}function Vw(n,e){if(!is(n)||jr(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return ds(n)===t&&(t=t.ownerDocument.body),t}function k_(n,e){const t=nr(n);if(Kd(n))return t;if(!is(n)){let s=hi(n);for(;s&&!da(s);){if(Ir(s)&&!Tp(s))return s;s=hi(s)}return t}let r=Vw(n,e);for(;r&&wR(r)&&Tp(r);)r=Vw(r,e);return r&&da(r)&&Tp(r)&&!ug(r)?t:r||bR(n)||t}const MR=async function(n){const e=this.getOffsetParent||k_,t=this.getDimensions,r=await t(n.floating);return{reference:DR(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function IR(n){return jr(n).direction==="rtl"}const jR={convertOffsetParentRelativeRectToViewportRelativeRect:AR,getDocumentElement:ds,getClippingRect:NR,getOffsetParent:k_,getElementRects:MR,getClientRects:CR,getDimensions:RR,getScale:na,isElement:Ir,isRTL:IR};function P_(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function OR(n,e){let t=null,r;const s=ds(n);function i(){var c;clearTimeout(r),(c=t)==null||c.disconnect(),t=null}function a(c,u){c===void 0&&(c=!1),u===void 0&&(u=1),i();const h=n.getBoundingClientRect(),{left:f,top:g,width:y,height:w}=h;if(c||e(),!y||!w)return;const S=$u(g),v=$u(s.clientWidth-(f+y)),_=$u(s.clientHeight-(g+w)),A=$u(f),k={rootMargin:-S+"px "+-v+"px "+-_+"px "+-A+"px",threshold:Jn(0,ui(1,u))||1};let P=!0;function N(R){const M=R[0].intersectionRatio;if(M!==u){if(!P)return a();M?a(!1,M):r=setTimeout(()=>{a(!1,1e-7)},1e3)}M===1&&!P_(h,n.getBoundingClientRect())&&a(),P=!1}try{t=new IntersectionObserver(N,{...k,root:s.ownerDocument})}catch{t=new IntersectionObserver(N,k)}t.observe(n)}return a(!0),i}function LR(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,h=hg(n),f=s||i?[...h?Bl(h):[],...Bl(e)]:[];f.forEach(A=>{s&&A.addEventListener("scroll",t,{passive:!0}),i&&A.addEventListener("resize",t)});const g=h&&c?OR(h,t):null;let y=-1,w=null;a&&(w=new ResizeObserver(A=>{let[E]=A;E&&E.target===h&&w&&(w.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var k;(k=w)==null||k.observe(e)})),t()}),h&&!u&&w.observe(h),w.observe(e));let S,v=u?Yi(n):null;u&&_();function _(){const A=Yi(n);v&&!P_(v,A)&&t(),v=A,S=requestAnimationFrame(_)}return t(),()=>{var A;f.forEach(E=>{s&&E.removeEventListener("scroll",t),i&&E.removeEventListener("resize",t)}),g?.(),(A=w)==null||A.disconnect(),w=null,u&&cancelAnimationFrame(S)}}const FR=gR,BR=yR,$R=fR,zR=xR,VR=pR,Uw=hR,UR=vR,HR=(n,e,t)=>{const r=new Map,s={platform:jR,...t},i={...s.platform,_c:r};return dR(n,e,{...s,platform:i})};var rd=typeof document<"u"?C.useLayoutEffect:C.useEffect;function vd(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!vd(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const i=s[r];if(!(i==="_owner"&&n.$$typeof)&&!vd(n[i],e[i]))return!1}return!0}return n!==n&&e!==e}function N_(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function Hw(n,e){const t=N_(n);return Math.round(e*t)/t}function kp(n){const e=C.useRef(n);return rd(()=>{e.current=n}),e}function WR(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:c=!0,whileElementsMounted:u,open:h}=n,[f,g]=C.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[y,w]=C.useState(r);vd(y,r)||w(r);const[S,v]=C.useState(null),[_,A]=C.useState(null),E=C.useCallback(O=>{O!==R.current&&(R.current=O,v(O))},[]),k=C.useCallback(O=>{O!==M.current&&(M.current=O,A(O))},[]),P=i||S,N=a||_,R=C.useRef(null),M=C.useRef(null),$=C.useRef(f),G=u!=null,F=kp(u),V=kp(s),X=kp(h),Z=C.useCallback(()=>{if(!R.current||!M.current)return;const O={placement:e,strategy:t,middleware:y};V.current&&(O.platform=V.current),HR(R.current,M.current,O).then(ee=>{const te={...ee,isPositioned:X.current!==!1};W.current&&!vd($.current,te)&&($.current=te,_a.flushSync(()=>{g(te)}))})},[y,e,t,V,X]);rd(()=>{h===!1&&$.current.isPositioned&&($.current.isPositioned=!1,g(O=>({...O,isPositioned:!1})))},[h]);const W=C.useRef(!1);rd(()=>(W.current=!0,()=>{W.current=!1}),[]),rd(()=>{if(P&&(R.current=P),N&&(M.current=N),P&&N){if(F.current)return F.current(P,N,Z);Z()}},[P,N,Z,F,G]);const oe=C.useMemo(()=>({reference:R,floating:M,setReference:E,setFloating:k}),[E,k]),K=C.useMemo(()=>({reference:P,floating:N}),[P,N]),z=C.useMemo(()=>{const O={position:t,left:0,top:0};if(!K.floating)return O;const ee=Hw(K.floating,f.x),te=Hw(K.floating,f.y);return c?{...O,transform:"translate("+ee+"px, "+te+"px)",...N_(K.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:ee,top:te}},[t,c,K.floating,f.x,f.y]);return C.useMemo(()=>({...f,update:Z,refs:oe,elements:K,floatingStyles:z}),[f,Z,oe,K,z])}const GR=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?Uw({element:r.current,padding:s}).fn(t):{}:r?Uw({element:r,padding:s}).fn(t):{}}}},qR=(n,e)=>({...FR(n),options:[n,e]}),YR=(n,e)=>({...BR(n),options:[n,e]}),XR=(n,e)=>({...UR(n),options:[n,e]}),KR=(n,e)=>({...$R(n),options:[n,e]}),QR=(n,e)=>({...zR(n),options:[n,e]}),ZR=(n,e)=>({...VR(n),options:[n,e]}),JR=(n,e)=>({...GR(n),options:[n,e]});var eD="Arrow",R_=C.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...i}=n;return p.jsx(Ve.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});R_.displayName=eD;var tD=R_;function nD(n){const[e,t]=C.useState(void 0);return en(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,c;if("borderBoxSize"in i){const u=i.borderBoxSize,h=Array.isArray(u)?u[0]:u;a=h.inlineSize,c=h.blockSize}else a=n.offsetWidth,c=n.offsetHeight;t({width:a,height:c})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var pg="Popper",[D_,Ta]=Br(pg),[rD,M_]=D_(pg),I_=n=>{const{__scopePopper:e,children:t}=n,[r,s]=C.useState(null);return p.jsx(rD,{scope:e,anchor:r,onAnchorChange:s,children:t})};I_.displayName=pg;var j_="PopperAnchor",O_=C.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,i=M_(j_,t),a=C.useRef(null),c=mt(e,a);return C.useEffect(()=>{i.onAnchorChange(r?.current||a.current)}),r?null:p.jsx(Ve.div,{...s,ref:c})});O_.displayName=j_;var mg="PopperContent",[sD,iD]=D_(mg),L_=C.forwardRef((n,e)=>{const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:c=0,avoidCollisions:u=!0,collisionBoundary:h=[],collisionPadding:f=0,sticky:g="partial",hideWhenDetached:y=!1,updatePositionStrategy:w="optimized",onPlaced:S,...v}=n,_=M_(mg,t),[A,E]=C.useState(null),k=mt(e,ie=>E(ie)),[P,N]=C.useState(null),R=nD(P),M=R?.width??0,$=R?.height??0,G=r+(i!=="center"?"-"+i:""),F=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},V=Array.isArray(h)?h:[h],X=V.length>0,Z={padding:F,boundary:V.filter(aD),altBoundary:X},{refs:W,floatingStyles:oe,placement:K,isPositioned:z,middlewareData:O}=WR({strategy:"fixed",placement:G,whileElementsMounted:(...ie)=>LR(...ie,{animationFrame:w==="always"}),elements:{reference:_.anchor},middleware:[qR({mainAxis:s+$,alignmentAxis:a}),u&&YR({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?XR():void 0,...Z}),u&&KR({...Z}),QR({...Z,apply:({elements:ie,rects:Ae,availableWidth:$e,availableHeight:Ue})=>{const{width:Je,height:ut}=Ae.reference,Mt=ie.floating.style;Mt.setProperty("--radix-popper-available-width",`${$e}px`),Mt.setProperty("--radix-popper-available-height",`${Ue}px`),Mt.setProperty("--radix-popper-anchor-width",`${Je}px`),Mt.setProperty("--radix-popper-anchor-height",`${ut}px`)}}),P&&JR({element:P,padding:c}),lD({arrowWidth:M,arrowHeight:$}),y&&ZR({strategy:"referenceHidden",...Z})]}),[ee,te]=$_(K),L=Mn(S);en(()=>{z&&L?.()},[z,L]);const Q=O.arrow?.x,fe=O.arrow?.y,Te=O.arrow?.centerOffset!==0,[De,Me]=C.useState();return en(()=>{A&&Me(window.getComputedStyle(A).zIndex)},[A]),p.jsx("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...oe,transform:z?oe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:De,"--radix-popper-transform-origin":[O.transformOrigin?.x,O.transformOrigin?.y].join(" "),...O.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:p.jsx(sD,{scope:t,placedSide:ee,onArrowChange:N,arrowX:Q,arrowY:fe,shouldHideArrow:Te,children:p.jsx(Ve.div,{"data-side":ee,"data-align":te,...v,ref:k,style:{...v.style,animation:z?void 0:"none"}})})})});L_.displayName=mg;var F_="PopperArrow",oD={top:"bottom",right:"left",bottom:"top",left:"right"},B_=C.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,i=iD(F_,r),a=oD[i.placedSide];return p.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:p.jsx(tD,{...s,ref:t,style:{...s.style,display:"block"}})})});B_.displayName=F_;function aD(n){return n!==null}var lD=n=>({name:"transformOrigin",options:n,fn(e){const{placement:t,rects:r,middlewareData:s}=e,a=s.arrow?.centerOffset!==0,c=a?0:n.arrowWidth,u=a?0:n.arrowHeight,[h,f]=$_(t),g={start:"0%",center:"50%",end:"100%"}[f],y=(s.arrow?.x??0)+c/2,w=(s.arrow?.y??0)+u/2;let S="",v="";return h==="bottom"?(S=a?g:`${y}px`,v=`${-u}px`):h==="top"?(S=a?g:`${y}px`,v=`${r.floating.height+u}px`):h==="right"?(S=`${-u}px`,v=a?g:`${w}px`):h==="left"&&(S=`${r.floating.width+u}px`,v=a?g:`${w}px`),{data:{x:S,y:v}}}});function $_(n){const[e,t="center"]=n.split("-");return[e,t]}var z_=I_,Zd=O_,gg=L_,yg=B_,[Jd,pz]=Br("Tooltip",[Ta]),vg=Ta(),V_="TooltipProvider",cD=700,Ww="tooltip.open",[uD,U_]=Jd(V_),H_=n=>{const{__scopeTooltip:e,delayDuration:t=cD,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=n,a=C.useRef(!0),c=C.useRef(!1),u=C.useRef(0);return C.useEffect(()=>{const h=u.current;return()=>window.clearTimeout(h)},[]),p.jsx(uD,{scope:e,isOpenDelayedRef:a,delayDuration:t,onOpen:C.useCallback(()=>{window.clearTimeout(u.current),a.current=!1},[]),onClose:C.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:C.useCallback(h=>{c.current=h},[]),disableHoverableContent:s,children:i})};H_.displayName=V_;var W_="Tooltip",[mz,eh]=Jd(W_),xm="TooltipTrigger",dD=C.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=eh(xm,t),i=U_(xm,t),a=vg(t),c=C.useRef(null),u=mt(e,c,s.onTriggerChange),h=C.useRef(!1),f=C.useRef(!1),g=C.useCallback(()=>h.current=!1,[]);return C.useEffect(()=>()=>document.removeEventListener("pointerup",g),[g]),p.jsx(Zd,{asChild:!0,...a,children:p.jsx(Ve.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:u,onPointerMove:ke(n.onPointerMove,y=>{y.pointerType!=="touch"&&!f.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),f.current=!0)}),onPointerLeave:ke(n.onPointerLeave,()=>{s.onTriggerLeave(),f.current=!1}),onPointerDown:ke(n.onPointerDown,()=>{s.open&&s.onClose(),h.current=!0,document.addEventListener("pointerup",g,{once:!0})}),onFocus:ke(n.onFocus,()=>{h.current||s.onOpen()}),onBlur:ke(n.onBlur,s.onClose),onClick:ke(n.onClick,s.onClose)})})});dD.displayName=xm;var hD="TooltipPortal",[gz,fD]=Jd(hD,{forceMount:void 0}),ha="TooltipContent",G_=C.forwardRef((n,e)=>{const t=fD(ha,n.__scopeTooltip),{forceMount:r=t.forceMount,side:s="top",...i}=n,a=eh(ha,n.__scopeTooltip);return p.jsx(Is,{present:r||a.open,children:a.disableHoverableContent?p.jsx(q_,{side:s,...i,ref:e}):p.jsx(pD,{side:s,...i,ref:e})})}),pD=C.forwardRef((n,e)=>{const t=eh(ha,n.__scopeTooltip),r=U_(ha,n.__scopeTooltip),s=C.useRef(null),i=mt(e,s),[a,c]=C.useState(null),{trigger:u,onClose:h}=t,f=s.current,{onPointerInTransitChange:g}=r,y=C.useCallback(()=>{c(null),g(!1)},[g]),w=C.useCallback((S,v)=>{const _=S.currentTarget,A={x:S.clientX,y:S.clientY},E=xD(A,_.getBoundingClientRect()),k=wD(A,E),P=bD(v.getBoundingClientRect()),N=SD([...k,...P]);c(N),g(!0)},[g]);return C.useEffect(()=>()=>y(),[y]),C.useEffect(()=>{if(u&&f){const S=_=>w(_,f),v=_=>w(_,u);return u.addEventListener("pointerleave",S),f.addEventListener("pointerleave",v),()=>{u.removeEventListener("pointerleave",S),f.removeEventListener("pointerleave",v)}}},[u,f,w,y]),C.useEffect(()=>{if(a){const S=v=>{const _=v.target,A={x:v.clientX,y:v.clientY},E=u?.contains(_)||f?.contains(_),k=!_D(A,a);E?y():k&&(y(),h())};return document.addEventListener("pointermove",S),()=>document.removeEventListener("pointermove",S)}},[u,f,a,h,y]),p.jsx(q_,{...n,ref:i})}),[mD,gD]=Jd(W_,{isInside:!1}),yD=uP("TooltipContent"),q_=C.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:a,...c}=n,u=eh(ha,t),h=vg(t),{onClose:f}=u;return C.useEffect(()=>(document.addEventListener(Ww,f),()=>document.removeEventListener(Ww,f)),[f]),C.useEffect(()=>{if(u.trigger){const g=y=>{y.target?.contains(u.trigger)&&f()};return window.addEventListener("scroll",g,{capture:!0}),()=>window.removeEventListener("scroll",g,{capture:!0})}},[u.trigger,f]),p.jsx(Sa,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:g=>g.preventDefault(),onDismiss:f,children:p.jsxs(gg,{"data-state":u.stateAttribute,...h,...c,ref:e,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx(yD,{children:r}),p.jsx(mD,{scope:t,isInside:!0,children:p.jsx(NP,{id:u.contentId,role:"tooltip",children:s||r})})]})})});G_.displayName=ha;var Y_="TooltipArrow",vD=C.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=vg(t);return gD(Y_,t).isInside?null:p.jsx(yg,{...s,...r,ref:e})});vD.displayName=Y_;function xD(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),s=Math.abs(e.right-n.x),i=Math.abs(e.left-n.x);switch(Math.min(t,r,s,i)){case i:return"left";case s:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function wD(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function bD(n){const{top:e,right:t,bottom:r,left:s}=n;return[{x:s,y:e},{x:t,y:e},{x:t,y:r},{x:s,y:r}]}function _D(n,e){const{x:t,y:r}=n;let s=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const c=e[i].x,u=e[i].y,h=e[a].x,f=e[a].y;u>r!=f>r&&t<(h-c)*(r-u)/(f-u)+c&&(s=!s)}return s}function SD(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),AD(e)}function AD(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const s=n[r];for(;e.length>=2;){const i=e[e.length-1],a=e[e.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const s=n[r];for(;t.length>=2;){const i=t[t.length-1],a=t[t.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var CD=H_,X_=G_;const ED=CD,TD=C.forwardRef(({className:n,sideOffset:e=4,...t},r)=>p.jsx(X_,{ref:r,sideOffset:e,className:Fe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",n),...t}));TD.displayName=X_.displayName;const ct=C.forwardRef(({className:n,...e},t)=>p.jsx("div",{ref:t,className:Fe("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));ct.displayName="Card";const vt=C.forwardRef(({className:n,...e},t)=>p.jsx("div",{ref:t,className:Fe("flex flex-col space-y-1.5 p-6",n),...e}));vt.displayName="CardHeader";const xt=C.forwardRef(({className:n,...e},t)=>p.jsx("div",{ref:t,className:Fe("text-2xl font-semibold leading-none tracking-tight",n),...e}));xt.displayName="CardTitle";const wm=C.forwardRef(({className:n,...e},t)=>p.jsx("div",{ref:t,className:Fe("text-sm text-muted-foreground",n),...e}));wm.displayName="CardDescription";const at=C.forwardRef(({className:n,...e},t)=>p.jsx("div",{ref:t,className:Fe("p-6 pt-0",n),...e}));at.displayName="CardContent";const kD=C.forwardRef(({className:n,...e},t)=>p.jsx("div",{ref:t,className:Fe("flex items-center p-6 pt-0",n),...e}));kD.displayName="CardFooter";const rs=C.forwardRef(({className:n,type:e,...t},r)=>p.jsx("input",{type:e,className:Fe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));rs.displayName="Input";const bm=qd("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),lt=C.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...s},i)=>{const a=r?M0:"button";return p.jsx(a,{className:Fe(bm({variant:e,size:t,className:n})),ref:i,...s})});lt.displayName="Button";const PD=qd("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function on({className:n,variant:e,...t}){return p.jsx("div",{className:Fe(PD({variant:e}),n),...t})}var xg="Avatar",[ND,yz]=Br(xg),[RD,K_]=ND(xg),Q_=C.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[s,i]=C.useState("idle");return p.jsx(RD,{scope:t,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:p.jsx(Ve.span,{...r,ref:e})})});Q_.displayName=xg;var Z_="AvatarImage",J_=C.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:s=()=>{},...i}=n,a=K_(Z_,t),c=DD(r,i),u=Mn(h=>{s(h),a.onImageLoadingStatusChange(h)});return en(()=>{c!=="idle"&&u(c)},[c,u]),c==="loaded"?p.jsx(Ve.img,{...i,ref:e,src:r}):null});J_.displayName=Z_;var eS="AvatarFallback",tS=C.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...s}=n,i=K_(eS,t),[a,c]=C.useState(r===void 0);return C.useEffect(()=>{if(r!==void 0){const u=window.setTimeout(()=>c(!0),r);return()=>window.clearTimeout(u)}},[r]),a&&i.imageLoadingStatus!=="loaded"?p.jsx(Ve.span,{...s,ref:e}):null});tS.displayName=eS;function Gw(n,e){return n?e?(n.src!==e&&(n.src=e),n.complete&&n.naturalWidth>0?"loaded":"loading"):"error":"idle"}function DD(n,{referrerPolicy:e,crossOrigin:t}){const r=ID(),s=C.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[a,c]=C.useState(()=>Gw(i,n));return en(()=>{c(Gw(i,n))},[i,n]),en(()=>{const u=g=>()=>{c(g)};if(!i)return;const h=u("loaded"),f=u("error");return i.addEventListener("load",h),i.addEventListener("error",f),e&&(i.referrerPolicy=e),typeof t=="string"&&(i.crossOrigin=t),()=>{i.removeEventListener("load",h),i.removeEventListener("error",f)}},[i,t,e]),a}function MD(){return()=>{}}function ID(){return C.useSyncExternalStore(MD,()=>!0,()=>!1)}var nS=Q_,rS=J_,sS=tS;const th=C.forwardRef(({className:n,...e},t)=>p.jsx(nS,{ref:t,className:Fe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...e}));th.displayName=nS.displayName;const wg=C.forwardRef(({className:n,...e},t)=>p.jsx(rS,{ref:t,className:Fe("aspect-square h-full w-full",n),...e}));wg.displayName=rS.displayName;const nh=C.forwardRef(({className:n,...e},t)=>p.jsx(sS,{ref:t,className:Fe("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...e}));nh.displayName=sS.displayName;function iS(){const[n,e]=C.useState(""),[t]=C.useState("540dd7fe-a72e-4a86-a996-e61ee9eb10c9"),r=ba(),s=C.useRef(null),{data:i=[]}=tr({queryKey:["/api/employees",t,"chat"],enabled:!!t});C.useEffect(()=>{s.current&&(s.current.scrollTop=s.current.scrollHeight)},[i]);const a=Ol({mutationFn:async u=>(await ca("POST",`/api/employees/${t}/chat`,{message:u})).json(),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/employees",t,"chat"]}),e("")}}),c=u=>{u.preventDefault(),n.trim()&&!a.isPending&&a.mutate(n.trim())};return p.jsxs(ct,{className:"h-full flex flex-col",children:[p.jsx(vt,{className:"pb-4",children:p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-primary to-green-500 rounded-full flex items-center justify-center",children:p.jsx(td,{className:"h-4 w-4 text-white"})}),p.jsxs("div",{children:[p.jsx(xt,{className:"text-lg",children:"AI Assistant"}),p.jsx("p",{className:"text-xs text-green-500",children:" Online"})]})]})}),p.jsx(at,{ref:s,className:"flex-1 overflow-y-auto space-y-4 pb-4",children:i.length===0?p.jsx("div",{className:"chat-message",children:p.jsxs("div",{className:"flex space-x-3",children:[p.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-primary to-green-500 rounded-full flex items-center justify-center flex-shrink-0",children:p.jsx(td,{className:"h-4 w-4 text-white"})}),p.jsx("div",{className:"bg-muted p-3 rounded-lg max-w-xs",children:p.jsx("p",{className:"text-sm text-foreground",children:"Hi! I'm here to help with onboarding questions. What would you like to know?"})})]})}):i.map(u=>p.jsx("div",{className:"chat-message","data-testid":`chat-message-${u.id}`,children:u.isFromAI?p.jsxs("div",{className:"flex space-x-3",children:[p.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-primary to-green-500 rounded-full flex items-center justify-center flex-shrink-0",children:p.jsx(td,{className:"h-4 w-4 text-white"})}),p.jsx("div",{className:"bg-muted p-3 rounded-lg max-w-xs",children:p.jsx("p",{className:"text-sm text-foreground",children:u.message})})]}):p.jsxs("div",{className:"flex space-x-3 justify-end",children:[p.jsx("div",{className:"bg-primary p-3 rounded-lg max-w-xs",children:p.jsx("p",{className:"text-sm text-primary-foreground",children:u.message})}),p.jsx(th,{className:"w-8 h-8 flex-shrink-0",children:p.jsx(nh,{children:p.jsx(u_,{className:"h-4 w-4"})})})]})},u.id))}),p.jsx(at,{className:"pt-0",children:p.jsxs("form",{onSubmit:c,className:"flex space-x-2",children:[p.jsx(rs,{"data-testid":"input-chat-message",type:"text",placeholder:"Ask about onboarding, policies, or projects...",value:n,onChange:u=>e(u.target.value),disabled:a.isPending,className:"flex-1"}),p.jsx(lt,{type:"submit","data-testid":"button-send-message",disabled:!n.trim()||a.isPending,size:"icon",children:p.jsx(mN,{className:"h-4 w-4"})})]})})]})}var bg="Progress",_g=100,[jD,vz]=Br(bg),[OD,LD]=jD(bg),oS=C.forwardRef((n,e)=>{const{__scopeProgress:t,value:r=null,max:s,getValueLabel:i=FD,...a}=n;(s||s===0)&&!qw(s)&&console.error(BD(`${s}`,"Progress"));const c=qw(s)?s:_g;r!==null&&!Yw(r,c)&&console.error($D(`${r}`,"Progress"));const u=Yw(r,c)?r:null,h=xd(u)?i(u,c):void 0;return p.jsx(OD,{scope:t,value:u,max:c,children:p.jsx(Ve.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":xd(u)?u:void 0,"aria-valuetext":h,role:"progressbar","data-state":cS(u,c),"data-value":u??void 0,"data-max":c,...a,ref:e})})});oS.displayName=bg;var aS="ProgressIndicator",lS=C.forwardRef((n,e)=>{const{__scopeProgress:t,...r}=n,s=LD(aS,t);return p.jsx(Ve.div,{"data-state":cS(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});lS.displayName=aS;function FD(n,e){return`${Math.round(n/e*100)}%`}function cS(n,e){return n==null?"indeterminate":n===e?"complete":"loading"}function xd(n){return typeof n=="number"}function qw(n){return xd(n)&&!isNaN(n)&&n>0}function Yw(n,e){return xd(n)&&!isNaN(n)&&n<=e&&n>=0}function BD(n,e){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${_g}\`.`}function $D(n,e){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${_g} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var uS=oS,zD=lS;const fa=C.forwardRef(({className:n,value:e,...t},r)=>p.jsx(uS,{ref:r,className:Fe("relative h-4 w-full overflow-hidden rounded-full bg-secondary",n),...t,children:p.jsx(zD,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));fa.displayName=uS.displayName;function VD({employees:n}){return p.jsxs(ct,{children:[p.jsx(vt,{children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx(xt,{children:"Recent Onboarding Progress"}),p.jsx(lt,{variant:"outline",size:"sm","data-testid":"button-view-all-progress",children:"View All"})]})}),p.jsx(at,{children:p.jsxs("div",{className:"space-y-4",children:[n.slice(0,3).map((e,t)=>{const r=[75,92,15],s=[3,7,0],i=r[t]||0,a=s[t]||0;return p.jsxs("div",{"data-testid":`employee-progress-${e.id}`,className:"flex items-center justify-between p-4 bg-muted/30 rounded-lg",children:[p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsxs(th,{className:"w-12 h-12",children:[p.jsx(wg,{src:e.avatarUrl,alt:`${e.name} avatar`}),p.jsx(nh,{children:e.name.split(" ").map(c=>c[0]).join("")})]}),p.jsxs("div",{children:[p.jsx("p",{className:"font-medium text-foreground",children:e.name}),p.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.position," - Started ",a===0?"today":`${a} days ago`]})]})]}),p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsxs("div",{className:"text-right",children:[p.jsxs("p",{className:"text-sm font-medium text-foreground",children:[i,"% Complete"]}),p.jsx(fa,{value:i,className:"w-24 mt-1"})]}),p.jsx(lt,{variant:"ghost",size:"icon","data-testid":`button-chat-${e.id}`,children:p.jsx(pN,{className:"h-5 w-5 text-primary"})})]})]},e.id)}),n.length===0&&p.jsx("div",{className:"text-center py-8",children:p.jsx("p",{className:"text-muted-foreground",children:"No employees in onboarding process"})})]})})]})}const Cn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),_m=[.001,0,0,.001,0,0],Pp=1.35,Kn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ai={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},dS="pdfjs_internal_editor_",ze={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},tt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},UD={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},un={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},sd={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Gt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Uo={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},rh={ERRORS:0,WARNINGS:1,INFOS:5},$l={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},zu={moveTo:0,lineTo:1,curveTo:2,closePath:3},HD={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let sh=rh.WARNINGS;function WD(n){Number.isInteger(n)&&(sh=n)}function GD(){return sh}function ih(n){sh>=rh.INFOS&&console.log(`Info: ${n}`)}function He(n){sh>=rh.WARNINGS&&console.log(`Warning: ${n}`)}function pt(n){throw new Error(n)}function Yt(n,e){n||pt(e)}function qD(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function hS(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"&&(t.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),t.tryConvertEncoding))try{n=ZD(n)}catch{}const r=e?URL.parse(n,e):URL.parse(n);return qD(r)?r:null}function fS(n,e,t=!1){const r=URL.parse(n);return r?(r.hash=e,r.href):t&&hS(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Qe(n,e,t,r=!1){return Object.defineProperty(n,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const ro=function(){function e(t,r){this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class Xw extends ro{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Np extends ro{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Sm extends ro{constructor(e){super(e,"InvalidPDFException")}}class wd extends ro{constructor(e,t,r){super(e,"ResponseException"),this.status=t,this.missing=r}}class YD extends ro{constructor(e){super(e,"FormatError")}}class fi extends ro{constructor(e){super(e,"AbortException")}}function pS(n){(typeof n!="object"||n?.length===void 0)&&pt("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const r=[];for(let s=0;s<e;s+=t){const i=Math.min(s+t,e),a=n.subarray(s,i);r.push(String.fromCharCode.apply(null,a))}return r.join("")}function hc(n){typeof n!="string"&&pt("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=n.charCodeAt(r)&255;return t}function XD(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function KD(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function QD(){try{return new Function(""),!0}catch{return!1}}class mn{static get isLittleEndian(){return Qe(this,"isLittleEndian",KD())}static get isEvalSupported(){return Qe(this,"isEvalSupported",QD())}static get isOffscreenCanvasSupported(){return Qe(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Qe(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Qe(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){return Qe(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Rp=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));class _e{static makeHexColor(e,t,r){return`#${Rp[e]}${Rp[t]}${Rp[r]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,r=0){const s=e[r],i=e[r+1];e[r]=s*t[0]+i*t[2]+t[4],e[r+1]=s*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t,r=0){const s=t[0],i=t[1],a=t[2],c=t[3],u=t[4],h=t[5];for(let f=0;f<6;f+=2){const g=e[r+f],y=e[r+f+1];e[r+f]=g*s+y*a+u,e[r+f+1]=g*i+y*c+h}}static applyInverseTransform(e,t){const r=e[0],s=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(r*t[3]-s*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-r*t[1]+s*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,r){const s=t[0],i=t[1],a=t[2],c=t[3],u=t[4],h=t[5],f=e[0],g=e[1],y=e[2],w=e[3];let S=s*f+u,v=S,_=s*y+u,A=_,E=c*g+h,k=E,P=c*w+h,N=P;if(i!==0||a!==0){const R=i*f,M=i*y,$=a*g,G=a*w;S+=$,A+=$,_+=G,v+=G,E+=R,N+=R,P+=M,k+=M}r[0]=Math.min(r[0],S,_,v,A),r[1]=Math.min(r[1],E,P,k,N),r[2]=Math.max(r[2],S,_,v,A),r[3]=Math.max(r[3],E,P,k,N)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const r=e[0],s=e[1],i=e[2],a=e[3],c=r**2+s**2,u=r*i+s*a,h=i**2+a**2,f=(c+h)/2,g=Math.sqrt(f**2-(c*h-u**2));t[0]=Math.sqrt(f+g||1),t[1]=Math.sqrt(f-g||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>s)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>a?null:[r,i,s,a]}static pointBoundingBox(e,t,r){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}static rectBoundingBox(e,t,r,s,i){i[0]=Math.min(i[0],e,r),i[1]=Math.min(i[1],t,s),i[2]=Math.max(i[2],e,r),i[3]=Math.max(i[3],t,s)}static#e(e,t,r,s,i,a,c,u,h,f){if(h<=0||h>=1)return;const g=1-h,y=h*h,w=y*h,S=g*(g*(g*e+3*h*t)+3*y*r)+w*s,v=g*(g*(g*i+3*h*a)+3*y*c)+w*u;f[0]=Math.min(f[0],S),f[1]=Math.min(f[1],v),f[2]=Math.max(f[2],S),f[3]=Math.max(f[3],v)}static#t(e,t,r,s,i,a,c,u,h,f,g,y){if(Math.abs(h)<1e-12){Math.abs(f)>=1e-12&&this.#e(e,t,r,s,i,a,c,u,-g/f,y);return}const w=f**2-4*g*h;if(w<0)return;const S=Math.sqrt(w),v=2*h;this.#e(e,t,r,s,i,a,c,u,(-f+S)/v,y),this.#e(e,t,r,s,i,a,c,u,(-f-S)/v,y)}static bezierBoundingBox(e,t,r,s,i,a,c,u,h){h[0]=Math.min(h[0],e,c),h[1]=Math.min(h[1],t,u),h[2]=Math.max(h[2],e,c),h[3]=Math.max(h[3],t,u),this.#t(e,r,i,c,t,s,a,u,3*(-e+3*(r-i)+c),6*(e-2*r+i),3*(r-e),h),this.#t(e,r,i,c,t,s,a,u,3*(-t+3*(s-a)+u),6*(t-2*s+a),3*(s-t),h)}}function ZD(n){return decodeURIComponent(escape(n))}let Dp=null,Kw=null;function JD(n){return Dp||(Dp=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Kw=new Map([["","t"]])),n.replaceAll(Dp,(e,t,r)=>t?t.normalize("NFKC"):Kw.get(r))}function mS(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),pS(n)}const Sg="pdfjs_internal_id_";function eM(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[r,s,...i]=t;if(!n(r)&&!Number.isInteger(r)||!e(s))return!1;const a=i.length;let c=!0;switch(s.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;c=!1;break;default:return!1}for(const u of i)if(!(typeof u=="number"||c&&u===null))return!1;return!0}function En(n,e,t){return Math.min(Math.max(n,e),t)}function gS(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(pS(n))}function tM(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):hc(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});const Cs="http://www.w3.org/2000/svg";class pa{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function fc(n,e="text"){if(Cl(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}r(new Error(s.statusText))}},s.send(null)})}class pc{constructor({viewBox:e,userUnit:t,scale:r,rotation:s,offsetX:i=0,offsetY:a=0,dontFlip:c=!1}){this.viewBox=e,this.userUnit=t,this.scale=r,this.rotation=s,this.offsetX=i,this.offsetY=a,r*=t;const u=(e[2]+e[0])/2,h=(e[3]+e[1])/2;let f,g,y,w;switch(s%=360,s<0&&(s+=360),s){case 180:f=-1,g=0,y=0,w=1;break;case 90:f=0,g=1,y=1,w=0;break;case 270:f=0,g=-1,y=-1,w=0;break;case 0:f=1,g=0,y=0,w=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(y=-y,w=-w);let S,v,_,A;f===0?(S=Math.abs(h-e[1])*r+i,v=Math.abs(u-e[0])*r+a,_=(e[3]-e[1])*r,A=(e[2]-e[0])*r):(S=Math.abs(u-e[0])*r+i,v=Math.abs(h-e[1])*r+a,_=(e[2]-e[0])*r,A=(e[3]-e[1])*r),this.transform=[f*r,g*r,y*r,w*r,S-f*r*u-y*r*h,v-g*r*u-w*r*h],this.width=_,this.height=A}get rawDims(){const e=this.viewBox;return Qe(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:s=this.offsetY,dontFlip:i=!1}={}){return new pc({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:s,dontFlip:i})}convertToViewportPoint(e,t){const r=[e,t];return _e.applyTransform(r,this.transform),r}convertToViewportRectangle(e){const t=[e[0],e[1]];_e.applyTransform(t,this.transform);const r=[e[2],e[3]];return _e.applyTransform(r,this.transform),[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){const r=[e,t];return _e.applyInverseTransform(r,this.transform),r}}class Ag extends ro{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function oh(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function Cg(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function nM(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function rM(n,e="document.pdf"){if(typeof n!="string")return e;if(oh(n))return He('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const r=(c=>{try{return new URL(c)}catch{try{return new URL(decodeURIComponent(c))}catch{try{return new URL(c,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(c),"https://foo.bar")}catch{return null}}}}})(n);if(!r)return e;const s=c=>{try{let u=decodeURIComponent(c);return u.includes("/")?(u=u.split("/").at(-1),u.test(/^\.pdf$/i)?u:c):u}catch{return c}},i=/\.pdf$/i,a=r.pathname.split("/").at(-1);if(i.test(a))return s(a);if(r.searchParams.size>0){const c=Array.from(r.searchParams.values()).reverse();for(const h of c)if(i.test(h))return s(h);const u=Array.from(r.searchParams.keys()).reverse();for(const h of u)if(i.test(h))return s(h)}if(r.hash){const u=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(r.hash);if(u)return s(u[0])}return e}class Qw{started=Object.create(null);times=[];time(e){e in this.started&&He(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||He(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:s,end:i}of this.times)e.push(`${r.padEnd(t)} ${i-s}ms
`);return e.join("")}}function Cl(n,e){const t=e?URL.parse(n,e):URL.parse(n);return t?.protocol==="http:"||t?.protocol==="https:"}function vr(n){n.preventDefault()}function qt(n){n.preventDefault(),n.stopPropagation()}function sM(n){console.log("Deprecated API usage: "+n)}class Am{static#e;static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const r=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let c=parseInt(t[5],10);c=c>=0&&c<=59?c:0;let u=parseInt(t[6],10);u=u>=0&&u<=59?u:0;const h=t[7]||"Z";let f=parseInt(t[8],10);f=f>=0&&f<=23?f:0;let g=parseInt(t[9],10)||0;return g=g>=0&&g<=59?g:0,h==="-"?(a+=f,c+=g):h==="+"&&(a-=f,c-=g),new Date(Date.UTC(r,s,i,a,c,u))}}function iM(n,{scale:e=1,rotation:t=0}){const{width:r,height:s}=n.attributes.style,i=[0,0,parseInt(r),parseInt(s)];return new pc({viewBox:i,userUnit:1,scale:e,rotation:t})}function ah(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(He(`Not a valid color format: "${n}"`),[0,0,0])}function oM(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;n.set(t,ah(r))}e.remove()}function Pt(n){const{a:e,b:t,c:r,d:s,e:i,f:a}=n.getTransform();return[e,t,r,s,i,a]}function Xr(n){const{a:e,b:t,c:r,d:s,e:i,f:a}=n.getTransform().invertSelf();return[e,t,r,s,i,a]}function Xi(n,e,t=!1,r=!0){if(e instanceof pc){const{pageWidth:s,pageHeight:i}=e.rawDims,{style:a}=n,c=mn.isCSSRoundSupported,u=`var(--total-scale-factor) * ${s}px`,h=`var(--total-scale-factor) * ${i}px`,f=c?`round(down, ${u}, var(--scale-round-x))`:`calc(${u})`,g=c?`round(down, ${h}, var(--scale-round-y))`:`calc(${h})`;!t||e.rotation%180===0?(a.width=f,a.height=g):(a.width=g,a.height=f)}r&&n.setAttribute("data-main-rotation",e.rotation)}class os{constructor(){const{pixelRatio:e}=os;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,r,s,i=-1){let a=1/0,c=1/0,u=1/0;r=os.capPixels(r,i),r>0&&(a=Math.sqrt(r/(e*t))),s!==-1&&(c=s/e,u=s/t);const h=Math.min(a,c,u);return this.sx>h||this.sy>h?(this.sx=h,this.sy=h,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const r=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,r):r}return e}}const Cm=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class Dl{#e=null;#t=null;#n;#r=null;#i=null;#s=null;#o=null;static#a=null;constructor(e){this.#n=e,Dl.#a||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#n._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",vr,{signal:t}),e.addEventListener("pointerdown",Dl.#l,{signal:t}));const r=this.#r=document.createElement("div");r.className="buttons",e.append(r);const s=this.#n.toolbarPosition;if(s){const{style:i}=e,a=this.#n._uiManager.direction==="ltr"?1-s[0]:s[0];i.insetInlineEnd=`${100*a}%`,i.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#e}static#l(e){e.stopPropagation()}#c(e){this.#n._focusEventsAllowed=!1,qt(e)}#h(e){this.#n._focusEventsAllowed=!0,qt(e)}#u(e){const t=this.#n._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",this.#c.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",vr,{signal:t}),!0)}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#i?.shown(),this.#s?.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=this.#n,r=document.createElement("button");r.classList.add("basic","deleteButton"),r.tabIndex=0,r.setAttribute("data-l10n-id",Dl.#a[e]),this.#u(r)&&r.addEventListener("click",s=>{t.delete()},{signal:t._signal}),this.#r.append(r)}get#f(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#u(t),this.#r.append(t,this.#f),this.#i=e}addComment(e){if(this.#s)return;const t=e.render();t&&(this.#u(t),this.#r.append(t,this.#f),this.#s=e,e.toolbar=this)}addColorPicker(e){if(this.#t)return;this.#t=e;const t=e.renderButton();this.#u(t),this.#r.append(t,this.#f)}async addEditSignatureButton(e){const t=this.#o=await e.renderEditButton(this.#n);this.#u(t),this.#r.append(t,this.#f)}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}updateEditSignatureButton(e){this.#o&&(this.#o.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class aM{#e=null;#t=null;#n;constructor(e){this.#n=e}#r(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar");const t=this.#n._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",vr,{signal:t});const r=this.#e=document.createElement("div");return r.className="buttons",e.append(r),this.#n.hasCommentManager()&&this.#s("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#n.commentSelection("floating_button")}),this.#s("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#n.highlightSelection("floating_button")}),e}#i(e,t){let r=0,s=0;for(const i of e){const a=i.y+i.height;if(a<r)continue;const c=i.x+(t?i.width:0);if(a>r){s=c,r=a;continue}t?c>s&&(s=c):c<s&&(s=c)}return[t?1-s:s,r]}show(e,t,r){const[s,i]=this.#i(t,r),{style:a}=this.#t||=this.#r();e.append(this.#t),a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#s(e,t,r,s){const i=document.createElement("button");i.classList.add("basic",e),i.tabIndex=0,i.setAttribute("data-l10n-id",t);const a=document.createElement("span");i.append(a),a.className="visuallyHidden",a.setAttribute("data-l10n-id",r);const c=this.#n._signal;c instanceof AbortSignal&&!c.aborted&&(i.addEventListener("contextmenu",vr,{signal:c}),i.addEventListener("click",s,{signal:c})),this.#e.append(i)}}function yS(n,e,t){for(const r of t)e.addEventListener(r,n[r].bind(n))}class lM{#e=0;get id(){return`${dS}${this.#e++}`}}class Eg{#e=mS();#t=0;#n=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const i=s.decode().then(()=>(r.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return Qe(this,"_isSVGFittingCanvas",i)}async#r(e,t){this.#n||=new Map;let r=this.#n.get(e);if(r===null)return null;if(r?.bitmap)return r.refCounter+=1,r;try{r||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let s;if(typeof t=="string"?(r.url=t,s=await fc(t,"blob")):t instanceof File?s=r.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const i=Eg._isSVGFittingCanvas,a=new FileReader,c=new Image,u=new Promise((h,f)=>{c.onload=()=>{r.bitmap=c,r.isSvg=!0,h()},a.onload=async()=>{const g=r.svgUrl=a.result;c.src=await i?`${g}#svgView(preserveAspectRatio(none))`:g},c.onerror=a.onerror=f});a.readAsDataURL(s),await u}else r.bitmap=await createImageBitmap(s);r.refCounter=1}catch(s){He(s),r=null}return this.#n.set(e,r),r&&this.#n.set(r.id,r),r}async getFromFile(e){const{lastModified:t,name:r,size:s,type:i}=e;return this.#r(`${t}_${r}_${s}_${i}`,e)}async getFromUrl(e){return this.#r(e,e)}async getFromBlob(e,t){const r=await t;return this.#r(e,r)}async getFromId(e){this.#n||=new Map;const t=this.#n.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:r}=t;return delete t.blobPromise,this.getFromBlob(t.id,r)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#n||=new Map;let r=this.#n.get(e);if(r?.bitmap)return r.refCounter+=1,r;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),r={bitmap:s.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#n.set(e,r),this.#n.set(r.id,r),r}getSvgUrl(e){const t=this.#n.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#n||=new Map;const t=this.#n.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:r}=t;if(!t.url&&!t.file){const s=new OffscreenCanvas(r.width,r.height);s.getContext("bitmaprenderer").transferFromImageBitmap(r),t.blobPromise=s.convertToBlob()}r.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class cM{#e=[];#t=!1;#n;#r=-1;constructor(e=128){this.#n=e}add({cmd:e,undo:t,post:r,mustExec:s,type:i=NaN,overwriteIfSameType:a=!1,keepUndo:c=!1}){if(s&&e(),this.#t)return;const u={cmd:e,undo:t,post:r,type:i};if(this.#r===-1){this.#e.length>0&&(this.#e.length=0),this.#r=0,this.#e.push(u);return}if(a&&this.#e[this.#r].type===i){c&&(u.undo=this.#e[this.#r].undo),this.#e[this.#r]=u;return}const h=this.#r+1;h===this.#n?this.#e.splice(0,1):(this.#r=h,h<this.#e.length&&this.#e.splice(h)),this.#e.push(u)}undo(){if(this.#r===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#r];e(),t?.(),this.#t=!1,this.#r-=1}redo(){if(this.#r<this.#e.length-1){this.#r+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#r];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#r!==-1}hasSomethingToRedo(){return this.#r<this.#e.length-1}cleanType(e){if(this.#r!==-1){for(let t=this.#r;t>=0;t--)if(this.#e[t].type!==e){this.#e.splice(t+1,this.#r-t),this.#r=t;return}this.#e.length=0,this.#r=-1}}destroy(){this.#e=null}}class mc{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=mn.platform;for(const[r,s,i={}]of e)for(const a of r){const c=a.startsWith("mac+");t&&c?(this.callbacks.set(a.slice(4),{callback:s,options:i}),this.allKeys.add(a.split("+").at(-1))):!t&&!c&&(this.callbacks.set(a,{callback:s,options:i}),this.allKeys.add(a.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(this.#e(t));if(!r)return;const{callback:s,options:{bubbles:i=!1,args:a=[],checker:c=null}}=r;c&&!c(e,t)||(s.bind(e,...a,t)(),i||qt(t))}}class Tg{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return oM(e),Qe(this,"_colors",e)}convert(e){const t=ah(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,s]of this._colors)if(s.every((i,a)=>i===t[a]))return Tg._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?_e.makeHexColor(...t):e}}class pi{#e=new AbortController;#t=null;#n=null;#r=new Map;#i=new Map;#s=null;#o=null;#a=null;#l=new cM;#c=null;#h=null;#u=null;#f=0;#m=new Set;#p=null;#d=null;#g=new Set;_editorUndoBar=null;#x=!1;#y=!1;#b=!1;#_=null;#v=null;#S=null;#k=null;#E=!1;#A=null;#D=new lM;#T=!1;#P=!1;#j=!1;#M=null;#I=null;#O=null;#R=null;#B=null;#C=ze.NONE;#w=new Set;#$=null;#z=null;#U=null;#Y=null;#G=null;#q={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#L=[0,0];#H=null;#W=null;#Z=null;#J=null;#F=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=pi.prototype,t=a=>a.#W.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),r=(a,{target:c})=>{if(c instanceof HTMLInputElement){const{type:u}=c;return u!=="text"&&u!=="number"}return!0},s=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return Qe(this,"_keyboardManager",new mc([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:c})=>!(c instanceof HTMLButtonElement)&&a.#W.contains(c)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:c})=>!(c instanceof HTMLButtonElement)&&a.#W.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}constructor(e,t,r,s,i,a,c,u,h,f,g,y,w,S,v,_){const A=this._signal=this.#e.signal;this.#W=e,this.#Z=t,this.#J=r,this.#s=s,this.#c=i,this.#z=a,this.#G=u,this._eventBus=c,c._on("editingaction",this.onEditingAction.bind(this),{signal:A}),c._on("pagechanging",this.onPageChanging.bind(this),{signal:A}),c._on("scalechanging",this.onScaleChanging.bind(this),{signal:A}),c._on("rotationchanging",this.onRotationChanging.bind(this),{signal:A}),c._on("setpreference",this.onSetPreference.bind(this),{signal:A}),c._on("switchannotationeditorparams",E=>this.updateParams(E.type,E.value),{signal:A}),window.addEventListener("pointerdown",()=>{this.#P=!0},{capture:!0,signal:A}),window.addEventListener("pointerup",()=>{this.#P=!1},{capture:!0,signal:A}),this.#le(),this.#he(),this.#te(),this.#o=u.annotationStorage,this.#_=u.filterFactory,this.#U=h,this.#k=f||null,this.#x=g,this.#y=y,this.#b=w,this.#B=S||null,this.viewParameters={realScale:pa.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=v||null,this._supportsPinchToZoom=_!==!1}destroy(){this.#F?.resolve(),this.#F=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#i.values())e.destroy();this.#i.clear(),this.#r.clear(),this.#g.clear(),this.#R?.clear(),this.#t=null,this.#w.clear(),this.#l.destroy(),this.#s?.destroy(),this.#c?.destroy(),this.#z?.destroy(),this.#A?.hide(),this.#A=null,this.#O?.destroy(),this.#O=null,this.#n=null,this.#v&&(clearTimeout(this.#v),this.#v=null),this.#H&&(clearTimeout(this.#H),this.#H=null),this._editorUndoBar?.destroy(),this.#G=null}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#B}get useNewAltTextFlow(){return this.#y}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return Qe(this,"hcmFilter",this.#U?this.#_.addHCMFilter(this.#U.foreground,this.#U.background):"none")}get direction(){return Qe(this,"direction",getComputedStyle(this.#W).direction)}get _highlightColors(){return Qe(this,"_highlightColors",this.#k?new Map(this.#k.split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Qe(this,"highlightColors",null);const t=new Map,r=!!this.#U;for(const[s,i]of e){const a=s.endsWith("_HCM");if(r&&a){t.set(s.replace("_HCM",""),i);continue}!r&&!a&&t.set(s,i)}return Qe(this,"highlightColors",t)}get highlightColorNames(){return Qe(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#u=e}setMainHighlightColorPicker(e){this.#O=e}editAltText(e,t=!1){this.#s?.editAltText(this,e,t)}hasCommentManager(){return!!this.#c}editComment(e,t){this.#c?.open(this,e,t)}getSignature(e){this.#z?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#z}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":this.#b=t;break}}onPageChanging({pageNumber:e}){this.#f=e-1}focusMainContainer(){this.#W.focus()}findParent(e,t){for(const r of this.#i.values()){const{x:s,y:i,width:a,height:c}=r.div.getBoundingClientRect();if(e>=s&&e<=s+a&&t>=i&&t<=i+c)return r}return null}disableUserSelect(e=!1){this.#Z.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#g.add(e)}removeShouldRescale(e){this.#g.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*pa.PDF_TO_CSS_UNITS;for(const t of this.#g)t.onScaleChanging();this.#u?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#Q({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#ee(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const r of this.#i.values())if(r.hasTextLayer(e))return r;return null}highlightSelection(e="",t=!1){const r=document.getSelection();if(!r||r.isCollapsed)return;const{anchorNode:s,anchorOffset:i,focusNode:a,focusOffset:c}=r,u=r.toString(),f=this.#Q(r).closest(".textLayer"),g=this.getSelectionBoxes(f);if(!g)return;r.empty();const y=this.#ee(f),w=this.#C===ze.NONE,S=()=>{const v=y?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:g,anchorNode:s,anchorOffset:i,focusNode:a,focusOffset:c,text:u});w&&this.showAllEditors("highlight",!0,!0),t&&v?.editComment()};if(w){this.switchToMode(ze.HIGHLIGHT,S);return}S()}commentSelection(e=""){this.highlightSelection(e,!0)}#oe(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=this.#Q(e).closest(".textLayer"),s=this.getSelectionBoxes(r);s&&(this.#A||=new aM(this),this.#A.show(r,s,this.direction==="ltr"))}addToAnnotationStorage(e){!e.isEmpty()&&this.#o&&!this.#o.has(e.id)&&this.#o.setValue(e.id,e)}a11yAlert(e,t=null){const r=this.#J;r&&(r.setAttribute("data-l10n-id",e),t?r.setAttribute("data-l10n-args",JSON.stringify(t)):r.removeAttribute("data-l10n-args"))}#ae(){const e=document.getSelection();if(!e||e.isCollapsed){this.#$&&(this.#A?.hide(),this.#$=null,this.#N({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#$)return;const s=this.#Q(e).closest(".textLayer");if(!s){this.#$&&(this.#A?.hide(),this.#$=null,this.#N({hasSelectedText:!1}));return}if(this.#A?.hide(),this.#$=t,this.#N({hasSelectedText:!0}),!(this.#C!==ze.HIGHLIGHT&&this.#C!==ze.NONE)&&(this.#C===ze.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#E=this.isShiftKeyDown,!this.isShiftKeyDown)){const i=this.#C===ze.HIGHLIGHT?this.#ee(s):null;if(i?.toggleDrawing(),this.#P){const a=new AbortController,c=this.combinedSignal(a),u=h=>{h.type==="pointerup"&&h.button!==0||(a.abort(),i?.toggleDrawing(!0),h.type==="pointerup"&&this.#X("main_toolbar"))};window.addEventListener("pointerup",u,{signal:c}),window.addEventListener("blur",u,{signal:c})}else i?.toggleDrawing(!0),this.#X("main_toolbar")}}#X(e=""){this.#C===ze.HIGHLIGHT?this.highlightSelection(e):this.#x&&this.#oe()}#le(){document.addEventListener("selectionchange",this.#ae.bind(this),{signal:this._signal})}#ce(){if(this.#S)return;this.#S=new AbortController;const e=this.combinedSignal(this.#S);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#ue(){this.#S?.abort(),this.#S=null}blur(){if(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#X("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#w)if(t.div.contains(e)){this.#I=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#I)return;const[e,t]=this.#I;this.#I=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#te(){if(this.#M)return;this.#M=new AbortController;const e=this.combinedSignal(this.#M);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#de(){this.#M?.abort(),this.#M=null}#ne(){if(this.#h)return;this.#h=new AbortController;const e=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#re(){this.#h?.abort(),this.#h=null}#he(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#te(),this.#ne()}removeEditListeners(){this.#de(),this.#re()}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const r of this.#d)if(r.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const r of this.#d)if(r.isHandlingMimeForPasting(t.type)){r.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of this.#w){const s=r.serialize(!0);s&&t.push(s)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const a of this.#d)if(a.isHandlingMimeForPasting(i.type)){a.paste(i,this.currentLayer);return}let r=t.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(i){He(`paste: "${i.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const s=this.currentLayer;try{const i=[];for(const u of r){const h=await s.deserialize(u);if(!h)return;i.push(h)}const a=()=>{for(const u of i)this.#se(u);this.#ie(i)},c=()=>{for(const u of i)u.remove()};this.addCommands({cmd:a,undo:c,mustExec:!0})}catch(i){He(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#C!==ze.NONE&&!this.isEditorHandlingKeyboard&&pi._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#X("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#N(e){Object.entries(e).some(([r,s])=>this.#q[r]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#q,e)}),this.#C===ze.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#V([[tt.HIGHLIGHT_FREE,!0]]))}#V(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#ce(),this.#ne(),this.#N({isEditing:this.#C!==ze.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#l.hasSomethingToUndo(),hasSomethingToRedo:this.#l.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ue(),this.#re(),this.#N({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#d){this.#d=e;for(const t of this.#d)this.#V(t.defaultPropertiesToUpdate)}}getId(){return this.#D.id}get currentLayer(){return this.#i.get(this.#f)}getLayer(e){return this.#i.get(e)}get currentPageIndex(){return this.#f}addLayer(e){this.#i.set(e.pageIndex,e),this.#T?e.enable():e.disable()}removeLayer(e){this.#i.delete(e.pageIndex)}async updateMode(e,t=null,r=!1,s=!1,i=!1){if(this.#C!==e&&!(this.#F&&(await this.#F.promise,!this.#F))){if(this.#F=Promise.withResolvers(),this.#u?.commitOrRemove(),this.#C===ze.POPUP&&this.#c?.hideSidebar(),this.#C=e,e===ze.NONE){this.setEditingState(!1),this.#pe(),this._editorUndoBar?.hide(),this.#F.resolve();return}e===ze.SIGNATURE&&await this.#z?.loadSignatures(),e===ze.POPUP&&(this.#n||=await this.#G.getAnnotationsByType(new Set(this.#d.map(a=>a._editorType))),this.#c?.showSidebar(this.#n)),this.setEditingState(!0),await this.#fe(),this.unselectAll();for(const a of this.#i.values())a.updateMode(e);if(!t){r&&this.addNewEditorFromKeyboard(),this.#F.resolve();return}for(const a of this.#r.values())a.annotationElementId===t||a.id===t?(this.setSelected(a),i?a.editComment():s&&a.enterInEditMode()):a.unselect();this.#F.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#C&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(this.#d){switch(e){case tt.CREATE:this.currentLayer.addNewEditor(t);return;case tt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Y||=new Map).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const r of this.#w)r.updateParams(e,t);else for(const r of this.#d)r.updateDefaultParams(e,t)}}showAllEditors(e,t,r=!1){for(const i of this.#r.values())i.editorType===e&&i.show(t);(this.#Y?.get(tt.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#V([[tt.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#j!==e){this.#j=e;for(const t of this.#i.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#fe(){if(!this.#T){this.#T=!0;const e=[];for(const t of this.#i.values())e.push(t.enable());await Promise.all(e);for(const t of this.#r.values())t.enable()}}#pe(){if(this.unselectAll(),this.#T){this.#T=!1;for(const e of this.#i.values())e.disable();for(const e of this.#r.values())e.disable()}}getEditors(e){const t=[];for(const r of this.#r.values())r.pageIndex===e&&t.push(r);return t}getEditor(e){return this.#r.get(e)}addEditor(e){this.#r.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.focusMainContainer(),this.#v=null},0)),this.#r.delete(e.id),e.annotationElementId&&this.#R?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#m.has(e.annotationElementId))&&this.#o?.remove(e.id)}addDeletedAnnotationElement(e){this.#m.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#m.has(e)}removeDeletedAnnotationElement(e){this.#m.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#se(e){const t=this.#i.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#V(e.propertiesToUpdate))}get#me(){let e=null;for(e of this.#w);return e}updateUI(e){this.#me===e&&this.#V(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#V(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#w.has(e)){this.#w.delete(e),e.unselect(),this.#N({hasSelectedEditor:this.hasSelection});return}this.#w.add(e),e.select(),this.#V(e.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.id}),this.#u?.commitOrRemove();for(const t of this.#w)t!==e&&t.unselect();this.#w.clear(),this.#w.add(e),e.select(),this.#V(e.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}isSelected(e){return this.#w.has(e)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(e){e.unselect(),this.#w.delete(e),this.#N({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#l.undo(),this.#N({hasSomethingToUndo:this.#l.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#l.redo(),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:this.#l.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(e){this.#l.add(e),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(e){this.#l.cleanType(e)}#K(){if(this.#r.size===0)return!0;if(this.#r.size===1)for(const e of this.#r.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...this.#w],r=()=>{this._editorUndoBar?.show(s,t.length===1?t[0].editorType:t.length);for(const i of t)i.remove()},s=()=>{for(const i of t)this.#se(i)};this.addCommands({cmd:r,undo:s,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#ie(e){for(const t of this.#w)t.unselect();this.#w.clear();for(const t of e)t.isEmpty()||(this.#w.add(t),t.select());this.#N({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#w)e.commit();this.#ie(this.#r.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#C!==ze.NONE))&&!this.#u?.commitOrRemove()&&this.hasSelection){for(const e of this.#w)e.unselect();this.#w.clear(),this.#N({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;this.#L[0]+=e,this.#L[1]+=t;const[s,i]=this.#L,a=[...this.#w],c=1e3;this.#H&&clearTimeout(this.#H),this.#H=setTimeout(()=>{this.#H=null,this.#L[0]=this.#L[1]=0,this.addCommands({cmd:()=>{for(const u of a)this.#r.has(u.id)&&(u.translateInPage(s,i),u.translationDone())},undo:()=>{for(const u of a)this.#r.has(u.id)&&(u.translateInPage(-s,-i),u.translationDone())},mustExec:!1})},c);for(const u of a)u.translateInPage(e,t),u.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(const e of this.#w)this.#p.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);const e=this.#p;this.#p=null;let t=!1;for(const[{x:s,y:i,pageIndex:a},c]of e)c.newX=s,c.newY=i,c.newPageIndex=a,t||=s!==c.savedX||i!==c.savedY||a!==c.savedPageIndex;if(!t)return!1;const r=(s,i,a,c)=>{if(this.#r.has(s.id)){const u=this.#i.get(c);u?s._setParentAndPosition(u,i,a):(s.pageIndex=c,s.x=i,s.y=a)}};return this.addCommands({cmd:()=>{for(const[s,{newX:i,newY:a,newPageIndex:c}]of e)r(s,i,a,c)},undo:()=>{for(const[s,{savedX:i,savedY:a,savedPageIndex:c}]of e)r(s,i,a,c)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#p)for(const r of this.#p.keys())r.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#C}get imageManager(){return Qe(this,"imageManager",new Eg)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let h=0,f=t.rangeCount;h<f;h++)if(!e.contains(t.getRangeAt(h).commonAncestorContainer))return null;const{x:r,y:s,width:i,height:a}=e.getBoundingClientRect();let c;switch(e.getAttribute("data-main-rotation")){case"90":c=(h,f,g,y)=>({x:(f-s)/a,y:1-(h+g-r)/i,width:y/a,height:g/i});break;case"180":c=(h,f,g,y)=>({x:1-(h+g-r)/i,y:1-(f+y-s)/a,width:g/i,height:y/a});break;case"270":c=(h,f,g,y)=>({x:1-(f+y-s)/a,y:(h-r)/i,width:y/a,height:g/i});break;default:c=(h,f,g,y)=>({x:(h-r)/i,y:(f-s)/a,width:g/i,height:y/a});break}const u=[];for(let h=0,f=t.rangeCount;h<f;h++){const g=t.getRangeAt(h);if(!g.collapsed)for(const{x:y,y:w,width:S,height:v}of g.getClientRects())S===0||v===0||u.push(c(y,w,S,v))}return u.length===0?null:u}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#a||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#a?.delete(e)}renderAnnotationElement(e){const t=this.#a?.get(e.data.id);if(!t)return;const r=this.#o.getRawValue(t);r&&(this.#C===ze.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}setMissingCanvas(e,t,r){const s=this.#R?.get(e);s&&(s.setCanvas(t,r),this.#R.delete(e))}addMissingCanvas(e,t){(this.#R||=new Map).set(e,t)}}class Zr{#e=null;#t=!1;#n=null;#r=null;#i=null;#s=null;#o=!1;#a=null;#l=null;#c=null;#h=null;#u=!1;static#f=null;static _l10n=null;constructor(e){this.#l=e,this.#u=e._uiManager.useNewAltTextFlow,Zr.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){Zr._l10n??=e}async render(){const e=this.#n=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#r=document.createElement("span");e.append(t),this.#u?(e.classList.add("new"),e.setAttribute("data-l10n-id",Zr.#f.missing),t.setAttribute("data-l10n-id",Zr.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=this.#l._uiManager._signal;e.addEventListener("contextmenu",vr,{signal:r}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:r});const s=i=>{i.preventDefault(),this.#l._uiManager.editAltText(this.#l),this.#u&&this.#l._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return e.addEventListener("click",s,{capture:!0,signal:r}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(this.#o=!0,s(i))},{signal:r}),await this.#p(),e}get#m(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#o}),this.#o=!1)}isEmpty(){return this.#u?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#u?this.#e!==null||!!this.#c:this.isEmpty()}get guessedText(){return this.#c}async setGuessedText(e){this.#e===null&&(this.#c=e,this.#h=await Zr._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#p())}toggleAltTextBadge(e=!1){if(!this.#u||this.#e){this.#a?.remove(),this.#a=null;return}if(!this.#a){const t=this.#a=document.createElement("div");t.className="noAltTextBadge",this.#l.div.append(t)}this.#a.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#c===t&&(t=this.#h),{altText:t,decorative:this.#t,guessedText:this.#c,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:r,textWithDisclaimer:s,cancel:i=!1}){r&&(this.#c=r,this.#h=s),!(this.#e===e&&this.#t===t)&&(i||(this.#e=e,this.#t=t),this.#p())}toggle(e=!1){this.#n&&(!e&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#n.disabled=!e)}shown(){this.#l._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#n?.remove(),this.#n=null,this.#r=null,this.#i=null,this.#a?.remove(),this.#a=null}async#p(){const e=this.#n;if(!e)return;if(this.#u){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",Zr.#f[this.#m]),this.#r?.setAttribute("data-l10n-id",Zr.#f[`${this.#m}-label`]),!this.#e){this.#i?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#i?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#i;if(!t){this.#i=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#l.id}`;const s=100,i=this.#l._uiManager._signal;i.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#i.classList.add("show"),this.#l._reportTelemetry({action:"alt_text_tooltip"})},s)},{signal:i}),e.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#i?.classList.remove("show")},{signal:i})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#l.getElementForAltText()?.setAttribute("aria-describedby",t.id)}}class Vu{#e=null;#t=!1;#n=null;#r=null;#i=null;#s=null;#o=!1;constructor(e){this.#n=e,this.toolbar=null}render(){if(!this.#n._uiManager.hasCommentManager())return null;const e=this.#e=document.createElement("button");e.className="comment",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button");const t=this.#n._uiManager._signal;if(!(t instanceof AbortSignal)||t.aborted)return e;e.addEventListener("contextmenu",vr,{signal:t}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:t});const r=s=>{s.preventDefault(),this.edit()};return e.addEventListener("click",r,{capture:!0,signal:t}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(this.#t=!0,r(s))},{signal:t}),e}edit(){const{bottom:e,left:t,right:r}=this.#n.getClientDimensions(),s={top:e};this.#n._uiManager.direction==="ltr"?s.right=r:s.left=t,this.#n._uiManager.editComment(this.#n,s)}finish(){this.#e&&(this.#e.focus({focusVisible:this.#t}),this.#t=!1)}isDeleted(){return this.#o||this.#i===""}hasBeenEdited(){return this.isDeleted()||this.#i!==this.#r}serialize(){return this.data}get data(){return{text:this.#i,date:this.#s,deleted:this.#o}}set data(e){if(e===null){this.#i="",this.#o=!0;return}this.#i=e,this.#s=new Date,this.#o=!1}setInitialText(e){this.#r=e,this.data=e}toggle(e=!1){this.#e&&(this.#e.disabled=!e)}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#i="",this.#s=null,this.#n=null,this.#t=!1,this.#o=!1}}class lh{#e;#t=!1;#n=null;#r;#i;#s;#o;#a=null;#l;#c=null;#h;#u=null;constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:r=null,onPinchStart:s=null,onPinching:i=null,onPinchEnd:a=null,signal:c}){this.#e=e,this.#n=r,this.#r=t,this.#i=s,this.#s=i,this.#o=a,this.#h=new AbortController,this.#l=AbortSignal.any([c,this.#h.signal]),e.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#l})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/os.pixelRatio}#f(e){if(this.#r?.())return;if(e.touches.length===1){if(this.#a)return;const s=this.#a=new AbortController,i=AbortSignal.any([this.#l,s.signal]),a=this.#e,c={capture:!0,signal:i,passive:!1},u=h=>{h.pointerType==="touch"&&(this.#a?.abort(),this.#a=null)};a.addEventListener("pointerdown",h=>{h.pointerType==="touch"&&(qt(h),u(h))},c),a.addEventListener("pointerup",u,c),a.addEventListener("pointercancel",u,c);return}if(!this.#u){this.#u=new AbortController;const s=AbortSignal.any([this.#l,this.#u.signal]),i=this.#e,a={signal:s,capture:!1,passive:!1};i.addEventListener("touchmove",this.#m.bind(this),a);const c=this.#p.bind(this);i.addEventListener("touchend",c,a),i.addEventListener("touchcancel",c,a),a.capture=!0,i.addEventListener("pointerdown",qt,a),i.addEventListener("pointermove",qt,a),i.addEventListener("pointercancel",qt,a),i.addEventListener("pointerup",qt,a),this.#i?.()}if(qt(e),e.touches.length!==2||this.#n?.()){this.#c=null;return}let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]),this.#c={touch0X:t.screenX,touch0Y:t.screenY,touch1X:r.screenX,touch1Y:r.screenY}}#m(e){if(!this.#c||e.touches.length!==2)return;qt(e);let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]);const{screenX:s,screenY:i}=t,{screenX:a,screenY:c}=r,u=this.#c,{touch0X:h,touch0Y:f,touch1X:g,touch1Y:y}=u,w=g-h,S=y-f,v=a-s,_=c-i,A=Math.hypot(v,_)||1,E=Math.hypot(w,S)||1;if(!this.#t&&Math.abs(E-A)<=lh.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(u.touch0X=s,u.touch0Y=i,u.touch1X=a,u.touch1Y=c,!this.#t){this.#t=!0;return}const k=[(s+a)/2,(i+c)/2];this.#s?.(k,E,A)}#p(e){e.touches.length>=2||(this.#u&&(this.#u.abort(),this.#u=null,this.#o?.()),this.#c&&(qt(e),this.#c=null,this.#t=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#a?.abort(),this.#a=null}}class Re{#e=null;#t=null;#n=null;#r=null;#i=!1;#s=null;#o="";#a=!1;#l=null;#c=null;#h=null;#u=null;#f="";#m=!1;#p=null;#d=!1;#g=!1;#x=!1;#y=null;#b=0;#_=0;#v=null;#S=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#k=!1;#E=Re._zIndex++;static _borderLineWidth=-1;static _colorManager=new Tg;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=Re.prototype._resizeWithKeyboard,t=pi.TRANSLATE_SMALL,r=pi.TRANSLATE_BIG;return Qe(this,"_resizerKeyboardManager",new mc([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],Re.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null;const{rotation:t,rawDims:{pageWidth:r,pageHeight:s,pageX:i,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,s],this.pageTranslation=[i,a];const[c,u]=this.parentDimensions;this.x=e.x/c,this.y=e.y/u,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Qe(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new uM({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Re._l10n??=e,Re._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),Re._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);Re._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){pt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#k}set _isDraggable(e){this.#k=e,this.div?.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#E}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):this.#L(),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#m?this.#m=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,s){const[i,a]=this.parentDimensions;[r,s]=this.screenToPageTranslation(r,s),this.x=(e+r)/i,this.y=(t+s)/a,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[r,s]=this.parentDimensions;this.setAt(e*r,t*s,this.width*r,this.height*s),this._onTranslated()}#A([e,t],r,s){[r,s]=this.screenToPageTranslation(r,s),this.x+=r/e,this.y+=s/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#A(this.parentDimensions,e,t)}translateInPage(e,t){this.#p||=[this.x,this.y,this.width,this.height],this.#A(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){this.#p||=[this.x,this.y,this.width,this.height];const{div:r,parentDimensions:[s,i]}=this;if(this.x+=e/s,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:g,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,g,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:c}=this;const[u,h]=this.getBaseTranslation();a+=u,c+=h;const{style:f}=r;f.left=`${(100*a).toFixed(2)}%`,f.top=`${(100*c).toFixed(2)}%`,this._onTranslating(a,c),r.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#p&&(this.#p[0]!==this.x||this.#p[1]!==this.y)}get _hasBeenResized(){return!!this.#p&&(this.#p[2]!==this.width||this.#p[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=Re,s=r/e,i=r/t;switch(this.rotation){case 90:return[-s,i];case 180:return[s,i];case 270:return[s,-i];default:return[-s,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[r,s]}=this;let{x:i,y:a,width:c,height:u}=this;if(c*=r,u*=s,i*=r,a*=s,this._mustFixPosition)switch(e){case 0:i=En(i,0,r-c),a=En(a,0,s-u);break;case 90:i=En(i,0,r-u),a=En(a,c,s);break;case 180:i=En(i,c,r),a=En(a,u,s);break;case 270:i=En(i,u,r),a=En(a,0,s-c);break}this.x=i/=r,this.y=a/=s;const[h,f]=this.getBaseTranslation();i+=h,a+=f,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}static#D(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return Re.#D(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return Re.#D(e,t,360-this.parentRotation)}#T(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this;return[t*e,r*e]}setDims(e,t){const[r,s]=this.parentDimensions,{style:i}=this.div;i.width=`${(100*e/r).toFixed(2)}%`,this.#a||(i.height=`${(100*t/s).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:r}=e,s=r.endsWith("%"),i=!this.#a&&t.endsWith("%");if(s&&i)return;const[a,c]=this.parentDimensions;s||(e.width=`${(100*parseFloat(r)/a).toFixed(2)}%`),!this.#a&&!i&&(e.height=`${(100*parseFloat(t)/c).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#P(){if(this.#l)return;this.#l=document.createElement("div"),this.#l.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const s=document.createElement("div");this.#l.append(s),s.classList.add("resizer",r),s.setAttribute("data-resizer-name",r),s.addEventListener("pointerdown",this.#j.bind(this,r),{signal:t}),s.addEventListener("contextmenu",vr,{signal:t}),s.tabIndex=-1}this.div.prepend(this.#l)}#j(e,t){t.preventDefault();const{isMac:r}=mn.platform;if(t.button!==0||t.ctrlKey&&r)return;this.#n?.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,this.#c=[t.screenX,t.screenY];const i=new AbortController,a=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#O.bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",qt,{passive:!1,signal:a}),window.addEventListener("contextmenu",vr,{signal:a}),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const c=this.parent.div.style.cursor,u=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const h=()=>{i.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=c,this.div.style.cursor=u,this.#I()};window.addEventListener("pointerup",h,{signal:a}),window.addEventListener("blur",h,{signal:a})}#M(e,t,r,s){this.width=r,this.height=s,this.x=e,this.y=t;const[i,a]=this.parentDimensions;this.setDims(i*r,a*s),this.fixAndSetPosition(),this._onResized()}_onResized(){}#I(){if(!this.#h)return;const{savedX:e,savedY:t,savedWidth:r,savedHeight:s}=this.#h;this.#h=null;const i=this.x,a=this.y,c=this.width,u=this.height;i===e&&a===t&&c===r&&u===s||this.addCommands({cmd:this.#M.bind(this,i,a,c,u),undo:this.#M.bind(this,e,t,r,s),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#O(e,t){const[r,s]=this.parentDimensions,i=this.x,a=this.y,c=this.width,u=this.height,h=Re.MIN_SIZE/r,f=Re.MIN_SIZE/s,g=this.#T(this.rotation),y=(K,z)=>[g[0]*K+g[2]*z,g[1]*K+g[3]*z],w=this.#T(360-this.rotation),S=(K,z)=>[w[0]*K+w[2]*z,w[1]*K+w[3]*z];let v,_,A=!1,E=!1;switch(e){case"topLeft":A=!0,v=(K,z)=>[0,0],_=(K,z)=>[K,z];break;case"topMiddle":v=(K,z)=>[K/2,0],_=(K,z)=>[K/2,z];break;case"topRight":A=!0,v=(K,z)=>[K,0],_=(K,z)=>[0,z];break;case"middleRight":E=!0,v=(K,z)=>[K,z/2],_=(K,z)=>[0,z/2];break;case"bottomRight":A=!0,v=(K,z)=>[K,z],_=(K,z)=>[0,0];break;case"bottomMiddle":v=(K,z)=>[K/2,z],_=(K,z)=>[K/2,0];break;case"bottomLeft":A=!0,v=(K,z)=>[0,z],_=(K,z)=>[K,0];break;case"middleLeft":E=!0,v=(K,z)=>[0,z/2],_=(K,z)=>[K,z/2];break}const k=v(c,u),P=_(c,u);let N=y(...P);const R=Re._round(i+N[0]),M=Re._round(a+N[1]);let $=1,G=1,F,V;if(t.fromKeyboard)({deltaX:F,deltaY:V}=t);else{const{screenX:K,screenY:z}=t,[O,ee]=this.#c;[F,V]=this.screenToPageTranslation(K-O,z-ee),this.#c[0]=K,this.#c[1]=z}if([F,V]=S(F/r,V/s),A){const K=Math.hypot(c,u);$=G=Math.max(Math.min(Math.hypot(P[0]-k[0]-F,P[1]-k[1]-V)/K,1/c,1/u),h/c,f/u)}else E?$=En(Math.abs(P[0]-k[0]-F),h,1)/c:G=En(Math.abs(P[1]-k[1]-V),f,1)/u;const X=Re._round(c*$),Z=Re._round(u*G);N=y(..._(X,Z));const W=R-N[0],oe=M-N[1];this.#p||=[this.x,this.y,this.width,this.height],this.width=X,this.height=Z,this.x=W,this.y=oe,this.setDims(r*X,s*Z),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#g)return this._editToolbar;this._editToolbar=new Dl(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,r]of e)await this._editToolbar.addButton(t,r);return this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(Zr.initialize(Re._l10n),this.#n=new Zr(this),this.#e&&(this.#n.data=this.#e,this.#e=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(e){this.#n&&(this.#n.data=e)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(e){await this.#n?.setGuessedText(e)}serializeAltText(e){return this.#n?.serialize(e)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}addCommentButton(){return this.#r?this.#r:this.#r=new Vu(this)}get commentColor(){return null}get comment(){const e=this.#r;return{text:e.data.text,date:e.data.date,deleted:e.isDeleted(),color:this.commentColor}}set comment(e){this.#r||(this.#r=new Vu(this)),this.#r.data=e}setCommentData(e){this.#r||(this.#r=new Vu(this)),this.#r.setInitialText(e)}get hasEditedComment(){return this.#r?.hasBeenEdited()}async editComment(){this.#r||(this.#r=new Vu(this)),this.#r.edit()}addComment(e){if(this.hasEditedComment){const[,,,s]=e.rect,[i]=this.pageDimensions,[a]=this.pageTranslation,c=a+i+1,u=s-100,h=c+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[c,u,h,s]}}}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#i?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#z();const[t,r]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*r/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/r).toFixed(2)}%`);const[s,i]=this.getInitialTranslation();return this.translate(s,i),yS(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#S||=new lh({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#R.bind(this),onPinching:this.#B.bind(this),onPinchEnd:this.#C.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),e}#R(){this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#B(e,t,r){let i=.7*(r/t)+1-.7;if(i===1)return;const a=this.#T(this.rotation),c=(R,M)=>[a[0]*R+a[2]*M,a[1]*R+a[3]*M],[u,h]=this.parentDimensions,f=this.x,g=this.y,y=this.width,w=this.height,S=Re.MIN_SIZE/u,v=Re.MIN_SIZE/h;i=Math.max(Math.min(i,1/y,1/w),S/y,v/w);const _=Re._round(y*i),A=Re._round(w*i);if(_===y&&A===w)return;this.#p||=[f,g,y,w];const E=c(y/2,w/2),k=Re._round(f+E[0]),P=Re._round(g+E[1]),N=c(_/2,A/2);this.x=k-N[0],this.y=P-N[1],this.width=_,this.height=A,this.setDims(u*_,h*A),this.fixAndSetPosition(),this._onResizing()}#C(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#I()}pointerdown(e){const{isMac:t}=mn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#m=!0,this._isDraggable){this.#$(e);return}this.#w(e)}#w(e){const{isMac:t}=mn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#$(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let r=!1;const s=new AbortController,i=this._uiManager.combinedSignal(s),a={capture:!0,passive:!1,signal:i},c=h=>{s.abort(),this.#s=null,this.#m=!1,this._uiManager.endDragSession()||this.#w(h),r&&this._onStopDragging()};t&&(this.#b=e.clientX,this.#_=e.clientY,this.#s=e.pointerId,this.#o=e.pointerType,window.addEventListener("pointermove",h=>{r||(r=!0,this._onStartDragging());const{clientX:f,clientY:g,pointerId:y}=h;if(y!==this.#s){qt(h);return}const[w,S]=this.screenToPageTranslation(f-this.#b,g-this.#_);this.#b=f,this.#_=g,this._uiManager.dragSelectedEditors(w,S)},a),window.addEventListener("touchmove",qt,a),window.addEventListener("pointerdown",h=>{h.pointerType===this.#o&&(this.#S||h.isPrimary)&&c(h),qt(h)},a));const u=h=>{if(!this.#s||this.#s===h.pointerId){c(h);return}qt(h)};window.addEventListener("pointerup",u,{signal:i}),window.addEventListener("blur",u,{signal:i})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,r=this.rotation){const s=this.parentScale,[i,a]=this.pageDimensions,[c,u]=this.pageTranslation,h=e/s,f=t/s,g=this.x*i,y=this.y*a,w=this.width*i,S=this.height*a;switch(r){case 0:return[g+h+c,a-y-f-S+u,g+h+w+c,a-y-f+u];case 90:return[g+f+c,a-y+h+u,g+f+S+c,a-y+h+w+u];case 180:return[g-h-w+c,a-y+f+u,g-h+c,a-y+f+S+u];case 270:return[g-f-S+c,a-y-h-w+u,g-f+c,a-y-h+u];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,s,i,a]=e,c=i-r,u=a-s;switch(this.rotation){case 0:return[r,t-a,c,u];case 90:return[r,t-s,u,c];case 180:return[i,t-s,c,u];case 270:return[i,t-a,u,c];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#g=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#g=!1,!0):!1}isInEditMode(){return this.#g}shouldGetKeyboardEvents(){return this.#x}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:r,right:s}=this.getClientDimensions(),{innerHeight:i,innerWidth:a}=window;return t<a&&s>0&&e<i&&r>0}#z(){if(this.#u||!this.div)return;this.#u=new AbortController;const e=this._uiManager.combinedSignal(this.#u);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#z()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){pt("An editor must be serializable")}static async deserialize(e,t,r){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r,annotationElementId:e.annotationElementId});s.rotation=e.rotation,s.#e=e.accessibilityData,s._isCopy=e.isCopy||!1;const[i,a]=s.pageDimensions,[c,u,h,f]=s.getRectInCurrentCoords(e.rect,a);return s.x=c/i,s.y=u/a,s.width=h/i,s.height=f/a,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#u?.abort(),this.#u=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#L(),this.removeEditToolbar(),this.#v){for(const e of this.#v.values())clearTimeout(e);this.#v=null}this.parent=null,this.#S?.destroy(),this.#S=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#P(),this.#l.classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#l.children;if(!this.#t){this.#t=Array.from(t);const a=this.#U.bind(this),c=this.#Y.bind(this),u=this._uiManager._signal;for(const h of this.#t){const f=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",a,{signal:u}),h.addEventListener("blur",c,{signal:u}),h.addEventListener("focus",this.#G.bind(this,f),{signal:u}),h.setAttribute("data-l10n-id",Re._l10nResizer[f])}}const r=this.#t[0];let s=0;for(const a of t){if(a===r)break;s++}const i=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(i!==s){if(i<s)for(let c=0;c<s-i;c++)this.#l.append(this.#l.firstChild);else if(i>s)for(let c=0;c<i-s;c++)this.#l.firstChild.before(this.#l.lastChild);let a=0;for(const c of t){const h=this.#t[a++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",Re._l10nResizer[h])}}this.#q(0),this.#x=!0,this.#l.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#U(e){Re._resizerKeyboardManager.exec(this,e)}#Y(e){this.#x&&e.relatedTarget?.parentNode!==this.#l&&this.#L()}#G(e){this.#f=this.#x?e:""}#q(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#x&&this.#O(this.#f,{deltaX:e,deltaY:t,fromKeyboard:!0})}#L(){this.#x=!1,this.#q(-1),this.#I()}_stopResizingWithKeyboard(){this.#L(),this.div.focus()}select(){if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}}unselect(){this.isSelected&&(this.isSelected=!1,this.#l?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#d}set isEditing(e){this.#d=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){this.#a=!0;const r=e/t,{style:s}=this.div;s.aspectRatio=r,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#v||=new Map;const{action:r}=e;let s=this.#v.get(r);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),this.#v.delete(r),this.#v.size===0&&(this.#v=null)},Re._telemetryTimeout),this.#v.set(r,s);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class uM extends Re{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Zw=3285377520,fr=4294901760,Kr=65535;class vS{constructor(e){this.h1=e?e&4294967295:Zw,this.h2=e?e&4294967295:Zw}update(e){let t,r;if(typeof e=="string"){t=new Uint8Array(e.length*2),r=0;for(let v=0,_=e.length;v<_;v++){const A=e.charCodeAt(v);A<=255?t[r++]=A:(t[r++]=A>>>8,t[r++]=A&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),r=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=r>>2,i=r-s*4,a=new Uint32Array(t.buffer,0,s);let c=0,u=0,h=this.h1,f=this.h2;const g=3432918353,y=461845907,w=g&Kr,S=y&Kr;for(let v=0;v<s;v++)v&1?(c=a[v],c=c*g&fr|c*w&Kr,c=c<<15|c>>>17,c=c*y&fr|c*S&Kr,h^=c,h=h<<13|h>>>19,h=h*5+3864292196):(u=a[v],u=u*g&fr|u*w&Kr,u=u<<15|u>>>17,u=u*y&fr|u*S&Kr,f^=u,f=f<<13|f>>>19,f=f*5+3864292196);switch(c=0,i){case 3:c^=t[s*4+2]<<16;case 2:c^=t[s*4+1]<<8;case 1:c^=t[s*4],c=c*g&fr|c*w&Kr,c=c<<15|c>>>17,c=c*y&fr|c*S&Kr,s&1?h^=c:f^=c}this.h1=h,this.h2=f}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&fr|e*36045&Kr,t=t*4283543511&fr|((t<<16|e>>>16)*2950163797&fr)>>>16,e^=t>>>1,e=e*444984403&fr|e*60499&Kr,t=t*3301882366&fr|((t<<16|e>>>16)*3120437893&fr)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Em=Object.freeze({map:null,hash:"",transfer:void 0});class kg{#e=!1;#t=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=this.#n.get(e);return r===void 0?t:Object.assign(t,r)}getRawValue(e){return this.#n.get(e)}remove(e){if(this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of this.#n.values())if(t instanceof Re)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=this.#n.get(e);let s=!1;if(r!==void 0)for(const[i,a]of Object.entries(t))r[i]!==a&&(s=!0,r[i]=a);else s=!0,this.#n.set(e,t);s&&this.#r(),t instanceof Re&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return this.#n.has(e)}get size(){return this.#n.size}#r(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new xS(this)}get serializable(){if(this.#n.size===0)return Em;const e=new Map,t=new vS,r=[],s=Object.create(null);let i=!1;for(const[a,c]of this.#n){const u=c instanceof Re?c.serialize(!1,s):c;u&&(e.set(a,u),t.update(`${a}:${JSON.stringify(u)}`),i||=!!u.bitmap)}if(i)for(const a of e.values())a.bitmap&&r.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:Em}get editorStats(){let e=null;const t=new Map;for(const r of this.#n.values()){if(!(r instanceof Re))continue;const s=r.telemetryFinalData;if(!s)continue;const{type:i}=s;t.has(i)||t.set(i,Object.getPrototypeOf(r).constructor),e||=Object.create(null);const a=e[i]||=new Map;for(const[c,u]of Object.entries(s)){if(c==="type")continue;let h=a.get(c);h||(h=new Map,a.set(c,h));const f=h.get(u)??0;h.set(u,f+1)}}for(const[r,s]of t)e[r]=s.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){this.#t=null}get modifiedIds(){if(this.#t)return this.#t;const e=[];for(const t of this.#n.values())!(t instanceof Re)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class xS extends kg{#e;constructor(e){super();const{map:t,hash:r,transfer:s}=e.serializable,i=structuredClone(t,s?{transfer:s}:null);this.#e={map:i,hash:r,transfer:s}}get print(){pt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return Qe(this,"modifiedIds",{ids:new Set,hash:""})}}class dM{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:r}){if(!(!e||this.#e.has(e.loadedName))){if(Yt(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:i,style:a}=e,c=new FontFace(s,i,a);this.addNativeFontFace(c);try{await c.load(),this.#e.add(s),r?.(e)}catch{He(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}pt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(s){throw He(`Failed to load font '${r.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const s=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return Qe(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Qe(this,"isSyncFontLoadingSupported",Cn||mn.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Yt(!s.done,"completeRequest() cannot be called twice."),s.done=!0;r.length>0&&r[0].done;){const i=r.shift();setTimeout(i.callback,0)}}const{loadingRequests:r}=this,s={done:!1,complete:t,callback:e};return r.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Qe(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function r(P,N){return P.charCodeAt(N)<<24|P.charCodeAt(N+1)<<16|P.charCodeAt(N+2)<<8|P.charCodeAt(N+3)&255}function s(P,N,R,M){const $=P.substring(0,N),G=P.substring(N+R);return $+M+G}let i,a;const c=this._document.createElement("canvas");c.width=1,c.height=1;const u=c.getContext("2d");let h=0;function f(P,N){if(++h>30){He("Load test font never loaded."),N();return}if(u.font="30px "+P,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0){N();return}setTimeout(f.bind(null,P,N))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=s(y,976,g.length,g);const S=16,v=1482184792;let _=r(y,S);for(i=0,a=g.length-3;i<a;i+=4)_=_-v+r(g,i)|0;i<g.length&&(_=_-v+r(g+"XXX",i)|0),y=s(y,S,4,XD(_));const A=`url(data:font/opentype;base64,${btoa(y)});`,E=`@font-face {font-family:"${g}";src:${A}}`;this.insertRule(E);const k=this._document.createElement("div");k.style.visibility="hidden",k.style.width=k.style.height="10px",k.style.position="absolute",k.style.top=k.style.left="0px";for(const P of[e.loadedName,g]){const N=this._document.createElement("span");N.textContent="Hi",N.style.fontFamily=P,k.append(N)}this._document.body.append(k),f(g,()=>{k.remove(),t.complete()})}}class hM{constructor(e,t=null){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this._inspectFont=t}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${gS(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const r=this.loadedName+"_path_"+t;let s;try{s=e.get(r)}catch(a){He(`getPathGenerator - ignoring character: "${a}".`)}const i=new Path2D(s||"");return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[t]=i}}function fM(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(Cn)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function pM(n){if(Cn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return hc(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Uu(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const Tm=n=>typeof n=="object"&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0,mM=n=>typeof n=="object"&&typeof n?.name=="string",gM=eM.bind(null,Tm,mM);class yM{#e=new Map;#t=Promise.resolve();postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[s]of this.#e)s.call(this,r)})}addEventListener(e,t,r=null){let s=null;if(r?.signal instanceof AbortSignal){const{signal:i}=r;if(i.aborted){He("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);s=()=>i.removeEventListener("abort",a),i.addEventListener("abort",a)}this.#e.set(t,s)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}const Hu={DATA:1,ERROR:2},Wt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Jw(){}function Vn(n){if(n instanceof fi||n instanceof Sm||n instanceof Xw||n instanceof wd||n instanceof Np)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||pt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new fi(n.message);case"InvalidPDFException":return new Sm(n.message);case"PasswordException":return new Xw(n.message,n.code);case"ResponseException":return new wd(n.message,n.status,n.missing);case"UnknownErrorException":return new Np(n.message,n.details)}return new Np(n.message,n.toString())}class El{#e=new AbortController;constructor(e,t,r){this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#r(e);return}if(e.callback){const r=e.callbackId,s=this.callbackCapabilities[r];if(!s)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===Hu.DATA)s.resolve(e.data);else if(e.callback===Hu.ERROR)s.reject(Vn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,s=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(a){i.postMessage({sourceName:r,targetName:s,callback:Hu.DATA,callbackId:e.callbackId,data:a})},function(a){i.postMessage({sourceName:r,targetName:s,callback:Hu.ERROR,callbackId:e.callbackId,reason:Vn(a)})});return}if(e.streamId){this.#n(e);return}t(e.data)}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const s=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[s]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},r)}catch(a){i.reject(a)}return i.promise}sendWithStream(e,t,r,s){const i=this.streamId++,a=this.sourceName,c=this.targetName,u=this.comObj;return new ReadableStream({start:h=>{const f=Promise.withResolvers();return this.streamControllers[i]={controller:h,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},u.postMessage({sourceName:a,targetName:c,action:e,streamId:i,data:t,desiredSize:h.desiredSize},s),f.promise},pull:h=>{const f=Promise.withResolvers();return this.streamControllers[i].pullCall=f,u.postMessage({sourceName:a,targetName:c,stream:Wt.PULL,streamId:i,desiredSize:h.desiredSize}),f.promise},cancel:h=>{Yt(h instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[i].cancelCall=f,this.streamControllers[i].isClosed=!0,u.postMessage({sourceName:a,targetName:c,stream:Wt.CANCEL,streamId:i,reason:Vn(h)}),f.promise}},r)}#n(e){const t=e.streamId,r=this.sourceName,s=e.sourceName,i=this.comObj,a=this,c=this.actionHandler[e.action],u={enqueue(h,f=1,g){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=f,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:r,targetName:s,stream:Wt.ENQUEUE,streamId:t,chunk:h},g)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:s,stream:Wt.CLOSE,streamId:t}),delete a.streamSinks[t])},error(h){Yt(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:s,stream:Wt.ERROR,streamId:t,reason:Vn(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[t]=u,Promise.try(c,e.data,u).then(function(){i.postMessage({sourceName:r,targetName:s,stream:Wt.START_COMPLETE,streamId:t,success:!0})},function(h){i.postMessage({sourceName:r,targetName:s,stream:Wt.START_COMPLETE,streamId:t,reason:Vn(h)})})}#r(e){const t=e.streamId,r=this.sourceName,s=e.sourceName,i=this.comObj,a=this.streamControllers[t],c=this.streamSinks[t];switch(e.stream){case Wt.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(Vn(e.reason));break;case Wt.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(Vn(e.reason));break;case Wt.PULL:if(!c){i.postMessage({sourceName:r,targetName:s,stream:Wt.PULL_COMPLETE,streamId:t,success:!0});break}c.desiredSize<=0&&e.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=e.desiredSize,Promise.try(c.onPull||Jw).then(function(){i.postMessage({sourceName:r,targetName:s,stream:Wt.PULL_COMPLETE,streamId:t,success:!0})},function(h){i.postMessage({sourceName:r,targetName:s,stream:Wt.PULL_COMPLETE,streamId:t,reason:Vn(h)})});break;case Wt.ENQUEUE:if(Yt(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case Wt.CLOSE:if(Yt(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),this.#i(a,t);break;case Wt.ERROR:Yt(a,"error should have stream controller"),a.controller.error(Vn(e.reason)),this.#i(a,t);break;case Wt.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(Vn(e.reason)),this.#i(a,t);break;case Wt.CANCEL:if(!c)break;const u=Vn(e.reason);Promise.try(c.onCancel||Jw,u).then(function(){i.postMessage({sourceName:r,targetName:s,stream:Wt.CANCEL_COMPLETE,streamId:t,success:!0})},function(h){i.postMessage({sourceName:r,targetName:s,stream:Wt.CANCEL_COMPLETE,streamId:t,reason:Vn(h)})}),c.sinkCapability.reject(u),c.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#i(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class wS{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){pt("Abstract method `_createCanvas` called.")}}class vM extends wS{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}class bS{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){pt("Abstract method `_fetch` called.")}}class eb extends bS{async _fetch(e){const t=await fc(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):hc(t)}}class _S{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,s,i){return"none"}destroy(e=!1){}}class xM extends _S{#e;#t;#n;#r;#i;#s;#o=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#r=e,this.#i=t}get#a(){return this.#t||=new Map}get#l(){return this.#s||=new Map}get#c(){if(!this.#n){const e=this.#i.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const r=this.#i.createElementNS(Cs,"svg");r.setAttribute("width",0),r.setAttribute("height",0),this.#n=this.#i.createElementNS(Cs,"defs"),e.append(r),r.append(this.#n),this.#i.body.append(e)}return this.#n}#h(e){if(e.length===1){const u=e[0],h=new Array(256);for(let g=0;g<256;g++)h[g]=u[g]/255;const f=h.join(",");return[f,f,f]}const[t,r,s]=e,i=new Array(256),a=new Array(256),c=new Array(256);for(let u=0;u<256;u++)i[u]=t[u]/255,a[u]=r[u]/255,c[u]=s[u]/255;return[i.join(","),a.join(","),c.join(",")]}#u(e){if(this.#e===void 0){this.#e="";const t=this.#i.URL;t!==this.#i.baseURI&&(oh(t)?He('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=fS(t,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#a.get(e);if(t)return t;const[r,s,i]=this.#h(e),a=e.length===1?r:`${r}${s}${i}`;if(t=this.#a.get(a),t)return this.#a.set(e,t),t;const c=`g_${this.#r}_transfer_map_${this.#o++}`,u=this.#u(c);this.#a.set(e,u),this.#a.set(a,u);const h=this.#p(c);return this.#g(r,s,i,h),u}addHCMFilter(e,t){const r=`${e}-${t}`,s="base";let i=this.#l.get(s);if(i?.key===r||(i?(i.filter?.remove(),i.key=r,i.url="none",i.filter=null):(i={key:r,url:"none",filter:null},this.#l.set(s,i)),!e||!t))return i.url;const a=this.#y(e);e=_e.makeHexColor(...a);const c=this.#y(t);if(t=_e.makeHexColor(...c),this.#c.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return i.url;const u=new Array(256);for(let w=0;w<=255;w++){const S=w/255;u[w]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const h=u.join(","),f=`g_${this.#r}_hcm_filter`,g=i.filter=this.#p(f);this.#g(h,h,h,g),this.#m(g);const y=(w,S)=>{const v=a[w]/255,_=c[w]/255,A=new Array(S+1);for(let E=0;E<=S;E++)A[E]=v+E/S*(_-v);return A.join(",")};return this.#g(y(0,5),y(1,5),y(2,5),g),i.url=this.#u(f),i.url}addAlphaFilter(e){let t=this.#a.get(e);if(t)return t;const[r]=this.#h([e]),s=`alpha_${r}`;if(t=this.#a.get(s),t)return this.#a.set(e,t),t;const i=`g_${this.#r}_alpha_map_${this.#o++}`,a=this.#u(i);this.#a.set(e,a),this.#a.set(s,a);const c=this.#p(i);return this.#x(r,c),a}addLuminosityFilter(e){let t=this.#a.get(e||"luminosity");if(t)return t;let r,s;if(e?([r]=this.#h([e]),s=`luminosity_${r}`):s="luminosity",t=this.#a.get(s),t)return this.#a.set(e,t),t;const i=`g_${this.#r}_luminosity_map_${this.#o++}`,a=this.#u(i);this.#a.set(e,a),this.#a.set(s,a);const c=this.#p(i);return this.#f(c),e&&this.#x(r,c),a}addHighlightHCMFilter(e,t,r,s,i){const a=`${t}-${r}-${s}-${i}`;let c=this.#l.get(e);if(c?.key===a||(c?(c.filter?.remove(),c.key=a,c.url="none",c.filter=null):(c={key:a,url:"none",filter:null},this.#l.set(e,c)),!t||!r))return c.url;const[u,h]=[t,r].map(this.#y.bind(this));let f=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),g=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[y,w]=[s,i].map(this.#y.bind(this));g<f&&([f,g,y,w]=[g,f,w,y]),this.#c.style.color="";const S=(A,E,k)=>{const P=new Array(256),N=(g-f)/k,R=A/255,M=(E-A)/(255*k);let $=0;for(let G=0;G<=k;G++){const F=Math.round(f+G*N),V=R+G*M;for(let X=$;X<=F;X++)P[X]=V;$=F+1}for(let G=$;G<256;G++)P[G]=P[$-1];return P.join(",")},v=`g_${this.#r}_hcm_${e}_filter`,_=c.filter=this.#p(v);return this.#m(_),this.#g(S(y[0],w[0],5),S(y[1],w[1],5),S(y[2],w[2],5),_),c.url=this.#u(v),c.url}destroy(e=!1){e&&this.#s?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#t?.clear(),this.#t=null,this.#s?.clear(),this.#s=null,this.#o=0)}#f(e){const t=this.#i.createElementNS(Cs,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#m(e){const t=this.#i.createElementNS(Cs,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#p(e){const t=this.#i.createElementNS(Cs,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#c.append(t),t}#d(e,t,r){const s=this.#i.createElementNS(Cs,t);s.setAttribute("type","discrete"),s.setAttribute("tableValues",r),e.append(s)}#g(e,t,r,s){const i=this.#i.createElementNS(Cs,"feComponentTransfer");s.append(i),this.#d(i,"feFuncR",e),this.#d(i,"feFuncG",t),this.#d(i,"feFuncB",r)}#x(e,t){const r=this.#i.createElementNS(Cs,"feComponentTransfer");t.append(r),this.#d(r,"feFuncA",e)}#y(e){return this.#c.style.color=e,ah(getComputedStyle(this.#c).getPropertyValue("color"))}}class SS{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){pt("Abstract method `_fetch` called.")}}class tb extends SS{async _fetch(e){const t=await fc(e,"arraybuffer");return new Uint8Array(t)}}class AS{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){pt("Abstract method `_fetch` called.")}}class nb extends AS{async _fetch(e){const t=await fc(e,"arraybuffer");return new Uint8Array(t)}}Cn&&He("Please use the `legacy` build in Node.js environments.");async function Pg(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class wM extends _S{}class bM extends wS{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class _M extends bS{async _fetch(e){return Pg(e)}}class SM extends SS{async _fetch(e){return Pg(e)}}class AM extends AS{async _fetch(e){return Pg(e)}}const Lo="__forcedDependency";class CM{#e={__proto__:null};#t={__proto__:null,transform:[],moveText:[],sameLineText:[],[Lo]:[]};#n=new Map;#r=[];#i=[];#s=[[1,0,0,1,0,0]];#o=[-1/0,-1/0,1/0,1/0];#a=new Float64Array([1/0,1/0,-1/0,-1/0]);#l=-1;#c=new Set;#h=new Map;#u=new Map;#f;#m;constructor(e){this.#f=e.width,this.#m=e.height}save(e){return this.#e={__proto__:this.#e},this.#t={__proto__:this.#t,transform:{__proto__:this.#t.transform},moveText:{__proto__:this.#t.moveText},sameLineText:{__proto__:this.#t.sameLineText},[Lo]:{__proto__:this.#t[Lo]}},this.#o={__proto__:this.#o},this.#r.push([e,null]),this}restore(e){const t=Object.getPrototypeOf(this.#e);if(t===null)return this;this.#e=t,this.#t=Object.getPrototypeOf(this.#t),this.#o=Object.getPrototypeOf(this.#o);const r=this.#r.pop();return r!==void 0&&(r[1]=e),this}recordOpenMarker(e){return this.#r.push([e,null]),this}getOpenMarker(){return this.#r.length===0?null:this.#r.at(-1)[0]}recordCloseMarker(e){const t=this.#r.pop();return t!==void 0&&(t[1]=e),this}beginMarkedContent(e){return this.#i.push([e,null]),this}endMarkedContent(e){const t=this.#i.pop();return t!==void 0&&(t[1]=e),this}pushBaseTransform(e){return this.#s.push(_e.multiplyByDOMMatrix(this.#s.at(-1),e.getTransform())),this}popBaseTransform(){return this.#s.length>1&&this.#s.pop(),this}recordSimpleData(e,t){return this.#e[e]=t,this}recordIncrementalData(e,t){return this.#t[e].push(t),this}resetIncrementalData(e,t){return this.#t[e].length=0,this}recordNamedData(e,t){return this.#n.set(e,t),this}recordFutureForcedDependency(e,t){return this.recordIncrementalData(Lo,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in this.#e&&this.recordFutureForcedDependency(t,this.#e[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of this.#c)this.recordFutureForcedDependency(Lo,e);return this}resetBBox(e){return this.#l=e,this.#a[0]=1/0,this.#a[1]=1/0,this.#a[2]=-1/0,this.#a[3]=-1/0,this}get hasPendingBBox(){return this.#l!==-1}recordClipBox(e,t,r,s,i,a){const c=_e.multiplyByDOMMatrix(this.#s.at(-1),t.getTransform()),u=[1/0,1/0,-1/0,-1/0];_e.axialAlignedBoundingBox([r,i,s,a],c,u);const h=_e.intersect(this.#o,u);return h?(this.#o[0]=h[0],this.#o[1]=h[1],this.#o[2]=h[2],this.#o[3]=h[3]):(this.#o[0]=this.#o[1]=1/0,this.#o[2]=this.#o[3]=-1/0),this}recordBBox(e,t,r,s,i,a){const c=this.#o;if(c[0]===1/0)return this;const u=_e.multiplyByDOMMatrix(this.#s.at(-1),t.getTransform());if(c[0]===-1/0)return _e.axialAlignedBoundingBox([r,i,s,a],u,this.#a),this;const h=[1/0,1/0,-1/0,-1/0];return _e.axialAlignedBoundingBox([r,i,s,a],u,h),this.#a[0]=Math.min(this.#a[0],Math.max(h[0],c[0])),this.#a[1]=Math.min(this.#a[1],Math.max(h[1],c[1])),this.#a[2]=Math.max(this.#a[2],Math.min(h[2],c[2])),this.#a[3]=Math.max(this.#a[3],Math.min(h[3],c[3])),this}recordCharacterBBox(e,t,r,s=1,i=0,a=0,c){const u=r.bbox;let h,f;if(u&&(h=u[2]!==u[0]&&u[3]!==u[1]&&this.#u.get(r),h!==!1&&(f=[0,0,0,0],_e.axialAlignedBoundingBox(u,r.fontMatrix,f),(s!==1||i!==0||a!==0)&&_e.scaleMinMax([s,0,0,-s,i,a],f),h)))return this.recordBBox(e,t,f[0],f[2],f[1],f[3]);if(!c)return this.recordFullPageBBox(e);const g=c();return u&&f&&h===void 0&&(h=f[0]<=i-g.actualBoundingBoxLeft&&f[2]>=i+g.actualBoundingBoxRight&&f[1]<=a-g.actualBoundingBoxAscent&&f[3]>=a+g.actualBoundingBoxDescent,this.#u.set(r,h),h)?this.recordBBox(e,t,f[0],f[2],f[1],f[3]):this.recordBBox(e,t,i-g.actualBoundingBoxLeft,i+g.actualBoundingBoxRight,a-g.actualBoundingBoxAscent,a+g.actualBoundingBoxDescent)}recordFullPageBBox(e){return this.#a[0]=Math.max(0,this.#o[0]),this.#a[1]=Math.max(0,this.#o[1]),this.#a[2]=Math.min(this.#f,this.#o[2]),this.#a[3]=Math.min(this.#m,this.#o[3]),this}getSimpleIndex(e){return this.#e[e]}recordDependencies(e,t){const r=this.#c,s=this.#e,i=this.#t;for(const a of t)a in this.#e?r.add(s[a]):a in i&&i[a].forEach(r.add,r);return this}copyDependenciesFromIncrementalOperation(e,t){const r=this.#h,s=this.#c;for(const i of this.#t[t])r.get(i).dependencies.forEach(s.add,s.add(i));return this}recordNamedDependency(e,t){return this.#n.has(t)&&this.#c.add(this.#n.get(t)),this}recordOperation(e,t=!1){this.recordDependencies(e,[Lo]);const r=new Set(this.#c),s=this.#r.concat(this.#i),i=this.#l===e?{minX:this.#a[0],minY:this.#a[1],maxX:this.#a[2],maxY:this.#a[3]}:null;return this.#h.set(e,{bbox:i,pairs:s,dependencies:r}),t||(this.#l=-1),this.#c.clear(),this}bboxToClipBoxDropOperation(e){return this.#l!==-1&&(this.#l=-1,this.#o[0]=Math.max(this.#o[0],this.#a[0]),this.#o[1]=Math.max(this.#o[1],this.#a[1]),this.#o[2]=Math.min(this.#o[2],this.#a[2]),this.#o[3]=Math.min(this.#o[3],this.#a[3])),this.#c.clear(),this}_takePendingDependencies(){const e=this.#c;return this.#c=new Set,e}_extractOperation(e){const t=this.#h.get(e);return this.#h.delete(e),t}_pushPendingDependencies(e){for(const t of e)this.#c.add(t)}take(){return this.#u.clear(),Array.from(this.#h,([e,{bbox:t,pairs:r,dependencies:s}])=>(r.forEach(i=>i.forEach(s.add,s)),s.delete(e),{minX:(t?.minX??0)/this.#f,maxX:(t?.maxX??this.#f)/this.#f,minY:(t?.minY??0)/this.#m,maxY:(t?.maxY??this.#m)/this.#m,dependencies:Array.from(s).sort((i,a)=>i-a),idx:e}))}}class bd{#e;#t;#n=0;#r;#i=0;constructor(e,t){if(e instanceof bd)return e;this.#e=e,this.#r=e._takePendingDependencies(),this.#t=t}save(e){return this.#i++,this.#e.save(this.#t),this}restore(e){return this.#i>0&&(this.#e.restore(this.#t),this.#i--),this}recordOpenMarker(e){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#t:this.#e.getOpenMarker()}recordCloseMarker(e){return this.#n--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return this.#e.pushBaseTransform(e),this}popBaseTransform(){return this.#e.popBaseTransform(),this}recordSimpleData(e,t){return this.#e.recordSimpleData(e,this.#t),this}recordIncrementalData(e,t){return this.#e.recordIncrementalData(e,this.#t),this}resetIncrementalData(e,t){return this.#e.resetIncrementalData(e,this.#t),this}recordNamedData(e,t){return this}recordFutureForcedDependency(e,t){return this.#e.recordFutureForcedDependency(e,this.#t),this}inheritSimpleDataAsFutureForcedDependencies(e){return this.#e.inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#e.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return this.#e.hasPendingBBox||this.#e.resetBBox(this.#t),this}get hasPendingBBox(){return this.#e.hasPendingBBox}recordClipBox(e,t,r,s,i,a){return this.#e.recordClipBox(this.#t,t,r,s,i,a),this}recordBBox(e,t,r,s,i,a){return this.#e.recordBBox(this.#t,t,r,s,i,a),this}recordCharacterBBox(e,t,r,s,i,a,c){return this.#e.recordCharacterBBox(this.#t,t,r,s,i,a,c),this}recordFullPageBBox(e){return this.#e.recordFullPageBBox(this.#t),this}getSimpleIndex(e){return this.#e.getSimpleIndex(e)}recordDependencies(e,t){return this.#e.recordDependencies(this.#t,t),this}copyDependenciesFromIncrementalOperation(e,t){return this.#e.copyDependenciesFromIncrementalOperation(this.#t,t),this}recordNamedDependency(e,t){return this.#e.recordNamedDependency(this.#t,t),this}recordOperation(e){this.#e.recordOperation(this.#t,!0);const t=this.#e._extractOperation(this.#t);for(const r of t.dependencies)this.#r.add(r);return this.#r.delete(this.#t),this.#r.delete(null),this}bboxToClipBoxDropOperation(e){return this.#e.bboxToClipBoxDropOperation(this.#t),this}recordNestedDependencies(){this.#e._pushPendingDependencies(this.#r)}take(){throw new Error("Unreachable")}}const pr={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation"],transform:["transform"],transformAndFill:["transform","fillColor"]},pn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function km(n,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,r),n.clip(s)}class Ng{isModifyingCurrentTransform(){return!1}getPattern(){pt("Abstract method `getPattern` called.")}}class EM extends Ng{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,s){let i;if(s===pn.STROKE||s===pn.FILL){const a=t.current.getClippedPathBoundingBox(s,Pt(e))||[0,0,0,0],c=Math.ceil(a[2]-a[0])||1,u=Math.ceil(a[3]-a[1])||1,h=t.cachedCanvases.getCanvas("pattern",c,u),f=h.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-a[0],-a[1]),r=_e.transform(r,[1,0,0,1,a[0],a[1]]),f.transform(...t.baseTransform),this.matrix&&f.transform(...this.matrix),km(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),i=e.createPattern(h.canvas,"no-repeat");const g=new DOMMatrix(r);i.setTransform(g)}else km(e,this._bbox),i=this._createGradient(e);return i}}function Mp(n,e,t,r,s,i,a,c){const u=e.coords,h=e.colors,f=n.data,g=n.width*4;let y;u[t+1]>u[r+1]&&(y=t,t=r,r=y,y=i,i=a,a=y),u[r+1]>u[s+1]&&(y=r,r=s,s=y,y=a,a=c,c=y),u[t+1]>u[r+1]&&(y=t,t=r,r=y,y=i,i=a,a=y);const w=(u[t]+e.offsetX)*e.scaleX,S=(u[t+1]+e.offsetY)*e.scaleY,v=(u[r]+e.offsetX)*e.scaleX,_=(u[r+1]+e.offsetY)*e.scaleY,A=(u[s]+e.offsetX)*e.scaleX,E=(u[s+1]+e.offsetY)*e.scaleY;if(S>=E)return;const k=h[i],P=h[i+1],N=h[i+2],R=h[a],M=h[a+1],$=h[a+2],G=h[c],F=h[c+1],V=h[c+2],X=Math.round(S),Z=Math.round(E);let W,oe,K,z,O,ee,te,L;for(let Q=X;Q<=Z;Q++){if(Q<_){const ie=Q<S?0:(S-Q)/(S-_);W=w-(w-v)*ie,oe=k-(k-R)*ie,K=P-(P-M)*ie,z=N-(N-$)*ie}else{let ie;Q>E?ie=1:_===E?ie=0:ie=(_-Q)/(_-E),W=v-(v-A)*ie,oe=R-(R-G)*ie,K=M-(M-F)*ie,z=$-($-V)*ie}let fe;Q<S?fe=0:Q>E?fe=1:fe=(S-Q)/(S-E),O=w-(w-A)*fe,ee=k-(k-G)*fe,te=P-(P-F)*fe,L=N-(N-V)*fe;const Te=Math.round(Math.min(W,O)),De=Math.round(Math.max(W,O));let Me=g*Q+Te*4;for(let ie=Te;ie<=De;ie++)fe=(W-ie)/(W-O),fe<0?fe=0:fe>1&&(fe=1),f[Me++]=oe-(oe-ee)*fe|0,f[Me++]=K-(K-te)*fe|0,f[Me++]=z-(z-L)*fe|0,f[Me++]=255}}function TM(n,e,t){const r=e.coords,s=e.colors;let i,a;switch(e.type){case"lattice":const c=e.verticesPerRow,u=Math.floor(r.length/c)-1,h=c-1;for(i=0;i<u;i++){let f=i*c;for(let g=0;g<h;g++,f++)Mp(n,t,r[f],r[f+1],r[f+c],s[f],s[f+1],s[f+c]),Mp(n,t,r[f+c+1],r[f+1],r[f+c],s[f+c+1],s[f+1],s[f+c])}break;case"triangles":for(i=0,a=r.length;i<a;i+=3)Mp(n,t,r[i],r[i+1],r[i+2],s[i],s[i+1],s[i+2]);break;default:throw new Error("illegal figure")}}class kM extends Ng{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,r){const c=Math.floor(this._bounds[0]),u=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-c,f=Math.ceil(this._bounds[3])-u,g=Math.min(Math.ceil(Math.abs(h*e[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(f*e[1]*1.1)),3e3),w=h/g,S=f/y,v={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-u,scaleX:1/w,scaleY:1/S},_=g+2*2,A=y+2*2,E=r.getCanvas("mesh",_,A),k=E.context,P=k.createImageData(g,y);if(t){const R=P.data;for(let M=0,$=R.length;M<$;M+=4)R[M]=t[0],R[M+1]=t[1],R[M+2]=t[2],R[M+3]=255}for(const R of this._figures)TM(P,R,v);return k.putImageData(P,2,2),{canvas:E.canvas,offsetX:c-2*w,offsetY:u-2*S,scaleX:w,scaleY:S}}isModifyingCurrentTransform(){return!0}getPattern(e,t,r,s){km(e,this._bbox);const i=new Float32Array(2);if(s===pn.SHADING)_e.singularValueDecompose2dScale(Pt(e),i);else if(this.matrix){_e.singularValueDecompose2dScale(this.matrix,i);const[c,u]=i;_e.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=c,i[1]*=u}else _e.singularValueDecompose2dScale(t.baseTransform,i);const a=this._createMeshCanvas(i,s===pn.SHADING?null:this._background,t.cachedCanvases);return s!==pn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class PM extends Ng{getPattern(){return"hotpink"}}function NM(n){switch(n[0]){case"RadialAxial":return new EM(n);case"Mesh":return new kM(n);case"Dummy":return new PM}throw new Error(`Unknown IR type: ${n[0]}`)}const rb={COLORED:1,UNCOLORED:2};class Rg{static MAX_PATTERN_SIZE=3e3;constructor(e,t,r,s){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=r,this.baseTransform=s}createPatternCanvas(e){const{bbox:t,operatorList:r,paintType:s,tilingType:i,color:a,canvasGraphicsFactory:c}=this;let{xstep:u,ystep:h}=this;u=Math.abs(u),h=Math.abs(h),ih("TilingType: "+i);const f=t[0],g=t[1],y=t[2],w=t[3],S=y-f,v=w-g,_=new Float32Array(2);_e.singularValueDecompose2dScale(this.matrix,_);const[A,E]=_;_e.singularValueDecompose2dScale(this.baseTransform,_);const k=A*_[0],P=E*_[1];let N=S,R=v,M=!1,$=!1;const G=Math.ceil(u*k),F=Math.ceil(h*P),V=Math.ceil(S*k),X=Math.ceil(v*P);G>=V?N=u:M=!0,F>=X?R=h:$=!0;const Z=this.getSizeAndScale(N,this.ctx.canvas.width,k),W=this.getSizeAndScale(R,this.ctx.canvas.height,P),oe=e.cachedCanvases.getCanvas("pattern",Z.size,W.size),K=oe.context,z=c.createCanvasGraphics(K);if(z.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(z,s,a),K.translate(-Z.scale*f,-W.scale*g),z.transform(0,Z.scale,0,0,W.scale,0,0),K.save(),z.dependencyTracker?.save(),this.clipBbox(z,f,g,y,w),z.baseTransform=Pt(z.ctx),z.executeOperatorList(r),z.endDrawing(),z.dependencyTracker?.restore().recordNestedDependencies?.(),K.restore(),M||$){const O=oe.canvas;M&&(N=u),$&&(R=h);const ee=this.getSizeAndScale(N,this.ctx.canvas.width,k),te=this.getSizeAndScale(R,this.ctx.canvas.height,P),L=ee.size,Q=te.size,fe=e.cachedCanvases.getCanvas("pattern-workaround",L,Q),Te=fe.context,De=M?Math.floor(S/u):0,Me=$?Math.floor(v/h):0;for(let ie=0;ie<=De;ie++)for(let Ae=0;Ae<=Me;Ae++)Te.drawImage(O,L*ie,Q*Ae,L,Q,0,0,L,Q);return{canvas:fe.canvas,scaleX:ee.scale,scaleY:te.scale,offsetX:f,offsetY:g}}return{canvas:oe.canvas,scaleX:Z.scale,scaleY:W.scale,offsetX:f,offsetY:g}}getSizeAndScale(e,t,r){const s=Math.max(Rg.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*r);return i>=s?i=s:r=i/e,{scale:r,size:i}}clipBbox(e,t,r,s,i){const a=s-t,c=i-r;e.ctx.rect(t,r,a,c),_e.axialAlignedBoundingBox([t,r,s,i],Pt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){const s=e.ctx,i=e.current;switch(t){case rb.COLORED:const{fillStyle:a,strokeStyle:c}=this.ctx;s.fillStyle=i.fillColor=a,s.strokeStyle=i.strokeColor=c;break;case rb.UNCOLORED:s.fillStyle=s.strokeStyle=r,i.fillColor=i.strokeColor=r;break;default:throw new YD(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,r,s){let i=r;s!==pn.SHADING&&(i=_e.transform(i,t.baseTransform),this.matrix&&(i=_e.transform(i,this.matrix)));const a=this.createPatternCanvas(t);let c=new DOMMatrix(i);c=c.translate(a.offsetX,a.offsetY),c=c.scale(1/a.scaleX,1/a.scaleY);const u=e.createPattern(a.canvas,"repeat");return u.setTransform(c),u}}function RM({src:n,srcPos:e=0,dest:t,width:r,height:s,nonBlackColor:i=4294967295,inverseDecode:a=!1}){const c=mn.isLittleEndian?4278190080:255,[u,h]=a?[i,c]:[c,i],f=r>>3,g=r&7,y=n.length;t=new Uint32Array(t.buffer);let w=0;for(let S=0;S<s;S++){for(const _=e+f;e<_;e++){const A=e<y?n[e]:255;t[w++]=A&128?h:u,t[w++]=A&64?h:u,t[w++]=A&32?h:u,t[w++]=A&16?h:u,t[w++]=A&8?h:u,t[w++]=A&4?h:u,t[w++]=A&2?h:u,t[w++]=A&1?h:u}if(g===0)continue;const v=e<y?n[e++]:255;for(let _=0;_<g;_++)t[w++]=v&1<<7-_?h:u}return{srcPos:e,destPos:w}}const sb=16,ib=100,DM=15,ob=10,Un=16,Ip=new DOMMatrix,Qn=new Float32Array(2),Qo=new Float32Array([1/0,1/0,-1/0,-1/0]);function MM(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,r){e.translate(t,r),this.__originalTranslate(t,r)},n.scale=function(t,r){e.scale(t,r),this.__originalScale(t,r)},n.transform=function(t,r,s,i,a,c){e.transform(t,r,s,i,a,c),this.__originalTransform(t,r,s,i,a,c)},n.setTransform=function(t,r,s,i,a,c){e.setTransform(t,r,s,i,a,c),this.__originalSetTransform(t,r,s,i,a,c)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},n.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},n.bezierCurveTo=function(t,r,s,i,a,c){e.bezierCurveTo(t,r,s,i,a,c),this.__originalBezierCurveTo(t,r,s,i,a,c)},n.rect=function(t,r,s,i){e.rect(t,r,s,i),this.__originalRect(t,r,s,i)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class IM{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,r)):(s=this.canvasFactory.create(t,r),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Wu(n,e,t,r,s,i,a,c,u,h){const[f,g,y,w,S,v]=Pt(n);if(g===0&&y===0){const E=a*f+S,k=Math.round(E),P=c*w+v,N=Math.round(P),R=(a+u)*f+S,M=Math.abs(Math.round(R)-k)||1,$=(c+h)*w+v,G=Math.abs(Math.round($)-N)||1;return n.setTransform(Math.sign(f),0,0,Math.sign(w),k,N),n.drawImage(e,t,r,s,i,0,0,M,G),n.setTransform(f,g,y,w,S,v),[M,G]}if(f===0&&w===0){const E=c*y+S,k=Math.round(E),P=a*g+v,N=Math.round(P),R=(c+h)*y+S,M=Math.abs(Math.round(R)-k)||1,$=(a+u)*g+v,G=Math.abs(Math.round($)-N)||1;return n.setTransform(0,Math.sign(g),Math.sign(y),0,k,N),n.drawImage(e,t,r,s,i,0,0,G,M),n.setTransform(f,g,y,w,S,v),[G,M]}n.drawImage(e,t,r,s,i,a,c,u,h);const _=Math.hypot(f,g),A=Math.hypot(y,w);return[_*u,A*h]}class ab{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=_m;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=un.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,t,r){r?.(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Qo.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=pn.FILL,t=null){const r=this.minMax.slice();if(e===pn.STROKE){t||pt("Stroke bounding box must include transform."),_e.singularValueDecompose2dScale(t,Qn);const s=Qn[0]*this.lineWidth/2,i=Qn[1]*this.lineWidth/2;r[0]-=s,r[1]-=i,r[2]+=s,r[3]+=i}return r}updateClipFromPath(){const e=_e.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Qo,0)}getClippedPathBoundingBox(e=pn.FILL,t=null){return _e.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function lb(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,r=e.width,s=t%Un,i=(t-s)/Un,a=s===0?i:i+1,c=n.createImageData(r,Un);let u=0,h;const f=e.data,g=c.data;let y,w,S,v;if(e.kind===sd.GRAYSCALE_1BPP){const _=f.byteLength,A=new Uint32Array(g.buffer,0,g.byteLength>>2),E=A.length,k=r+7>>3,P=4294967295,N=mn.isLittleEndian?4278190080:255;for(y=0;y<a;y++){for(S=y<i?Un:s,h=0,w=0;w<S;w++){const R=_-u;let M=0;const $=R>k?r:R*8-7,G=$&-8;let F=0,V=0;for(;M<G;M+=8)V=f[u++],A[h++]=V&128?P:N,A[h++]=V&64?P:N,A[h++]=V&32?P:N,A[h++]=V&16?P:N,A[h++]=V&8?P:N,A[h++]=V&4?P:N,A[h++]=V&2?P:N,A[h++]=V&1?P:N;for(;M<$;M++)F===0&&(V=f[u++],F=128),A[h++]=V&F?P:N,F>>=1}for(;h<E;)A[h++]=0;n.putImageData(c,0,y*Un)}}else if(e.kind===sd.RGBA_32BPP){for(w=0,v=r*Un*4,y=0;y<i;y++)g.set(f.subarray(u,u+v)),u+=v,n.putImageData(c,0,w),w+=Un;y<a&&(v=r*s*4,g.set(f.subarray(u,u+v)),n.putImageData(c,0,w))}else if(e.kind===sd.RGB_24BPP)for(S=Un,v=r*S,y=0;y<a;y++){for(y>=i&&(S=s,v=r*S),h=0,w=v;w--;)g[h++]=f[u++],g[h++]=f[u++],g[h++]=f[u++],g[h++]=255;n.putImageData(c,0,y*Un)}else throw new Error(`bad image kind: ${e.kind}`)}function cb(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,r=e.width,s=t%Un,i=(t-s)/Un,a=s===0?i:i+1,c=n.createImageData(r,Un);let u=0;const h=e.data,f=c.data;for(let g=0;g<a;g++){const y=g<i?Un:s;({srcPos:u}=RM({src:h,srcPos:u,dest:f,width:r,height:y,nonBlackColor:0})),n.putImageData(c,0,g*Un)}}function gl(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)n[r]!==void 0&&(e[r]=n[r]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Gu(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function ub(n,e){if(e)return!0;_e.singularValueDecompose2dScale(n,Qn);const t=Math.fround(os.pixelRatio*pa.PDF_TO_CSS_UNITS);return Qn[0]<=t&&Qn[1]<=t}const jM=["butt","round","square"],OM=["miter","round","bevel"],LM={},db={};class ra{constructor(e,t,r,s,i,{optionalContentConfig:a,markedContentStack:c=null},u,h,f){this.ctx=e,this.current=new ab(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=s,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=a,this.cachedCanvases=new IM(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=u,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=f??null}getObject(e,t,r=null){return typeof t=="string"?(this.dependencyTracker?.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):r}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:s=null}){const i=this.ctx.canvas.width,a=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,i,a),this.ctx.fillStyle=c,r){const u=this.cachedCanvases.getCanvas("transparent",i,a);this.compositeCtx=this.ctx,this.transparentCanvas=u.canvas,this.ctx=u.context,this.ctx.save(),this.ctx.transform(...Pt(this.compositeCtx))}this.ctx.save(),Gu(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Pt(this.ctx)}executeOperatorList(e,t,r,s,i){const a=e.argsArray,c=e.fnArray;let u=t||0;const h=a.length;if(h===u)return u;const f=h-u>ob&&typeof r=="function",g=f?Date.now()+DM:0;let y=0;const w=this.commonObjs,S=this.objs;let v,_;for(;;){if(s!==void 0&&u===s.nextBreakPoint)return s.breakIt(u,r),u;if(!i||i.has(u))if(v=c[u],_=a[u]??null,v!==$l.dependency)_===null?this[v](u):this[v](u,..._);else for(const A of _){this.dependencyTracker?.recordNamedData(A,u);const E=A.startsWith("g_")?w:S;if(!E.has(A))return E.get(A,r),u}if(u++,u===h)return u;if(f&&++y>ob){if(Date.now()>g)return r(),u;y=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const r=e.width??e.displayWidth,s=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),c=r,u=s,h="prescale1",f,g;for(;i>2&&c>1||a>2&&u>1;){let y=c,w=u;i>2&&c>1&&(y=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),i/=c/y),a>2&&u>1&&(w=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,a/=u/w),f=this.cachedCanvases.getCanvas(h,y,w),g=f.context,g.clearRect(0,0,y,w),g.drawImage(e,0,0,c,u,0,0,y,w),e=f.canvas,c=y,u=w,h=h==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:c,paintHeight:u}}_createMaskCanvas(e,t){const r=this.ctx,{width:s,height:i}=t,a=this.current.fillColor,c=this.current.patternFill,u=Pt(r);let h,f,g,y;if((t.bitmap||t.data)&&t.count>1){const F=t.bitmap||t.data.buffer;f=JSON.stringify(c?u:[u.slice(0,4),a]),h=this._cachedBitmapsMap.get(F),h||(h=new Map,this._cachedBitmapsMap.set(F,h));const V=h.get(f);if(V&&!c){const X=Math.round(Math.min(u[0],u[2])+u[4]),Z=Math.round(Math.min(u[1],u[3])+u[5]);return this.dependencyTracker?.recordDependencies(e,pr.transformAndFill),{canvas:V,offsetX:X,offsetY:Z}}g=V}g||(y=this.cachedCanvases.getCanvas("maskCanvas",s,i),cb(y.context,t));let w=_e.transform(u,[1/s,0,0,-1/i,0,0]);w=_e.transform(w,[1,0,0,1,0,-i]);const S=Qo.slice();_e.axialAlignedBoundingBox([0,0,s,i],w,S);const[v,_,A,E]=S,k=Math.round(A-v)||1,P=Math.round(E-_)||1,N=this.cachedCanvases.getCanvas("fillCanvas",k,P),R=N.context,M=v,$=_;R.translate(-M,-$),R.transform(...w),g||(g=this._scaleImage(y.canvas,Xr(R)),g=g.img,h&&c&&h.set(f,g)),R.imageSmoothingEnabled=ub(Pt(R),t.interpolate),Wu(R,g,0,0,g.width,g.height,0,0,s,i),R.globalCompositeOperation="source-in";const G=_e.transform(Xr(R),[1,0,0,1,-M,-$]);return R.fillStyle=c?a.getPattern(r,this,G,pn.FILL):a,R.fillRect(0,0,s,i),h&&!c&&(this.cachedCanvases.delete("fillCanvas"),h.set(f,N.canvas)),this.dependencyTracker?.recordDependencies(e,pr.transformAndFill),{canvas:N.canvas,offsetX:Math.round(M),offsetY:Math.round($)}}setLineWidth(e,t){this.dependencyTracker?.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){this.dependencyTracker?.recordSimpleData("lineCap",e),this.ctx.lineCap=jM[t]}setLineJoin(e,t){this.dependencyTracker?.recordSimpleData("lineJoin",e),this.ctx.lineJoin=OM[t]}setMiterLimit(e,t){this.dependencyTracker?.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,r){this.dependencyTracker?.recordSimpleData("dash",e);const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=r)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){for(const[r,s]of t)switch(r){case"LW":this.setLineWidth(e,s);break;case"LC":this.setLineCap(e,s);break;case"LJ":this.setLineJoin(e,s);break;case"ML":this.setMiterLimit(e,s);break;case"D":this.setDash(e,s[0],s[1]);break;case"RI":this.setRenderingIntent(e,s);break;case"FL":this.setFlatness(e,s);break;case"Font":this.setFont(e,s[0],s[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=s;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=s;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",e),this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,r=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(s,t,r);this.suspendedCtx=this.ctx;const a=this.ctx=i.context;a.setTransform(this.suspendedCtx.getTransform()),gl(this.suspendedCtx,a),MM(a,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),gl(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,r,s){const i=s[0],a=s[1],c=s[2]-i,u=s[3]-a;c===0||u===0||(this.genericComposeSMask(t.context,r,c,u,t.subtype,t.backdrop,t.transferMap,i,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,s,i,a,c,u,h,f,g){let y=e.canvas,w=u-f,S=h-g;if(a)if(w<0||S<0||w+r>y.width||S+s>y.height){const _=this.cachedCanvases.getCanvas("maskExtension",r,s),A=_.context;A.drawImage(y,-w,-S),A.globalCompositeOperation="destination-atop",A.fillStyle=a,A.fillRect(0,0,r,s),A.globalCompositeOperation="source-over",y=_.canvas,w=S=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const _=new Path2D;_.rect(w,S,r,s),e.clip(_),e.globalCompositeOperation="destination-atop",e.fillStyle=a,e.fillRect(w,S,r,s),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&c?t.filter=this.filterFactory.addAlphaFilter(c):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(c));const v=new Path2D;v.rect(u,h,r,s),t.clip(v),t.globalCompositeOperation="destination-in",t.drawImage(y,w,S,r,s,u,h,r,s),t.restore()}save(e){this.inSMaskMode&&gl(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),this.dependencyTracker?.save(e)}restore(e){if(this.dependencyTracker?.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&gl(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,r,s,i,a,c){this.dependencyTracker?.recordIncrementalData("transform",e),this.ctx.transform(t,r,s,i,a,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r,s){let[i]=r;if(!s){i||=r[0]=new Path2D,this[t](e,i);return}if(this.dependencyTracker!==null){const a=t===$l.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,s[0]-a,s[2]+a,s[1]-a,s[3]+a).recordDependencies(e,["transform"])}if(!(i instanceof Path2D)){const a=r[0]=new Path2D;for(let c=0,u=i.length;c<u;)switch(i[c++]){case zu.moveTo:a.moveTo(i[c++],i[c++]);break;case zu.lineTo:a.lineTo(i[c++],i[c++]);break;case zu.curveTo:a.bezierCurveTo(i[c++],i[c++],i[c++],i[c++],i[c++],i[c++]);break;case zu.closePath:a.closePath();break;default:He(`Unrecognized drawing path operator: ${i[c-1]}`);break}i=a}_e.axialAlignedBoundingBox(s,Pt(this.ctx),this.current.minMax),this[t](e,i),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,r=!0){const s=this.ctx,i=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&i?.getPattern){const a=i.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=i.getPattern(s,this,Xr(s),pn.STROKE),a){const c=new Path2D;c.addPath(t,s.getTransform().invertSelf().multiplySelf(a)),t=c}this.rescaleAndStroke(t,!1),s.restore()}else this.rescaleAndStroke(t,!0);this.dependencyTracker?.recordDependencies(e,pr.stroke),r&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(pn.STROKE,Pt(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,r=!0){const s=this.ctx,i=this.current.fillColor,a=this.current.patternFill;let c=!1;if(a){const h=i.isModifyingCurrentTransform()?s.getTransform():null;if(this.dependencyTracker?.save(e),s.save(),s.fillStyle=i.getPattern(s,this,Xr(s),pn.FILL),h){const f=new Path2D;f.addPath(t,s.getTransform().invertSelf().multiplySelf(h)),t=f}c=!0}const u=this.current.getClippedPathBoundingBox();this.contentVisible&&u!==null&&(this.pendingEOFill?(s.fill(t,"evenodd"),this.pendingEOFill=!1):s.fill(t)),this.dependencyTracker?.recordDependencies(e,pr.fill),c&&(s.restore(),this.dependencyTracker?.restore(e)),r&&this.consumePath(e,t,u)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){this.ctx.fill(t),this.dependencyTracker?.recordDependencies(e,pr.rawFillPath).recordOperation(e)}clip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=LM}eoClip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=db}beginText(e){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,r=this.ctx;if(this.dependencyTracker){const{dependencyTracker:s}=this;t!==void 0&&s.recordFutureForcedDependency("textClip",s.getOpenMarker()).recordFutureForcedDependency("textClip",e),s.recordCloseMarker(e)}if(t!==void 0){const s=new Path2D,i=r.getTransform().invertSelf();for(const{transform:a,x:c,y:u,fontSize:h,path:f}of t)f&&s.addPath(f,new DOMMatrix(a).preMultiplySelf(i).translate(c,u).scale(h,-h));r.clip(s)}delete this.pendingTextPaths}setCharSpacing(e,t){this.dependencyTracker?.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){this.dependencyTracker?.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){this.dependencyTracker?.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){this.dependencyTracker?.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,r){this.dependencyTracker?.recordSimpleData("font",e).recordNamedDependency(e,t);const s=this.commonObjs.get(t),i=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=s.fontMatrix||_m,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&He("Invalid font matrix for font "+t),r<0?(r=-r,i.fontDirection=-1):i.fontDirection=1,this.current.font=s,this.current.fontSize=r,s.isType3Font)return;const a=s.loadedName||"sans-serif",c=s.systemFontInfo?.css||`"${a}", ${s.fallbackName}`;let u="normal";s.black?u="900":s.bold&&(u="bold");const h=s.italic?"italic":"normal";let f=r;r<sb?f=sb:r>ib&&(f=ib),this.current.fontSizeScale=r/f,this.ctx.font=`${h} ${u} ${f}px ${c}`}setTextRenderingMode(e,t){this.dependencyTracker?.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){this.dependencyTracker?.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,r){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=r}setLeadingMoveText(e,t,r){this.setLeading(e,-r),this.moveText(e,t,r)}setTextMatrix(e,t){this.dependencyTracker?.recordSimpleData("textMatrix",e);const{current:r}=this;r.textMatrix=t,r.textMatrixScale=Math.hypot(t[0],t[1]),r.x=r.lineX=0,r.y=r.lineY=0}nextLine(e){this.moveText(e,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}#n(e,t,r){const s=new Path2D;return s.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(t)),s}paintChar(e,t,r,s,i,a){const c=this.ctx,u=this.current,h=u.font,f=u.textRenderingMode,g=u.fontSize/u.fontSizeScale,y=f&un.FILL_STROKE_MASK,w=!!(f&un.ADD_TO_PATH_FLAG),S=u.patternFill&&!h.missingFile,v=u.patternStroke&&!h.missingFile;let _;if((h.disableFontFace||w||S||v)&&!h.missingFile&&(_=h.getPathGenerator(this.commonObjs,t)),_&&(h.disableFontFace||S||v)){c.save(),c.translate(r,s),c.scale(g,-g),this.dependencyTracker?.recordCharacterBBox(e,c,h);let A;if(y===un.FILL||y===un.FILL_STROKE)if(i){A=c.getTransform(),c.setTransform(...i);const E=this.#n(_,A,i);c.fill(E)}else c.fill(_);if(y===un.STROKE||y===un.FILL_STROKE)if(a){A||=c.getTransform(),c.setTransform(...a);const{a:E,b:k,c:P,d:N}=A,R=_e.inverseTransform(a),M=_e.transform([E,k,P,N,0,0],R);_e.singularValueDecompose2dScale(M,Qn),c.lineWidth*=Math.max(Qn[0],Qn[1])/g,c.stroke(this.#n(_,A,a))}else c.lineWidth/=g,c.stroke(_);c.restore()}else(y===un.FILL||y===un.FILL_STROKE)&&(c.fillText(t,r,s),this.dependencyTracker?.recordCharacterBBox(e,c,h,g,r,s,()=>c.measureText(t))),(y===un.STROKE||y===un.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(e,c,h,g,r,s,()=>c.measureText(t)).recordDependencies(e,pr.stroke),c.strokeText(t,r,s));w&&((this.pendingTextPaths||=[]).push({transform:Pt(c),x:r,y:s,fontSize:g,path:_}),this.dependencyTracker?.recordCharacterBBox(e,c,h,g,r,s))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){r=!0;break}return Qe(this,"isFontSubpixelAAEnabled",r)}showText(e,t){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,pr.showText).copyDependenciesFromIncrementalOperation(e,"sameLineText").resetBBox(e),this.current.textRenderingMode&un.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const r=this.current,s=r.font;if(s.isType3Font){this.showType3Text(e,t),this.dependencyTracker?.recordOperation(e).recordIncrementalData("sameLineText",e);return}const i=r.fontSize;if(i===0){this.dependencyTracker?.recordOperation(e);return}const a=this.ctx,c=r.fontSizeScale,u=r.charSpacing,h=r.wordSpacing,f=r.fontDirection,g=r.textHScale*f,y=t.length,w=s.vertical,S=w?1:-1,v=s.defaultVMetrics,_=i*r.fontMatrix[0],A=r.textRenderingMode===un.FILL&&!s.disableFontFace&&!r.patternFill;a.save(),r.textMatrix&&a.transform(...r.textMatrix),a.translate(r.x,r.y+r.textRise),f>0?a.scale(g,-1):a.scale(g,1);let E,k;if(r.patternFill){a.save();const $=r.fillColor.getPattern(a,this,Xr(a),pn.FILL);E=Pt(a),a.restore(),a.fillStyle=$}if(r.patternStroke){a.save();const $=r.strokeColor.getPattern(a,this,Xr(a),pn.STROKE);k=Pt(a),a.restore(),a.strokeStyle=$}let P=r.lineWidth;const N=r.textMatrixScale;if(N===0||P===0){const $=r.textRenderingMode&un.FILL_STROKE_MASK;($===un.STROKE||$===un.FILL_STROKE)&&(P=this.getSinglePixelWidth())}else P/=N;if(c!==1&&(a.scale(c,c),P/=c),a.lineWidth=P,s.isInvalidPDFjsFont){const $=[];let G=0;for(const V of t)$.push(V.unicode),G+=V.width;const F=$.join("");if(a.fillText(F,0,0),this.dependencyTracker!==null){const V=a.measureText(F);this.dependencyTracker.recordBBox(e,this.ctx,-V.actualBoundingBoxLeft,V.actualBoundingBoxRight,-V.actualBoundingBoxAscent,V.actualBoundingBoxDescent).recordOperation(e).recordIncrementalData("sameLineText",e)}r.x+=G*_*g,a.restore(),this.compose();return}let R=0,M;for(M=0;M<y;++M){const $=t[M];if(typeof $=="number"){R+=S*$*i/1e3;continue}let G=!1;const F=($.isSpace?h:0)+u,V=$.fontChar,X=$.accent;let Z,W,oe=$.width;if(w){const O=$.vmetric||v,ee=-($.vmetric?O[1]:oe*.5)*_,te=O[2]*_;oe=O?-O[0]:oe,Z=ee/c,W=(R+te)/c}else Z=R/c,W=0;let K;if(s.remeasure&&oe>0){K=a.measureText(V);const O=K.width*1e3/i*c;if(oe<O&&this.isFontSubpixelAAEnabled){const ee=oe/O;G=!0,a.save(),a.scale(ee,1),Z/=ee}else oe!==O&&(Z+=(oe-O)/2e3*i/c)}if(this.contentVisible&&($.isInFont||s.missingFile)){if(A&&!X)a.fillText(V,Z,W),this.dependencyTracker?.recordCharacterBBox(e,a,K?{bbox:null}:s,i/c,Z,W,()=>K??a.measureText(V));else if(this.paintChar(e,V,Z,W,E,k),X){const O=Z+i*X.offset.x/c,ee=W-i*X.offset.y/c;this.paintChar(e,X.fontChar,O,ee,E,k)}}const z=w?oe*_-F*f:oe*_+F*f;R+=z,G&&a.restore()}w?r.y-=R:r.x+=R*g,a.restore(),this.compose(),this.dependencyTracker?.recordOperation(e).recordIncrementalData("sameLineText",e)}showType3Text(e,t){const r=this.ctx,s=this.current,i=s.font,a=s.fontSize,c=s.fontDirection,u=i.vertical?1:-1,h=s.charSpacing,f=s.wordSpacing,g=s.textHScale*c,y=s.fontMatrix||_m,w=t.length,S=s.textRenderingMode===un.INVISIBLE;let v,_,A,E;if(S||a===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),s.textMatrix&&r.transform(...s.textMatrix),r.translate(s.x,s.y+s.textRise),r.scale(g,c);const k=this.dependencyTracker;for(this.dependencyTracker=k?new bd(k,e):null,v=0;v<w;++v){if(_=t[v],typeof _=="number"){E=u*_*a/1e3,this.ctx.translate(E,0),s.x+=E*g;continue}const P=(_.isSpace?f:0)+h,N=i.charProcOperatorList[_.operatorListId];N?this.contentVisible&&(this.save(),r.scale(a,a),r.transform(...y),this.executeOperatorList(N),this.restore()):He(`Type3 character "${_.operatorListId}" is not available.`);const R=[_.width,0];_e.applyTransform(R,y),A=R[0]*a+P,r.translate(A,0),s.x+=A*g}r.restore(),k&&(this.dependencyTracker.recordNestedDependencies(),this.dependencyTracker=k)}setCharWidth(e,t,r){}setCharWidthAndBounds(e,t,r,s,i,a,c){const u=new Path2D;u.rect(s,i,a-s,c-i),this.ctx.clip(u),this.dependencyTracker?.recordBBox(e,this.ctx,s,a,i,c).recordClipBox(e,this.ctx,s,a,i,c),this.endPath(e)}getColorN_Pattern(e,t){let r;if(t[0]==="TilingPattern"){const s=this.baseTransform||Pt(this.ctx),i={createCanvasGraphics:a=>new ra(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new bd(this.dependencyTracker,e):null)};r=new Rg(t,this.ctx,i,s)}else r=this._getPattern(e,t[1],t[2]);return r}setStrokeColorN(e,...t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,r=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=NM(this.getObject(e,t)),this.cachedPatterns.set(t,s)),r&&(s.matrix=r),s}shadingFill(e,t){if(!this.contentVisible)return;const r=this.ctx;this.save(e);const s=this._getPattern(e,t);r.fillStyle=s.getPattern(r,this,Xr(r),pn.SHADING);const i=Xr(r);if(i){const{width:a,height:c}=r.canvas,u=Qo.slice();_e.axialAlignedBoundingBox([0,0,a,c],i,u);const[h,f,g,y]=u;this.ctx.fillRect(h,f,g-h,y-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,pr.transform).recordDependencies(e,pr.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){pt("Should not call beginInlineImage")}beginImageData(){pt("Should not call beginImageData")}paintFormXObjectBegin(e,t,r){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=Pt(this.ctx),r)){_e.axialAlignedBoundingBox(r,this.baseTransform,this.current.minMax);const[s,i,a,c]=r,u=new Path2D;u.rect(s,i,a-s,c-i),this.ctx.clip(u),this.dependencyTracker?.recordClipBox(e,this.ctx,s,a,i,c),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const r=this.ctx;t.isolated||ih("TODO: Support non-isolated groups."),t.knockout&&He("Knockout groups not supported.");const s=Pt(r);if(t.matrix&&r.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=Qo.slice();_e.axialAlignedBoundingBox(t.bbox,Pt(r),i);const a=[0,0,r.canvas.width,r.canvas.height];i=_e.intersect(i,a)||[0,0,0,0];const c=Math.floor(i[0]),u=Math.floor(i[1]),h=Math.max(Math.ceil(i[2])-c,1),f=Math.max(Math.ceil(i[3])-u,1);this.current.startNewPathAndClipBox([0,0,h,f]);let g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(g,h,f),w=y.context;w.translate(-c,-u),w.transform(...s);let S=new Path2D;const[v,_,A,E]=t.bbox;if(S.rect(v,_,A-v,E-_),t.matrix){const k=new Path2D;k.addPath(S,new DOMMatrix(t.matrix)),S=k}w.clip(S),t.smask&&this.smaskStack.push({canvas:y.canvas,context:w,offsetX:c,offsetY:u,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(r.setTransform(1,0,0,1,0,0),r.translate(c,u),r.save()),gl(r,w),this.ctx=w,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(r),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}endGroup(e,t){if(!this.contentVisible)return;this.groupLevel--;const r=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const i=Pt(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...i);const a=Qo.slice();_e.axialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],i,a),this.ctx.drawImage(r.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(e,t,r,s,i,a){if(this.#e(),Gu(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),r){const c=r[2]-r[0],u=r[3]-r[1];if(a&&this.annotationCanvasMap){s=s.slice(),s[4]-=r[0],s[5]-=r[1],r=r.slice(),r[0]=r[1]=0,r[2]=c,r[3]=u,_e.singularValueDecompose2dScale(Pt(this.ctx),Qn);const{viewportScale:h}=this,f=Math.ceil(c*this.outputScaleX*h),g=Math.ceil(u*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(f,g);const{canvas:y,context:w}=this.annotationCanvas;this.annotationCanvasMap.set(t,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=w,this.ctx.save(),this.ctx.setTransform(Qn[0],0,0,-Qn[1],0,u*Qn[1]),Gu(this.ctx)}else{Gu(this.ctx),this.endPath(e);const h=new Path2D;h.rect(r[0],r[1],c,u),this.ctx.clip(h)}}this.current=new ab(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...s),this.transform(e,...i)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){if(!this.contentVisible)return;const r=t.count;t=this.getObject(e,t.data,t),t.count=r;const s=this.ctx,i=this._createMaskCanvas(e,t),a=i.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(a,i.offsetX,i.offsetY),this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,i.offsetX,i.offsetX+a.width,i.offsetY,i.offsetY+a.height).recordOperation(e),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r,s=0,i=0,a,c){if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const u=this.ctx;u.save();const h=Pt(u);u.transform(r,s,i,a,0,0);const f=this._createMaskCanvas(e,t);u.setTransform(1,0,0,1,f.offsetX-h[4],f.offsetY-h[5]),this.dependencyTracker?.resetBBox(e);for(let g=0,y=c.length;g<y;g+=2){const w=_e.transform(h,[r,s,i,a,c[g],c[g+1]]);u.drawImage(f.canvas,w[4],w[5]),this.dependencyTracker?.recordBBox(e,this.ctx,w[4],w[4]+f.canvas.width,w[5],w[5]+f.canvas.height)}u.restore(),this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageMaskXObjectGroup(e,t){if(!this.contentVisible)return;const r=this.ctx,s=this.current.fillColor,i=this.current.patternFill;this.dependencyTracker?.resetBBox(e).recordDependencies(e,pr.transformAndFill);for(const a of t){const{data:c,width:u,height:h,transform:f}=a,g=this.cachedCanvases.getCanvas("maskCanvas",u,h),y=g.context;y.save();const w=this.getObject(e,c,a);cb(y,w),y.globalCompositeOperation="source-in",y.fillStyle=i?s.getPattern(y,this,Xr(r),pn.FILL):s,y.fillRect(0,0,u,h),y.restore(),r.save(),r.transform(...f),r.scale(1,-1),Wu(r,g.canvas,0,0,u,h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,r,0,u,0,h),r.restore()}this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const r=this.getObject(e,t);if(!r){He("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,r)}paintImageXObjectRepeat(e,t,r,s,i){if(!this.contentVisible)return;const a=this.getObject(e,t);if(!a){He("Dependent image isn't ready yet");return}const c=a.width,u=a.height,h=[];for(let f=0,g=i.length;f<g;f+=2)h.push({transform:[r,0,0,s,i[f],i[f+1]],x:0,y:0,w:c,h:u});this.paintInlineImageXObjectGroup(e,a,h)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:r,height:s}=e,i=this.cachedCanvases.getCanvas("inlineImage",r,s),a=i.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",i.canvas}paintInlineImageXObject(e,t){if(!this.contentVisible)return;const r=t.width,s=t.height,i=this.ctx;this.save(e);const{filter:a}=i;a!=="none"&&a!==""&&(i.filter="none"),i.scale(1/r,-1/s);let c;if(t.bitmap)c=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)c=t;else{const f=this.cachedCanvases.getCanvas("inlineImage",r,s).context;lb(f,t),c=this.applyTransferMapsToCanvas(f)}const u=this._scaleImage(c,Xr(i));i.imageSmoothingEnabled=ub(Pt(i),t.interpolate),this.dependencyTracker?.resetBBox(e).recordBBox(e,i,0,r,-s,0).recordDependencies(e,pr.imageXObject).recordOperation(e),Wu(i,u.img,0,0,u.paintWidth,u.paintHeight,0,-s,r,s),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,r){if(!this.contentVisible)return;const s=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const a=t.width,c=t.height,h=this.cachedCanvases.getCanvas("inlineImage",a,c).context;lb(h,t),i=this.applyTransferMapsToCanvas(h)}this.dependencyTracker?.resetBBox(e);for(const a of r)s.save(),s.transform(...a.transform),s.scale(1,-1),Wu(s,i,a.x,a.y,a.w,a.h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,s,0,1,-1,0),s.restore();this.dependencyTracker?.recordOperation(e),this.compose()}paintSolidColorImageMask(e){this.contentVisible&&(this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,pr.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,r){}beginMarkedContent(e,t){this.dependencyTracker?.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,r){this.dependencyTracker?.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){this.dependencyTracker?.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,r){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(r);const i=this.ctx;this.pendingClip?(s||(this.pendingClip===db?i.clip(t,"evenodd"):i.clip(t)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):this.dependencyTracker?.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Pt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:r,c:s,d:i}=this.ctx.getTransform();let a,c;if(r===0&&s===0){const u=Math.abs(t),h=Math.abs(i);if(u===h)if(e===0)a=c=1/u;else{const f=u*e;a=c=f<1?1/f:1}else if(e===0)a=1/u,c=1/h;else{const f=u*e,g=h*e;a=f<1?1/f:1,c=g<1?1/g:1}}else{const u=Math.abs(t*i-r*s),h=Math.hypot(t,r),f=Math.hypot(s,i);if(e===0)a=f/u,c=h/u;else{const g=e*u;a=f>g?f/g:1,c=h>g?h/g:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:r,current:{lineWidth:s}}=this,[i,a]=this.getScaleForStroking();if(i===a){r.lineWidth=(s||1)*i,r.stroke(e);return}const c=r.getLineDash();t&&r.save(),r.scale(i,a),Ip.a=1/i,Ip.d=1/a;const u=new Path2D;if(u.addPath(e,Ip),c.length>0){const h=Math.max(i,a);r.setLineDash(c.map(f=>f/h)),r.lineDashOffset/=h}r.lineWidth=s||1,r.stroke(u),t&&r.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const n in $l)ra.prototype[n]!==void 0&&(ra.prototype[$l[n]]=ra.prototype[n]);class Vi{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class FM{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}}const Ho=Symbol("INTERNAL");class BM{#e=!1;#t=!1;#n=!1;#r=!0;constructor(e,{name:t,intent:r,usage:s,rbGroups:i}){this.#e=!!(e&Kn.DISPLAY),this.#t=!!(e&Kn.PRINT),this.name=t,this.intent=r,this.usage=s,this.rbGroups=i}get visible(){if(this.#n)return this.#r;if(!this.#r)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,r=!1){e!==Ho&&pt("Internal method `_setVisible` called."),this.#n=r,this.#r=t}}class $M{#e=null;#t=new Map;#n=null;#r=null;constructor(e,t=Kn.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#r=e.order;for(const r of e.groups)this.#t.set(r.id,new BM(t,r));if(e.baseState==="OFF")for(const r of this.#t.values())r._setVisible(Ho,!1);for(const r of e.on)this.#t.get(r)._setVisible(Ho,!0);for(const r of e.off)this.#t.get(r)._setVisible(Ho,!1);this.#n=this.getHash()}}#i(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let s=1;s<t;s++){const i=e[s];let a;if(Array.isArray(i))a=this.#i(i);else if(this.#t.has(i))a=this.#t.get(i).visible;else return He(`Optional content group not found: ${i}`),!0;switch(r){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return r==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return ih("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(He(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#i(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return He(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return He(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return He(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return He(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return He(`Unknown optional content policy ${e.policy}.`),!0}return He(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,r=!0){const s=this.#t.get(e);if(!s){He(`Optional content group not found: ${e}`);return}if(r&&t&&s.rbGroups.length)for(const i of s.rbGroups)for(const a of i)a!==e&&this.#t.get(a)?._setVisible(Ho,!1,!0);s._setVisible(Ho,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let r;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":r=s;continue}const i=this.#t.get(s);if(i)switch(r){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!i.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#r?this.#r.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new vS;for(const[t,r]of this.#t)e.update(`${t}:${r.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}}class zM{constructor(e,{disableRange:t=!1,disableStream:r=!1}){Yt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:i,progressiveDone:a,contentDispositionFilename:c}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=c,i?.length>0){const u=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((u,h)=>{this._onReceiveData({begin:u,chunk:h})}),e.addProgressListener((u,h)=>{this._onProgress({loaded:u,total:h})}),e.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const s=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(r),!0)});Yt(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Yt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new VM(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new UM(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class VM{constructor(e,t,r=!1,s=null){this._stream=e,this._done=r||!1,this._filename=Cg(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class UM{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function HM(n){let e=!0,t=r("filename\\*","i").exec(n);if(t){t=t[1];let f=c(t);return f=unescape(f),f=u(f),f=h(f),i(f)}if(t=a(n),t){const f=h(t);return i(f)}if(t=r("filename","i").exec(n),t){t=t[1];let f=c(t);return f=h(f),i(f)}function r(f,g){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function s(f,g){if(f){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const y=new TextDecoder(f,{fatal:!0}),w=hc(g);g=y.decode(w),e=!1}catch{}}return g}function i(f){return e&&/[\x80-\xff]/.test(f)&&(f=s("utf-8",f),e&&(f=s("iso-8859-1",f))),f}function a(f){const g=[];let y;const w=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=w.exec(f))!==null;){let[,v,_,A]=y;if(v=parseInt(v,10),v in g){if(v===0)break;continue}g[v]=[_,A]}const S=[];for(let v=0;v<g.length&&v in g;++v){let[_,A]=g[v];A=c(A),_&&(A=unescape(A),v===0&&(A=u(A))),S.push(A)}return S.join("")}function c(f){if(f.startsWith('"')){const g=f.slice(1).split('\\"');for(let y=0;y<g.length;++y){const w=g[y].indexOf('"');w!==-1&&(g[y]=g[y].slice(0,w),g.length=y+1),g[y]=g[y].replaceAll(/\\(.)/g,"$1")}f=g.join('"')}return f}function u(f){const g=f.indexOf("'");if(g===-1)return f;const y=f.slice(0,g),S=f.slice(g+1).replace(/^[^']*'/,"");return s(y,S)}function h(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,y,w,S){if(w==="q"||w==="Q")return S=S.replaceAll("_"," "),S=S.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,_){return String.fromCharCode(parseInt(_,16))}),s(y,S);try{S=atob(S)}catch{}return s(y,S)})}return""}function CS(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const r in e){const s=e[r];s!==void 0&&t.append(r,s)}return t}function ch(n){return URL.parse(n)?.origin??null}function ES({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:r}){const s={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(n.get("Content-Length"),10);return!Number.isInteger(i)||(s.suggestedLength=i,i<=2*t)||r||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function TS(n){const e=n.get("Content-Disposition");if(e){let t=HM(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Cg(t))return t}return null}function gc(n,e){return new wd(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function kS(n){return n===200||n===206}function PS(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function NS(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(He(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class WM{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=CS(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Yt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new GM(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new qM(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class GM{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const r=new Headers(e.headers),s=t.url;fetch(s,PS(r,this._withCredentials,this._abortController)).then(i=>{if(e._responseOrigin=ch(i.url),!kS(i.status))throw gc(i.status,s);this._reader=i.body.getReader(),this._headersCapability.resolve();const a=i.headers,{allowRangeRequests:c,suggestedLength:u}=ES({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=u||this._contentLength,this._filename=TS(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new fi("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:NS(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class qM{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${r-1}`);const a=s.url;fetch(a,PS(i,this._withCredentials,this._abortController)).then(c=>{const u=ch(c.url);if(u!==e._responseOrigin)throw new Error(`Expected range response-origin "${u}" to match "${e._responseOrigin}".`);if(!kS(c.status))throw gc(c.status,a);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:NS(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const jp=200,Op=206;function YM(n){const e=n.response;return typeof e!="string"?e:hc(e).buffer}class XM{_responseOrigin=null;constructor({url:e,httpHeaders:t,withCredentials:r}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=CS(this.isHttp,t),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,r=this.currXhrId++,s=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,a]of this.headers)t.setRequestHeader(i,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=Op):s.expectedStatus=jp,t.responseType="arraybuffer",Yt(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){const r=this.pendingRequests[e];r&&r.onProgress?.(t)}onStateChange(e,t){const r=this.pendingRequests[e];if(!r)return;const s=r.xhr;if(s.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){r.onError(s.status);return}const i=s.status||jp;if(!(i===jp&&r.expectedStatus===Op)&&i!==r.expectedStatus){r.onError(s.status);return}const c=YM(s);if(i===Op){const u=s.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(u);h?r.onDone({begin:parseInt(h[1],10),chunk:c}):(He('Missing or invalid "Content-Range" header.'),r.onError(0))}else c?r.onDone({begin:0,chunk:c}):r.onError(s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class KM{constructor(e){this._source=e,this._manager=new XM(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Yt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new QM(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new ZM(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class QM{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=ch(t.responseURL);const r=t.getAllResponseHeaders(),s=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[u,...h]=c.split(": ");return[u,h.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:a}=ES({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=TS(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=gc(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class ZM{constructor(e,t,r){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const e=ch(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=gc(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const JM=/^[a-z][a-z0-9\-+.]+:/i;function eI(n){if(JM.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class tI{constructor(e){this.source=e,this.url=eI(e.url),Yt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Yt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new nI(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new rI(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class nI{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=gc(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new fi("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class rI{constructor(e,t,r){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=e.source;this._isStreamingSupported=!s.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const yl=Symbol("INITIAL_DATA");class RS{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:yl}}get(e,t=null){if(t){const s=this.#t(e);return s.promise.then(()=>t(s.data)),null}const r=this.#e[e];if(!r||r.data===yl)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=this.#e[e];return!!t&&t.data!==yl}delete(e){const t=this.#e[e];return!t||t.data===yl?!1:(delete this.#e[e],!0)}resolve(e,t=null){const r=this.#t(e);r.data=t,r.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==yl&&(yield[e,t])}}}const sI=1e5,hb=30;class An{#e=Promise.withResolvers();#t=null;#n=!1;#r=!!globalThis.FontInspector?.enabled;#i=null;#s=null;#o=0;#a=0;#l=null;#c=null;#h=0;#u=0;#f=Object.create(null);#m=[];#p=null;#d=[];#g=new WeakMap;#x=null;static#y=new Map;static#b=new Map;static#_=new WeakMap;static#v=null;static#S=new Set;constructor({textContentSource:e,container:t,viewport:r}){if(e instanceof ReadableStream)this.#p=e;else if(typeof e=="object")this.#p=new ReadableStream({start(u){u.enqueue(e),u.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#c=t,this.#u=r.scale*os.pixelRatio,this.#h=r.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:s,pageHeight:i,pageX:a,pageY:c}=r.rawDims;this.#x=[1,0,0,-1,-a,c+i],this.#a=s,this.#o=i,An.#P(),Xi(t,r),this.#e.promise.finally(()=>{An.#S.delete(this),this.#s=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=mn.platform;return Qe(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#l.read().then(({value:t,done:r})=>{if(r){this.#e.resolve();return}this.#i??=t.lang,Object.assign(this.#f,t.styles),this.#k(t.items),e()},this.#e.reject)};return this.#l=this.#p.getReader(),An.#S.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const r=e.scale*os.pixelRatio,s=e.rotation;if(s!==this.#h&&(t?.(),this.#h=s,Xi(this.#c,{rotation:s})),r!==this.#u){t?.(),this.#u=r;const i={div:null,properties:null,ctx:An.#D(this.#i)};for(const a of this.#d)i.properties=this.#g.get(a),i.div=a,this.#A(i)}}cancel(){const e=new fi("TextLayer task cancelled.");this.#l?.cancel(e).catch(()=>{}),this.#l=null,this.#e.reject(e)}get textDivs(){return this.#d}get textContentItemsStr(){return this.#m}#k(e){if(this.#n)return;this.#s.ctx??=An.#D(this.#i);const t=this.#d,r=this.#m;for(const s of e){if(t.length>sI){He("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(s.str===void 0){if(s.type==="beginMarkedContentProps"||s.type==="beginMarkedContent"){const i=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),s.id&&this.#t.setAttribute("id",`${s.id}`),i.append(this.#t)}else s.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}r.push(s.str),this.#E(s)}}#E(e){const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#d.push(t);const s=_e.transform(this.#x,e.transform);let i=Math.atan2(s[1],s[0]);const a=this.#f[e.fontName];a.vertical&&(i+=Math.PI/2);let c=this.#r&&a.fontSubstitution||a.fontFamily;c=An.fontFamilyMap.get(c)||c;const u=Math.hypot(s[2],s[3]),h=u*An.#j(c,a,this.#i);let f,g;i===0?(f=s[4],g=s[5]-h):(f=s[4]+h*Math.sin(i),g=s[5]-h*Math.cos(i));const y="calc(var(--total-scale-factor) *",w=t.style;this.#t===this.#c?(w.left=`${(100*f/this.#a).toFixed(2)}%`,w.top=`${(100*g/this.#o).toFixed(2)}%`):(w.left=`${y}${f.toFixed(2)}px)`,w.top=`${y}${g.toFixed(2)}px)`),w.fontSize=`${y}${(An.#v*u).toFixed(2)}px)`,w.fontFamily=c,r.fontSize=u,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#r&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),i!==0&&(r.angle=i*(180/Math.PI));let S=!1;if(e.str.length>1)S=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const v=Math.abs(e.transform[0]),_=Math.abs(e.transform[3]);v!==_&&Math.max(v,_)/Math.min(v,_)>1.5&&(S=!0)}if(S&&(r.canvasWidth=a.vertical?e.height:e.width),this.#g.set(t,r),this.#s.div=t,this.#s.properties=r,this.#A(this.#s),r.hasText&&this.#t.append(t),r.hasEOL){const v=document.createElement("br");v.setAttribute("role","presentation"),this.#t.append(v)}}#A(e){const{div:t,properties:r,ctx:s}=e,{style:i}=t;let a="";if(An.#v>1&&(a=`scale(${1/An.#v})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:c}=i,{canvasWidth:u,fontSize:h}=r;An.#T(s,h*this.#u,c);const{width:f}=s.measureText(t.textContent);f>0&&(a=`scaleX(${u*this.#u/f}) ${a}`)}r.angle!==0&&(a=`rotate(${r.angle}deg) ${a}`),a.length>0&&(i.transform=a)}static cleanup(){if(!(this.#S.size>0)){this.#y.clear();for(const{canvas:e}of this.#b.values())e.remove();this.#b.clear()}}static#D(e=null){let t=this.#b.get(e||="");if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(e,t),this.#_.set(t,{size:0,family:""})}return t}static#T(e,t,r){const s=this.#_.get(e);t===s.size&&r===s.family||(e.font=`${t}px ${r}`,s.size=t,s.family=r)}static#P(){if(this.#v!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#v=e.getBoundingClientRect().height,e.remove()}static#j(e,t,r){const s=this.#y.get(e);if(s)return s;const i=this.#D(r);i.canvas.width=i.canvas.height=hb,this.#T(i,hb,e);const a=i.measureText(""),c=a.fontBoundingBoxAscent,u=Math.abs(a.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let h=.8;return c?h=c/(c+u):(mn.platform.isFirefox&&He("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?h=t.ascent:t.descent&&(h=1+t.descent)),this.#y.set(e,h),h}}class zl{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};function s(i){if(!i)return;let a=null;const c=i.name;if(c==="#text")a=i.value;else if(zl.shouldBuildText(c))i?.attributes?.textContent?a=i.attributes.textContent:i.value&&(a=i.value);else return;if(a!==null&&t.push({str:a}),!!i.children)for(const u of i.children)s(u)}return s(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const iI=100;function Dg(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new Mg,{docId:t}=e,r=n.url?fM(n.url):null,s=n.data?pM(n.data):null,i=n.httpHeaders||null,a=n.withCredentials===!0,c=n.password??null,u=n.range instanceof DS?n.range:null,h=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let f=n.worker instanceof Vl?n.worker:null;const g=n.verbosity,y=typeof n.docBaseUrl=="string"&&!oh(n.docBaseUrl)?n.docBaseUrl:null,w=Uu(n.cMapUrl),S=n.cMapPacked!==!1,v=n.CMapReaderFactory||(Cn?_M:eb),_=Uu(n.iccUrl),A=Uu(n.standardFontDataUrl),E=n.StandardFontDataFactory||(Cn?SM:tb),k=Uu(n.wasmUrl),P=n.WasmFactory||(Cn?AM:nb),N=n.stopAtErrors!==!0,R=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,M=n.isEvalSupported!==!1,$=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Cn,G=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Cn&&(mn.platform.isFirefox||!globalThis.chrome),F=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,V=typeof n.disableFontFace=="boolean"?n.disableFontFace:Cn,X=n.fontExtraProperties===!0,Z=n.enableXfa===!0,W=n.ownerDocument||globalThis.document,oe=n.disableRange===!0,K=n.disableStream===!0,z=n.disableAutoFetch===!0,O=n.pdfBug===!0,ee=n.CanvasFactory||(Cn?bM:vM),te=n.FilterFactory||(Cn?wM:xM),L=n.enableHWA===!0,Q=n.useWasm!==!1,fe=u?u.length:n.length??NaN,Te=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Cn&&!V,De=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(v===eb&&E===tb&&P===nb&&w&&A&&k&&Cl(w,document.baseURI)&&Cl(A,document.baseURI)&&Cl(k,document.baseURI)),Me=null;WD(g);const ie={canvasFactory:new ee({ownerDocument:W,enableHWA:L}),filterFactory:new te({docId:t,ownerDocument:W}),cMapReaderFactory:De?null:new v({baseUrl:w,isCompressed:S}),standardFontDataFactory:De?null:new E({baseUrl:A}),wasmFactory:De?null:new P({baseUrl:k})};f||(f=Vl.create({verbosity:g,port:Vi.workerPort}),e._worker=f);const Ae={docId:t,apiVersion:"5.4.149",data:s,password:c,disableAutoFetch:z,rangeChunkSize:h,length:fe,docBaseUrl:y,enableXfa:Z,evaluatorOptions:{maxImageSize:R,disableFontFace:V,ignoreErrors:N,isEvalSupported:M,isOffscreenCanvasSupported:$,isImageDecoderSupported:G,canvasMaxAreaInBytes:F,fontExtraProperties:X,useSystemFonts:Te,useWasm:Q,useWorkerFetch:De,cMapUrl:w,iccUrl:_,standardFontDataUrl:A,wasmUrl:k}},$e={ownerDocument:W,pdfBug:O,styleElement:Me,loadingParams:{disableAutoFetch:z,enableXfa:Z}};return f.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Ue=f.messageHandler.sendWithPromise("GetDocRequest",Ae,s?[s.buffer]:null);let Je;if(u)Je=new zM(u,{disableRange:oe,disableStream:K});else if(!s){if(!r)throw new Error("getDocument - no `url` parameter provided.");const ut=Cl(r)?WM:Cn?tI:KM;Je=new ut({url:r,length:fe,httpHeaders:i,withCredentials:a,rangeChunkSize:h,disableRange:oe,disableStream:K})}return Ue.then(ut=>{if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Mt=new El(t,ut,f.port),gn=new lI(Mt,e,Je,$e,ie,L);e._transport=gn,Mt.send("Ready",null)})}).catch(e._capability.reject),e}class Mg{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Mg.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class DS{#e=Promise.withResolvers();#t=[];#n=[];#r=[];#i=[];constructor(e,t,r=!1,s=null){this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=s}addRangeListener(e){this.#i.push(e)}addProgressListener(e){this.#r.push(e)}addProgressiveReadListener(e){this.#n.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,t){for(const r of this.#i)r(e,t)}onDataProgress(e,t){this.#e.promise.then(()=>{for(const r of this.#r)r(e,t)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(const t of this.#n)t(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(const e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,t){pt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class oI{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Qe(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class aI{#e=!1;constructor(e,t,r,s=!1){this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=s?new Qw:null,this._pdfBug=s,this.commonObjs=r.commonObjs,this.objs=new RS,this._intentStates=new Map,this.destroyed=!1,this.recordedGroups=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:s=0,dontFlip:i=!1}={}){return new pc({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:s,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Qe(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,canvas:t=e.canvas,viewport:r,intent:s="display",annotationMode:i=ai.ENABLE,transform:a=null,background:c=null,optionalContentConfigPromise:u=null,annotationCanvasMap:h=null,pageColors:f=null,printAnnotationStorage:g=null,isEditing:y=!1,recordOperations:w=!1,filteredOperationIndexes:S=null}){this._stats?.time("Overall");const v=this._transport.getRenderingIntent(s,i,g,y),{renderingIntent:_,cacheKey:A}=v;this.#e=!1,u||=this._transport.getOptionalContentConfig(_);let E=this._intentStates.get(A);E||(E=Object.create(null),this._intentStates.set(A,E)),E.streamReaderCancelTimeout&&(clearTimeout(E.streamReaderCancelTimeout),E.streamReaderCancelTimeout=null);const k=!!(_&Kn.PRINT);E.displayReadyCapability||(E.displayReadyCapability=Promise.withResolvers(),E.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(v));const P=!this.recordedGroups&&(w||this._pdfBug&&globalThis.StepperManager?.enabled),N=$=>{if(E.renderTasks.delete(R),P){const G=R.gfx?.dependencyTracker.take();G?(R.stepper?.setOperatorGroups(G),w&&(this.recordedGroups=G)):w&&(this.recordedGroups=[])}k&&(this.#e=!0),this.#t(),$?(R.capability.reject($),this._abortOperatorList({intentState:E,reason:$ instanceof Error?$:new Error($)})):R.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},R=new Zo({callback:N,params:{canvas:t,canvasContext:e,dependencyTracker:P?new CM(t):null,viewport:r,transform:a,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:E.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!k,pdfBug:this._pdfBug,pageColors:f,enableHWA:this._transport.enableHWA,filteredOperationIndexes:S});(E.renderTasks||=new Set).add(R);const M=R.task;return Promise.all([E.displayReadyCapability.promise,u]).then(([$,G])=>{if(this.destroyed){N();return}if(this._stats?.time("Rendering"),!(G.renderingIntent&_))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");R.initializeGraphics({transparency:$,optionalContentConfig:G}),R.operatorListChanged()}).catch(N),M}getOperatorList({intent:e="display",annotationMode:t=ai.ENABLE,printAnnotationStorage:r=null,isEditing:s=!1}={}){function i(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(u))}const a=this._transport.getRenderingIntent(e,t,r,s,!0);let c=this._intentStates.get(a.cacheKey);c||(c=Object.create(null),this._intentStates.set(a.cacheKey,c));let u;return c.opListReadCapability||(u=Object.create(null),u.operatorListChanged=i,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||=new Set).add(u),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(a)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>zl.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,s){function i(){a.read().then(function({value:u,done:h}){if(h){r(c);return}c.lang??=u.lang,Object.assign(c.styles,u.styles),c.items.push(...u.items),i()},s)}const a=t.getReader(),c={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;const t=this.#t();return e&&t&&(this._stats&&=new Qw),t}#t(){if(!this.#e||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,t){const r=this._intentStates.get(t);r&&(this._stats?.timeEnd("Page Request"),r.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let r=0,s=e.length;r<s;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&this.#t()}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r,modifiedIds:s}){const{map:i,transfer:a}=r,u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:s},a).getReader(),h=this._intentStates.get(t);h.streamReader=u;const f=()=>{u.read().then(({value:g,done:y})=>{if(y){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,h),f())},g=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const y of h.renderTasks)y.operatorListChanged();this.#t()}if(h.displayReadyCapability)h.displayReadyCapability.reject(g);else if(h.opListReadCapability)h.opListReadCapability.reject(g);else throw g}})};f()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof Ag){let s=iI;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new fi(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,i]of this._intentStates)if(i===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}var ci,kr,Ps,Fi,zd,Bi,$i,Dn,id,MS,IS,Tl,la,od;const Et=class Et{constructor({name:e=null,port:t=null,verbosity:r=GD()}={}){qr(this,Dn);qr(this,ci,Promise.withResolvers());qr(this,kr,null);qr(this,Ps,null);qr(this,Fi,null);if(this.name=e,this.destroyed=!1,this.verbosity=r,t){if(Ct(Et,$i).has(t))throw new Error("Cannot use more than one PDFWorker per port.");Ct(Et,$i).set(t,this),Yr(this,Dn,MS).call(this,t)}else Yr(this,Dn,IS).call(this)}get promise(){return Ct(this,ci).promise}get port(){return Ct(this,Ps)}get messageHandler(){return Ct(this,kr)}destroy(){this.destroyed=!0,Ct(this,Fi)?.terminate(),$n(this,Fi,null),Ct(Et,$i).delete(Ct(this,Ps)),$n(this,Ps,null),Ct(this,kr)?.destroy(),$n(this,kr,null)}static create(e){const t=Ct(this,$i).get(e?.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Et(e)}static get workerSrc(){if(Vi.workerSrc)return Vi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Qe(this,"_setupFakeWorkerGlobal",(async()=>Ct(this,la,od)?Ct(this,la,od):(await import(this.workerSrc)).WorkerMessageHandler)())}};ci=new WeakMap,kr=new WeakMap,Ps=new WeakMap,Fi=new WeakMap,zd=new WeakMap,Bi=new WeakMap,$i=new WeakMap,Dn=new WeakSet,id=function(){Ct(this,ci).resolve(),Ct(this,kr).send("configure",{verbosity:this.verbosity})},MS=function(e){$n(this,Ps,e),$n(this,kr,new El("main","worker",e)),Ct(this,kr).on("ready",()=>{}),Yr(this,Dn,id).call(this)},IS=function(){if(Ct(Et,Bi)||Ct(Et,la,od)){Yr(this,Dn,Tl).call(this);return}let{workerSrc:e}=Et;try{Et._isSameOrigin(window.location,e)||(e=Et._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new El("main","worker",t),s=()=>{i.abort(),r.destroy(),t.terminate(),this.destroyed?Ct(this,ci).reject(new Error("Worker was destroyed")):Yr(this,Dn,Tl).call(this)},i=new AbortController;t.addEventListener("error",()=>{Ct(this,Fi)||s()},{signal:i.signal}),r.on("test",c=>{if(i.abort(),this.destroyed||!c){s();return}$n(this,kr,r),$n(this,Ps,t),$n(this,Fi,t),Yr(this,Dn,id).call(this)}),r.on("ready",c=>{if(i.abort(),this.destroyed){s();return}try{a()}catch{Yr(this,Dn,Tl).call(this)}});const a=()=>{const c=new Uint8Array;r.send("test",c,[c.buffer])};a();return}catch{ih("The worker has been disabled.")}Yr(this,Dn,Tl).call(this)},Tl=function(){Ct(Et,Bi)||(He("Setting up fake worker."),$n(Et,Bi,!0)),Et._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){Ct(this,ci).reject(new Error("Worker was destroyed"));return}const t=new yM;$n(this,Ps,t);const r=`fake${nw(Et,zd)._++}`,s=new El(r+"_worker",r,t);e.setup(s,t),$n(this,kr,new El(r,r+"_worker",t)),Yr(this,Dn,id).call(this)}).catch(e=>{Ct(this,ci).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},la=new WeakSet,od=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},qr(Et,la),qr(Et,zd,0),qr(Et,Bi,!1),qr(Et,$i,new WeakMap),Cn&&($n(Et,Bi,!0),Vi.workerSrc||="./pdf.worker.mjs"),Et._isSameOrigin=(e,t)=>{const r=URL.parse(e);if(!r?.origin||r.origin==="null")return!1;const s=new URL(t,r);return r.origin===s.origin},Et._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Et.fromPort=e=>{if(sM("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Et.create(e)};let Vl=Et;class lI{#e=new Map;#t=new Map;#n=new Map;#r=new Map;#i=null;constructor(e,t,r,s,i,a){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new RS,this.fontLoader=new dM({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=a,this.setupMessageHandler()}#s(e,t=null){const r=this.#e.get(e);if(r)return r;const s=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,s),s}get annotationStorage(){return Qe(this,"annotationStorage",new kg)}getRenderingIntent(e,t=ai.ENABLE,r=null,s=!1,i=!1){let a=Kn.DISPLAY,c=Em;switch(e){case"any":a=Kn.ANY;break;case"display":break;case"print":a=Kn.PRINT;break;default:He(`getRenderingIntent - invalid intent: ${e}`)}const u=a&Kn.PRINT&&r instanceof xS?r:this.annotationStorage;switch(t){case ai.DISABLE:a+=Kn.ANNOTATIONS_DISABLE;break;case ai.ENABLE:break;case ai.ENABLE_FORMS:a+=Kn.ANNOTATIONS_FORMS;break;case ai.ENABLE_STORAGE:a+=Kn.ANNOTATIONS_STORAGE,c=u.serializable;break;default:He(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(a+=Kn.IS_EDITING),i&&(a+=Kn.OPLIST);const{ids:h,hash:f}=u.modifiedIds,g=[a,c.hash,f];return{renderingIntent:a,cacheKey:g.join("_"),annotationStorageSerializable:c,modifiedIds:h}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#i?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of this.#t.values())e.push(r._destroy());this.#t.clear(),this.#n.clear(),this.#r.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),An.cleanup(),this._networkStream?.cancelAllRequests(new fi("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(r,s)=>{Yt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},s.onPull=()=>{this._fullReader.read().then(function({value:i,done:a}){if(a){s.close();return}Yt(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{s.error(i)})},s.onCancel=i=>{this._fullReader.cancel(i),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async r=>{await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:i,contentLength:a}=this._fullReader;return(!s||!i)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=c=>{t.onProgress?.({loaded:c.loaded,total:c.total})}),{isStreamingSupported:s,isRangeSupported:i,contentLength:a}}),e.on("GetRangeReader",(r,s)=>{Yt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(r.begin,r.end);if(!i){s.close();return}s.onPull=()=>{i.read().then(function({value:a,done:c}){if(c){s.close();return}Yt(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{i.cancel(a),s.ready.catch(c=>{if(!this.destroyed)throw c})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new oI(r,this))}),e.on("DocException",r=>{t._capability.reject(Vn(r))}),e.on("PasswordRequest",r=>{this.#i=Promise.withResolvers();try{if(!t.onPassword)throw Vn(r);const s=i=>{i instanceof Error?this.#i.reject(i):this.#i.resolve({password:i})};t.onPassword(s,r.code)}catch(s){this.#i.reject(s)}return this.#i.promise}),e.on("DataLoaded",r=>{t.onProgress?.({loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;this.#t.get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,s,i])=>{if(this.destroyed||this.commonObjs.has(r))return null;switch(s){case"Font":if("error"in i){const h=i.error;He(`Error during font loading: ${h}`),this.commonObjs.resolve(r,h);break}const a=this._params.pdfBug&&globalThis.FontInspector?.enabled?(h,f)=>globalThis.FontInspector.fontAdded(h,f):null,c=new hM(i,a);this.fontLoader.bind(c).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!c.fontExtraProperties&&c.data&&(c.data=null),this.commonObjs.resolve(r,c)});break;case"CopyLocalImage":const{imageRef:u}=i;Yt(u,"The imageRef must be defined.");for(const h of this.#t.values())for(const[,f]of h.objs)if(f?.ref===u)return f.dataLen?(this.commonObjs.resolve(r,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,i);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([r,s,i,a])=>{if(this.destroyed)return;const c=this.#t.get(s);if(!c.objs.has(r)){if(c._intentStates.size===0){a?.bitmap?.close();return}switch(i){case"Image":case"Pattern":c.objs.resolve(r,a);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",r=>{this.destroyed||t.onProgress?.({loaded:r.loaded,total:r.total})}),e.on("FetchBinaryData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[r.type];if(!s)throw new Error(`${r.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&He("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=this.#n.get(t);if(r)return r;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&this.#r.set(i.refStr,e);const a=new aI(t,i,this,this._params.pdfBug);return this.#t.set(t,a),a});return this.#n.set(t,s),s}getPageIndex(e){return Tm(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#s("GetOptionalContentConfig").then(t=>new $M(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(s=>({info:s[0],metadata:s[1]?new FM(s[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),An.cleanup()}}cachedPageNumber(e){if(!Tm(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#r.get(t)??null}}class cI{#e=null;onContinue=null;onError=null;constructor(e){this.#e=e}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class Zo{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:r,commonObjs:s,annotationCanvasMap:i,operatorList:a,pageIndex:c,canvasFactory:u,filterFactory:h,useRequestAnimationFrame:f=!1,pdfBug:g=!1,pageColors:y=null,enableHWA:w=!1,filteredOperationIndexes:S=null}){this.callback=e,this.params=t,this.objs=r,this.commonObjs=s,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=c,this.canvasFactory=u,this.filterFactory=h,this._pdfBug=g,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new cI(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=w,this._dependencyTracker=t.dependencyTracker,this._filteredOperationIndexes=S}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(Zo.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Zo.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:r,transform:s,background:i,dependencyTracker:a}=this.params,c=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new ra(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,a),this.gfx.beginDrawing({transform:s,viewport:r,transparency:e,background:i}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),Zo.#t.delete(this._canvas),e||=new Ag(`Rendering cancelled, page ${this._pageIndex+1}`,t),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._filteredOperationIndexes),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Zo.#t.delete(this._canvas),this.callback())))}}const Ig="5.4.149",uI="9e2e9e209";class mr{#e=null;#t=null;#n;#r=null;#i=!1;#s=!1;#o=null;#a;#l=null;#c=null;static#h=null;static get _keyboardManager(){return Qe(this,"_keyboardManager",new mc([[["Escape","mac+Escape"],mr.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],mr.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],mr.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],mr.prototype._moveToPrevious],[["Home","mac+Home"],mr.prototype._moveToBeginning],[["End","mac+End"],mr.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#s=!1,this.#o=e):this.#s=!0,this.#c=e?._uiManager||t,this.#a=this.#c._eventBus,this.#n=e?.color?.toUpperCase()||this.#c?.highlightColors.values().next().value||"#FFFF98",mr.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#o&&(e.ariaControls=`${this.#o.id}_colorpicker_dropdown`);const t=this.#c._signal;e.addEventListener("click",this.#p.bind(this),{signal:t}),e.addEventListener("keydown",this.#m.bind(this),{signal:t});const r=this.#t=document.createElement("span");return r.className="swatch",r.ariaHidden="true",r.style.backgroundColor=this.#n,e.append(r),e}renderMainDropdown(){const e=this.#r=this.#u();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#u(){const e=document.createElement("div"),t=this.#c._signal;e.addEventListener("contextmenu",vr,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#o&&(e.id=`${this.#o.id}_colorpicker_dropdown`);for(const[r,s]of this.#c.highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",s),i.title=r,i.setAttribute("data-l10n-id",mr.#h[r]);const a=document.createElement("span");i.append(a),a.className="swatch",a.style.backgroundColor=s,i.ariaSelected=s===this.#n,i.addEventListener("click",this.#f.bind(this,s),{signal:t}),e.append(i)}return e.addEventListener("keydown",this.#m.bind(this),{signal:t}),e}#f(e,t){t.stopPropagation(),this.#a.dispatch("switchannotationeditorparams",{source:this,type:tt.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#p(e);return}const t=e.target.getAttribute("data-color");t&&this.#f(t,e)}_moveToNext(e){if(!this.#g){this.#p(e);return}if(e.target===this.#e){this.#r.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#r?.firstChild||e.target===this.#e){this.#g&&this._hideDropdownFromKeyboard();return}this.#g||this.#p(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#g){this.#p(e);return}this.#r.firstChild?.focus()}_moveToEnd(e){if(!this.#g){this.#p(e);return}this.#r.lastChild?.focus()}#m(e){mr._keyboardManager.exec(this,e)}#p(e){if(this.#g){this.hideDropdown();return}if(this.#i=e.detail===0,this.#l||(this.#l=new AbortController,window.addEventListener("pointerdown",this.#d.bind(this),{signal:this.#c.combinedSignal(this.#l)})),this.#e.ariaExpanded="true",this.#r){this.#r.classList.remove("hidden");return}const t=this.#r=this.#u();this.#e.append(t)}#d(e){this.#r?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#r?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#l?.abort(),this.#l=null}get#g(){return this.#r&&!this.#r.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#g){this.#o?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#i})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#r)return;const t=this.#c.highlightColors.values();for(const r of this.#r.children)r.ariaSelected=t.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#r?.remove(),this.#r=null}}class Ul{#e=null;#t=null;#n=null;static#r=null;constructor(e){this.#t=e,this.#n=e._uiManager,Ul.#r||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#e)return this.#e;const{editorType:e,colorType:t,colorValue:r}=this.#t,s=this.#e=document.createElement("input");return s.type="color",s.value=r||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",Ul.#r[e]),s.addEventListener("input",()=>{this.#n.updateParams(t,s.value)},{signal:this.#n._signal}),s}update(e){this.#e&&(this.#e.value=e)}destroy(){this.#e?.remove(),this.#e=null}hideDropdown(){}}function fb(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function vl(n){return Math.max(0,Math.min(255,255*n))}class pb{static CMYK_G([e,t,r,s]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=vl(e),[e,e,e]}static G_HTML([e]){const t=fb(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(vl)}static RGB_HTML(e){return`#${e.map(fb).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,r+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,r,s]){return[vl(1-Math.min(1,e+s)),vl(1-Math.min(1,r+s)),vl(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const s=1-e,i=1-t,a=1-r,c=Math.min(s,i,a);return["CMYK",s,i,a,c]}}class dI{create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),r||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){pt("Abstract method `_createSVG` called.")}}class _d extends dI{_createSVG(e){return document.createElementNS(Cs,e)}}class jS{static setupStorage(e,t,r,s,i){const a=s.getValue(t,{value:null});switch(r.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),i==="print")break;e.addEventListener("input",c=>{s.setValue(t,{value:c.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(a.value===r.attributes.xfaOn?e.setAttribute("checked",!0):a.value===r.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",c=>{s.setValue(t,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),i==="print")break;e.addEventListener("input",c=>{s.setValue(t,{value:c.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const c of r.children)c.attributes.value===a.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}e.addEventListener("input",c=>{const u=c.target.options,h=u.selectedIndex===-1?"":u[u.selectedIndex].value;s.setValue(t,{value:h})});break}}static setAttributes({html:e,element:t,storage:r=null,intent:s,linkService:i}){const{attributes:a}=t,c=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${s}`);for(const[u,h]of Object.entries(a))if(h!=null)switch(u){case"class":h.length&&e.setAttribute(u,h.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",h);break;case"style":Object.assign(e.style,h);break;case"textContent":e.textContent=h;break;default:(!c||u!=="href"&&u!=="newWindow")&&e.setAttribute(u,h)}c&&i.addLinkAttributes(e,a.href,a.newWindow),r&&a.dataId&&this.setupStorage(e,a.dataId,t,r)}static render(e){const t=e.annotationStorage,r=e.linkService,s=e.xfaHtml,i=e.intent||"display",a=document.createElement(s.name);s.attributes&&this.setAttributes({html:a,element:s,intent:i,linkService:r});const c=i!=="richText",u=e.div;if(u.append(a),e.viewport){const g=`matrix(${e.viewport.transform.join(",")})`;u.style.transform=g}c&&u.setAttribute("class","xfaLayer xfaFont");const h=[];if(s.children.length===0){if(s.value){const g=document.createTextNode(s.value);a.append(g),c&&zl.shouldBuildText(s.name)&&h.push(g)}return{textDivs:h}}const f=[[s,-1,a]];for(;f.length>0;){const[g,y,w]=f.at(-1);if(y+1===g.children.length){f.pop();continue}const S=g.children[++f.at(-1)[1]];if(S===null)continue;const{name:v}=S;if(v==="#text"){const A=document.createTextNode(S.value);h.push(A),w.append(A);continue}const _=S?.attributes?.xmlns?document.createElementNS(S.attributes.xmlns,v):document.createElement(v);if(w.append(_),S.attributes&&this.setAttributes({html:_,element:S,storage:t,intent:i,linkService:r}),S.children?.length>0)f.push([S,-1,_]);else if(S.value){const A=document.createTextNode(S.value);c&&zl.shouldBuildText(v)&&h.push(A),_.append(A)}}for(const g of u.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:h}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const hI=9,Ki=new WeakSet,fI=new Date().getTimezoneOffset()*60*1e3;class mb{static create(e){switch(e.data.annotationType){case Gt.LINK:return new jg(e);case Gt.TEXT:return new pI(e);case Gt.WIDGET:switch(e.data.fieldType){case"Tx":return new mI(e);case"Btn":return e.data.radioButton?new OS(e):e.data.checkBox?new yI(e):new vI(e);case"Ch":return new xI(e);case"Sig":return new gI(e)}return new so(e);case Gt.POPUP:return new Pm(e);case Gt.FREETEXT:return new LS(e);case Gt.LINE:return new bI(e);case Gt.SQUARE:return new _I(e);case Gt.CIRCLE:return new SI(e);case Gt.POLYLINE:return new FS(e);case Gt.CARET:return new CI(e);case Gt.INK:return new Og(e);case Gt.POLYGON:return new AI(e);case Gt.HIGHLIGHT:return new BS(e);case Gt.UNDERLINE:return new EI(e);case Gt.SQUIGGLY:return new TI(e);case Gt.STRIKEOUT:return new kI(e);case Gt.STAMP:return new $S(e);case Gt.FILEATTACHMENT:return new PI(e);default:return new Ut(e)}}}class Ut{#e=null;#t=!1;#n=null;constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:s=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(r)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e?.str||t?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Ut._hasPopupData(this.data)}get hasCommentButton(){return this.enableComment&&this._isEditable&&this.hasPopupElement}get commentButtonPosition(){const{quadPoints:e,rect:t}=this.data;let r=-1/0,s=-1/0;if(e?.length>=8){for(let i=0;i<e.length;i+=8)e[i+1]>s?(s=e[i+1],r=e[i+2]):e[i+1]===s&&(r=Math.max(r,e[i+2]));return[r,s]}return t?[t[2],t[3]]:null}get commentButtonColor(){if(!this.data.color)return null;const[e,t,r]=this.data.color,i=255*(1-(this.data.opacity??1));return this.#r(Math.min(e+i,255),Math.min(t+i,255),Math.min(r+i,255))}#r(e,t,r){e/=255,t/=255,r/=255;const s=Math.max(e,t,r),i=Math.min(e,t,r),a=(s+i)/2,c=((1+Math.sqrt(a))/2*100).toFixed(2);if(s===i)return`hsl(0, 0%, ${c}%)`;const u=s-i;let h;s===e?h=(t-r)/u+(t<r?6:0):s===t?h=(r-e)/u+2:h=(e-t)/u+4,h=(h*60).toFixed(2);const f=(u/(1-Math.abs(2*a-1))*100).toFixed(2);return`hsl(${h}, ${f}%, ${c}%)`}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:r,pageHeight:s,pageX:i,pageY:a}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-i)/r,e[1]=100*(e[1]-a)/s,e}updateEdited(e){if(!this.container)return;e.rect&&(this.#e||={rect:this.data.rect.slice(0)});const{rect:t,popup:r}=e;t&&this.#i(t);let s=this.#n?.popup||this.popup;!s&&r?.text&&(this._createPopup(r),s=this.#n.popup),s&&(s.updateEdited(e),r?.deleted&&(s.remove(),this.#n=null,this.popup=null))}resetEdited(){this.#e&&(this.#i(this.#e.rect),this.#n?.popup.resetEdited(),this.#e=null)}#i(e){const{container:{style:t},data:{rect:r,rotation:s},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:c,pageY:u}}}}=this;r?.splice(0,4,...e),t.left=`${100*(e[0]-c)/i}%`,t.top=`${100*(a-e[3]+u)/a}%`,s===0?(t.width=`${100*(e[2]-e[0])/i}%`,t.height=`${100*(e[3]-e[1])/a}%`):this.setRotation(s)}_createContainer(e){const{data:t,parent:{page:r,viewport:s}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),!(this instanceof so)&&!(this instanceof jg)&&(i.tabIndex=0);const{style:a}=i;if(a.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof Pm){const{rotation:v}=t;return!t.hasOwnCanvas&&v!==0&&this.setRotation(v,i),i}const{width:c,height:u}=this;if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const v=t.borderStyle.horizontalCornerRadius,_=t.borderStyle.verticalCornerRadius;if(v>0||_>0){const E=`calc(${v}px * var(--total-scale-factor)) / calc(${_}px * var(--total-scale-factor))`;a.borderRadius=E}else if(this instanceof OS){const E=`calc(${c}px * var(--total-scale-factor)) / calc(${u}px * var(--total-scale-factor))`;a.borderRadius=E}switch(t.borderStyle.style){case Uo.SOLID:a.borderStyle="solid";break;case Uo.DASHED:a.borderStyle="dashed";break;case Uo.BEVELED:He("Unimplemented border style: beveled");break;case Uo.INSET:He("Unimplemented border style: inset");break;case Uo.UNDERLINE:a.borderBottomStyle="solid";break}const A=t.borderColor||null;A?(this.#t=!0,a.borderColor=_e.makeHexColor(A[0]|0,A[1]|0,A[2]|0)):a.borderWidth=0}const h=_e.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:f,pageHeight:g,pageX:y,pageY:w}=s.rawDims;a.left=`${100*(h[0]-y)/f}%`,a.top=`${100*(h[1]-w)/g}%`;const{rotation:S}=t;return t.hasOwnCanvas||S===0?(a.width=`${100*c/f}%`,a.height=`${100*u/g}%`):this.setRotation(S,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:s}=this.parent.viewport.rawDims;let{width:i,height:a}=this;e%180!==0&&([i,a]=[a,i]),t.style.width=`${100*i/r}%`,t.style.height=`${100*a/s}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,s)=>{const i=s.detail[t],a=i[0],c=i.slice(1);s.target.style[r]=pb[`${a}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[r]:pb[`${a}_rgb`](c)})};return Qe(this,"_commonActions",{display:t=>{const{display:r}=t.detail,s=r%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:r===1||r===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const s of Object.keys(t.detail))(e[s]||r[s])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[s,i]of Object.entries(t)){const a=r[s];if(a){const c={detail:{[s]:i},target:e};a(c),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,s,i]=this.data.rect.map(v=>Math.fround(v));if(e.length===8){const[v,_,A,E]=e.subarray(2,6);if(s===v&&i===_&&t===A&&r===E)return}const{style:a}=this.container;let c;if(this.#t){const{borderColor:v,borderWidth:_}=a;a.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${_}">`],this.container.classList.add("hasBorder")}const u=s-t,h=i-r,{svgFactory:f}=this,g=f.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0),g.role="none";const y=f.createElement("defs");g.append(y);const w=f.createElement("clipPath"),S=`clippath_${this.data.id}`;w.setAttribute("id",S),w.setAttribute("clipPathUnits","objectBoundingBox"),y.append(w);for(let v=2,_=e.length;v<_;v+=8){const A=e[v],E=e[v+1],k=e[v+2],P=e[v+3],N=f.createElement("rect"),R=(k-t)/u,M=(i-E)/h,$=(A-k)/u,G=(E-P)/h;N.setAttribute("x",R),N.setAttribute("y",M),N.setAttribute("width",$),N.setAttribute("height",G),w.append(N),c?.push(`<rect vector-effect="non-scaling-stroke" x="${R}" y="${M}" width="${$}" height="${G}"/>`)}this.#t&&(c.push("</g></svg>')"),a.backgroundImage=c.join("")),this.container.append(g),this.container.style.clipPath=`url(#${S})`}_createPopup(e=null){const{data:t}=this;let r,s;e?(r={str:e.text},s=e.date):(r=t.contentsObj,s=t.modificationDate);const i=this.#n=new Pm({data:{color:t.color,titleObj:t.titleObj,modificationDate:s,contentsObj:r,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent.div.append(i.render())}get hasPopupElement(){return!!(this.#n||this.popup||this.data.popupRef)}render(){pt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:i,id:a,exportValues:c}of s){if(i===-1||a===t)continue;const u=typeof c=="string"?c:null,h=document.querySelector(`[data-element-id="${a}"]`);if(h&&!Ki.has(h)){He(`_getElementsByName - element not allowed: ${a}`);continue}r.push({id:a,exportValue:u,domElement:h})}return r}for(const s of document.getElementsByName(e)){const{exportValue:i}=s,a=s.getAttribute("data-element-id");a!==t&&Ki.has(s)&&r.push({id:a,exportValue:i,domElement:s})}return r}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class jg extends Ut{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,r=document.createElement("a");r.setAttribute("data-element-id",e.id);let s=!1;return e.url?(t.addLinkAttributes(r,e.url,e.newWindow),s=!0):e.action?(this._bindNamedAction(r,e.action,e.overlaidText),s=!0):e.attachment?(this.#t(r,e.attachment,e.overlaidText,e.attachmentDest),s=!0):e.setOCGState?(this.#n(r,e.setOCGState,e.overlaidText),s=!0):e.dest?(this._bindLink(r,e.dest,e.overlaidText),s=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,e),s=!0),e.resetForm?(this._bindResetFormAction(r,e.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(r,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(r),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t,r=""){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e(),r&&(e.title=r)}_bindNamedAction(e,t,r=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),r&&(e.title=r),this.#e()}#t(e,t,r="",s=null){e.href=this.linkService.getAnchorUrl(""),t.description?e.title=t.description:r&&(e.title=r),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,s),!1),this.#e()}#n(e,t,r=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),r&&(e.title=r),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(t.actions)){const i=r.get(s);i&&(e[i]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:s}}),!1))}t.overlaidText&&(e.title=t.overlaidText),e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){He('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(e.onclick=()=>!1);return}e.onclick=()=>{r?.();const{fields:s,refs:i,include:a}=t,c=[];if(s.length!==0||i.length!==0){const f=new Set(i);for(const g of s){const y=this._fieldObjects[g]||[];for(const{id:w}of y)f.add(w)}for(const g of Object.values(this._fieldObjects))for(const y of g)f.has(y.id)===a&&c.push(y)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,h=[];for(const f of c){const{id:g}=f;switch(h.push(g),f.type){case"text":{const w=f.defaultValue||"";u.setValue(g,{value:w});break}case"checkbox":case"radiobutton":{const w=f.defaultValue===f.exportValues;u.setValue(g,{value:w});break}case"combobox":case"listbox":{const w=f.defaultValue||"";u.setValue(g,{value:w});break}default:continue}const y=document.querySelector(`[data-element-id="${g}"]`);if(y){if(!Ki.has(y)){He(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}}),!1}}}class pI extends Ut{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class so extends Ut{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return mn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,s,i){r.includes("mouse")?e.addEventListener(r,a=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(r,a=>{if(r==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(r==="focus"){if(t.focused)return;t.focused=!0}i&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(a)}})})}_setEventListeners(e,t,r,s){for(const[i,a]of r)(a==="Action"||this.data.actions?.[a])&&((a==="Focus"||a==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,i,a,s),a==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):a==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":_e.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||hI,i=e.style;let a;const c=2,u=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-c),f=Math.round(h/(Pp*s))||1,g=h/f;a=Math.min(s,u(g/Pp))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-c);a=Math.min(s,u(h/Pp))}i.fontSize=`calc(${a}px * var(--total-scale-factor))`,i.color=_e.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class mI extends so{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,s){const i=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=r),i.setValue(a.id,{[s]:r})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const s=e.getValue(t,{value:this.data.fieldValue});let i=s.value||"";const a=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;a&&i.length>a&&(i=i.slice(0,a));let c=s.formattedValue||this.data.textContent?.join(`
`)||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const u={userValue:i,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=c??i,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type=this.data.password?"password":"text",r.setAttribute("value",c??i),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),Ki.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=0;const{datetimeFormat:h,datetimeType:f,timeStep:g}=this.data,y=!!f&&this.enableScripting;h&&(r.title=h),this._setRequired(r,this.data.required),a&&(r.maxLength=a),r.addEventListener("input",S=>{e.setValue(t,{value:S.target.value}),this.setPropertyOnSiblings(r,"value",S.target.value,"value"),u.formattedValue=null}),r.addEventListener("resetform",S=>{const v=this.data.defaultFieldValue??"";r.value=u.userValue=v,u.formattedValue=null});let w=S=>{const{formattedValue:v}=u;v!=null&&(S.target.value=v),S.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",v=>{if(u.focused)return;const{target:_}=v;if(y&&(_.type=f,g&&(_.step=g)),u.userValue){const A=u.userValue;if(y)if(f==="time"){const E=new Date(A),k=[E.getHours(),E.getMinutes(),E.getSeconds()];_.value=k.map(P=>P.toString().padStart(2,"0")).join(":")}else _.value=new Date(A-fI).toISOString().split(f==="date"?"T":".",1)[0];else _.value=A}u.lastCommittedValue=_.value,u.commitKey=1,this.data.actions?.Focus||(u.focused=!0)}),r.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const _={value(A){u.userValue=A.detail.value??"",y||e.setValue(t,{value:u.userValue.toString()}),A.target.value=u.userValue},formattedValue(A){const{formattedValue:E}=A.detail;u.formattedValue=E,E!=null&&A.target!==document.activeElement&&(A.target.value=E);const k={formattedValue:E};y&&(k.value=E),e.setValue(t,k)},selRange(A){A.target.setSelectionRange(...A.detail.selRange)},charLimit:A=>{const{charLimit:E}=A.detail,{target:k}=A;if(E===0){k.removeAttribute("maxLength");return}k.setAttribute("maxLength",E);let P=u.userValue;!P||P.length<=E||(P=P.slice(0,E),k.value=u.userValue=P,e.setValue(t,{value:P}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:P,willCommit:!0,commitKey:1,selStart:k.selectionStart,selEnd:k.selectionEnd}}))}};this._dispatchEventFromSandbox(_,v)}),r.addEventListener("keydown",v=>{u.commitKey=1;let _=-1;if(v.key==="Escape"?_=0:v.key==="Enter"&&!this.data.multiLine?_=2:v.key==="Tab"&&(u.commitKey=3),_===-1)return;const{value:A}=v.target;u.lastCommittedValue!==A&&(u.lastCommittedValue=A,u.userValue=A,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:_,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const S=w;w=null,r.addEventListener("blur",v=>{if(!u.focused||!v.relatedTarget)return;this.data.actions?.Blur||(u.focused=!1);const{target:_}=v;let{value:A}=_;if(y){if(A&&f==="time"){const E=A.split(":").map(k=>parseInt(k,10));A=new Date(2e3,0,1,E[0],E[1],E[2]||0).valueOf(),_.step=""}else A=new Date(A).valueOf();_.type="text"}u.userValue=A,u.lastCommittedValue!==A&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:u.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}),S(v)}),this.data.actions?.Keystroke&&r.addEventListener("beforeinput",v=>{u.lastCommittedValue=null;const{data:_,target:A}=v,{value:E,selectionStart:k,selectionEnd:P}=A;let N=k,R=P;switch(v.inputType){case"deleteWordBackward":{const M=E.substring(0,k).match(/\w*[^\w]*$/);M&&(N-=M[0].length);break}case"deleteWordForward":{const M=E.substring(k).match(/^[^\w]*\w*/);M&&(R+=M[0].length);break}case"deleteContentBackward":k===P&&(N-=1);break;case"deleteContentForward":k===P&&(R+=1);break}v.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,change:_||"",willCommit:!1,selStart:N,selEnd:R}})}),this._setEventListeners(r,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(w&&r.addEventListener("blur",w),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/a;r.classList.add("comb"),r.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class gI extends so{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class yI extends so{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let s=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(r,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return Ki.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=0,i.addEventListener("change",a=>{const{name:c,checked:u}=a.target;for(const h of this._getElementsByName(c,r)){const f=u&&h.exportValue===t.exportValue;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}e.setValue(r,{value:u})}),i.addEventListener("resetform",a=>{const c=t.defaultFieldValue||"Off";a.target.checked=c===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",a=>{const c={value(u){u.target.checked=u.detail.value!=="Off",e.setValue(r,{value:u.target.checked})}};this._dispatchEventFromSandbox(c,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class OS extends so{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let s=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(r,{value:s})),s)for(const a of this._getElementsByName(t.fieldName,r))e.setValue(a.id,{value:!1});const i=document.createElement("input");if(Ki.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",a=>{const{name:c,checked:u}=a.target;for(const h of this._getElementsByName(c,r))e.setValue(h.id,{value:!1});e.setValue(r,{value:u})}),i.addEventListener("resetform",a=>{const c=t.defaultFieldValue;a.target.checked=c!=null&&c===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;i.addEventListener("updatefromsandbox",c=>{const u={value:h=>{const f=a===h.detail.value;for(const g of this._getElementsByName(h.target.name)){const y=f&&g.id===r;g.domElement&&(g.domElement.checked=y),e.setValue(g.id,{value:y})}}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class vI extends jg{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class xI extends so{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");Ki.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",f=>{const g=this.data.defaultFieldValue;for(const y of s.options)y.selected=y.value===g});for(const f of this.data.options){const g=document.createElement("option");g.textContent=f.displayValue,g.value=f.exportValue,r.value.includes(f.exportValue)&&(g.setAttribute("selected",!0),i=!1),s.append(g)}let a=null;if(i){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),s.prepend(f),a=()=>{f.remove(),s.removeEventListener("input",a),a=null},s.addEventListener("input",a)}const c=f=>{const g=f?"value":"textContent",{options:y,multiple:w}=s;return w?Array.prototype.filter.call(y,S=>S.selected).map(S=>S[g]):y.selectedIndex===-1?null:y[y.selectedIndex][g]};let u=c(!1);const h=f=>{const g=f.target.options;return Array.prototype.map.call(g,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",f=>{const g={value(y){a?.();const w=y.detail.value,S=new Set(Array.isArray(w)?w:[w]);for(const v of s.options)v.selected=S.has(v.value);e.setValue(t,{value:c(!0)}),u=c(!1)},multipleSelection(y){s.multiple=!0},remove(y){const w=s.options,S=y.detail.remove;w[S].selected=!1,s.remove(S),w.length>0&&Array.prototype.findIndex.call(w,_=>_.selected)===-1&&(w[0].selected=!0),e.setValue(t,{value:c(!0),items:h(y)}),u=c(!1)},clear(y){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),u=c(!1)},insert(y){const{index:w,displayValue:S,exportValue:v}=y.detail.insert,_=s.children[w],A=document.createElement("option");A.textContent=S,A.value=v,_?_.before(A):s.append(A),e.setValue(t,{value:c(!0),items:h(y)}),u=c(!1)},items(y){const{items:w}=y.detail;for(;s.length!==0;)s.remove(0);for(const S of w){const{displayValue:v,exportValue:_}=S,A=document.createElement("option");A.textContent=v,A.value=_,s.append(A)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:c(!0),items:h(y)}),u=c(!1)},indices(y){const w=new Set(y.detail.indices);for(const S of y.target.options)S.selected=w.has(S.index);e.setValue(t,{value:c(!0)}),u=c(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(g,f)}),s.addEventListener("input",f=>{const g=c(!0),y=c(!1);e.setValue(t,{value:g}),f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:u,change:y,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):s.addEventListener("input",function(f){e.setValue(t,{value:c(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Pm extends Ut{constructor(e){const{data:t,elements:r}=e;super(e,{isRenderable:Ut._hasPopupData(t)}),this.elements=r,this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=new wI({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,eventBus:this.linkService.eventBus}),r=[];for(const s of this.elements)s.popup=t,s.container.ariaHasPopup="dialog",r.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(s=>`${Sg}${s}`).join(",")),this.container}}class wI{#e=this.#I.bind(this);#t=this.#C.bind(this);#n=this.#B.bind(this);#r=this.#R.bind(this);#i=null;#s=null;#o=null;#a=null;#l=null;#c=null;#h=null;#u=null;#f=!1;#m=null;#p=null;#d=null;#g=null;#x=null;#y=null;#b=null;#_=null;#v=null;#S=null;#k=!1;constructor({container:e,color:t,elements:r,titleObj:s,modificationDate:i,contentsObj:a,richText:c,parent:u,rect:h,parentRect:f,open:g,eventBus:y=null}){this.#s=e,this.#v=s,this.#o=a,this.#_=c,this.#h=u,this.#i=t,this.#b=h,this.#u=f,this.#l=r,this.#c=y,this.#a=Am.toDateObject(i),this.trigger=r.flatMap(w=>w.getElementsToTriggerPopup()),this.#E(),this.#s.hidden=!0,g&&this.#R()}#E(){if(this.#p)return;this.#p=new AbortController;const{signal:e}=this.#p;for(const t of this.trigger)t.addEventListener("click",this.#r,{signal:e}),t.addEventListener("mouseenter",this.#n,{signal:e}),t.addEventListener("mouseleave",this.#t,{signal:e}),t.classList.add("popupTriggerArea");for(const t of this.#l)t.container?.addEventListener("keydown",this.#e,{signal:e});this.#D()}#A(){const e=this.#l.find(t=>t.hasCommentButton);e&&(this.#x=e._normalizePoint(e.commentButtonPosition),this.#y=e.commentButtonColor)}#D(){if(this.#g||(this.#x||this.#A(),!this.#x))return;const e=this.#g=document.createElement("button");e.className="annotationCommentButton";const t=this.#l[0].container;e.style.zIndex=t.style.zIndex+1,e.tabIndex=0;const{signal:r}=this.#p;e.addEventListener("hover",this.#r,{signal:r}),e.addEventListener("keydown",this.#e,{signal:r}),e.addEventListener("click",()=>{const[{data:{id:i},annotationEditorType:a}]=this.#l;this.#c?.dispatch("switchannotationeditormode",{source:this,editId:i,mode:a,editComment:!0})},{signal:r});const{style:s}=e;s.left=`calc(${this.#x[0]}%)`,s.top=`calc(${this.#x[1]}% - var(--comment-button-dim))`,this.#y&&(s.backgroundColor=this.#y),t.after(e)}render(){if(this.#m)return;const e=this.#m=document.createElement("div");if(e.className="popup",this.#i){const s=e.style.outlineColor=_e.makeHexColor(...this.#i);e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const t=document.createElement("span");if(t.className="header",this.#v?.str){const s=document.createElement("span");s.className="title",t.append(s),{dir:s.dir,str:s.textContent}=this.#v}if(e.append(t),this.#a){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#a.valueOf()})),s.dateTime=this.#a.toISOString(),t.append(s)}const r=this.#T;if(r)jS.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const s=this._formatContents(this.#o);e.append(s)}this.#s.append(e)}get#T(){const e=this.#_,t=this.#o;return e?.str&&(!t?.str||t.str===e.str)&&this.#_.html||null}get#P(){return this.#T?.attributes?.style?.fontSize||0}get#j(){return this.#T?.attributes?.style?.color||null}#M(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:this.#j,fontSize:this.#P?`calc(${this.#P}px * var(--total-scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:s});return r}_formatContents({str:e,dir:t}){const r=document.createElement("p");r.classList.add("popupContent"),r.dir=t;const s=e.split(/(?:\r\n?|\n)/);for(let i=0,a=s.length;i<a;++i){const c=s[i];r.append(document.createTextNode(c)),i<a-1&&r.append(document.createElement("br"))}return r}#I(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#f)&&this.#R()}updateEdited({rect:e,popup:t,deleted:r}){if(r||t?.deleted){this.remove();return}this.#E(),this.#S||={contentsObj:this.#o,richText:this.#_},e&&(this.#d=null),t&&(this.#_=this.#M(t.text),this.#a=Am.toDateObject(t.date),this.#o=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#S&&({contentsObj:this.#o,richText:this.#_}=this.#S,this.#S=null,this.#m?.remove(),this.#m=null,this.#d=null)}remove(){this.#p?.abort(),this.#p=null,this.#m?.remove(),this.#m=null,this.#k=!1,this.#f=!1;for(const e of this.trigger)e.classList.remove("popupTriggerArea")}#O(){if(this.#d!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:s,pageY:i}}}=this.#h;let a=!!this.#u,c=a?this.#u:this.#b;for(const S of this.#l)if(!c||_e.intersect(S.data.rect,c)!==null){c=S.data.rect,a=!0;break}const u=_e.normalizeRect([c[0],e[3]-c[1]+e[1],c[2],e[3]-c[3]+e[1]]),f=a?c[2]-c[0]+5:0,g=u[0]+f,y=u[1];this.#d=[100*(g-s)/t,100*(y-i)/r];const{style:w}=this.#s;w.left=`${this.#d[0]}%`,w.top=`${this.#d[1]}%`}#R(){this.#f=!this.#f,this.#f?(this.#B(),this.#s.addEventListener("click",this.#r),this.#s.addEventListener("keydown",this.#e)):(this.#C(),this.#s.removeEventListener("click",this.#r),this.#s.removeEventListener("keydown",this.#e))}#B(){this.#m||this.render(),this.isVisible?this.#f&&this.#s.classList.add("focused"):(this.#O(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#C(){this.#s.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#k=this.isVisible,this.#k&&(this.#s.hidden=!0)}maybeShow(){this.#E(),this.#k&&(this.#m||this.#B(),this.#k=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}}class LS extends Ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ze.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class bI extends Ut{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:r}=this,s=this.svgFactory.create(t,r,!0),i=this.#e=this.svgFactory.createElement("svg:line");return i.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),i.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),i.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),i.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),i.setAttribute("stroke-width",e.borderStyle.width||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),s.append(i),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class _I extends Ut{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:r}=this,s=this.svgFactory.create(t,r,!0),i=e.borderStyle.width,a=this.#e=this.svgFactory.createElement("svg:rect");return a.setAttribute("x",i/2),a.setAttribute("y",i/2),a.setAttribute("width",t-i),a.setAttribute("height",r-i),a.setAttribute("stroke-width",i||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class SI extends Ut{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:r}=this,s=this.svgFactory.create(t,r,!0),i=e.borderStyle.width,a=this.#e=this.svgFactory.createElement("svg:ellipse");return a.setAttribute("cx",t/2),a.setAttribute("cy",r/2),a.setAttribute("rx",t/2-i/2),a.setAttribute("ry",r/2-i/2),a.setAttribute("stroke-width",i||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class FS extends Ut{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:r,popupRef:s},width:i,height:a}=this;if(!t)return this.container;const c=this.svgFactory.create(i,a,!0);let u=[];for(let f=0,g=t.length;f<g;f+=2){const y=t[f]-e[0],w=e[3]-t[f+1];u.push(`${y},${w}`)}u=u.join(" ");const h=this.#e=this.svgFactory.createElement(this.svgElementName);return h.setAttribute("points",u),h.setAttribute("stroke-width",r.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class AI extends FS{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class CI extends Ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Og extends Ut{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ze.HIGHLIGHT:ze.INK}#n(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:r,borderStyle:s,popupRef:i}}=this,{transform:a,width:c,height:u}=this.#n(t,e),h=this.svgFactory.create(c,u,!0),f=this.#e=this.svgFactory.createElement("svg:g");h.append(f),f.setAttribute("stroke-width",s.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",a);for(let g=0,y=r.length;g<y;g++){const w=this.svgFactory.createElement(this.svgElementName);this.#t.push(w),w.setAttribute("points",r[g].join(",")),f.append(w)}return!i&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:r,rect:s}=e,i=this.#e;if(t>=0&&i.setAttribute("stroke-width",t||1),r)for(let a=0,c=this.#t.length;a<c;a++)this.#t[a].setAttribute("points",r[a].join(","));if(s){const{transform:a,width:c,height:u}=this.#n(this.data.rotation,s);i.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),i.setAttribute("transform",a)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}get commentButtonPosition(){const{inkLists:e,rect:t}=this.data;if(e?.length>=1){let r=-1/0,s=-1/0;for(const i of e)for(let a=0,c=i.length;a<c;a+=2)i[a+1]>s?(s=i[a+1],r=i[a]):i[a+1]===s&&(r=Math.max(r,i[a]));if(r!==1/0)return[r,s]}return t?[t[2],t[3]]:null}}class BS extends Ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ze.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const r=document.createElement("mark");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class EI extends Ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class TI extends Ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class kI extends Ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const r=document.createElement("s");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class $S extends Ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ze.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class PI extends Ut{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let r;t.hasAppearance||t.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),r.addEventListener("dblclick",this.#t.bind(this)),this.#e=r;const{isMac:s}=mn.platform;return e.addEventListener("keydown",i=>{i.key==="Enter"&&(s?i.metaKey:i.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),e.append(r),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class Lg{#e=null;#t=null;#n=new Map;#r=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:s,page:i,viewport:a,structTreeLayer:c}){this.div=e,this.#e=t,this.#t=r,this.#r=c||null,this.page=i,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return this.#n.size>0}async#i(e,t,r){const s=e.firstChild||e,i=s.id=`${Sg}${t}`,a=await this.#r?.getAriaAttributes(i);if(a)for(const[c,u]of a)s.setAttribute(c,u);r?r.at(-1).container.after(e):(this.div.append(e),this.#e?.moveElementInDOM(this.div,e,s,!1))}async render(e){const{annotations:t}=e,r=this.div;Xi(r,this.viewport);const s=new Map,i={data:null,layer:r,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new _d,annotationStorage:e.annotationStorage||new kg,enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const c=a.annotationType===Gt.POPUP;if(c){const f=s.get(a.id);if(!f)continue;i.elements=f}else if(a.rect[2]===a.rect[0]||a.rect[3]===a.rect[1])continue;i.data=a;const u=mb.create(i);if(!u.isRenderable)continue;if(!c&&a.popupRef){const f=s.get(a.popupRef);f?f.push(u):s.set(a.popupRef,[u])}const h=u.render();a.hidden&&(h.style.visibility="hidden"),await this.#i(h,a.id,i.elements),u._isEditable&&(this.#n.set(u.data.id,u),this._annotationEditorUIManager?.renderAnnotationElement(u))}this.#s()}async addLinkAnnotations(e,t){const r={data:null,layer:this.div,linkService:t,svgFactory:new _d,parent:this};for(const s of e){s.borderStyle||=Lg._defaultBorderStyle,r.data=s;const i=mb.create(r);if(!i.isRenderable)continue;const a=i.render();await this.#i(a,s.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,Xi(t,{rotation:e.rotation}),this.#s(),t.hidden=!1}#s(){if(!this.#t)return;const e=this.div;for(const[t,r]of this.#t){const s=e.querySelector(`[data-annotation-id="${t}"]`);if(!s)continue;r.className="annotationContent";const{firstChild:i}=s;i?i.nodeName==="CANVAS"?i.replaceWith(r):i.classList.contains("annotationContent")?i.after(r):i.before(r):s.append(r);const a=this.#n.get(t);a&&(a._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(t,s.id,r),a._hasNoCanvas=!1):a.canvas=r)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}static get _defaultBorderStyle(){return Qe(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Uo.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const qu=/\r\n?|\n/g;class sn extends Re{#e;#t="";#n=`${this.id}-editor`;#r=null;#i;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=sn.prototype,t=i=>i.isEmpty(),r=pi.TRANSLATE_SMALL,s=pi.TRANSLATE_BIG;return Qe(this,"_keyboardManager",new mc([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,s],checker:t}]]))}static _type="freetext";static _editorType=ze.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.#e=e.color||sn._defaultColor||Re._defaultLineColor,this.#i=e.fontSize||sn._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(e,t){Re.initialize(e,t);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case tt.FREETEXT_SIZE:sn._defaultFontSize=t;break;case tt.FREETEXT_COLOR:sn._defaultColor=t;break}}updateParams(e,t){switch(e){case tt.FREETEXT_SIZE:this.#s(t);break;case tt.FREETEXT_COLOR:this.#o(t);break}}static get defaultPropertiesToUpdate(){return[[tt.FREETEXT_SIZE,sn._defaultFontSize],[tt.FREETEXT_COLOR,sn._defaultColor||Re._defaultLineColor]]}get propertiesToUpdate(){return[[tt.FREETEXT_SIZE,this.#i],[tt.FREETEXT_COLOR,this.#e]]}get toolbarButtons(){return this._colorPicker||=new Ul(this),[["colorPicker",this._colorPicker]]}get colorType(){return tt.FREETEXT_COLOR}get colorValue(){return this.#e}#s(e){const t=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--total-scale-factor))`,this.translate(0,-(s-this.#i)*this.parentScale),this.#i=s,this.#l()},r=this.#i;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:tt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#o(e){const t=s=>{this.#e=this.editorDiv.style.color=s,this._colorPicker?.update(s)},r=this.#e;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:tt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-sn._internalPadding*e,-(sn._internalPadding+this.#i)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#r=new AbortController;const e=this._uiManager.combinedSignal(this.#r);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#r?.abort(),this.#r=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const e=[];this.editorDiv.normalize();let t=null;for(const r of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(sn.#c(r)),t=r);return e.join(`
`)}#l(){const[e,t]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:s,div:i}=this,a=i.style.display,c=i.classList.contains("hidden");i.classList.remove("hidden"),i.style.display="hidden",s.div.append(this.div),r=i.getBoundingClientRect(),i.remove(),i.style.display=a,i.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=r.width/e,this.height=r.height/t):(this.width=r.height/e,this.height=r.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#t,t=this.#t=this.#a().trimEnd();if(e===t)return;const r=s=>{if(this.#t=s,!s){this.remove();return}this.#h(),this._uiManager.rebuild(this),this.#l()};this.addCommands({cmd:()=>{r(t)},undo:()=>{r(e)},mustExec:!1}),this.#l()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){sn._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,r.color=this.#e,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[s,i]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[h,f]=this.pageDimensions,[g,y]=this.pageTranslation;let w,S;switch(this.rotation){case 0:w=e+(a[0]-g)/h,S=t+this.height-(a[1]-y)/f;break;case 90:w=e+(a[0]-g)/h,S=t-(a[1]-y)/f,[c,u]=[u,-c];break;case 180:w=e-this.width+(a[0]-g)/h,S=t-(a[1]-y)/f,[c,u]=[-c,-u];break;case 270:w=e+(a[0]-g-this.height*f)/h,S=t+(a[1]-y-this.width*h)/f,[c,u]=[-u,c];break}this.setAt(w*s,S*i,c,u)}else this._moveAfterPaste(e,t);this.#h(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(qu,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:r}=t;if(r.length===1&&r[0]==="text/plain")return;e.preventDefault();const s=sn.#f(t.getData("text")||"").replaceAll(qu,`
`);if(!s)return;const i=window.getSelection();if(!i.rangeCount)return;this.editorDiv.normalize(),i.deleteFromDocument();const a=i.getRangeAt(0);if(!s.includes(`
`)){a.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),i.collapseToStart();return}const{startContainer:c,startOffset:u}=a,h=[],f=[];if(c.nodeType===Node.TEXT_NODE){const w=c.parentElement;if(f.push(c.nodeValue.slice(u).replaceAll(qu,"")),w!==this.editorDiv){let S=h;for(const v of this.editorDiv.childNodes){if(v===w){S=f;continue}S.push(sn.#c(v))}}h.push(c.nodeValue.slice(0,u).replaceAll(qu,""))}else if(c===this.editorDiv){let w=h,S=0;for(const v of this.editorDiv.childNodes)S++===u&&(w=f),w.push(sn.#c(v))}this.#t=`${h.join(`
`)}${s}${f.join(`
`)}`,this.#h();const g=new Range;let y=Math.sumPrecise(h.map(w=>w.length));for(const{firstChild:w}of this.editorDiv.childNodes)if(w.nodeType===Node.TEXT_NODE){const S=w.nodeValue.length;if(y<=S){g.setStart(w,y),g.setEnd(w,y);break}y-=S}i.removeAllRanges(),i.addRange(g)}#h(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const e of this.#t.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#u(){return this.#t.replaceAll(""," ")}static#f(e){return e.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const e=sn._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,t,r){let s=null;if(e instanceof LS){const{data:{defaultAppearanceData:{fontSize:a,fontColor:c},rect:u,rotation:h,id:f,popupRef:g,contentsObj:y},textContent:w,textPosition:S,parent:{page:{pageNumber:v}}}=e;if(!w||w.length===0)return null;s=e={annotationType:ze.FREETEXT,color:Array.from(c),fontSize:a,value:w.join(`
`),position:S,pageIndex:v-1,rect:u.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:g,comment:y?.str||null}}const i=await super.deserialize(e,t,r);return i.#i=e.fontSize,i.#e=_e.makeHexColor(...e.color),i.#t=sn.#f(e.value),i._initialData=s,e.comment&&i.setCommentData(e.comment),i}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=this.getPDFRect(),r=Re._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#e),s={annotationType:ze.FREETEXT,color:r,fontSize:this.#i,value:this.#u(),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(s),e?(s.isCopy=!0,s):this.annotationElementId&&!this.#m(s)?null:(s.id=this.annotationElementId,s)}#m(e){const{value:t,fontSize:r,color:s,pageIndex:i}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==t||e.fontSize!==r||e.color.some((a,c)=>a!==s[c])||e.pageIndex!==i}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(!t)return null;const{style:r}=t;r.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,r.color=this.#e,t.replaceChildren();for(const i of this.#t.split(`
`)){const a=document.createElement("div");a.append(i?document.createTextNode(i):document.createElement("br")),t.append(a)}const s={rect:this.getPDFRect()};return s.popup=this.hasEditedComment?this.comment:{text:this.#t},e.updateEdited(s),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class we{static PRECISION=1e-4;toSVGPath(){pt("Abstract method `toSVGPath` must be implemented.")}get box(){pt("Abstract getter `box` must be implemented.")}serialize(e,t){pt("Abstract method `serialize` must be implemented.")}static _rescale(e,t,r,s,i,a){a||=new Float32Array(e.length);for(let c=0,u=e.length;c<u;c+=2)a[c]=t+e[c]*s,a[c+1]=r+e[c+1]*i;return a}static _rescaleAndSwap(e,t,r,s,i,a){a||=new Float32Array(e.length);for(let c=0,u=e.length;c<u;c+=2)a[c]=t+e[c+1]*s,a[c+1]=r+e[c]*i;return a}static _translate(e,t,r,s){s||=new Float32Array(e.length);for(let i=0,a=e.length;i<a;i+=2)s[i]=t+e[i],s[i+1]=r+e[i+1];return s}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,r,s,i){switch(i){case 90:return[1-t/r,e/s];case 180:return[1-e/r,1-t/s];case 270:return[t/r,1-e/s];default:return[e/r,t/s]}}static _normalizePagePoint(e,t,r){switch(r){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,r,s,i,a){return[(e+5*r)/6,(t+5*s)/6,(5*r+i)/6,(5*s+a)/6,(r+i)/2,(s+a)/2]}}class Oi{#e;#t=[];#n;#r;#i=[];#s=new Float32Array(18);#o;#a;#l;#c;#h;#u;#f=[];static#m=8;static#p=2;static#d=Oi.#m+Oi.#p;constructor({x:e,y:t},r,s,i,a,c=0){this.#e=r,this.#u=i*s,this.#r=a,this.#s.set([NaN,NaN,NaN,NaN,e,t],6),this.#n=c,this.#c=Oi.#m*s,this.#l=Oi.#d*s,this.#h=s,this.#f.push(e,t)}isEmpty(){return isNaN(this.#s[8])}#g(){const e=this.#s.subarray(4,6),t=this.#s.subarray(16,18),[r,s,i,a]=this.#e;return[(this.#o+(e[0]-t[0])/2-r)/i,(this.#a+(e[1]-t[1])/2-s)/a,(this.#o+(t[0]-e[0])/2-r)/i,(this.#a+(t[1]-e[1])/2-s)/a]}add({x:e,y:t}){this.#o=e,this.#a=t;const[r,s,i,a]=this.#e;let[c,u,h,f]=this.#s.subarray(8,12);const g=e-h,y=t-f,w=Math.hypot(g,y);if(w<this.#l)return!1;const S=w-this.#c,v=S/w,_=v*g,A=v*y;let E=c,k=u;c=h,u=f,h+=_,f+=A,this.#f?.push(e,t);const P=-A/S,N=_/S,R=P*this.#u,M=N*this.#u;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([h+R,f+M],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([h-R,f-M],16),isNaN(this.#s[6])?(this.#i.length===0&&(this.#s.set([c+R,u+M],2),this.#i.push(NaN,NaN,NaN,NaN,(c+R-r)/i,(u+M-s)/a),this.#s.set([c-R,u-M],14),this.#t.push(NaN,NaN,NaN,NaN,(c-R-r)/i,(u-M-s)/a)),this.#s.set([E,k,c,u,h,f],6),!this.isEmpty()):(this.#s.set([E,k,c,u,h,f],6),Math.abs(Math.atan2(k-u,E-c)-Math.atan2(A,_))<Math.PI/2?([c,u,h,f]=this.#s.subarray(2,6),this.#i.push(NaN,NaN,NaN,NaN,((c+h)/2-r)/i,((u+f)/2-s)/a),[c,u,E,k]=this.#s.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((E+c)/2-r)/i,((k+u)/2-s)/a),!0):([E,k,c,u,h,f]=this.#s.subarray(0,6),this.#i.push(((E+5*c)/6-r)/i,((k+5*u)/6-s)/a,((5*c+h)/6-r)/i,((5*u+f)/6-s)/a,((c+h)/2-r)/i,((u+f)/2-s)/a),[h,f,c,u,E,k]=this.#s.subarray(12,18),this.#t.push(((E+5*c)/6-r)/i,((k+5*u)/6-s)/a,((5*c+h)/6-r)/i,((5*u+f)/6-s)/a,((c+h)/2-r)/i,((u+f)/2-s)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#i,t=this.#t;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#x();const r=[];r.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?r.push(`L${e[s+4]} ${e[s+5]}`):r.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);this.#b(r);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?r.push(`L${t[s+4]} ${t[s+5]}`):r.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return this.#y(r),r.join(" ")}#x(){const[e,t,r,s]=this.#e,[i,a,c,u]=this.#g();return`M${(this.#s[2]-e)/r} ${(this.#s[3]-t)/s} L${(this.#s[4]-e)/r} ${(this.#s[5]-t)/s} L${i} ${a} L${c} ${u} L${(this.#s[16]-e)/r} ${(this.#s[17]-t)/s} L${(this.#s[14]-e)/r} ${(this.#s[15]-t)/s} Z`}#y(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#b(e){const[t,r,s,i]=this.#e,a=this.#s.subarray(4,6),c=this.#s.subarray(16,18),[u,h,f,g]=this.#g();e.push(`L${(a[0]-t)/s} ${(a[1]-r)/i} L${u} ${h} L${f} ${g} L${(c[0]-t)/s} ${(c[1]-r)/i}`)}newFreeDrawOutline(e,t,r,s,i,a){return new zS(e,t,r,s,i,a)}getOutlines(){const e=this.#i,t=this.#t,r=this.#s,[s,i,a,c]=this.#e,u=new Float32Array((this.#f?.length??0)+2);for(let g=0,y=u.length-2;g<y;g+=2)u[g]=(this.#f[g]-s)/a,u[g+1]=(this.#f[g+1]-i)/c;if(u[u.length-2]=(this.#o-s)/a,u[u.length-1]=(this.#a-i)/c,isNaN(r[6])&&!this.isEmpty())return this.#_(u);const h=new Float32Array(this.#i.length+24+this.#t.length);let f=e.length;for(let g=0;g<f;g+=2){if(isNaN(e[g])){h[g]=h[g+1]=NaN;continue}h[g]=e[g],h[g+1]=e[g+1]}f=this.#S(h,f);for(let g=t.length-6;g>=6;g-=6)for(let y=0;y<6;y+=2){if(isNaN(t[g+y])){h[f]=h[f+1]=NaN,f+=2;continue}h[f]=t[g+y],h[f+1]=t[g+y+1],f+=2}return this.#v(h,f),this.newFreeDrawOutline(h,u,this.#e,this.#h,this.#n,this.#r)}#_(e){const t=this.#s,[r,s,i,a]=this.#e,[c,u,h,f]=this.#g(),g=new Float32Array(36);return g.set([NaN,NaN,NaN,NaN,(t[2]-r)/i,(t[3]-s)/a,NaN,NaN,NaN,NaN,(t[4]-r)/i,(t[5]-s)/a,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(t[16]-r)/i,(t[17]-s)/a,NaN,NaN,NaN,NaN,(t[14]-r)/i,(t[15]-s)/a],0),this.newFreeDrawOutline(g,e,this.#e,this.#h,this.#n,this.#r)}#v(e,t){const r=this.#t;return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],t),t+=6}#S(e,t){const r=this.#s.subarray(4,6),s=this.#s.subarray(16,18),[i,a,c,u]=this.#e,[h,f,g,y]=this.#g();return e.set([NaN,NaN,NaN,NaN,(r[0]-i)/c,(r[1]-a)/u,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,g,y,NaN,NaN,NaN,NaN,(s[0]-i)/c,(s[1]-a)/u],t),t+=24}}class zS extends we{#e;#t=new Float32Array(4);#n;#r;#i;#s;#o;constructor(e,t,r,s,i,a){super(),this.#o=e,this.#i=t,this.#e=r,this.#s=s,this.#n=i,this.#r=a,this.lastPoint=[NaN,NaN],this.#a(a);const[c,u,h,f]=this.#t;for(let g=0,y=e.length;g<y;g+=2)e[g]=(e[g]-c)/h,e[g+1]=(e[g+1]-u)/f;for(let g=0,y=t.length;g<y;g+=2)t[g]=(t[g]-c)/h,t[g+1]=(t[g+1]-u)/f}toSVGPath(){const e=[`M${this.#o[4]} ${this.#o[5]}`];for(let t=6,r=this.#o.length;t<r;t+=6){if(isNaN(this.#o[t])){e.push(`L${this.#o[t+4]} ${this.#o[t+5]}`);continue}e.push(`C${this.#o[t]} ${this.#o[t+1]} ${this.#o[t+2]} ${this.#o[t+3]} ${this.#o[t+4]} ${this.#o[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,r,s],i){const a=r-e,c=s-t;let u,h;switch(i){case 0:u=we._rescale(this.#o,e,s,a,-c),h=we._rescale(this.#i,e,s,a,-c);break;case 90:u=we._rescaleAndSwap(this.#o,e,t,a,c),h=we._rescaleAndSwap(this.#i,e,t,a,c);break;case 180:u=we._rescale(this.#o,r,t,-a,c),h=we._rescale(this.#i,r,t,-a,c);break;case 270:u=we._rescaleAndSwap(this.#o,r,s,-a,-c),h=we._rescaleAndSwap(this.#i,r,s,-a,-c);break}return{outline:Array.from(u),points:[Array.from(h)]}}#a(e){const t=this.#o;let r=t[4],s=t[5];const i=[r,s,r,s];let a=r,c=s;const u=e?Math.max:Math.min;for(let f=6,g=t.length;f<g;f+=6){const y=t[f+4],w=t[f+5];if(isNaN(t[f]))_e.pointBoundingBox(y,w,i),c<w?(a=y,c=w):c===w&&(a=u(a,y));else{const S=[1/0,1/0,-1/0,-1/0];_e.bezierBoundingBox(r,s,...t.slice(f,f+6),S),_e.rectBoundingBox(...S,i),c<S[3]?(a=S[2],c=S[3]):c===S[3]&&(a=u(a,S[2]))}r=y,s=w}const h=this.#t;h[0]=i[0]-this.#n,h[1]=i[1]-this.#n,h[2]=i[2]-i[0]+2*this.#n,h[3]=i[3]-i[1]+2*this.#n,this.lastPoint=[a,c]}get box(){return this.#t}newOutliner(e,t,r,s,i,a=0){return new Oi(e,t,r,s,i,a)}getNewOutline(e,t){const[r,s,i,a]=this.#t,[c,u,h,f]=this.#e,g=i*h,y=a*f,w=r*h+c,S=s*f+u,v=this.newOutliner({x:this.#i[0]*g+w,y:this.#i[1]*y+S},this.#e,this.#s,e,this.#r,t??this.#n);for(let _=2;_<this.#i.length;_+=2)v.add({x:this.#i[_]*g+w,y:this.#i[_+1]*y+S});return v.getOutlines()}}class Nm{#e;#t;#n=[];#r=[];constructor(e,t=0,r=0,s=!0){const i=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:w,y:S,width:v,height:_}of e){const A=Math.floor((w-t)/a)*a,E=Math.ceil((w+v+t)/a)*a,k=Math.floor((S-t)/a)*a,P=Math.ceil((S+_+t)/a)*a,N=[A,k,P,!0],R=[E,k,P,!1];this.#n.push(N,R),_e.rectBoundingBox(A,k,E,P,i)}const c=i[2]-i[0]+2*r,u=i[3]-i[1]+2*r,h=i[0]-r,f=i[1]-r,g=this.#n.at(s?-1:-2),y=[g[0],g[2]];for(const w of this.#n){const[S,v,_]=w;w[0]=(S-h)/c,w[1]=(v-f)/u,w[2]=(_-f)/u}this.#e=new Float32Array([h,f,c,u]),this.#t=y}getOutlines(){this.#n.sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of this.#n)t[3]?(e.push(...this.#l(t)),this.#o(t)):(this.#a(t),e.push(...this.#l(t)));return this.#i(e)}#i(e){const t=[],r=new Set;for(const a of e){const[c,u,h]=a;t.push([c,u,a],[c,h,a])}t.sort((a,c)=>a[1]-c[1]||a[0]-c[0]);for(let a=0,c=t.length;a<c;a+=2){const u=t[a][2],h=t[a+1][2];u.push(h),h.push(u),r.add(u),r.add(h)}const s=[];let i;for(;r.size>0;){const a=r.values().next().value;let[c,u,h,f,g]=a;r.delete(a);let y=c,w=u;for(i=[c,h],s.push(i);;){let S;if(r.has(f))S=f;else if(r.has(g))S=g;else break;r.delete(S),[c,u,h,f,g]=S,y!==c&&(i.push(y,w,c,w===u?u:h),y=c),w=w===u?h:u}i.push(y,w)}return new NI(s,this.#e,this.#t)}#s(e){const t=this.#r;let r=0,s=t.length-1;for(;r<=s;){const i=r+s>>1,a=t[i][0];if(a===e)return i;a<e?r=i+1:s=i-1}return s+1}#o([,e,t]){const r=this.#s(e);this.#r.splice(r,0,[e,t])}#a([,e,t]){const r=this.#s(e);for(let s=r;s<this.#r.length;s++){const[i,a]=this.#r[s];if(i!==e)break;if(i===e&&a===t){this.#r.splice(s,1);return}}for(let s=r-1;s>=0;s--){const[i,a]=this.#r[s];if(i!==e)break;if(i===e&&a===t){this.#r.splice(s,1);return}}}#l(e){const[t,r,s]=e,i=[[t,r,s]],a=this.#s(s);for(let c=0;c<a;c++){const[u,h]=this.#r[c];for(let f=0,g=i.length;f<g;f++){const[,y,w]=i[f];if(!(h<=y||w<=u)){if(y>=u){if(w>h)i[f][1]=h;else{if(g===1)return[];i.splice(f,1),f--,g--}continue}i[f][2]=u,w>h&&i.push([t,h,w])}}}return i}}class NI extends we{#e;#t;constructor(e,t,r){super(),this.#t=e,this.#e=t,this.lastPoint=r}toSVGPath(){const e=[];for(const t of this.#t){let[r,s]=t;e.push(`M${r} ${s}`);for(let i=2;i<t.length;i+=2){const a=t[i],c=t[i+1];a===r?(e.push(`V${c}`),s=c):c===s&&(e.push(`H${a}`),r=a)}e.push("Z")}return e.join(" ")}serialize([e,t,r,s],i){const a=[],c=r-e,u=s-t;for(const h of this.#t){const f=new Array(h.length);for(let g=0;g<h.length;g+=2)f[g]=e+h[g]*c,f[g+1]=s-h[g+1]*u;a.push(f)}return a}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class Rm extends Oi{newFreeDrawOutline(e,t,r,s,i,a){return new RI(e,t,r,s,i,a)}}class RI extends zS{newOutliner(e,t,r,s,i,a=0){return new Rm(e,t,r,s,i,a)}}class Bt extends Re{#e=null;#t=0;#n;#r=null;#i=null;#s=null;#o=null;#a=0;#l=null;#c=null;#h=null;#u=!1;#f=null;#m;#p=null;#d="";#g;#x="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=ze.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=Bt.prototype;return Qe(this,"_keyboardManager",new mc([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||Bt._defaultColor,this.#g=e.thickness||Bt._defaultThickness,this.#m=e.opacity||Bt._defaultOpacity,this.#n=e.boxes||null,this.#x=e.methodOfCreation||"",this.#d=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#u=!0,this.#b(e),this.#E()):this.#n&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#o=e.focusNode,this.#a=e.focusOffset,this.#y(),this.#E(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#u?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#g,methodOfCreation:this.#x}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}get commentColor(){return this.color}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#y(){const e=new Nm(this.#n,.001);this.#c=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#c.box;const t=new Nm(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#s=t.getOutlines();const{lastPoint:r}=this.#s;this.#f=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#b({highlightOutlines:e,highlightId:t,clipPathId:r}){this.#c=e;const s=1.5;if(this.#s=e.getNewOutline(this.#g/2+s,.0025),t>=0)this.#h=t,this.#r=r,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const f=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:Bt.#A(this.#c.box,(f-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:Bt.#A(this.#s.box,f),path:{d:this.#s.toSVGPath()}})}const[i,a,c,u]=e.box;switch(this.rotation){case 0:this.x=i,this.y=a,this.width=c,this.height=u;break;case 90:{const[f,g]=this.parentDimensions;this.x=a,this.y=1-i,this.width=c*g/f,this.height=u*f/g;break}case 180:this.x=1-i,this.y=1-a,this.width=c,this.height=u;break;case 270:{const[f,g]=this.parentDimensions;this.x=1-a,this.y=i,this.width=c*g/f,this.height=u*f/g;break}}const{lastPoint:h}=this.#s;this.#f=[(h[0]-i)/c,(h[1]-a)/u]}static initialize(e,t){Re.initialize(e,t),Bt._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case tt.HIGHLIGHT_COLOR:Bt._defaultColor=t;break;case tt.HIGHLIGHT_THICKNESS:Bt._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#f}updateParams(e,t){switch(e){case tt.HIGHLIGHT_COLOR:this.#_(t);break;case tt.HIGHLIGHT_THICKNESS:this.#v(t);break}}static get defaultPropertiesToUpdate(){return[[tt.HIGHLIGHT_COLOR,Bt._defaultColor],[tt.HIGHLIGHT_THICKNESS,Bt._defaultThickness]]}get propertiesToUpdate(){return[[tt.HIGHLIGHT_COLOR,this.color||Bt._defaultColor],[tt.HIGHLIGHT_THICKNESS,this.#g||Bt._defaultThickness],[tt.HIGHLIGHT_FREE,this.#u]]}#_(e){const t=(i,a)=>{this.color=i,this.#m=a,this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:i,"fill-opacity":a}}),this.#i?.updateColor(i)},r=this.color,s=this.#m;this.addCommands({cmd:t.bind(this,e,Bt._defaultOpacity),undo:t.bind(this,r,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:tt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}#v(e){const t=this.#g,r=s=>{this.#g=s,this.#S(s)};this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:tt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#i=new mr({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#P())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#P())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#k(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#E(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#k():e&&(this.#E(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#S(e){if(!this.#u)return;this.#b({highlightOutlines:this.#c.getNewOutline(e/2)}),this.fixAndSetPosition();const[t,r]=this.parentDimensions;this.setDims(this.width*t,this.height*r)}#k(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#E(e=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#r}=e.drawLayer.draw({bbox:this.#c.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#m},rootClass:{highlight:!0,free:this.#u},path:{d:this.#c.toSVGPath()}},!1,!0),this.#p=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#u},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#u),this.#l&&(this.#l.style.clipPath=this.#r))}static#A([e,t,r,s],i){switch(i){case 90:return[1-t-s,e,s,r];case 180:return[1-e-r,1-t-s,r,s];case 270:return[t,1-e-r,s,r]}return[e,t,r,s]}rotate(e){const{drawLayer:t}=this.parent;let r;this.#u?(e=(e-this.rotation+360)%360,r=Bt.#A(this.#c.box,e)):r=Bt.#A([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#h,{bbox:r,root:{"data-main-rotation":e}}),t.updateProperties(this.#p,{bbox:Bt.#A(this.#s.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#d&&(e.setAttribute("aria-label",this.#d),e.setAttribute("role","mark")),this.#u?e.classList.add("free"):this.div.addEventListener("keydown",this.#D.bind(this),{signal:this._uiManager._signal});const t=this.#l=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#r;const[r,s]=this.parentDimensions;return this.setDims(this.width*r,this.height*s),yS(this,this.#l,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#D(e){Bt._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#T(!0);break;case 1:case 3:this.#T(!1);break}}#T(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#o,this.#a)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#u||this.#T(!1))}get _mustFixPosition(){return!this.#u}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!e}}))}#P(){return this.#u?this.rotation:0}#j(){if(this.#u)return null;const[e,t]=this.pageDimensions,[r,s]=this.pageTranslation,i=this.#n,a=new Float32Array(i.length*8);let c=0;for(const{x:u,y:h,width:f,height:g}of i){const y=u*e+r,w=(1-h)*t+s;a[c]=a[c+4]=y,a[c+1]=a[c+3]=w,a[c+2]=a[c+6]=y+f*e,a[c+5]=a[c+7]=w-g*t,c+=8}return a}#M(e){return this.#c.serialize(e,this.#P())}static startHighlighting(e,t,{target:r,x:s,y:i}){const{x:a,y:c,width:u,height:h}=r.getBoundingClientRect(),f=new AbortController,g=e.combinedSignal(f),y=w=>{f.abort(),this.#O(e,w)};window.addEventListener("blur",y,{signal:g}),window.addEventListener("pointerup",y,{signal:g}),window.addEventListener("pointerdown",qt,{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",vr,{signal:g}),r.addEventListener("pointermove",this.#I.bind(this,e),{signal:g}),this._freeHighlight=new Rm({x:s,y:i},[a,c,u,h],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#I(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#O(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,r){let s=null;if(e instanceof BS){const{data:{quadPoints:S,rect:v,rotation:_,id:A,color:E,opacity:k,popupRef:P,contentsObj:N},parent:{page:{pageNumber:R}}}=e;s=e={annotationType:ze.HIGHLIGHT,color:Array.from(E),opacity:k,quadPoints:S,boxes:null,pageIndex:R-1,rect:v.slice(0),rotation:_,annotationElementId:A,id:A,deleted:!1,popupRef:P,comment:N?.str||null}}else if(e instanceof Og){const{data:{inkLists:S,rect:v,rotation:_,id:A,color:E,borderStyle:{rawWidth:k},popupRef:P,contentsObj:N},parent:{page:{pageNumber:R}}}=e;s=e={annotationType:ze.HIGHLIGHT,color:Array.from(E),thickness:k,inkLists:S,boxes:null,pageIndex:R-1,rect:v.slice(0),rotation:_,annotationElementId:A,id:A,deleted:!1,popupRef:P,comment:N?.str||null}}const{color:i,quadPoints:a,inkLists:c,opacity:u}=e,h=await super.deserialize(e,t,r);h.color=_e.makeHexColor(...i),h.#m=u||1,c&&(h.#g=e.thickness),h._initialData=s,e.comment&&h.setCommentData(e.comment);const[f,g]=h.pageDimensions,[y,w]=h.pageTranslation;if(a){const S=h.#n=[];for(let v=0;v<a.length;v+=8)S.push({x:(a[v]-y)/f,y:1-(a[v+1]-w)/g,width:(a[v+2]-a[v])/f,height:(a[v+1]-a[v+5])/g});h.#y(),h.#E(),h.rotate(h.rotation)}else if(c){h.#u=!0;const S=c[0],v={x:S[0]-y,y:g-(S[1]-w)},_=new Rm(v,[0,0,f,g],1,h.#g/2,!0,.001);for(let k=0,P=S.length;k<P;k+=2)v.x=S[k]-y,v.y=g-(S[k+1]-w),_.add(v);const{id:A,clipPathId:E}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:_.toSVGPath()}},!0,!0);h.#b({highlightOutlines:_.getOutlines(),highlightId:A,clipPathId:E}),h.#E(),h.rotate(h.parentRotation)}return h}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=this.getPDFRect(),r=Re._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s={annotationType:ze.HIGHLIGHT,color:r,opacity:this.#m,thickness:this.#g,quadPoints:this.#j(),outlines:this.#M(t),pageIndex:this.pageIndex,rect:t,rotation:this.#P(),structTreeParentId:this._structTreeParentId};return this.addComment(s),this.annotationElementId&&!this.#R(s)?null:(s.id=this.annotationElementId,s)}#R(e){const{color:t}=this._initialData;return this.hasEditedComment||e.color.some((r,s)=>r!==t[s])}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const t={rect:this.getPDFRect()};return this.hasEditedComment&&(t.popup=this.comment),e.updateEdited(t),null}static canCreateNewEmptyEditor(){return!1}}class VS{#e=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,r]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,r)}updateSVGProperty(e,t){this.#e[e]=t}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){pt("Not implemented")}}class Ie extends Re{#e=null;#t;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#r=null;static#i=null;static#s=NaN;static#o=null;static#a=null;static#l=NaN;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(this.#c(e),this.#f())}#c({drawOutlines:e,drawId:t,drawingOptions:r}){this.#e=e,this._drawingOptions||=r,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),t>=0?(this._drawId=t,this.parent.drawLayer.finalizeDraw(t,e.defaultProperties)):this._drawId=this.#h(e,this.parent),this.#d(e.box)}#h(e,t){const{id:r}=t.drawLayer.draw(Ie._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return r}static _mergeSVGProperties(e,t){const r=new Set(Object.keys(e));for(const[s,i]of Object.entries(t))r.has(s)?Object.assign(e[s],i):e[s]=i;return e}static getDefaultDrawingOptions(e){pt("Not implemented")}static get typesMap(){pt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const r=this.typesMap.get(e);r&&this._defaultDrawingOptions.updateProperty(r,t),this._currentParent&&(Ie.#n.updateProperty(r,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const r=this.constructor.typesMap.get(e);r&&this._updateProperty(e,r,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[r,s]of this.typesMap)e.push([r,t[s]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[r,s]of this.constructor.typesMap)e.push([r,t[s]]);return e}_updateProperty(e,t,r){const s=this._drawingOptions,i=s[t],a=c=>{s.updateProperty(t,c);const u=this.#e.updateProperty(t,c);u&&this.#d(u),this.parent?.drawLayer.updateProperties(this._drawId,s.toSVGProperties()),e===this.colorType&&this._colorPicker?.update(c)};this.addCommands({cmd:a.bind(this,r),undo:a.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Ie._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#p()),{bbox:this.#g()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Ie._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#p()),{bbox:this.#g()}))}_onTranslating(e,t){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#g()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Ie._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#g()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#u(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#d(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#u()):e&&(this._uiManager.addShouldRescale(this),this.#f(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),t&&this.select()}#u(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#h(this.#e,e)}}#m([e,t,r,s]){const{parentDimensions:[i,a],rotation:c}=this;switch(c){case 90:return[t,1-e,r*(a/i),s*(i/a)];case 180:return[1-e,1-t,r,s];case 270:return[1-t,e,r*(a/i),s*(i/a)];default:return[e,t,r,s]}}#p(){const{x:e,y:t,width:r,height:s,parentDimensions:[i,a],rotation:c}=this;switch(c){case 90:return[1-t,e,r*(i/a),s*(a/i)];case 180:return[1-e,1-t,r,s];case 270:return[t,1-e,r*(i/a),s*(a/i)];default:return[e,t,r,s]}}#d(e){if([this.x,this.y,this.width,this.height]=this.#m(e),this.div){this.fixAndSetPosition();const[t,r]=this.parentDimensions;this.setDims(this.width*t,this.height*r)}this._onResized()}#g(){const{x:e,y:t,width:r,height:s,rotation:i,parentRotation:a,parentDimensions:[c,u]}=this;switch((i*4+a)/90){case 1:return[1-t-s,e,s,r];case 2:return[1-e-r,1-t-s,r,s];case 3:return[t,1-e-r,s,r];case 4:return[e,t-r*(c/u),s*(u/c),r*(c/u)];case 5:return[1-t,e,r*(c/u),s*(u/c)];case 6:return[1-e-s*(u/c),1-t,s*(u/c),r*(c/u)];case 7:return[t-r*(c/u),1-e-s*(u/c),r*(c/u),s*(u/c)];case 8:return[e-r,t-s,r,s];case 9:return[1-t,e-r,s,r];case 10:return[1-e,1-t,r,s];case 11:return[t-s,1-e,s,r];case 12:return[e-s*(u/c),t,s*(u/c),r*(c/u)];case 13:return[1-t-r*(c/u),e-s*(u/c),r*(c/u),s*(u/c)];case 14:return[1-e,1-t-r*(c/u),s*(u/c),r*(c/u)];case 15:return[t,1-e,r*(c/u),s*(u/c)];default:return[e,t,r,s]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Ie._mergeSVGProperties({bbox:this.#g()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#d(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const r=super.render();r.classList.add("draw");const s=document.createElement("div");r.append(s),s.setAttribute("aria-hidden","true"),s.className="internal";const[i,a]=this.parentDimensions;return this.setDims(this.width*i,this.height*a),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),r}static createDrawerInstance(e,t,r,s,i){pt("Not implemented")}static startDrawing(e,t,r,s){const{target:i,offsetX:a,offsetY:c,pointerId:u,pointerType:h}=s;if(Ie.#o&&Ie.#o!==h)return;const{viewport:{rotation:f}}=e,{width:g,height:y}=i.getBoundingClientRect(),w=Ie.#r=new AbortController,S=e.combinedSignal(w);if(Ie.#s||=u,Ie.#o??=h,window.addEventListener("pointerup",v=>{Ie.#s===v.pointerId?this._endDraw(v):Ie.#a?.delete(v.pointerId)},{signal:S}),window.addEventListener("pointercancel",v=>{Ie.#s===v.pointerId?this._currentParent.endDrawingSession():Ie.#a?.delete(v.pointerId)},{signal:S}),window.addEventListener("pointerdown",v=>{Ie.#o===v.pointerType&&((Ie.#a||=new Set).add(v.pointerId),Ie.#n.isCancellable()&&(Ie.#n.removeLastElement(),Ie.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:S}),window.addEventListener("contextmenu",vr,{signal:S}),i.addEventListener("pointermove",this._drawMove.bind(this),{signal:S}),i.addEventListener("touchmove",v=>{v.timeStamp===Ie.#l&&qt(v)},{signal:S}),e.toggleDrawing(),t._editorUndoBar?.hide(),Ie.#n){e.drawLayer.updateProperties(this._currentDrawId,Ie.#n.startNew(a,c,g,y,f));return}t.updateUIForDefaultProperties(this),Ie.#n=this.createDrawerInstance(a,c,g,y,f),Ie.#i=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(Ie.#i.toSVGProperties(),Ie.#n.defaultSVGProperties),!0,!1)}static _drawMove(e){if(Ie.#l=-1,!Ie.#n)return;const{offsetX:t,offsetY:r,pointerId:s}=e;if(Ie.#s===s){if(Ie.#a?.size>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Ie.#n.add(t,r)),Ie.#l=e.timeStamp,qt(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,Ie.#n=null,Ie.#i=null,Ie.#o=null,Ie.#l=NaN),Ie.#r&&(Ie.#r.abort(),Ie.#r=null,Ie.#s=NaN,Ie.#a=null)}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),e?.target===t.div&&t.drawLayer.updateProperties(this._currentDrawId,Ie.#n.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const r=Ie.#n,s=this._currentDrawId,i=r.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(s,r.setLastElement(i))},undo:()=>{t.drawLayer.updateProperties(s,r.removeLastElement())},mustExec:!1,type:tt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(tt.DRAW_STEP),!Ie.#n.isEmpty()){const{pageDimensions:[r,s],scale:i}=t,a=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Ie.#n.getOutlines(r*i,s*i,i,this._INNER_MARGIN),drawingOptions:Ie.#i,mustBeCommitted:!e});return this._cleanup(!0),a}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,r,s,i,a){pt("Not implemented")}static async deserialize(e,t,r){const{rawDims:{pageWidth:s,pageHeight:i,pageX:a,pageY:c}}=t.viewport,u=this.deserializeDraw(a,c,s,i,this._INNER_MARGIN,e),h=await super.deserialize(e,t,r);return h.createDrawingOptions(e),h.#c({drawOutlines:u}),h.#f(),h.onScaleChanging(),h.rotate(),h}serializeDraw(e){const[t,r]=this.pageTranslation,[s,i]=this.pageDimensions;return this.#e.serialize([t,r,s,i],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class DI{#e=new Float64Array(6);#t;#n;#r;#i;#s;#o="";#a=0;#l=new yc;#c;#h;constructor(e,t,r,s,i,a){this.#c=r,this.#h=s,this.#r=i,this.#i=a,[e,t]=this.#u(e,t);const c=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#s=[e,t],this.#n=[{line:c,points:this.#s}],this.#e.set(c,0)}updateProperty(e,t){e==="stroke-width"&&(this.#i=t)}#u(e,t){return we._normalizePoint(e,t,this.#c,this.#h,this.#r)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#s.length<=10}add(e,t){[e,t]=this.#u(e,t);const[r,s,i,a]=this.#e.subarray(2,6),c=e-i,u=t-a;return Math.hypot(this.#c*c,this.#h*u)<=2?null:(this.#s.push(e,t),isNaN(r)?(this.#e.set([i,a,e,t],2),this.#t.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([r,s,i,a,e,t],0),this.#t.push(...we.createBezierPoints(r,s,i,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const r=this.add(e,t);return r||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,r,s,i){this.#c=r,this.#h=s,this.#r=i,[e,t]=this.#u(e,t);const a=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#s=[e,t];const c=this.#n.at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),this.#n.push({line:a,points:this.#s}),this.#e.set(a,0),this.#a=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(e){return this.#n?(this.#n.push(e),this.#t=e.line,this.#s=e.points,this.#a=0,{path:{d:this.toSVGPath()}}):this.#l.setLastElement(e)}removeLastElement(){if(!this.#n)return this.#l.removeLastElement();this.#n.pop(),this.#o="";for(let e=0,t=this.#n.length;e<t;e++){const{line:r,points:s}=this.#n[e];this.#t=r,this.#s=s,this.#a=0,this.toSVGPath()}return{path:{d:this.#o}}}toSVGPath(){const e=we.svgRound(this.#t[4]),t=we.svgRound(this.#t[5]);if(this.#s.length===2)return this.#o=`${this.#o} M ${e} ${t} Z`,this.#o;if(this.#s.length<=6){const s=this.#o.lastIndexOf("M");this.#o=`${this.#o.slice(0,s)} M ${e} ${t}`,this.#a=6}if(this.#s.length===4){const s=we.svgRound(this.#t[10]),i=we.svgRound(this.#t[11]);return this.#o=`${this.#o} L ${s} ${i}`,this.#a=12,this.#o}const r=[];this.#a===0&&(r.push(`M ${e} ${t}`),this.#a=6);for(let s=this.#a,i=this.#t.length;s<i;s+=6){const[a,c,u,h,f,g]=this.#t.slice(s,s+6).map(we.svgRound);r.push(`C${a} ${c} ${u} ${h} ${f} ${g}`)}return this.#o+=r.join(" "),this.#a=this.#t.length,this.#o}getOutlines(e,t,r,s){const i=this.#n.at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),this.#l.build(this.#n,e,t,r,this.#r,this.#i,s),this.#e=null,this.#t=null,this.#n=null,this.#o=null,this.#l}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class yc extends we{#e;#t=0;#n;#r;#i;#s;#o;#a;#l;build(e,t,r,s,i,a,c){this.#i=t,this.#s=r,this.#o=s,this.#a=i,this.#l=a,this.#n=c??0,this.#r=e,this.#u()}get thickness(){return this.#l}setLastElement(e){return this.#r.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#r.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of this.#r){if(e.push(`M${we.svgRound(t[4])} ${we.svgRound(t[5])}`),t.length===6){e.push("Z");continue}if(t.length===12&&isNaN(t[6])){e.push(`L${we.svgRound(t[10])} ${we.svgRound(t[11])}`);continue}for(let r=6,s=t.length;r<s;r+=6){const[i,a,c,u,h,f]=t.subarray(r,r+6).map(we.svgRound);e.push(`C${i} ${a} ${c} ${u} ${h} ${f}`)}}return e.join("")}serialize([e,t,r,s],i){const a=[],c=[],[u,h,f,g]=this.#h();let y,w,S,v,_,A,E,k,P;switch(this.#a){case 0:P=we._rescale,y=e,w=t+s,S=r,v=-s,_=e+u*r,A=t+(1-h-g)*s,E=e+(u+f)*r,k=t+(1-h)*s;break;case 90:P=we._rescaleAndSwap,y=e,w=t,S=r,v=s,_=e+h*r,A=t+u*s,E=e+(h+g)*r,k=t+(u+f)*s;break;case 180:P=we._rescale,y=e+r,w=t,S=-r,v=s,_=e+(1-u-f)*r,A=t+h*s,E=e+(1-u)*r,k=t+(h+g)*s;break;case 270:P=we._rescaleAndSwap,y=e+r,w=t+s,S=-r,v=-s,_=e+(1-h-g)*r,A=t+(1-u-f)*s,E=e+(1-h)*r,k=t+(1-u)*s;break}for(const{line:N,points:R}of this.#r)a.push(P(N,y,w,S,v,i?new Array(N.length):null)),c.push(P(R,y,w,S,v,i?new Array(R.length):null));return{lines:a,points:c,rect:[_,A,E,k]}}static deserialize(e,t,r,s,i,{paths:{lines:a,points:c},rotation:u,thickness:h}){const f=[];let g,y,w,S,v;switch(u){case 0:v=we._rescale,g=-e/r,y=t/s+1,w=1/r,S=-1/s;break;case 90:v=we._rescaleAndSwap,g=-t/s,y=-e/r,w=1/s,S=1/r;break;case 180:v=we._rescale,g=e/r+1,y=-t/s,w=-1/r,S=1/s;break;case 270:v=we._rescaleAndSwap,g=t/s+1,y=e/r+1,w=-1/s,S=-1/r;break}if(!a){a=[];for(const A of c){const E=A.length;if(E===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,A[0],A[1]]));continue}if(E===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,A[0],A[1],NaN,NaN,NaN,NaN,A[2],A[3]]));continue}const k=new Float32Array(3*(E-2));a.push(k);let[P,N,R,M]=A.subarray(0,4);k.set([NaN,NaN,NaN,NaN,P,N],0);for(let $=4;$<E;$+=2){const G=A[$],F=A[$+1];k.set(we.createBezierPoints(P,N,R,M,G,F),($-2)*3),[P,N,R,M]=[R,M,G,F]}}}for(let A=0,E=a.length;A<E;A++)f.push({line:v(a[A].map(k=>k??NaN),g,y,w,S),points:v(c[A].map(k=>k??NaN),g,y,w,S)});const _=new this.prototype.constructor;return _.build(f,r,s,1,u,h,i),_}#c(e=this.#l){const t=this.#n+e/2*this.#o;return this.#a%180===0?[t/this.#i,t/this.#s]:[t/this.#s,t/this.#i]}#h(){const[e,t,r,s]=this.#e,[i,a]=this.#c(0);return[e+i,t+a,r-2*i,s-2*a]}#u(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:s}of this.#r){if(s.length<=12){for(let c=4,u=s.length;c<u;c+=6)_e.pointBoundingBox(s[c],s[c+1],e);continue}let i=s[4],a=s[5];for(let c=6,u=s.length;c<u;c+=6){const[h,f,g,y,w,S]=s.subarray(c,c+6);_e.bezierBoundingBox(i,a,h,f,g,y,w,S,e),i=w,a=S}}const[t,r]=this.#c();e[0]=En(e[0]-t,0,1),e[1]=En(e[1]-r,0,1),e[2]=En(e[2]+t,0,1),e[3]=En(e[3]+r,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,t){return e==="stroke-width"?this.#f(t):null}#f(e){const[t,r]=this.#c();this.#l=e;const[s,i]=this.#c(),[a,c]=[s-t,i-r],u=this.#e;return u[0]-=a,u[1]-=c,u[2]+=2*a,u[3]+=2*c,u}updateParentDimensions([e,t],r){const[s,i]=this.#c();this.#i=e,this.#s=t,this.#o=r;const[a,c]=this.#c(),u=a-s,h=c-i,f=this.#e;return f[0]-=u,f[1]-=h,f[2]+=2*u,f[3]+=2*h,f}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(we.svgRound).join(" ")}get defaultProperties(){const[e,t]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${we.svgRound(e)} ${we.svgRound(t)}`}}}get rotationTransform(){const[,,e,t]=this.#e;let r=0,s=0,i=0,a=0,c=0,u=0;switch(this.#t){case 90:s=t/e,i=-e/t,c=e;break;case 180:r=-1,a=-1,c=e,u=t;break;case 270:s=-t/e,i=e/t,u=t;break;default:return""}return`matrix(${r} ${s} ${i} ${a} ${we.svgRound(c)} ${we.svgRound(u)})`}getPathResizingSVGProperties([e,t,r,s]){const[i,a]=this.#c(),[c,u,h,f]=this.#e;if(Math.abs(h-i)<=we.PRECISION||Math.abs(f-a)<=we.PRECISION){const v=e+r/2-(c+h/2),_=t+s/2-(u+f/2);return{path:{"transform-origin":`${we.svgRound(e)} ${we.svgRound(t)}`,transform:`${this.rotationTransform} translate(${v} ${_})`}}}const g=(r-2*i)/(h-2*i),y=(s-2*a)/(f-2*a),w=h/r,S=f/s;return{path:{"transform-origin":`${we.svgRound(c)} ${we.svgRound(u)}`,transform:`${this.rotationTransform} scale(${w} ${S}) translate(${we.svgRound(i)} ${we.svgRound(a)}) scale(${g} ${y}) translate(${we.svgRound(-i)} ${we.svgRound(-a)})`}}}getPathResizedSVGProperties([e,t,r,s]){const[i,a]=this.#c(),c=this.#e,[u,h,f,g]=c;if(c[0]=e,c[1]=t,c[2]=r,c[3]=s,Math.abs(f-i)<=we.PRECISION||Math.abs(g-a)<=we.PRECISION){const _=e+r/2-(u+f/2),A=t+s/2-(h+g/2);for(const{line:E,points:k}of this.#r)we._translate(E,_,A,E),we._translate(k,_,A,k);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${we.svgRound(e)} ${we.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const y=(r-2*i)/(f-2*i),w=(s-2*a)/(g-2*a),S=-y*(u+i)+e+i,v=-w*(h+a)+t+a;if(y!==1||w!==1||S!==0||v!==0)for(const{line:_,points:A}of this.#r)we._rescale(_,S,v,y,w,_),we._rescale(A,S,v,y,w,A);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${we.svgRound(e)} ${we.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],r){const[s,i]=r,a=this.#e,c=e-a[0],u=t-a[1];if(this.#i===s&&this.#s===i)for(const{line:h,points:f}of this.#r)we._translate(h,c,u,h),we._translate(f,c,u,f);else{const h=this.#i/s,f=this.#s/i;this.#i=s,this.#s=i;for(const{line:g,points:y}of this.#r)we._rescale(g,c,u,h,f,g),we._rescale(y,c,u,h,f,y);a[2]*=h,a[3]*=f}return a[0]=e,a[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${we.svgRound(e)} ${we.svgRound(t)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${we.svgRound(e[0])} ${we.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class uh extends VS{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Re._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??=this["stroke-width"],t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new uh(this._viewParameters);return e.updateAll(this),e}}class Fg extends Ie{static _type="ink";static _editorType=ze.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){Re.initialize(e,t),this._defaultDrawingOptions=new uh(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return Qe(this,"typesMap",new Map([[tt.INK_THICKNESS,"stroke-width"],[tt.INK_COLOR,"stroke"],[tt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,r,s,i){return new DI(e,t,r,s,i,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,r,s,i,a){return yc.deserialize(e,t,r,s,i,a)}static async deserialize(e,t,r){let s=null;if(e instanceof Og){const{data:{inkLists:a,rect:c,rotation:u,id:h,color:f,opacity:g,borderStyle:{rawWidth:y},popupRef:w,contentsObj:S},parent:{page:{pageNumber:v}}}=e;s=e={annotationType:ze.INK,color:Array.from(f),thickness:y,opacity:g,paths:{points:a},boxes:null,pageIndex:v-1,rect:c.slice(0),rotation:u,annotationElementId:h,id:h,deleted:!1,popupRef:w,comment:S?.str||null}}const i=await super.deserialize(e,t,r);return i._initialData=s,e.comment&&i.setCommentData(e.comment),i}get toolbarButtons(){return this._colorPicker||=new Ul(this),[["colorPicker",this._colorPicker]]}get colorType(){return tt.INK_COLOR}get colorValue(){return this._drawingOptions.stroke}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:r}=this;t.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:r}){this._drawingOptions=Fg.getDefaultDrawingOptions({stroke:_e.makeHexColor(...e),"stroke-width":t,"stroke-opacity":r})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:r,rect:s}=this.serializeDraw(e),{_drawingOptions:{stroke:i,"stroke-opacity":a,"stroke-width":c}}=this,u={annotationType:ze.INK,color:Re._colorManager.convert(i),opacity:a,thickness:c,paths:{lines:t,points:r},pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(u),e?(u.isCopy=!0,u):this.annotationElementId&&!this.#e(u)?null:(u.id=this.annotationElementId,u)}#e(e){const{color:t,thickness:r,opacity:s,pageIndex:i}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((a,c)=>a!==t[c])||e.thickness!==r||e.opacity!==s||e.pageIndex!==i}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:t,rect:r}=this.serializeDraw(!1),s={rect:r,thickness:this._drawingOptions["stroke-width"],points:t};return this.hasEditedComment&&(s.popup=this.comment),e.updateEdited(s),null}}class Dm extends yc{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Yu=8,xl=3;class Wo{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,t,r,s){return r-=e,s-=t,r===0?s>0?0:4:r===1?s+6:2-s}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#r(e,t,r,s,i,a,c){const u=this.#t(r,s,i,a);for(let h=0;h<8;h++){const f=(-h+u-c+16)%8,g=this.#n[2*f],y=this.#n[2*f+1];if(e[(r+g)*t+(s+y)]!==0)return f}return-1}static#i(e,t,r,s,i,a,c){const u=this.#t(r,s,i,a);for(let h=0;h<8;h++){const f=(h+u+c+16)%8,g=this.#n[2*f],y=this.#n[2*f+1];if(e[(r+g)*t+(s+y)]!==0)return f}return-1}static#s(e,t,r,s){const i=e.length,a=new Int32Array(i);for(let f=0;f<i;f++)a[f]=e[f]<=s?1:0;for(let f=1;f<r-1;f++)a[f*t]=a[f*t+t-1]=0;for(let f=0;f<t;f++)a[f]=a[t*r-1-f]=0;let c=1,u;const h=[];for(let f=1;f<r-1;f++){u=1;for(let g=1;g<t-1;g++){const y=f*t+g,w=a[y];if(w===0)continue;let S=f,v=g;if(w===1&&a[y-1]===0)c+=1,v-=1;else if(w>=1&&a[y+1]===0)c+=1,v+=1,w>1&&(u=w);else{w!==1&&(u=Math.abs(w));continue}const _=[g,f],A=v===g+1,E={isHole:A,points:_,id:c,parent:0};h.push(E);let k;for(const V of h)if(V.id===u){k=V;break}k?k.isHole?E.parent=A?k.parent:u:E.parent=A?u:k.parent:E.parent=A?u:0;const P=this.#r(a,t,f,g,S,v,0);if(P===-1){a[y]=-c,a[y]!==1&&(u=Math.abs(a[y]));continue}let N=this.#n[2*P],R=this.#n[2*P+1];const M=f+N,$=g+R;S=M,v=$;let G=f,F=g;for(;;){const V=this.#i(a,t,G,F,S,v,1);N=this.#n[2*V],R=this.#n[2*V+1];const X=G+N,Z=F+R;_.push(Z,X);const W=G*t+F;if(a[W+1]===0?a[W]=-c:a[W]===1&&(a[W]=c),X===f&&Z===g&&G===M&&F===$){a[y]!==1&&(u=Math.abs(a[y]));break}else S=G,v=F,G=X,F=Z}}}return h}static#o(e,t,r,s){if(r-t<=4){for(let M=t;M<r-2;M+=2)s.push(e[M],e[M+1]);return}const i=e[t],a=e[t+1],c=e[r-4]-i,u=e[r-3]-a,h=Math.hypot(c,u),f=c/h,g=u/h,y=f*a-g*i,w=u/c,S=1/h,v=Math.atan(w),_=Math.cos(v),A=Math.sin(v),E=S*(Math.abs(_)+Math.abs(A)),k=S*(1-E+E**2),P=Math.max(Math.atan(Math.abs(A+_)*k),Math.atan(Math.abs(A-_)*k));let N=0,R=t;for(let M=t+2;M<r-2;M+=2){const $=Math.abs(y-f*e[M+1]+g*e[M]);$>N&&(R=M,N=$)}N>(h*P)**2?(this.#o(e,t,R+2,s),this.#o(e,R,r,s)):s.push(i,a)}static#a(e){const t=[],r=e.length;return this.#o(e,0,r,t),t.push(e[r-2],e[r-1]),t.length<=4?null:t}static#l(e,t,r,s,i,a){const c=new Float32Array(a**2),u=-2*s**2,h=a>>1;for(let v=0;v<a;v++){const _=(v-h)**2;for(let A=0;A<a;A++)c[v*a+A]=Math.exp((_+(A-h)**2)/u)}const f=new Float32Array(256),g=-2*i**2;for(let v=0;v<256;v++)f[v]=Math.exp(v**2/g);const y=e.length,w=new Uint8Array(y),S=new Uint32Array(256);for(let v=0;v<r;v++)for(let _=0;_<t;_++){const A=v*t+_,E=e[A];let k=0,P=0;for(let R=0;R<a;R++){const M=v+R-h;if(!(M<0||M>=r))for(let $=0;$<a;$++){const G=_+$-h;if(G<0||G>=t)continue;const F=e[M*t+G],V=c[R*a+$]*f[Math.abs(F-E)];k+=F*V,P+=V}}const N=w[A]=Math.round(k/P);S[N]++}return[w,S]}static#c(e){const t=new Uint32Array(256);for(const r of e)t[r]++;return t}static#h(e){const t=e.length,r=new Uint8ClampedArray(t>>2);let s=-1/0,i=1/0;for(let c=0,u=r.length;c<u;c++){const h=r[c]=e[c<<2];s=Math.max(s,h),i=Math.min(i,h)}const a=255/(s-i);for(let c=0,u=r.length;c<u;c++)r[c]=(r[c]-i)*a;return r}static#u(e){let t,r=-1/0,s=-1/0;const i=e.findIndex(u=>u!==0);let a=i,c=i;for(t=i;t<256;t++){const u=e[t];u>r&&(t-a>s&&(s=t-a,c=t-1),r=u,a=t)}for(t=c-1;t>=0&&!(e[t]>e[t+1]);t--);return t}static#f(e){const t=e,{width:r,height:s}=e,{maxDim:i}=this.#e;let a=r,c=s;if(r>i||s>i){let y=r,w=s,S=Math.log2(Math.max(r,s)/i);const v=Math.floor(S);S=S===v?v-1:v;for(let A=0;A<S;A++){a=Math.ceil(y/2),c=Math.ceil(w/2);const E=new OffscreenCanvas(a,c);E.getContext("2d").drawImage(e,0,0,y,w,0,0,a,c),y=a,w=c,e!==t&&e.close(),e=E.transferToImageBitmap()}const _=Math.min(i/a,i/c);a=Math.round(a*_),c=Math.round(c*_)}const h=new OffscreenCanvas(a,c).getContext("2d",{willReadFrequently:!0});h.fillStyle="white",h.fillRect(0,0,a,c),h.filter="grayscale(1)",h.drawImage(e,0,0,e.width,e.height,0,0,a,c);const f=h.getImageData(0,0,a,c).data;return[this.#h(f),a,c]}static extractContoursFromText(e,{fontFamily:t,fontStyle:r,fontWeight:s},i,a,c,u){let h=new OffscreenCanvas(1,1),f=h.getContext("2d",{alpha:!1});const g=200,y=f.font=`${r} ${s} ${g}px ${t}`,{actualBoundingBoxLeft:w,actualBoundingBoxRight:S,actualBoundingBoxAscent:v,actualBoundingBoxDescent:_,fontBoundingBoxAscent:A,fontBoundingBoxDescent:E,width:k}=f.measureText(e),P=1.5,N=Math.ceil(Math.max(Math.abs(w)+Math.abs(S)||0,k)*P),R=Math.ceil(Math.max(Math.abs(v)+Math.abs(_)||g,Math.abs(A)+Math.abs(E)||g)*P);h=new OffscreenCanvas(N,R),f=h.getContext("2d",{alpha:!0,willReadFrequently:!0}),f.font=y,f.filter="grayscale(1)",f.fillStyle="white",f.fillRect(0,0,N,R),f.fillStyle="black",f.fillText(e,N*(P-1)/2,R*(3-P)/2);const M=this.#h(f.getImageData(0,0,N,R).data),$=this.#c(M),G=this.#u($),F=this.#s(M,N,R,G);return this.processDrawnLines({lines:{curves:F,width:N,height:R},pageWidth:i,pageHeight:a,rotation:c,innerMargin:u,mustSmooth:!0,areContours:!0})}static process(e,t,r,s,i){const[a,c,u]=this.#f(e),[h,f]=this.#l(a,c,u,Math.hypot(c,u)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),g=this.#u(f),y=this.#s(h,c,u,g);return this.processDrawnLines({lines:{curves:y,width:c,height:u},pageWidth:t,pageHeight:r,rotation:s,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:r,rotation:s,innerMargin:i,mustSmooth:a,areContours:c}){s%180!==0&&([t,r]=[r,t]);const{curves:u,width:h,height:f}=e,g=e.thickness??0,y=[],w=Math.min(t/h,r/f),S=w/t,v=w/r,_=[];for(const{points:E}of u){const k=a?this.#a(E):E;if(!k)continue;_.push(k);const P=k.length,N=new Float32Array(P),R=new Float32Array(3*(P===2?2:P-2));if(y.push({line:R,points:N}),P===2){N[0]=k[0]*S,N[1]=k[1]*v,R.set([NaN,NaN,NaN,NaN,N[0],N[1]],0);continue}let[M,$,G,F]=k;M*=S,$*=v,G*=S,F*=v,N.set([M,$,G,F],0),R.set([NaN,NaN,NaN,NaN,M,$],0);for(let V=4;V<P;V+=2){const X=N[V]=k[V]*S,Z=N[V+1]=k[V+1]*v;R.set(we.createBezierPoints(M,$,G,F,X,Z),(V-2)*3),[M,$,G,F]=[G,F,X,Z]}}if(y.length===0)return null;const A=c?new Dm:new yc;return A.build(y,t,r,1,s,c?0:g,i),{outline:A,newCurves:_,areContours:c,thickness:g,width:h,height:f}}static async compressSignature({outlines:e,areContours:t,thickness:r,width:s,height:i}){let a=1/0,c=-1/0,u=0;for(const k of e){u+=k.length;for(let P=2,N=k.length;P<N;P++){const R=k[P]-k[P-2];a=Math.min(a,R),c=Math.max(c,R)}}let h;a>=-128&&c<=127?h=Int8Array:a>=-32768&&c<=32767?h=Int16Array:h=Int32Array;const f=e.length,g=Yu+xl*f,y=new Uint32Array(g);let w=0;y[w++]=g*Uint32Array.BYTES_PER_ELEMENT+(u-2*f)*h.BYTES_PER_ELEMENT,y[w++]=0,y[w++]=s,y[w++]=i,y[w++]=t?0:1,y[w++]=Math.max(0,Math.floor(r??0)),y[w++]=f,y[w++]=h.BYTES_PER_ELEMENT;for(const k of e)y[w++]=k.length-2,y[w++]=k[0],y[w++]=k[1];const S=new CompressionStream("deflate-raw"),v=S.writable.getWriter();await v.ready,v.write(y);const _=h.prototype.constructor;for(const k of e){const P=new _(k.length-2);for(let N=2,R=k.length;N<R;N++)P[N-2]=k[N]-k[N-2];v.write(P)}v.close();const A=await new Response(S.readable).arrayBuffer(),E=new Uint8Array(A);return gS(E)}static async decompressSignature(e){try{const t=tM(e),{readable:r,writable:s}=new DecompressionStream("deflate-raw"),i=s.getWriter();await i.ready,i.write(t).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let a=null,c=0;for await(const k of r)a||=new Uint8Array(new Uint32Array(k.buffer,0,4)[0]),a.set(k,c),c+=k.length;const u=new Uint32Array(a.buffer,0,a.length>>2),h=u[1];if(h!==0)throw new Error(`Invalid version: ${h}`);const f=u[2],g=u[3],y=u[4]===0,w=u[5],S=u[6],v=u[7],_=[],A=(Yu+xl*S)*Uint32Array.BYTES_PER_ELEMENT;let E;switch(v){case Int8Array.BYTES_PER_ELEMENT:E=new Int8Array(a.buffer,A);break;case Int16Array.BYTES_PER_ELEMENT:E=new Int16Array(a.buffer,A);break;case Int32Array.BYTES_PER_ELEMENT:E=new Int32Array(a.buffer,A);break}c=0;for(let k=0;k<S;k++){const P=u[xl*k+Yu],N=new Float32Array(P+2);_.push(N);for(let R=0;R<xl-1;R++)N[R]=u[xl*k+Yu+R+1];for(let R=0;R<P;R++)N[R+2]=N[R]+E[c++]}return{areContours:y,thickness:w,outlines:_,width:f,height:g}}catch(t){return He(`decompressSignature: ${t}`),null}}}class Bg extends VS{constructor(){super(),super.updateProperties({fill:Re._defaultLineColor,"stroke-width":0})}clone(){const e=new Bg;return e.updateAll(this),e}}class $g extends uh{constructor(e){super(e),super.updateProperties({stroke:Re._defaultLineColor,"stroke-width":1})}clone(){const e=new $g(this._viewParameters);return e.updateAll(this),e}}class Qr extends Ie{#e=!1;#t=null;#n=null;#r=null;static _type="signature";static _editorType=ze.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){Re.initialize(e,t),this._defaultDrawingOptions=new Bg,this._defaultDrawnSignatureOptions=new $g(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return Qe(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){const t=e.get("hasDescription");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:s,mustSmooth:i,areContours:a,description:c,uuid:u,heightInPage:h}=this.#n,{rawDims:{pageWidth:f,pageHeight:g},rotation:y}=this.parent.viewport,w=Wo.processDrawnLines({lines:s,pageWidth:f,pageHeight:g,rotation:y,innerMargin:Qr._INNER_MARGIN,mustSmooth:i,areContours:a});this.addSignature(w,h,c,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#t||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){this.#r=e,this.addEditToolbar()}getUuid(){return this.#r}get description(){return this.#t}set description(e){this.#t=e,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(t=>{t?.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:r,width:s,height:i}=this.#n,a=Math.max(s,i),c=Wo.processDrawnLines({lines:{curves:e.map(u=>({points:u})),thickness:r,width:s,height:i},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t});return{areContours:t,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,t,r,s){const{x:i,y:a}=this,{outline:c}=this.#n=e;this.#e=c instanceof Dm,this.description=r;let u;this.#e?u=Qr.getDefaultDrawingOptions():(u=Qr._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:u});const[h,f]=this.parentDimensions,[,g]=this.pageDimensions;let y=t/g;y=y>=1?.5:y,this.width*=y/this.height,this.width>=1&&(y*=.9/this.width,this.width=.9),this.height=y,this.setDims(h*this.width,f*this.height),this.x=i,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:r},rotation:s}=this.parent.viewport;return Wo.process(e,t,r,s,Qr._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:r,pageHeight:s},rotation:i}=this.parent.viewport;return Wo.extractContoursFromText(e,t,r,s,i,Qr._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:r},rotation:s}=this.parent.viewport;return Wo.processDrawnLines({lines:e,pageWidth:t,pageHeight:r,rotation:s,innerMargin:Qr._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:t}){e?this._drawingOptions=Qr.getDefaultDrawingOptions():(this._drawingOptions=Qr._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":t}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:t,points:r,rect:s}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":i}}=this,a={annotationType:ze.SIGNATURE,isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:i,pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(a),e?(a.paths={lines:t,points:r},a.uuid=this.#r,a.isCopy=!0):a.lines=t,this.#t&&(a.accessibilityData={type:"Figure",alt:this.#t}),a}static deserializeDraw(e,t,r,s,i,a){return a.areContours?Dm.deserialize(e,t,r,s,i,a):yc.deserialize(e,t,r,s,i,a)}static async deserialize(e,t,r){const s=await super.deserialize(e,t,r);return s.#e=e.areContours,s.description=e.accessibilityData?.alt||"",s.#r=e.uuid,s}}class MI extends Re{#e=null;#t=null;#n=null;#r=null;#i=null;#s="";#o=null;#a=!1;#l=null;#c=!1;#h=!1;static _type="stamp";static _editorType=ze.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#r=e.bitmapUrl,this.#i=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){Re.initialize(e,t)}static isHandlingMimeForPasting(e){return Cm.includes(e)}static paste(e,t){t.pasteEditor({mode:ze.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#u(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#c=e.isSvg),e.file&&(this.#s=e.file.name),this.#p()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#o){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:i,height:a}=e||this.copyCanvas(null,null,!0).imageData,c=await r.guess({name:"altText",request:{data:s,width:i,height:a,channels:s.length/(i*a)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),t&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}#m(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(r=>this.#u(r,!0)).finally(()=>this.#f());return}if(this.#r){const r=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(r).then(s=>this.#u(s)).finally(()=>this.#f());return}if(this.#i){const r=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(r).then(s=>this.#u(s)).finally(()=>this.#f());return}const e=document.createElement("input");e.type="file",e.accept=Cm.join(",");const t=this._uiManager._signal;this.#n=new Promise(r=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#u(s)}r()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),r()},{signal:t})}).finally(()=>this.#f()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#o?.remove(),this.#o=null,this.#l&&(clearTimeout(this.#l),this.#l=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#m();return}super.rebuild(),this.div!==null&&(this.#t&&this.#o===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#r||this.#i||this.#t||this.#a)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#a||(this.#e?this.#p():this.#m()),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:r,bitmap:s}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(this.#t=r,s&&(this.#e=s),this.#a=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#l!==null&&clearTimeout(this.#l);const e=200;this.#l=setTimeout(()=>{this.#l=null,this.#g()},e)}#p(){const{div:e}=this;let{width:t,height:r}=this.#e;const[s,i]=this.pageDimensions,a=.75;if(this.width)t=this.width*s,r=this.height*i;else if(t>a*s||r>a*i){const f=Math.min(a*s/t,a*i/r);t*=f,r*=f}const[c,u]=this.parentDimensions;this.setDims(t*c/s,r*u/i),this._uiManager.enableWaiting(!1);const h=this.#o=document.createElement("canvas");h.setAttribute("role","img"),this.addContainer(h),this.width=t/s,this.height=r/i,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#g(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,t,r=!1){e||(e=224);const{width:s,height:i}=this.#e,a=new os;let c=this.#e,u=s,h=i,f=null;if(t){if(s>t||i>t){const R=Math.min(t/s,t/i);u=Math.floor(s*R),h=Math.floor(i*R)}f=document.createElement("canvas");const y=f.width=Math.ceil(u*a.sx),w=f.height=Math.ceil(h*a.sy);this.#c||(c=this.#d(y,w));const S=f.getContext("2d");S.filter=this._uiManager.hcmFilter;let v="white",_="#cfcfd8";this._uiManager.hcmFilter!=="none"?_="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(v="#8f8f9d",_="#42414d");const A=15,E=A*a.sx,k=A*a.sy,P=new OffscreenCanvas(E*2,k*2),N=P.getContext("2d");N.fillStyle=v,N.fillRect(0,0,E*2,k*2),N.fillStyle=_,N.fillRect(0,0,E,k),N.fillRect(E,k,E,k),S.fillStyle=S.createPattern(P,"repeat"),S.fillRect(0,0,y,w),S.drawImage(c,0,0,c.width,c.height,0,0,y,w)}let g=null;if(r){let y,w;if(a.symmetric&&c.width<e&&c.height<e)y=c.width,w=c.height;else if(c=this.#e,s>e||i>e){const _=Math.min(e/s,e/i);y=Math.floor(s*_),w=Math.floor(i*_),this.#c||(c=this.#d(y,w))}const v=new OffscreenCanvas(y,w).getContext("2d",{willReadFrequently:!0});v.drawImage(c,0,0,c.width,c.height,0,0,y,w),g={width:y,height:w,data:v.getImageData(0,0,y,w).data}}return{canvas:f,width:u,height:h,imageData:g}}#d(e,t){const{width:r,height:s}=this.#e;let i=r,a=s,c=this.#e;for(;i>2*e||a>2*t;){const u=i,h=a;i>2*e&&(i=i>=16384?Math.floor(i/2)-1:Math.ceil(i/2)),a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const f=new OffscreenCanvas(i,a);f.getContext("2d").drawImage(c,0,0,u,h,0,0,i,a),c=f.transferToImageBitmap()}return c}#g(){const[e,t]=this.parentDimensions,{width:r,height:s}=this,i=new os,a=Math.ceil(r*e*i.sx),c=Math.ceil(s*t*i.sy),u=this.#o;if(!u||u.width===a&&u.height===c)return;u.width=a,u.height=c;const h=this.#c?this.#e:this.#d(a,c),f=u.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(h,0,0,h.width,h.height,0,0,a,c)}#x(e){if(e){if(this.#c){const s=this._uiManager.imageManager.getSvgUrl(this.#t);if(s)return s}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#c){const[t,r]=this.pageDimensions,s=Math.round(this.width*t*pa.PDF_TO_CSS_UNITS),i=Math.round(this.height*r*pa.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(s,i);return a.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,s,i),a.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,t,r){let s=null,i=!1;if(e instanceof $S){const{data:{rect:v,rotation:_,id:A,structParent:E,popupRef:k,contentsObj:P},container:N,parent:{page:{pageNumber:R}},canvas:M}=e;let $,G;M?(delete e.canvas,{id:$,bitmap:G}=r.imageManager.getFromCanvas(N.id,M),M.remove()):(i=!0,e._hasNoCanvas=!0);const F=(await t._structTree.getAriaAttributes(`${Sg}${A}`))?.get("aria-label")||"";s=e={annotationType:ze.STAMP,bitmapId:$,bitmap:G,pageIndex:R-1,rect:v.slice(0),rotation:_,annotationElementId:A,id:A,deleted:!1,accessibilityData:{decorative:!1,altText:F},isSvg:!1,structParent:E,popupRef:k,comment:P?.str||null}}const a=await super.deserialize(e,t,r),{rect:c,bitmap:u,bitmapUrl:h,bitmapId:f,isSvg:g,accessibilityData:y}=e;i?(r.addMissingCanvas(e.id,a),a.#a=!0):f&&r.imageManager.isValidId(f)?(a.#t=f,u&&(a.#e=u)):a.#r=h,a.#c=g;const[w,S]=a.pageDimensions;return a.width=(c[2]-c[0])/w,a.height=(c[3]-c[1])/S,y&&(a.altTextData=y),a._initialData=s,e.comment&&a.setCommentData(e.comment),a.#h=!!s,a}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:ze.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(this.addComment(r),e)return r.bitmapUrl=this.#x(!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:s,altText:i}=this.serializeAltText(!1);if(!s&&i&&(r.accessibilityData={type:"Figure",alt:i}),this.annotationElementId){const c=this.#y(r);if(c.isSame)return null;c.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,t===null)return r;t.stamps||=new Map;const a=this.#c?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:a,serialized:r}),r.bitmap=this.#x(!1);else if(this.#c){const c=t.stamps.get(this.#t);a>c.area&&(c.area=a,c.serialized.bitmap.close(),c.serialized.bitmap=this.#x(!1))}return r}#y(e){const{pageIndex:t,accessibilityData:{altText:r}}=this._initialData,s=e.pageIndex===t,i=(e.accessibilityData?.alt||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&s&&i,isSameAltText:i}}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const t={rect:this.getPDFRect()};return this.hasEditedComment&&(t.popup=this.comment),e.updateEdited(t),null}}class Ts{#e;#t=!1;#n=null;#r=null;#i=null;#s=new Map;#o=!1;#a=!1;#l=!1;#c=null;#h=null;#u=null;#f=null;#m=null;#p=-1;#d;static _initialized=!1;static#g=new Map([sn,Fg,MI,Bt,Qr].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:r,structTreeLayer:s,accessibilityManager:i,annotationLayer:a,drawLayer:c,textLayer:u,viewport:h,l10n:f}){const g=[...Ts.#g.values()];if(!Ts._initialized){Ts._initialized=!0;for(const y of g)y.initialize(f,e)}e.registerEditorTypes(g),this.#d=e,this.pageIndex=t,this.div=r,this.#e=i,this.#n=a,this.viewport=h,this.#u=u,this.drawLayer=c,this._structTree=s,this.#d.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#d.getMode()===ze.NONE}updateToolbar(e){this.#d.updateToolbar(e)}updateMode(e=this.#d.getMode()){switch(this.#v(),e){case ze.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ze.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case ze.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const r of Ts.#g.values())t.toggle(`${r._type}Editing`,e===r._editorType);this.div.hidden=!1}hasTextLayer(e){return e===this.#u?.div}setEditingState(e){this.#d.setEditingState(e)}addCommands(e){this.#d.addCommands(e)}cleanUndoStack(e){this.#d.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#n?.div.classList.toggle("disabled",!e)}async enable(){this.#l=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.#m?.abort(),this.#m=null;const e=new Set;for(const r of this.#s.values())r.enableEditing(),r.show(!0),r.annotationElementId&&(this.#d.removeChangedExistingAnnotation(r),e.add(r.annotationElementId));if(!this.#n){this.#l=!1;return}const t=this.#n.getEditableAnnotations();for(const r of t){if(r.hide(),this.#d.isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const s=await this.deserialize(r);s&&(this.addOrRebuild(s),s.enableEditing())}this.#l=!1}disable(){if(this.#a=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.#u&&!this.#m){this.#m=new AbortController;const s=this.#d.combinedSignal(this.#m);this.#u.div.addEventListener("pointerdown",i=>{const{clientX:c,clientY:u,timeStamp:h}=i,f=this.#p;if(h-f>500){this.#p=h;return}this.#p=-1;const{classList:g}=this.div;g.toggle("getElements",!0);const y=document.elementsFromPoint(c,u);if(g.toggle("getElements",!1),!this.div.contains(y[0]))return;let w;const S=new RegExp(`^${dS}[0-9]+$`);for(const _ of y)if(S.test(_.id)){w=_.id;break}if(!w)return;const v=this.#s.get(w);v?.annotationElementId===null&&(i.stopPropagation(),i.preventDefault(),v.dblclick())},{signal:s,capture:!0})}const e=new Map,t=new Map;for(const s of this.#s.values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){e.set(s.annotationElementId,s);continue}else t.set(s.annotationElementId,s);this.getEditableAnnotation(s.annotationElementId)?.show(),s.remove()}if(this.#n){const s=this.#n.getEditableAnnotations();for(const i of s){const{id:a}=i.data;if(this.#d.isDeletedAnnotationElement(a)){i.updateEdited({deleted:!0});continue}let c=t.get(a);if(c){c.resetAnnotationElement(i),c.show(!1),i.show();continue}c=e.get(a),c&&(this.#d.addChangedExistingAnnotation(c),c.renderAnnotationElement(i)&&c.show(!1)),i.show()}}this.#v(),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const s of Ts.#g.values())r.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#a=!1}getEditableAnnotation(e){return this.#n?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#d.getActive()!==e&&this.#d.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#u?.div&&!this.#f){this.#f=new AbortController;const e=this.#d.combinedSignal(this.#f);this.#u.div.addEventListener("pointerdown",this.#x.bind(this),{signal:e}),this.#u.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#u?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#u.div.classList.remove("highlighting"))}#x(e){this.#d.unselectAll();const{target:t}=e;if(t===this.#u.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#u.div.contains(t)){const{isMac:r}=mn.platform;if(e.button!==0||e.ctrlKey&&r)return;this.#d.showAllEditors("highlight",!0,!0),this.#u.div.classList.add("free"),this.toggleDrawing(),Bt.startHighlighting(this,this.#d.direction==="ltr",{target:this.#u.div,x:e.x,y:e.y}),this.#u.div.addEventListener("pointerup",()=>{this.#u.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#d._signal}),e.preventDefault()}}enableClick(){if(this.#r)return;this.#r=new AbortController;const e=this.#d.combinedSignal(this.#r);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){this.#r?.abort(),this.#r=null}attach(e){this.#s.set(e.id,e);const{annotationElementId:t}=e;t&&this.#d.isDeletedAnnotationElement(t)&&this.#d.removeDeletedAnnotationElement(e)}detach(e){this.#s.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#a&&e.annotationElementId&&this.#d.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#d.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#d.addDeletedAnnotationElement(e.annotationElementId),Re.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#d.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#l),this.#d.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#i&&(e._focusEventsAllowed=!1,this.#i=setTimeout(()=>{this.#i=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#d._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:t,undo:r,mustExec:!1})}getNextId(){return this.#d.getId()}get#y(){return Ts.#g.get(this.#d.getMode())}combinedSignal(e){return this.#d.combinedSignal(e)}#b(e){const t=this.#y;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#y?.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await this.#d.updateMode(e.mode);const{offsetX:r,offsetY:s}=this.#_(),i=this.getNextId(),a=this.#b({parent:this,id:i,x:r,y:s,uiManager:this.#d,isCentered:!0,...t});a&&this.add(a)}async deserialize(e){return await Ts.#g.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#d)||null}createAndAddNewEditor(e,t,r={}){const s=this.getNextId(),i=this.#b({parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:this.#d,isCentered:t,...r});return i&&this.add(i),i}#_(){const{x:e,y:t,width:r,height:s}=this.div.getBoundingClientRect(),i=Math.max(0,e),a=Math.max(0,t),c=Math.min(window.innerWidth,e+r),u=Math.min(window.innerHeight,t+s),h=(i+c)/2-e,f=(a+u)/2-t,[g,y]=this.viewport.rotation%180===0?[h,f]:[f,h];return{offsetX:g,offsetY:y}}addNewEditor(e={}){this.createAndAddNewEditor(this.#_(),!0,e)}setSelected(e){this.#d.setSelected(e)}toggleSelected(e){this.#d.toggleSelected(e)}unselect(e){this.#d.unselect(e)}pointerup(e){const{isMac:t}=mn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!this.#o||(this.#o=!1,this.#y?.isDrawer&&this.#y.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}const r=this.#d.getMode();if(r===ze.STAMP||r===ze.SIGNATURE){this.#d.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#d.getMode()===ze.HIGHLIGHT&&this.enableTextSelection(),this.#o){this.#o=!1;return}const{isMac:t}=mn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(this.#o=!0,this.#y?.isDrawer){this.startDrawingSession(e);return}const r=this.#d.getActive();this.#t=!r||r.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#c){this.#y.startDrawing(this,this.#d,!1,e);return}this.#d.setCurrentDrawingSession(this),this.#c=new AbortController;const t=this.#d.combinedSignal(this.#c);this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(this.#h=null,this.commitOrRemove())},{signal:t}),this.#y.startDrawing(this,this.#d,!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&(this.#h=t);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(e=!1){return this.#c?(this.#d.setCurrentDrawingSession(null),this.#c.abort(),this.#c=null,this.#h=null,this.#y.endDrawing(e)):null}findNewParent(e,t,r){const s=this.#d.findParent(t,r);return s===null||s===this?!1:(s.changeParent(e),!0)}commitOrRemove(){return this.#c?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#c&&this.#y.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#d.getActive()?.parent===this&&(this.#d.commitOrRemove(),this.#d.setActiveEditor(null)),this.#i&&(clearTimeout(this.#i),this.#i=null);for(const e of this.#s.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#s.clear(),this.#d.removeLayer(this)}#v(){for(const e of this.#s.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,Xi(this.div,e);for(const t of this.#d.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#d.commitOrRemove(),this.#v();const t=this.viewport.rotation,r=e.rotation;if(this.viewport=e,Xi(this.div,{rotation:r}),t!==r)for(const s of this.#s.values())s.rotate(r)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#d.viewParameters.realScale}}class dn{#e=null;#t=new Map;#n=new Map;static#r=0;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(const t of this.#t.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return Qe(this,"_svgFactory",new _d)}static#i(e,[t,r,s,i]){const{style:a}=e;a.top=`${100*r}%`,a.left=`${100*t}%`,a.width=`${100*s}%`,a.height=`${100*i}%`}#s(){const e=dn._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#o(e,t){const r=dn._svgFactory.createElement("clipPath");e.append(r);const s=`clip_${t}`;r.setAttribute("id",s),r.setAttribute("clipPathUnits","objectBoundingBox");const i=dn._svgFactory.createElement("use");return r.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),s}#a(e,t){for(const[r,s]of Object.entries(t))s===null?e.removeAttribute(r):e.setAttribute(r,s)}draw(e,t=!1,r=!1){const s=dn.#r++,i=this.#s(),a=dn._svgFactory.createElement("defs");i.append(a);const c=dn._svgFactory.createElement("path");a.append(c);const u=`path_p${this.pageIndex}_${s}`;c.setAttribute("id",u),c.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#n.set(s,c);const h=r?this.#o(a,u):null,f=dn._svgFactory.createElement("use");return i.append(f),f.setAttribute("href",`#${u}`),this.updateProperties(i,e),this.#t.set(s,i),{id:s,clipPathId:`url(#${h})`}}drawOutline(e,t){const r=dn.#r++,s=this.#s(),i=dn._svgFactory.createElement("defs");s.append(i);const a=dn._svgFactory.createElement("path");i.append(a);const c=`path_p${this.pageIndex}_${r}`;a.setAttribute("id",c),a.setAttribute("vector-effect","non-scaling-stroke");let u;if(t){const g=dn._svgFactory.createElement("mask");i.append(g),u=`mask_p${this.pageIndex}_${r}`,g.setAttribute("id",u),g.setAttribute("maskUnits","objectBoundingBox");const y=dn._svgFactory.createElement("rect");g.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const w=dn._svgFactory.createElement("use");g.append(w),w.setAttribute("href",`#${c}`),w.setAttribute("stroke","none"),w.setAttribute("fill","black"),w.setAttribute("fill-rule","nonzero"),w.classList.add("mask")}const h=dn._svgFactory.createElement("use");s.append(h),h.setAttribute("href",`#${c}`),u&&h.setAttribute("mask",`url(#${u})`);const f=h.cloneNode();return s.append(f),h.classList.add("mainOutline"),f.classList.add("secondaryOutline"),this.updateProperties(s,e),this.#t.set(r,s),r}finalizeDraw(e,t){this.#n.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:r,bbox:s,rootClass:i,path:a}=t,c=typeof e=="number"?this.#t.get(e):e;if(c){if(r&&this.#a(c,r),s&&dn.#i(c,s),i){const{classList:u}=c;for(const[h,f]of Object.entries(i))u.toggle(h,f)}if(a){const h=c.firstChild.firstChild;this.#a(h,a)}}}updateParent(e,t){if(t===this)return;const r=this.#t.get(e);r&&(t.#e.append(r),this.#t.delete(e),t.#t.set(e,r))}remove(e){this.#n.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(const e of this.#t.values())e.remove();this.#t.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Nm};globalThis.pdfjsLib={AbortException:fi,AnnotationEditorLayer:Ts,AnnotationEditorParamsType:tt,AnnotationEditorType:ze,AnnotationEditorUIManager:pi,AnnotationLayer:Lg,AnnotationMode:ai,AnnotationType:Gt,build:uI,ColorPicker:mr,createValidAbsoluteUrl:hS,DOMSVGFactory:_d,DrawLayer:dn,FeatureTest:mn,fetchData:fc,getDocument:Dg,getFilenameFromUrl:nM,getPdfFilenameFromUrl:rM,getRGB:ah,getUuid:mS,getXfaPageViewport:iM,GlobalWorkerOptions:Vi,ImageKind:sd,InvalidPDFException:Sm,isDataScheme:oh,isPdfFile:Cg,isValidExplicitDest:gM,MathClamp:En,noContextMenu:vr,normalizeUnicode:JD,OPS:$l,OutputScale:os,PasswordResponses:HD,PDFDataRangeTransport:DS,PDFDateString:Am,PDFWorker:Vl,PermissionFlag:UD,PixelsPerInch:pa,RenderingCancelledException:Ag,ResponseException:wd,setLayerDimensions:Xi,shadow:Qe,SignatureExtractor:Wo,stopEvent:qt,SupportedImageMimeTypes:Cm,TextLayer:An,TouchManager:lh,updateUrlHash:fS,Util:_e,VerbosityLevel:rh,version:Ig,XfaLayer:jS};Vi.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${Ig}/pdf.worker.min.js`;async function II(n){try{const e=await n.arrayBuffer(),t=await Dg({data:e}).promise;let r="";for(let s=1;s<=t.numPages;s++){const c=(await(await t.getPage(s)).getTextContent()).items.map(u=>u.str||"").filter(u=>u.trim().length>0).join(" ");r+=c+`
`}return r.trim()}catch(e){return console.error("Error extracting PDF text:",e),`[PDF text extraction failed: ${e instanceof Error?e.message:"Unknown error"}]`}}function jI(){const[n,e]=C.useState([]),t=ba(),{toast:r}=Hd(),s=Ol({mutationFn:async u=>{const h={name:u.name,size:u.size,progress:0,status:"uploading"};e(w=>[...w,h]);const f=u.name.toLowerCase().endsWith(".pdf");let g="";if(f){e(w=>w.map(S=>S.name===u.name?{...S,progress:20}:S));try{g=await II(u),e(w=>w.map(S=>S.name===u.name?{...S,progress:60}:S))}catch(w){console.error("PDF extraction failed:",w),g=`[PDF Document - File size: ${(u.size/1024/1024).toFixed(1)} MB]
[Text extraction completed with client-side processing]`}}else{for(let w=20;w<=60;w+=20)await new Promise(S=>setTimeout(S,200)),e(S=>S.map(v=>v.name===u.name?{...v,progress:w}:v));g=`Content extracted from ${u.name}`}return e(w=>w.map(S=>S.name===u.name?{...S,progress:80}:S)),e(w=>w.map(S=>S.name===u.name?{...S,status:"processing"}:S)),(await ca("POST","/api/documents",{title:u.name.replace(/\.[^/.]+$/,""),content:g,fileType:u.name.split(".").pop()?.toUpperCase()||"UNKNOWN",category:"training",tags:["onboarding","document"]})).json()},onSuccess:(u,h)=>{e(f=>f.map(g=>g.name===h.name?{...g,status:"completed"}:g)),t.invalidateQueries({queryKey:["/api/documents"]}),r({title:"Document uploaded successfully",description:`${h.name} has been processed and added to the knowledge base.`})},onError:(u,h)=>{e(f=>f.map(g=>g.name===h.name?{...g,status:"error"}:g)),r({title:"Upload failed",description:`Failed to upload ${h.name}. Please try again.`,variant:"destructive"})}}),i=u=>{const h=Array.from(u.target.files||[]),f=[".pdf",".docx",".pptx",".ppt",".odp",".txt"];h.forEach(g=>{const y="."+g.name.split(".").pop()?.toLowerCase();if(!f.includes(y)){r({title:"File type not supported",description:`${g.name} is not a supported file type. Please upload PDF, DOCX, PPTX, PPT, ODP, or TXT files.`,variant:"destructive"});return}if(g.size>10*1024*1024){r({title:"File too large",description:`${g.name} is larger than 10MB. Please choose a smaller file.`,variant:"destructive"});return}s.mutate(g)}),u.target.value=""},a=u=>{u.preventDefault();const h=Array.from(u.dataTransfer.files),f=[".pdf",".docx",".pptx",".ppt",".odp",".txt"];h.forEach(g=>{const y="."+g.name.split(".").pop()?.toLowerCase();if(!f.includes(y)){r({title:"File type not supported",description:`${g.name} is not a supported file type. Please upload PDF, DOCX, PPTX, PPT, ODP, or TXT files.`,variant:"destructive"});return}if(g.size>10*1024*1024){r({title:"File too large",description:`${g.name} is larger than 10MB. Please choose a smaller file.`,variant:"destructive"});return}s.mutate(g)})},c=u=>{u.preventDefault()};return p.jsxs(ct,{children:[p.jsxs(vt,{children:[p.jsx(xt,{children:"Document Processing"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"AI processes and indexes uploaded documents for smart retrieval"})]}),p.jsxs(at,{children:[p.jsxs("div",{"data-testid":"upload-area",className:"border-2 border-dashed border-border rounded-lg p-8 text-center hover:border-primary transition-colors cursor-pointer",onDrop:a,onDragOver:c,onClick:()=>document.getElementById("file-input")?.click(),children:[p.jsx(cN,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),p.jsx("p",{className:"text-lg font-medium text-foreground mb-2",children:"Drop files here or click to upload"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Support for PDF, DOCX, PPTX, PPT, ODP, and TXT files"}),p.jsx(lt,{className:"mt-4","data-testid":"button-select-files",children:"Select Files"}),p.jsx("input",{id:"file-input",type:"file",multiple:!0,onChange:i,className:"hidden"})]}),n.length>0&&p.jsxs("div",{className:"mt-6 space-y-3",children:[p.jsx("h4",{className:"text-sm font-medium text-foreground",children:"Recent Uploads"}),n.map((u,h)=>p.jsxs("div",{"data-testid":`uploaded-file-${h}`,className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx(Nn,{className:"h-5 w-5 text-primary"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-medium text-foreground",children:u.name}),p.jsxs("p",{className:"text-xs text-muted-foreground",children:[u.status==="uploading"&&(u.name.toLowerCase().endsWith(".pdf")?"Extracting PDF text...":"Uploading..."),u.status==="processing"&&"Processing... AI indexing content",u.status==="completed"&&"Processing complete - Content searchable",u.status==="error"&&"Upload failed"]})]})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[u.status==="uploading"&&p.jsxs(p.Fragment,{children:[p.jsx(fa,{value:u.progress,className:"w-16"}),p.jsxs("span",{className:"text-xs text-muted-foreground",children:[u.progress,"%"]})]}),u.status==="processing"&&p.jsx(hN,{className:"h-4 w-4 animate-spin text-primary"}),u.status==="completed"&&p.jsx("span",{className:"text-xs text-green-500 font-medium",children:" Complete"}),u.status==="error"&&p.jsx("span",{className:"text-xs text-red-500 font-medium",children:" Error"})]})]},h))]})]})]})}function OI(){const n=[{title:"Pre-boarding",description:"AI document preparation",icon:lN,status:"completed",tasks:[{name:"Welcome email sent",completed:!0},{name:"Documents prepared",completed:!0},{name:"Equipment ordered",completed:!0}]},{title:"First Day",description:"Guided AI orientation",icon:uc,status:"in-progress",tasks:[{name:"Badge activation",completed:!0},{name:"System access setup",completed:!1},{name:"Team introductions",completed:!1}]},{title:"Training",description:"AI-curated learning",icon:c_,status:"pending",tasks:[{name:"Role-specific training",completed:!1},{name:"Project knowledge sync",completed:!1},{name:"Feedback collection",completed:!1}]}],e=r=>{switch(r){case"completed":return p.jsx(pd,{className:"h-6 w-6 text-green-500"});case"in-progress":return p.jsx(ua,{className:"h-6 w-6 text-primary"});default:return p.jsx(l_,{className:"h-6 w-6 text-muted-foreground"})}},t=r=>r?p.jsx(pd,{className:"h-4 w-4 text-green-500"}):p.jsx(ua,{className:"h-4 w-4 text-muted-foreground"});return p.jsxs(ct,{children:[p.jsxs(vt,{children:[p.jsx(xt,{children:"AI-Powered Onboarding Workflow"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Automated workflow adapts based on role, department, and project assignments"})]}),p.jsx(at,{children:p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:n.map((r,s)=>{const i=r.icon;return p.jsxs("div",{className:"relative","data-testid":`workflow-stage-${s}`,children:[p.jsxs("div",{className:"flex items-center mb-4",children:[p.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${r.status==="completed"?"bg-green-500":r.status==="in-progress"?"bg-primary":"bg-secondary border-2 border-border"}`,children:p.jsx(i,{className:`h-5 w-5 ${r.status==="pending"?"text-muted-foreground":"text-white"}`})}),p.jsxs("div",{className:"ml-4 flex-1",children:[p.jsx("h4",{className:"font-semibold text-foreground",children:r.title}),p.jsx("p",{className:"text-xs text-muted-foreground",children:r.description})]}),p.jsx("div",{className:"ml-auto",children:e(r.status)})]}),p.jsx("div",{className:"space-y-2 ml-14",children:r.tasks.map((a,c)=>p.jsxs("div",{"data-testid":`task-${s}-${c}`,className:"flex items-center text-xs",children:[t(a.completed),p.jsx("span",{className:`ml-2 ${a.completed?"text-foreground":"text-muted-foreground"}`,children:a.name})]},c))}),s<n.length-1&&p.jsx("div",{className:"absolute top-12 left-16 w-px h-20 bg-border md:w-20 md:h-px md:top-5 md:left-full"})]},r.title)})})})]})}function LI(){const{data:n=[]}=tr({queryKey:["/api/employees"]}),{data:e}=tr({queryKey:["/api/onboarding/stats"]}),{data:t=[]}=tr({queryKey:["/api/documents"]}),r=[{title:"Active Onboarding",value:e?.activeOnboarding||0,icon:zi,color:"bg-primary/10 text-primary"},{title:"Avg. Time Saved",value:"4.2 days",icon:ua,color:"bg-green-500/10 text-green-500"},{title:"Completion Rate",value:`${e?.avgCompletionRate||0}%`,icon:c_,color:"bg-orange-500/10 text-orange-500"},{title:"AI Interactions",value:"1,247",icon:fd,color:"bg-purple-500/10 text-purple-500"}],s=t.slice(0,3);return p.jsxs("div",{className:"flex flex-col h-full",children:[p.jsx("header",{className:"bg-card border-b border-border px-6 py-4",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"AI-Powered Onboarding Dashboard"}),p.jsx("p",{className:"text-muted-foreground",children:"Streamline employee onboarding with intelligent automation"})]}),p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsxs("div",{className:"relative",children:[p.jsx(pm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),p.jsx(rs,{"data-testid":"input-search-knowledge",type:"search",placeholder:"Search knowledge base...",className:"w-80 pl-10"})]}),p.jsxs(lt,{variant:"ghost",size:"icon",className:"relative","data-testid":"button-notifications",children:[p.jsx(JP,{className:"h-5 w-5"}),p.jsx("span",{className:"absolute top-0 right-0 h-2 w-2 bg-green-500 rounded-full"})]})]})]})}),p.jsx("div",{className:"flex-1 overflow-auto",children:p.jsxs("div",{className:"p-6 space-y-6",children:[p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:r.map((i,a)=>{const c=i.icon;return p.jsx(ct,{"data-testid":`card-kpi-${i.title.toLowerCase().replace(/\s+/g,"-")}`,children:p.jsx(at,{className:"pt-6",children:p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:`p-3 rounded-lg ${i.color}`,children:p.jsx(c,{className:"h-6 w-6"})}),p.jsxs("div",{className:"ml-4",children:[p.jsx("p",{className:"text-sm text-muted-foreground",children:i.title}),p.jsx("p",{className:"text-2xl font-bold text-foreground",children:i.value})]})]})})},a)})}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[p.jsx(VD,{employees:n}),p.jsxs(ct,{children:[p.jsx(vt,{children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx(xt,{children:"Knowledge Repository"}),p.jsx(wm,{children:"Access company documents and project information"})]}),p.jsxs("div",{className:"flex space-x-2",children:[p.jsxs(lt,{variant:"outline",size:"sm","data-testid":"button-upload-docs",children:[p.jsx(Ll,{className:"h-4 w-4 mr-2"}),"Upload Docs"]}),p.jsx(lt,{size:"sm","data-testid":"button-manage-knowledge",children:"Manage"})]})]})}),p.jsxs(at,{children:[p.jsxs("div",{className:"relative mb-4",children:[p.jsx(pm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),p.jsx(rs,{"data-testid":"input-search-policies",type:"search",placeholder:"Search policies, procedures, project docs...",className:"pl-10"})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[p.jsx(ct,{className:"hover:bg-muted/50 cursor-pointer transition-colors","data-testid":"card-policies",children:p.jsx(at,{className:"p-4",children:p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx(Nn,{className:"h-6 w-6 text-primary"}),p.jsxs("div",{children:[p.jsx("p",{className:"font-medium text-foreground",children:"Policies"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"47 documents"})]})]})})}),p.jsx(ct,{className:"hover:bg-muted/50 cursor-pointer transition-colors","data-testid":"card-projects",children:p.jsx(at,{className:"p-4",children:p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx(nd,{className:"h-6 w-6 text-green-500"}),p.jsxs("div",{children:[p.jsx("p",{className:"font-medium text-foreground",children:"Projects"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"124 documents"})]})]})})})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-sm font-medium text-foreground",children:"Recently Accessed"}),s.map(i=>p.jsxs("div",{"data-testid":`doc-${i.title.toLowerCase().replace(/\s+/g,"-")}`,className:"flex items-center space-x-3 p-3 hover:bg-muted/50 rounded-md cursor-pointer transition-colors",children:[p.jsx(Nn,{className:"h-4 w-4 text-red-500"}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"text-sm font-medium text-foreground",children:i.title}),p.jsxs("p",{className:"text-xs text-muted-foreground",children:["Updated ",new Date(i.updatedAt||"").toLocaleDateString()]})]}),p.jsx(on,{variant:"secondary",children:i.fileType})]},i.id))]})]})]})]}),p.jsxs("div",{className:"space-y-6",children:[p.jsx(iS,{}),p.jsxs(ct,{children:[p.jsx(vt,{children:p.jsx(xt,{children:"Quick Actions"})}),p.jsxs(at,{className:"space-y-3",children:[p.jsxs(lt,{variant:"ghost",className:"w-full justify-start h-auto p-3","data-testid":"button-new-employee",children:[p.jsx(zi,{className:"h-5 w-5 text-primary mr-3"}),p.jsxs("div",{className:"text-left",children:[p.jsx("p",{className:"text-sm font-medium text-foreground",children:"New Employee"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Start onboarding process"})]})]}),p.jsxs(lt,{variant:"ghost",className:"w-full justify-start h-auto p-3","data-testid":"button-upload-documents",children:[p.jsx(Ll,{className:"h-5 w-5 text-green-500 mr-3"}),p.jsxs("div",{className:"text-left",children:[p.jsx("p",{className:"text-sm font-medium text-foreground",children:"Upload Documents"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Add to knowledge base"})]})]}),p.jsxs(lt,{variant:"ghost",className:"w-full justify-start h-auto p-3","data-testid":"button-view-analytics",children:[p.jsx(nd,{className:"h-5 w-5 text-purple-500 mr-3"}),p.jsxs("div",{className:"text-left",children:[p.jsx("p",{className:"text-sm font-medium text-foreground",children:"View Analytics"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Onboarding insights"})]})]})]})]}),p.jsxs(ct,{children:[p.jsx(vt,{children:p.jsx(xt,{children:"AI Insights"})}),p.jsxs(at,{className:"space-y-4",children:[p.jsx("div",{className:"p-3 bg-green-500/10 rounded-lg border-l-4 border-green-500",children:p.jsxs("div",{className:"flex items-start space-x-2",children:[p.jsx(nd,{className:"h-4 w-4 text-green-500 mt-0.5"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-medium text-foreground",children:"Optimization Suggestion"}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Consider splitting security training into smaller modules to improve completion rates."})]})]})}),p.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg border-l-4 border-primary",children:p.jsxs("div",{className:"flex items-start space-x-2",children:[p.jsx(fd,{className:"h-4 w-4 text-primary mt-0.5"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-medium text-foreground",children:"Trending Questions"}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:'Most asked: "How to access project documentation?" - Consider adding a quick guide.'})]})]})})]})]})]})]}),p.jsx(OI,{}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.jsx(jI,{}),p.jsxs(ct,{children:[p.jsxs(vt,{children:[p.jsx(xt,{children:"Contextual Knowledge"}),p.jsx(wm,{children:"AI-powered search results based on employee role and current tasks"})]}),p.jsx(at,{children:p.jsx("div",{className:"space-y-4",children:[{title:"Software Development Guidelines",description:"Comprehensive coding standards and best practices for new developers...",relevance:95,icon:"code"},{title:"Project Alpha Technical Stack",description:"NodeJS, MongoDB setup guide and architectural overview...",relevance:89,icon:"project"},{title:"Security Protocols",description:"Essential security measures for development team members...",relevance:82,icon:"security"}].map((i,a)=>p.jsx("div",{"data-testid":`knowledge-result-${a}`,className:"p-4 border border-border rounded-lg hover:bg-muted/50 transition-colors cursor-pointer",children:p.jsxs("div",{className:"flex items-start space-x-3",children:[p.jsx("div",{className:"p-2 bg-green-500/10 rounded-lg",children:p.jsx(Nn,{className:"h-4 w-4 text-green-500"})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h4",{className:"text-sm font-semibold text-foreground mb-1",children:i.title}),p.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:i.description}),p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsxs(on,{variant:"secondary",children:[i.relevance,"% relevance"]}),p.jsx("span",{className:"text-xs text-muted-foreground",children:"Updated 1 week ago"})]})]})]})},a))})})]})]})]})})]})}var FI=C.createContext(void 0);function zg(n){const e=C.useContext(FI);return n||e||"ltr"}var Lp="rovingFocusGroup.onEntryFocus",BI={bubbles:!1,cancelable:!0},dh="RovingFocusGroup",[Mm,US,$I]=ng(dh),[zI,HS]=Br(dh,[$I]),[VI,UI]=zI(dh),WS=C.forwardRef((n,e)=>p.jsx(Mm.Provider,{scope:n.__scopeRovingFocusGroup,children:p.jsx(Mm.Slot,{scope:n.__scopeRovingFocusGroup,children:p.jsx(HI,{...n,ref:e})})}));WS.displayName=dh;var HI=C.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:u,onEntryFocus:h,preventScrollOnEntryFocus:f=!1,...g}=n,y=C.useRef(null),w=mt(e,y),S=zg(i),[v=null,_]=qi({prop:a,defaultProp:c,onChange:u}),[A,E]=C.useState(!1),k=Mn(h),P=US(t),N=C.useRef(!1),[R,M]=C.useState(0);return C.useEffect(()=>{const $=y.current;if($)return $.addEventListener(Lp,k),()=>$.removeEventListener(Lp,k)},[k]),p.jsx(VI,{scope:t,orientation:r,dir:S,loop:s,currentTabStopId:v,onItemFocus:C.useCallback($=>_($),[_]),onItemShiftTab:C.useCallback(()=>E(!0),[]),onFocusableItemAdd:C.useCallback(()=>M($=>$+1),[]),onFocusableItemRemove:C.useCallback(()=>M($=>$-1),[]),children:p.jsx(Ve.div,{tabIndex:A||R===0?-1:0,"data-orientation":r,...g,ref:w,style:{outline:"none",...n.style},onMouseDown:ke(n.onMouseDown,()=>{N.current=!0}),onFocus:ke(n.onFocus,$=>{const G=!N.current;if($.target===$.currentTarget&&G&&!A){const F=new CustomEvent(Lp,BI);if($.currentTarget.dispatchEvent(F),!F.defaultPrevented){const V=P().filter(K=>K.focusable),X=V.find(K=>K.active),Z=V.find(K=>K.id===v),oe=[X,Z,...V].filter(Boolean).map(K=>K.ref.current);YS(oe,f)}}N.current=!1}),onBlur:ke(n.onBlur,()=>E(!1))})})}),GS="RovingFocusGroupItem",qS=C.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:s=!1,tabStopId:i,...a}=n,c=Ns(),u=i||c,h=UI(GS,t),f=h.currentTabStopId===u,g=US(t),{onFocusableItemAdd:y,onFocusableItemRemove:w}=h;return C.useEffect(()=>{if(r)return y(),()=>w()},[r,y,w]),p.jsx(Mm.ItemSlot,{scope:t,id:u,focusable:r,active:s,children:p.jsx(Ve.span,{tabIndex:f?0:-1,"data-orientation":h.orientation,...a,ref:e,onMouseDown:ke(n.onMouseDown,S=>{r?h.onItemFocus(u):S.preventDefault()}),onFocus:ke(n.onFocus,()=>h.onItemFocus(u)),onKeyDown:ke(n.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){h.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const v=qI(S,h.orientation,h.dir);if(v!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let A=g().filter(E=>E.focusable).map(E=>E.ref.current);if(v==="last")A.reverse();else if(v==="prev"||v==="next"){v==="prev"&&A.reverse();const E=A.indexOf(S.currentTarget);A=h.loop?YI(A,E+1):A.slice(E+1)}setTimeout(()=>YS(A))}})})})});qS.displayName=GS;var WI={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function GI(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function qI(n,e,t){const r=GI(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return WI[r]}function YS(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function YI(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var XI=WS,KI=qS,Vg="Tabs",[QI,xz]=Br(Vg,[HS]),XS=HS(),[ZI,Ug]=QI(Vg),KS=C.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,onValueChange:s,defaultValue:i,orientation:a="horizontal",dir:c,activationMode:u="automatic",...h}=n,f=zg(c),[g,y]=qi({prop:r,onChange:s,defaultProp:i});return p.jsx(ZI,{scope:t,baseId:Ns(),value:g,onValueChange:y,orientation:a,dir:f,activationMode:u,children:p.jsx(Ve.div,{dir:f,"data-orientation":a,...h,ref:e})})});KS.displayName=Vg;var QS="TabsList",ZS=C.forwardRef((n,e)=>{const{__scopeTabs:t,loop:r=!0,...s}=n,i=Ug(QS,t),a=XS(t);return p.jsx(XI,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:r,children:p.jsx(Ve.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});ZS.displayName=QS;var JS="TabsTrigger",e1=C.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,disabled:s=!1,...i}=n,a=Ug(JS,t),c=XS(t),u=r1(a.baseId,r),h=s1(a.baseId,r),f=r===a.value;return p.jsx(KI,{asChild:!0,...c,focusable:!s,active:f,children:p.jsx(Ve.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":h,"data-state":f?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:u,...i,ref:e,onMouseDown:ke(n.onMouseDown,g=>{!s&&g.button===0&&g.ctrlKey===!1?a.onValueChange(r):g.preventDefault()}),onKeyDown:ke(n.onKeyDown,g=>{[" ","Enter"].includes(g.key)&&a.onValueChange(r)}),onFocus:ke(n.onFocus,()=>{const g=a.activationMode!=="manual";!f&&!s&&g&&a.onValueChange(r)})})})});e1.displayName=JS;var t1="TabsContent",n1=C.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,forceMount:s,children:i,...a}=n,c=Ug(t1,t),u=r1(c.baseId,r),h=s1(c.baseId,r),f=r===c.value,g=C.useRef(f);return C.useEffect(()=>{const y=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(y)},[]),p.jsx(Is,{present:s||f,children:({present:y})=>p.jsx(Ve.div,{"data-state":f?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!y,id:h,tabIndex:0,...a,ref:e,style:{...n.style,animationDuration:g.current?"0s":void 0},children:y&&i})})});n1.displayName=t1;function r1(n,e){return`${n}-trigger-${e}`}function s1(n,e){return`${n}-content-${e}`}var JI=KS,i1=ZS,o1=e1,a1=n1;const e2=JI,l1=C.forwardRef(({className:n,...e},t)=>p.jsx(i1,{ref:t,className:Fe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));l1.displayName=i1.displayName;const c1=C.forwardRef(({className:n,...e},t)=>p.jsx(o1,{ref:t,className:Fe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));c1.displayName=o1.displayName;const u1=C.forwardRef(({className:n,...e},t)=>p.jsx(a1,{ref:t,className:Fe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));u1.displayName=a1.displayName;var Fp="focusScope.autoFocusOnMount",Bp="focusScope.autoFocusOnUnmount",gb={bubbles:!1,cancelable:!0},t2="FocusScope",hh=C.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=n,[c,u]=C.useState(null),h=Mn(s),f=Mn(i),g=C.useRef(null),y=mt(e,v=>u(v)),w=C.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;C.useEffect(()=>{if(r){let v=function(k){if(w.paused||!c)return;const P=k.target;c.contains(P)?g.current=P:ii(g.current,{select:!0})},_=function(k){if(w.paused||!c)return;const P=k.relatedTarget;P!==null&&(c.contains(P)||ii(g.current,{select:!0}))},A=function(k){if(document.activeElement===document.body)for(const N of k)N.removedNodes.length>0&&ii(c)};document.addEventListener("focusin",v),document.addEventListener("focusout",_);const E=new MutationObserver(A);return c&&E.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",_),E.disconnect()}}},[r,c,w.paused]),C.useEffect(()=>{if(c){vb.add(w);const v=document.activeElement;if(!c.contains(v)){const A=new CustomEvent(Fp,gb);c.addEventListener(Fp,h),c.dispatchEvent(A),A.defaultPrevented||(n2(a2(d1(c)),{select:!0}),document.activeElement===v&&ii(c))}return()=>{c.removeEventListener(Fp,h),setTimeout(()=>{const A=new CustomEvent(Bp,gb);c.addEventListener(Bp,f),c.dispatchEvent(A),A.defaultPrevented||ii(v??document.body,{select:!0}),c.removeEventListener(Bp,f),vb.remove(w)},0)}}},[c,h,f,w]);const S=C.useCallback(v=>{if(!t&&!r||w.paused)return;const _=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,A=document.activeElement;if(_&&A){const E=v.currentTarget,[k,P]=r2(E);k&&P?!v.shiftKey&&A===P?(v.preventDefault(),t&&ii(k,{select:!0})):v.shiftKey&&A===k&&(v.preventDefault(),t&&ii(P,{select:!0})):A===E&&v.preventDefault()}},[t,r,w.paused]);return p.jsx(Ve.div,{tabIndex:-1,...a,ref:y,onKeyDown:S})});hh.displayName=t2;function n2(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(ii(r,{select:e}),document.activeElement!==t)return}function r2(n){const e=d1(n),t=yb(e,n),r=yb(e.reverse(),n);return[t,r]}function d1(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function yb(n,e){for(const t of n)if(!s2(t,{upTo:e}))return t}function s2(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function i2(n){return n instanceof HTMLInputElement&&"select"in n}function ii(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&i2(n)&&e&&n.select()}}var vb=o2();function o2(){let n=[];return{add(e){const t=n[0];e!==t&&t?.pause(),n=xb(n,e),n.unshift(e)},remove(e){n=xb(n,e),n[0]?.resume()}}}function xb(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function a2(n){return n.filter(e=>e.tagName!=="A")}var $p=0;function Hg(){C.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??wb()),document.body.insertAdjacentElement("beforeend",n[1]??wb()),$p++,()=>{$p===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),$p--}},[])}function wb(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var Jr=function(){return Jr=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Jr.apply(this,arguments)};function h1(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function l2(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}var ad="right-scroll-bar-position",ld="width-before-scroll-bar",c2="with-scroll-bars-hidden",u2="--removed-body-scroll-bar-size";function zp(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function d2(n,e){var t=C.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var s=t.value;s!==r&&(t.value=r,t.callback(r,s))}}}})[0];return t.callback=e,t.facade}var h2=typeof window<"u"?C.useLayoutEffect:C.useEffect,bb=new WeakMap;function f2(n,e){var t=d2(null,function(r){return n.forEach(function(s){return zp(s,r)})});return h2(function(){var r=bb.get(t);if(r){var s=new Set(r),i=new Set(n),a=t.current;s.forEach(function(c){i.has(c)||zp(c,null)}),i.forEach(function(c){s.has(c)||zp(c,a)})}bb.set(t,n)},[n]),t}function p2(n){return n}function m2(n,e){e===void 0&&(e=p2);var t=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(i){var a=e(i,r);return t.push(a),function(){t=t.filter(function(c){return c!==a})}},assignSyncMedium:function(i){for(r=!0;t.length;){var a=t;t=[],a.forEach(i)}t={push:function(c){return i(c)},filter:function(){return t}}},assignMedium:function(i){r=!0;var a=[];if(t.length){var c=t;t=[],c.forEach(i),a=t}var u=function(){var f=a;a=[],f.forEach(i)},h=function(){return Promise.resolve().then(u)};h(),t={push:function(f){a.push(f),h()},filter:function(f){return a=a.filter(f),t}}}};return s}function g2(n){n===void 0&&(n={});var e=m2(null);return e.options=Jr({async:!0,ssr:!1},n),e}var f1=function(n){var e=n.sideCar,t=h1(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return C.createElement(r,Jr({},t))};f1.isSideCarExport=!0;function y2(n,e){return n.useMedium(e),f1}var p1=g2(),Vp=function(){},fh=C.forwardRef(function(n,e){var t=C.useRef(null),r=C.useState({onScrollCapture:Vp,onWheelCapture:Vp,onTouchMoveCapture:Vp}),s=r[0],i=r[1],a=n.forwardProps,c=n.children,u=n.className,h=n.removeScrollBar,f=n.enabled,g=n.shards,y=n.sideCar,w=n.noIsolation,S=n.inert,v=n.allowPinchZoom,_=n.as,A=_===void 0?"div":_,E=n.gapMode,k=h1(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=y,N=f2([t,e]),R=Jr(Jr({},k),s);return C.createElement(C.Fragment,null,f&&C.createElement(P,{sideCar:p1,removeScrollBar:h,shards:g,noIsolation:w,inert:S,setCallbacks:i,allowPinchZoom:!!v,lockRef:t,gapMode:E}),a?C.cloneElement(C.Children.only(c),Jr(Jr({},R),{ref:N})):C.createElement(A,Jr({},R,{className:u,ref:N}),c))});fh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};fh.classNames={fullWidth:ld,zeroRight:ad};var v2=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function x2(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=v2();return e&&n.setAttribute("nonce",e),n}function w2(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function b2(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var _2=function(){var n=0,e=null;return{add:function(t){n==0&&(e=x2())&&(w2(e,t),b2(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},S2=function(){var n=_2();return function(e,t){C.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},m1=function(){var n=S2(),e=function(t){var r=t.styles,s=t.dynamic;return n(r,s),null};return e},A2={left:0,top:0,right:0,gap:0},Up=function(n){return parseInt(n||"",10)||0},C2=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[Up(t),Up(r),Up(s)]},E2=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return A2;var e=C2(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},T2=m1(),sa="data-scroll-locked",k2=function(n,e,t,r){var s=n.left,i=n.top,a=n.right,c=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(c2,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(sa,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ad,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(ld,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(ad," .").concat(ad,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ld," .").concat(ld,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(sa,`] {
    `).concat(u2,": ").concat(c,`px;
  }
`)},_b=function(){var n=parseInt(document.body.getAttribute(sa)||"0",10);return isFinite(n)?n:0},P2=function(){C.useEffect(function(){return document.body.setAttribute(sa,(_b()+1).toString()),function(){var n=_b()-1;n<=0?document.body.removeAttribute(sa):document.body.setAttribute(sa,n.toString())}},[])},N2=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,s=r===void 0?"margin":r;P2();var i=C.useMemo(function(){return E2(s)},[s]);return C.createElement(T2,{styles:k2(i,!e,s,t?"":"!important")})},Im=!1;if(typeof window<"u")try{var Xu=Object.defineProperty({},"passive",{get:function(){return Im=!0,!0}});window.addEventListener("test",Xu,Xu),window.removeEventListener("test",Xu,Xu)}catch{Im=!1}var Fo=Im?{passive:!1}:!1,R2=function(n){return n.tagName==="TEXTAREA"},g1=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!R2(n)&&t[e]==="visible")},D2=function(n){return g1(n,"overflowY")},M2=function(n){return g1(n,"overflowX")},Sb=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=y1(n,r);if(s){var i=v1(n,r),a=i[1],c=i[2];if(a>c)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},I2=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},j2=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},y1=function(n,e){return n==="v"?D2(e):M2(e)},v1=function(n,e){return n==="v"?I2(e):j2(e)},O2=function(n,e){return n==="h"&&e==="rtl"?-1:1},L2=function(n,e,t,r,s){var i=O2(n,window.getComputedStyle(e).direction),a=i*r,c=t.target,u=e.contains(c),h=!1,f=a>0,g=0,y=0;do{var w=v1(n,c),S=w[0],v=w[1],_=w[2],A=v-_-i*S;(S||A)&&y1(n,c)&&(g+=A,y+=S),c instanceof ShadowRoot?c=c.host:c=c.parentNode}while(!u&&c!==document.body||u&&(e.contains(c)||e===c));return(f&&Math.abs(g)<1||!f&&Math.abs(y)<1)&&(h=!0),h},Ku=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},Ab=function(n){return[n.deltaX,n.deltaY]},Cb=function(n){return n&&"current"in n?n.current:n},F2=function(n,e){return n[0]===e[0]&&n[1]===e[1]},B2=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},$2=0,Bo=[];function z2(n){var e=C.useRef([]),t=C.useRef([0,0]),r=C.useRef(),s=C.useState($2++)[0],i=C.useState(m1)[0],a=C.useRef(n);C.useEffect(function(){a.current=n},[n]),C.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var v=l2([n.lockRef.current],(n.shards||[]).map(Cb),!0).filter(Boolean);return v.forEach(function(_){return _.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var c=C.useCallback(function(v,_){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!a.current.allowPinchZoom;var A=Ku(v),E=t.current,k="deltaX"in v?v.deltaX:E[0]-A[0],P="deltaY"in v?v.deltaY:E[1]-A[1],N,R=v.target,M=Math.abs(k)>Math.abs(P)?"h":"v";if("touches"in v&&M==="h"&&R.type==="range")return!1;var $=Sb(M,R);if(!$)return!0;if($?N=M:(N=M==="v"?"h":"v",$=Sb(M,R)),!$)return!1;if(!r.current&&"changedTouches"in v&&(k||P)&&(r.current=N),!N)return!0;var G=r.current||N;return L2(G,_,v,G==="h"?k:P)},[]),u=C.useCallback(function(v){var _=v;if(!(!Bo.length||Bo[Bo.length-1]!==i)){var A="deltaY"in _?Ab(_):Ku(_),E=e.current.filter(function(N){return N.name===_.type&&(N.target===_.target||_.target===N.shadowParent)&&F2(N.delta,A)})[0];if(E&&E.should){_.cancelable&&_.preventDefault();return}if(!E){var k=(a.current.shards||[]).map(Cb).filter(Boolean).filter(function(N){return N.contains(_.target)}),P=k.length>0?c(_,k[0]):!a.current.noIsolation;P&&_.cancelable&&_.preventDefault()}}},[]),h=C.useCallback(function(v,_,A,E){var k={name:v,delta:_,target:A,should:E,shadowParent:V2(A)};e.current.push(k),setTimeout(function(){e.current=e.current.filter(function(P){return P!==k})},1)},[]),f=C.useCallback(function(v){t.current=Ku(v),r.current=void 0},[]),g=C.useCallback(function(v){h(v.type,Ab(v),v.target,c(v,n.lockRef.current))},[]),y=C.useCallback(function(v){h(v.type,Ku(v),v.target,c(v,n.lockRef.current))},[]);C.useEffect(function(){return Bo.push(i),n.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:y}),document.addEventListener("wheel",u,Fo),document.addEventListener("touchmove",u,Fo),document.addEventListener("touchstart",f,Fo),function(){Bo=Bo.filter(function(v){return v!==i}),document.removeEventListener("wheel",u,Fo),document.removeEventListener("touchmove",u,Fo),document.removeEventListener("touchstart",f,Fo)}},[]);var w=n.removeScrollBar,S=n.inert;return C.createElement(C.Fragment,null,S?C.createElement(i,{styles:B2(s)}):null,w?C.createElement(N2,{gapMode:n.gapMode}):null)}function V2(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const U2=y2(p1,z2);var ph=C.forwardRef(function(n,e){return C.createElement(fh,Jr({},n,{ref:e,sideCar:U2}))});ph.classNames=fh.classNames;var H2=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},$o=new WeakMap,Qu=new WeakMap,Zu={},Hp=0,x1=function(n){return n&&(n.host||x1(n.parentNode))},W2=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=x1(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},G2=function(n,e,t,r){var s=W2(e,Array.isArray(n)?n:[n]);Zu[t]||(Zu[t]=new WeakMap);var i=Zu[t],a=[],c=new Set,u=new Set(s),h=function(g){!g||c.has(g)||(c.add(g),h(g.parentNode))};s.forEach(h);var f=function(g){!g||u.has(g)||Array.prototype.forEach.call(g.children,function(y){if(c.has(y))f(y);else try{var w=y.getAttribute(r),S=w!==null&&w!=="false",v=($o.get(y)||0)+1,_=(i.get(y)||0)+1;$o.set(y,v),i.set(y,_),a.push(y),v===1&&S&&Qu.set(y,!0),_===1&&y.setAttribute(t,"true"),S||y.setAttribute(r,"true")}catch(A){console.error("aria-hidden: cannot operate on ",y,A)}})};return f(e),c.clear(),Hp++,function(){a.forEach(function(g){var y=$o.get(g)-1,w=i.get(g)-1;$o.set(g,y),i.set(g,w),y||(Qu.has(g)||g.removeAttribute(r),Qu.delete(g)),w||g.removeAttribute(t)}),Hp--,Hp||($o=new WeakMap,$o=new WeakMap,Qu=new WeakMap,Zu={})}},Wg=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),s=H2(n);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),G2(r,s,t,"aria-hidden")):function(){return null}},Gg="Dialog",[w1,wz]=Br(Gg),[q2,$r]=w1(Gg),b1=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:s,onOpenChange:i,modal:a=!0}=n,c=C.useRef(null),u=C.useRef(null),[h=!1,f]=qi({prop:r,defaultProp:s,onChange:i});return p.jsx(q2,{scope:e,triggerRef:c,contentRef:u,contentId:Ns(),titleId:Ns(),descriptionId:Ns(),open:h,onOpenChange:f,onOpenToggle:C.useCallback(()=>f(g=>!g),[f]),modal:a,children:t})};b1.displayName=Gg;var _1="DialogTrigger",S1=C.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=$r(_1,t),i=mt(e,s.triggerRef);return p.jsx(Ve.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Xg(s.open),...r,ref:i,onClick:ke(n.onClick,s.onOpenToggle)})});S1.displayName=_1;var qg="DialogPortal",[Y2,A1]=w1(qg,{forceMount:void 0}),C1=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:s}=n,i=$r(qg,e);return p.jsx(Y2,{scope:e,forceMount:t,children:C.Children.map(r,a=>p.jsx(Is,{present:t||i.open,children:p.jsx(lc,{asChild:!0,container:s,children:a})}))})};C1.displayName=qg;var Sd="DialogOverlay",E1=C.forwardRef((n,e)=>{const t=A1(Sd,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,i=$r(Sd,n.__scopeDialog);return i.modal?p.jsx(Is,{present:r||i.open,children:p.jsx(K2,{...s,ref:e})}):null});E1.displayName=Sd;var X2=Gi("DialogOverlay.RemoveScroll"),K2=C.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=$r(Sd,t);return p.jsx(ph,{as:X2,allowPinchZoom:!0,shards:[s.contentRef],children:p.jsx(Ve.div,{"data-state":Xg(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Qi="DialogContent",T1=C.forwardRef((n,e)=>{const t=A1(Qi,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,i=$r(Qi,n.__scopeDialog);return p.jsx(Is,{present:r||i.open,children:i.modal?p.jsx(Q2,{...s,ref:e}):p.jsx(Z2,{...s,ref:e})})});T1.displayName=Qi;var Q2=C.forwardRef((n,e)=>{const t=$r(Qi,n.__scopeDialog),r=C.useRef(null),s=mt(e,t.contentRef,r);return C.useEffect(()=>{const i=r.current;if(i)return Wg(i)},[]),p.jsx(k1,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ke(n.onCloseAutoFocus,i=>{i.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:ke(n.onPointerDownOutside,i=>{const a=i.detail.originalEvent,c=a.button===0&&a.ctrlKey===!0;(a.button===2||c)&&i.preventDefault()}),onFocusOutside:ke(n.onFocusOutside,i=>i.preventDefault())})}),Z2=C.forwardRef((n,e)=>{const t=$r(Qi,n.__scopeDialog),r=C.useRef(!1),s=C.useRef(!1);return p.jsx(k1,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{n.onCloseAutoFocus?.(i),i.defaultPrevented||(r.current||t.triggerRef.current?.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{n.onInteractOutside?.(i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;t.triggerRef.current?.contains(a)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),k1=C.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...a}=n,c=$r(Qi,t),u=C.useRef(null),h=mt(e,u);return Hg(),p.jsxs(p.Fragment,{children:[p.jsx(hh,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:p.jsx(Sa,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":Xg(c.open),...a,ref:h,onDismiss:()=>c.onOpenChange(!1)})}),p.jsxs(p.Fragment,{children:[p.jsx(J2,{titleId:c.titleId}),p.jsx(tj,{contentRef:u,descriptionId:c.descriptionId})]})]})}),Yg="DialogTitle",P1=C.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=$r(Yg,t);return p.jsx(Ve.h2,{id:s.titleId,...r,ref:e})});P1.displayName=Yg;var N1="DialogDescription",R1=C.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=$r(N1,t);return p.jsx(Ve.p,{id:s.descriptionId,...r,ref:e})});R1.displayName=N1;var D1="DialogClose",M1=C.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=$r(D1,t);return p.jsx(Ve.button,{type:"button",...r,ref:e,onClick:ke(n.onClick,()=>s.onOpenChange(!1))})});M1.displayName=D1;function Xg(n){return n?"open":"closed"}var I1="DialogTitleWarning",[bz,j1]=aP(I1,{contentName:Qi,titleName:Yg,docsSlug:"dialog"}),J2=({titleId:n})=>{const e=j1(I1),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return C.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},ej="DialogDescriptionWarning",tj=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${j1(ej).contentName}}.`;return C.useEffect(()=>{const s=n.current?.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},nj=b1,rj=S1,sj=C1,O1=E1,L1=T1,F1=P1,B1=R1,ij=M1;const oj=nj,aj=rj,lj=sj,$1=C.forwardRef(({className:n,...e},t)=>p.jsx(O1,{ref:t,className:Fe("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));$1.displayName=O1.displayName;const z1=C.forwardRef(({className:n,children:e,...t},r)=>p.jsxs(lj,{children:[p.jsx($1,{}),p.jsxs(L1,{ref:r,className:Fe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,p.jsxs(ij,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[p.jsx(Yd,{className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));z1.displayName=L1.displayName;const V1=({className:n,...e})=>p.jsx("div",{className:Fe("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});V1.displayName="DialogHeader";const U1=C.forwardRef(({className:n,...e},t)=>p.jsx(F1,{ref:t,className:Fe("text-lg font-semibold leading-none tracking-tight",n),...e}));U1.displayName=F1.displayName;const cj=C.forwardRef(({className:n,...e},t)=>p.jsx(B1,{ref:t,className:Fe("text-sm text-muted-foreground",n),...e}));cj.displayName=B1.displayName;var uj="Label",H1=C.forwardRef((n,e)=>p.jsx(Ve.label,{...n,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(n.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));H1.displayName=uj;var W1=H1;const dj=qd("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),oi=C.forwardRef(({className:n,...e},t)=>p.jsx(W1,{ref:t,className:Fe(dj(),n),...e}));oi.displayName=W1.displayName;function Eb(n,[e,t]){return Math.min(t,Math.max(e,n))}function hj(n){const e=C.useRef({value:n,previous:n});return C.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var fj=[" ","Enter","ArrowUp","ArrowDown"],pj=[" ","Enter"],vc="Select",[mh,gh,mj]=ng(vc),[ka,_z]=Br(vc,[mj,Ta]),yh=Ta(),[gj,xi]=ka(vc),[yj,vj]=ka(vc),G1=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:s,onOpenChange:i,value:a,defaultValue:c,onValueChange:u,dir:h,name:f,autoComplete:g,disabled:y,required:w,form:S}=n,v=yh(e),[_,A]=C.useState(null),[E,k]=C.useState(null),[P,N]=C.useState(!1),R=zg(h),[M=!1,$]=qi({prop:r,defaultProp:s,onChange:i}),[G,F]=qi({prop:a,defaultProp:c,onChange:u}),V=C.useRef(null),X=_?S||!!_.closest("form"):!0,[Z,W]=C.useState(new Set),oe=Array.from(Z).map(K=>K.props.value).join(";");return p.jsx(z_,{...v,children:p.jsxs(gj,{required:w,scope:e,trigger:_,onTriggerChange:A,valueNode:E,onValueNodeChange:k,valueNodeHasChildren:P,onValueNodeHasChildrenChange:N,contentId:Ns(),value:G,onValueChange:F,open:M,onOpenChange:$,dir:R,triggerPointerDownPosRef:V,disabled:y,children:[p.jsx(mh.Provider,{scope:e,children:p.jsx(yj,{scope:n.__scopeSelect,onNativeOptionAdd:C.useCallback(K=>{W(z=>new Set(z).add(K))},[]),onNativeOptionRemove:C.useCallback(K=>{W(z=>{const O=new Set(z);return O.delete(K),O})},[]),children:t})}),X?p.jsxs(yA,{"aria-hidden":!0,required:w,tabIndex:-1,name:f,autoComplete:g,value:G,onChange:K=>F(K.target.value),disabled:y,form:S,children:[G===void 0?p.jsx("option",{value:""}):null,Array.from(Z)]},oe):null]})})};G1.displayName=vc;var q1="SelectTrigger",Y1=C.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...s}=n,i=yh(t),a=xi(q1,t),c=a.disabled||r,u=mt(e,a.onTriggerChange),h=gh(t),f=C.useRef("touch"),[g,y,w]=vA(v=>{const _=h().filter(k=>!k.disabled),A=_.find(k=>k.value===a.value),E=xA(_,v,A);E!==void 0&&a.onValueChange(E.value)}),S=v=>{c||(a.onOpenChange(!0),w()),v&&(a.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return p.jsx(Zd,{asChild:!0,...i,children:p.jsx(Ve.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":gA(a.value)?"":void 0,...s,ref:u,onClick:ke(s.onClick,v=>{v.currentTarget.focus(),f.current!=="mouse"&&S(v)}),onPointerDown:ke(s.onPointerDown,v=>{f.current=v.pointerType;const _=v.target;_.hasPointerCapture(v.pointerId)&&_.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(S(v),v.preventDefault())}),onKeyDown:ke(s.onKeyDown,v=>{const _=g.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&y(v.key),!(_&&v.key===" ")&&fj.includes(v.key)&&(S(),v.preventDefault())})})})});Y1.displayName=q1;var X1="SelectValue",K1=C.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,children:i,placeholder:a="",...c}=n,u=xi(X1,t),{onValueNodeHasChildrenChange:h}=u,f=i!==void 0,g=mt(e,u.onValueNodeChange);return en(()=>{h(f)},[h,f]),p.jsx(Ve.span,{...c,ref:g,style:{pointerEvents:"none"},children:gA(u.value)?p.jsx(p.Fragment,{children:a}):i})});K1.displayName=X1;var xj="SelectIcon",Q1=C.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...s}=n;return p.jsx(Ve.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});Q1.displayName=xj;var wj="SelectPortal",Z1=n=>p.jsx(lc,{asChild:!0,...n});Z1.displayName=wj;var Zi="SelectContent",J1=C.forwardRef((n,e)=>{const t=xi(Zi,n.__scopeSelect),[r,s]=C.useState();if(en(()=>{s(new DocumentFragment)},[]),!t.open){const i=r;return i?_a.createPortal(p.jsx(eA,{scope:n.__scopeSelect,children:p.jsx(mh.Slot,{scope:n.__scopeSelect,children:p.jsx("div",{children:n.children})})}),i):null}return p.jsx(tA,{...n,ref:e})});J1.displayName=Zi;var Er=10,[eA,wi]=ka(Zi),bj="SelectContentImpl",_j=Gi("SelectContent.RemoveScroll"),tA=C.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:c,sideOffset:u,align:h,alignOffset:f,arrowPadding:g,collisionBoundary:y,collisionPadding:w,sticky:S,hideWhenDetached:v,avoidCollisions:_,...A}=n,E=xi(Zi,t),[k,P]=C.useState(null),[N,R]=C.useState(null),M=mt(e,ie=>P(ie)),[$,G]=C.useState(null),[F,V]=C.useState(null),X=gh(t),[Z,W]=C.useState(!1),oe=C.useRef(!1);C.useEffect(()=>{if(k)return Wg(k)},[k]),Hg();const K=C.useCallback(ie=>{const[Ae,...$e]=X().map(ut=>ut.ref.current),[Ue]=$e.slice(-1),Je=document.activeElement;for(const ut of ie)if(ut===Je||(ut?.scrollIntoView({block:"nearest"}),ut===Ae&&N&&(N.scrollTop=0),ut===Ue&&N&&(N.scrollTop=N.scrollHeight),ut?.focus(),document.activeElement!==Je))return},[X,N]),z=C.useCallback(()=>K([$,k]),[K,$,k]);C.useEffect(()=>{Z&&z()},[Z,z]);const{onOpenChange:O,triggerPointerDownPosRef:ee}=E;C.useEffect(()=>{if(k){let ie={x:0,y:0};const Ae=Ue=>{ie={x:Math.abs(Math.round(Ue.pageX)-(ee.current?.x??0)),y:Math.abs(Math.round(Ue.pageY)-(ee.current?.y??0))}},$e=Ue=>{ie.x<=10&&ie.y<=10?Ue.preventDefault():k.contains(Ue.target)||O(!1),document.removeEventListener("pointermove",Ae),ee.current=null};return ee.current!==null&&(document.addEventListener("pointermove",Ae),document.addEventListener("pointerup",$e,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ae),document.removeEventListener("pointerup",$e,{capture:!0})}}},[k,O,ee]),C.useEffect(()=>{const ie=()=>O(!1);return window.addEventListener("blur",ie),window.addEventListener("resize",ie),()=>{window.removeEventListener("blur",ie),window.removeEventListener("resize",ie)}},[O]);const[te,L]=vA(ie=>{const Ae=X().filter(Je=>!Je.disabled),$e=Ae.find(Je=>Je.ref.current===document.activeElement),Ue=xA(Ae,ie,$e);Ue&&setTimeout(()=>Ue.ref.current.focus())}),Q=C.useCallback((ie,Ae,$e)=>{const Ue=!oe.current&&!$e;(E.value!==void 0&&E.value===Ae||Ue)&&(G(ie),Ue&&(oe.current=!0))},[E.value]),fe=C.useCallback(()=>k?.focus(),[k]),Te=C.useCallback((ie,Ae,$e)=>{const Ue=!oe.current&&!$e;(E.value!==void 0&&E.value===Ae||Ue)&&V(ie)},[E.value]),De=r==="popper"?jm:nA,Me=De===jm?{side:c,sideOffset:u,align:h,alignOffset:f,arrowPadding:g,collisionBoundary:y,collisionPadding:w,sticky:S,hideWhenDetached:v,avoidCollisions:_}:{};return p.jsx(eA,{scope:t,content:k,viewport:N,onViewportChange:R,itemRefCallback:Q,selectedItem:$,onItemLeave:fe,itemTextRefCallback:Te,focusSelectedItem:z,selectedItemText:F,position:r,isPositioned:Z,searchRef:te,children:p.jsx(ph,{as:_j,allowPinchZoom:!0,children:p.jsx(hh,{asChild:!0,trapped:E.open,onMountAutoFocus:ie=>{ie.preventDefault()},onUnmountAutoFocus:ke(s,ie=>{E.trigger?.focus({preventScroll:!0}),ie.preventDefault()}),children:p.jsx(Sa,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:ie=>ie.preventDefault(),onDismiss:()=>E.onOpenChange(!1),children:p.jsx(De,{role:"listbox",id:E.contentId,"data-state":E.open?"open":"closed",dir:E.dir,onContextMenu:ie=>ie.preventDefault(),...A,...Me,onPlaced:()=>W(!0),ref:M,style:{display:"flex",flexDirection:"column",outline:"none",...A.style},onKeyDown:ke(A.onKeyDown,ie=>{const Ae=ie.ctrlKey||ie.altKey||ie.metaKey;if(ie.key==="Tab"&&ie.preventDefault(),!Ae&&ie.key.length===1&&L(ie.key),["ArrowUp","ArrowDown","Home","End"].includes(ie.key)){let Ue=X().filter(Je=>!Je.disabled).map(Je=>Je.ref.current);if(["ArrowUp","End"].includes(ie.key)&&(Ue=Ue.slice().reverse()),["ArrowUp","ArrowDown"].includes(ie.key)){const Je=ie.target,ut=Ue.indexOf(Je);Ue=Ue.slice(ut+1)}setTimeout(()=>K(Ue)),ie.preventDefault()}})})})})})})});tA.displayName=bj;var Sj="SelectItemAlignedPosition",nA=C.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...s}=n,i=xi(Zi,t),a=wi(Zi,t),[c,u]=C.useState(null),[h,f]=C.useState(null),g=mt(e,M=>f(M)),y=gh(t),w=C.useRef(!1),S=C.useRef(!0),{viewport:v,selectedItem:_,selectedItemText:A,focusSelectedItem:E}=a,k=C.useCallback(()=>{if(i.trigger&&i.valueNode&&c&&h&&v&&_&&A){const M=i.trigger.getBoundingClientRect(),$=h.getBoundingClientRect(),G=i.valueNode.getBoundingClientRect(),F=A.getBoundingClientRect();if(i.dir!=="rtl"){const Je=F.left-$.left,ut=G.left-Je,Mt=M.left-ut,gn=M.width+Mt,js=Math.max(gn,$.width),hs=window.innerWidth-Er,zr=Eb(ut,[Er,Math.max(Er,hs-js)]);c.style.minWidth=gn+"px",c.style.left=zr+"px"}else{const Je=$.right-F.right,ut=window.innerWidth-G.right-Je,Mt=window.innerWidth-M.right-ut,gn=M.width+Mt,js=Math.max(gn,$.width),hs=window.innerWidth-Er,zr=Eb(ut,[Er,Math.max(Er,hs-js)]);c.style.minWidth=gn+"px",c.style.right=zr+"px"}const V=y(),X=window.innerHeight-Er*2,Z=v.scrollHeight,W=window.getComputedStyle(h),oe=parseInt(W.borderTopWidth,10),K=parseInt(W.paddingTop,10),z=parseInt(W.borderBottomWidth,10),O=parseInt(W.paddingBottom,10),ee=oe+K+Z+O+z,te=Math.min(_.offsetHeight*5,ee),L=window.getComputedStyle(v),Q=parseInt(L.paddingTop,10),fe=parseInt(L.paddingBottom,10),Te=M.top+M.height/2-Er,De=X-Te,Me=_.offsetHeight/2,ie=_.offsetTop+Me,Ae=oe+K+ie,$e=ee-Ae;if(Ae<=Te){const Je=V.length>0&&_===V[V.length-1].ref.current;c.style.bottom="0px";const ut=h.clientHeight-v.offsetTop-v.offsetHeight,Mt=Math.max(De,Me+(Je?fe:0)+ut+z),gn=Ae+Mt;c.style.height=gn+"px"}else{const Je=V.length>0&&_===V[0].ref.current;c.style.top="0px";const Mt=Math.max(Te,oe+v.offsetTop+(Je?Q:0)+Me)+$e;c.style.height=Mt+"px",v.scrollTop=Ae-Te+v.offsetTop}c.style.margin=`${Er}px 0`,c.style.minHeight=te+"px",c.style.maxHeight=X+"px",r?.(),requestAnimationFrame(()=>w.current=!0)}},[y,i.trigger,i.valueNode,c,h,v,_,A,i.dir,r]);en(()=>k(),[k]);const[P,N]=C.useState();en(()=>{h&&N(window.getComputedStyle(h).zIndex)},[h]);const R=C.useCallback(M=>{M&&S.current===!0&&(k(),E?.(),S.current=!1)},[k,E]);return p.jsx(Cj,{scope:t,contentWrapper:c,shouldExpandOnScrollRef:w,onScrollButtonChange:R,children:p.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:P},children:p.jsx(Ve.div,{...s,ref:g,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});nA.displayName=Sj;var Aj="SelectPopperPosition",jm=C.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:s=Er,...i}=n,a=yh(t);return p.jsx(gg,{...a,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});jm.displayName=Aj;var[Cj,Kg]=ka(Zi,{}),Om="SelectViewport",rA=C.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...s}=n,i=wi(Om,t),a=Kg(Om,t),c=mt(e,i.onViewportChange),u=C.useRef(0);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),p.jsx(mh.Slot,{scope:t,children:p.jsx(Ve.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ke(s.onScroll,h=>{const f=h.currentTarget,{contentWrapper:g,shouldExpandOnScrollRef:y}=a;if(y?.current&&g){const w=Math.abs(u.current-f.scrollTop);if(w>0){const S=window.innerHeight-Er*2,v=parseFloat(g.style.minHeight),_=parseFloat(g.style.height),A=Math.max(v,_);if(A<S){const E=A+w,k=Math.min(S,E),P=E-k;g.style.height=k+"px",g.style.bottom==="0px"&&(f.scrollTop=P>0?P:0,g.style.justifyContent="flex-end")}}}u.current=f.scrollTop})})})]})});rA.displayName=Om;var sA="SelectGroup",[Ej,Tj]=ka(sA),kj=C.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=Ns();return p.jsx(Ej,{scope:t,id:s,children:p.jsx(Ve.div,{role:"group","aria-labelledby":s,...r,ref:e})})});kj.displayName=sA;var iA="SelectLabel",oA=C.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=Tj(iA,t);return p.jsx(Ve.div,{id:s.id,...r,ref:e})});oA.displayName=iA;var Ad="SelectItem",[Pj,aA]=ka(Ad),lA=C.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:s=!1,textValue:i,...a}=n,c=xi(Ad,t),u=wi(Ad,t),h=c.value===r,[f,g]=C.useState(i??""),[y,w]=C.useState(!1),S=mt(e,E=>u.itemRefCallback?.(E,r,s)),v=Ns(),_=C.useRef("touch"),A=()=>{s||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return p.jsx(Pj,{scope:t,value:r,disabled:s,textId:v,isSelected:h,onItemTextChange:C.useCallback(E=>{g(k=>k||(E?.textContent??"").trim())},[]),children:p.jsx(mh.ItemSlot,{scope:t,value:r,disabled:s,textValue:f,children:p.jsx(Ve.div,{role:"option","aria-labelledby":v,"data-highlighted":y?"":void 0,"aria-selected":h&&y,"data-state":h?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:S,onFocus:ke(a.onFocus,()=>w(!0)),onBlur:ke(a.onBlur,()=>w(!1)),onClick:ke(a.onClick,()=>{_.current!=="mouse"&&A()}),onPointerUp:ke(a.onPointerUp,()=>{_.current==="mouse"&&A()}),onPointerDown:ke(a.onPointerDown,E=>{_.current=E.pointerType}),onPointerMove:ke(a.onPointerMove,E=>{_.current=E.pointerType,s?u.onItemLeave?.():_.current==="mouse"&&E.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ke(a.onPointerLeave,E=>{E.currentTarget===document.activeElement&&u.onItemLeave?.()}),onKeyDown:ke(a.onKeyDown,E=>{u.searchRef?.current!==""&&E.key===" "||(pj.includes(E.key)&&A(),E.key===" "&&E.preventDefault())})})})})});lA.displayName=Ad;var kl="SelectItemText",cA=C.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,...i}=n,a=xi(kl,t),c=wi(kl,t),u=aA(kl,t),h=vj(kl,t),[f,g]=C.useState(null),y=mt(e,A=>g(A),u.onItemTextChange,A=>c.itemTextRefCallback?.(A,u.value,u.disabled)),w=f?.textContent,S=C.useMemo(()=>p.jsx("option",{value:u.value,disabled:u.disabled,children:w},u.value),[u.disabled,u.value,w]),{onNativeOptionAdd:v,onNativeOptionRemove:_}=h;return en(()=>(v(S),()=>_(S)),[v,_,S]),p.jsxs(p.Fragment,{children:[p.jsx(Ve.span,{id:u.textId,...i,ref:y}),u.isSelected&&a.valueNode&&!a.valueNodeHasChildren?_a.createPortal(i.children,a.valueNode):null]})});cA.displayName=kl;var uA="SelectItemIndicator",dA=C.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return aA(uA,t).isSelected?p.jsx(Ve.span,{"aria-hidden":!0,...r,ref:e}):null});dA.displayName=uA;var Lm="SelectScrollUpButton",hA=C.forwardRef((n,e)=>{const t=wi(Lm,n.__scopeSelect),r=Kg(Lm,n.__scopeSelect),[s,i]=C.useState(!1),a=mt(e,r.onScrollButtonChange);return en(()=>{if(t.viewport&&t.isPositioned){let c=function(){const h=u.scrollTop>0;i(h)};const u=t.viewport;return c(),u.addEventListener("scroll",c),()=>u.removeEventListener("scroll",c)}},[t.viewport,t.isPositioned]),s?p.jsx(pA,{...n,ref:a,onAutoScroll:()=>{const{viewport:c,selectedItem:u}=t;c&&u&&(c.scrollTop=c.scrollTop-u.offsetHeight)}}):null});hA.displayName=Lm;var Fm="SelectScrollDownButton",fA=C.forwardRef((n,e)=>{const t=wi(Fm,n.__scopeSelect),r=Kg(Fm,n.__scopeSelect),[s,i]=C.useState(!1),a=mt(e,r.onScrollButtonChange);return en(()=>{if(t.viewport&&t.isPositioned){let c=function(){const h=u.scrollHeight-u.clientHeight,f=Math.ceil(u.scrollTop)<h;i(f)};const u=t.viewport;return c(),u.addEventListener("scroll",c),()=>u.removeEventListener("scroll",c)}},[t.viewport,t.isPositioned]),s?p.jsx(pA,{...n,ref:a,onAutoScroll:()=>{const{viewport:c,selectedItem:u}=t;c&&u&&(c.scrollTop=c.scrollTop+u.offsetHeight)}}):null});fA.displayName=Fm;var pA=C.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...s}=n,i=wi("SelectScrollButton",t),a=C.useRef(null),c=gh(t),u=C.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return C.useEffect(()=>()=>u(),[u]),en(()=>{c().find(f=>f.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[c]),p.jsx(Ve.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:ke(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:ke(s.onPointerMove,()=>{i.onItemLeave?.(),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:ke(s.onPointerLeave,()=>{u()})})}),Nj="SelectSeparator",mA=C.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return p.jsx(Ve.div,{"aria-hidden":!0,...r,ref:e})});mA.displayName=Nj;var Bm="SelectArrow",Rj=C.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=yh(t),i=xi(Bm,t),a=wi(Bm,t);return i.open&&a.position==="popper"?p.jsx(yg,{...s,...r,ref:e}):null});Rj.displayName=Bm;function gA(n){return n===""||n===void 0}var yA=C.forwardRef((n,e)=>{const{value:t,...r}=n,s=C.useRef(null),i=mt(e,s),a=hj(t);return C.useEffect(()=>{const c=s.current,u=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(a!==t&&f){const g=new Event("change",{bubbles:!0});f.call(c,t),c.dispatchEvent(g)}},[a,t]),p.jsx(cc,{asChild:!0,children:p.jsx("select",{...r,ref:i,defaultValue:t})})});yA.displayName="BubbleSelect";function vA(n){const e=Mn(n),t=C.useRef(""),r=C.useRef(0),s=C.useCallback(a=>{const c=t.current+a;e(c),function u(h){t.current=h,window.clearTimeout(r.current),h!==""&&(r.current=window.setTimeout(()=>u(""),1e3))}(c)},[e]),i=C.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return C.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,s,i]}function xA(n,e,t){const s=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let a=Dj(n,Math.max(i,0));s.length===1&&(a=a.filter(h=>h!==t));const u=a.find(h=>h.textValue.toLowerCase().startsWith(s.toLowerCase()));return u!==t?u:void 0}function Dj(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var Mj=G1,wA=Y1,Ij=K1,jj=Q1,Oj=Z1,bA=J1,Lj=rA,_A=oA,SA=lA,Fj=cA,Bj=dA,AA=hA,CA=fA,EA=mA;const Cd=Mj,Ed=Ij,Hl=C.forwardRef(({className:n,children:e,...t},r)=>p.jsxs(wA,{ref:r,className:Fe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,p.jsx(jj,{asChild:!0,children:p.jsx(a_,{className:"h-4 w-4 opacity-50"})})]}));Hl.displayName=wA.displayName;const TA=C.forwardRef(({className:n,...e},t)=>p.jsx(AA,{ref:t,className:Fe("flex cursor-default items-center justify-center py-1",n),...e,children:p.jsx(oN,{className:"h-4 w-4"})}));TA.displayName=AA.displayName;const kA=C.forwardRef(({className:n,...e},t)=>p.jsx(CA,{ref:t,className:Fe("flex cursor-default items-center justify-center py-1",n),...e,children:p.jsx(a_,{className:"h-4 w-4"})}));kA.displayName=CA.displayName;const Wl=C.forwardRef(({className:n,children:e,position:t="popper",...r},s)=>p.jsx(Oj,{children:p.jsxs(bA,{ref:s,className:Fe("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[p.jsx(TA,{}),p.jsx(Lj,{className:Fe("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),p.jsx(kA,{})]})}));Wl.displayName=bA.displayName;const $j=C.forwardRef(({className:n,...e},t)=>p.jsx(_A,{ref:t,className:Fe("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));$j.displayName=_A.displayName;const yr=C.forwardRef(({className:n,children:e,...t},r)=>p.jsxs(SA,{ref:r,className:Fe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(Bj,{children:p.jsx(rN,{className:"h-4 w-4"})})}),p.jsx(Fj,{children:e})]}));yr.displayName=SA.displayName;const zj=C.forwardRef(({className:n,...e},t)=>p.jsx(EA,{ref:t,className:Fe("-mx-1 my-1 h-px bg-muted",n),...e}));zj.displayName=EA.displayName;const PA=C.forwardRef(({className:n,...e},t)=>p.jsx("textarea",{className:Fe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t,...e}));PA.displayName="Textarea";Vi.workerSrc=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${Ig}/pdf.worker.min.js`;async function Vj(n){try{const e=await n.arrayBuffer(),t=await Dg({data:e}).promise;let r="";for(let s=1;s<=t.numPages;s++){const c=(await(await t.getPage(s)).getTextContent()).items.map(u=>u.str||"").filter(u=>u.trim().length>0).join(" ");r+=c+`
`}return r.trim()}catch(e){return console.error("Error extracting PDF text:",e),`[PDF text extraction failed: ${e instanceof Error?e.message:"Unknown error"}]`}}function Uj(){const[n,e]=C.useState(""),[t,r]=C.useState("all"),[s,i]=C.useState(!1),[a,c]=C.useState({title:"",content:"",category:"",fileType:"",tags:[]}),[u,h]=C.useState(""),[f,g]=C.useState(null),[y,w]=C.useState(null),S=ba(),{toast:v}=Hd(),{data:_=[]}=tr({queryKey:["/api/documents"],queryFn:async()=>{const F=new URLSearchParams;n&&F.append("search",n),t!=="all"&&F.append("category",t);const V=`/api/documents${F.toString()?"?"+F.toString():""}`,X=await fetch(V);if(!X.ok)throw new Error("Failed to fetch documents");return X.json()}}),A=Ol({mutationFn:async F=>{let V=F.content;if(F.file)if(F.file.name.toLowerCase().endsWith(".pdf"))try{console.log("Extracting PDF text client-side..."),V=await Vj(F.file),console.log(`Extracted ${V.length} characters from PDF`)}catch(W){console.error("PDF extraction failed:",W),V=`[PDF Document - File size: ${(F.file.size/1024/1024).toFixed(1)} MB]
[Client-side text extraction failed: ${W instanceof Error?W.message:"Unknown error"}]
[Document uploaded but content may not be fully searchable]`}else V=`[${F.fileType.toUpperCase()} Document]
File: ${F.file.name}
Size: ${(F.file.size/1024).toFixed(1)} KB

[Content extraction not implemented for this file type in client-side processing]`;return(await ca("POST","/api/documents",{title:F.title,content:V,fileType:F.fileType.toUpperCase(),category:F.category,tags:F.tags})).json()},onSuccess:()=>{S.invalidateQueries({queryKey:["/api/documents"]}),v({title:"Document uploaded successfully",description:"Your document has been added to the knowledge base."}),i(!1),c({title:"",content:"",category:"",fileType:"",tags:[]}),g(null)},onError:()=>{v({title:"Failed to upload document",description:"Please check your input and try again.",variant:"destructive"})}}),E=Ol({mutationFn:async()=>ca("POST","/api/train-model",{}),onSuccess:()=>{v({title:"Model training initiated",description:"The AI assistant is now learning from the latest documents in the knowledge base."})},onError:()=>{v({title:"Training failed",description:"There was an error initiating model training. Please try again.",variant:"destructive"})}}),k=()=>{u.trim()&&!a.tags.includes(u.trim())&&(c(F=>({...F,tags:[...F.tags,u.trim()]})),h(""))},P=F=>{c(V=>({...V,tags:V.tags.filter(X=>X!==F)}))},N=F=>{const V=F.target.files?.[0];if(!V)return;if(V.size>10*1024*1024){v({title:"File too large",description:"Maximum file size is 10MB.",variant:"destructive"});return}if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(V.type)){v({title:"Unsupported file type",description:"Supported formats: PDF, DOC, DOCX, TXT, CSV, XLS, XLSX",variant:"destructive"});return}g(V),a.title||c(oe=>({...oe,title:V.name.replace(/\.[^/.]+$/,"")}));const Z=V.name.toLowerCase().split(".").pop();let W="text";switch(Z){case"pdf":W="pdf";break;case"doc":case"docx":W="doc";break;case"xls":case"xlsx":W="spreadsheet";break;default:W="text"}a.fileType||c(oe=>({...oe,fileType:W}))},R=async()=>{if(!a.title||!a.category||!a.fileType){v({title:"Missing required fields",description:"Please fill in title, category, and file type.",variant:"destructive"});return}if(!f&&!a.content.trim()){v({title:"Missing content",description:"Please either upload a file or enter content manually.",variant:"destructive"});return}const F={title:a.title,content:a.content,category:a.category,fileType:a.fileType,tags:a.tags,file:f||void 0};A.mutate(F)},M=(F,V)=>{V.preventDefault(),V.stopPropagation(),w(F)},$=async F=>{try{const V=await fetch(`/api/documents/${F.id}/download`);if(!V.ok){const oe=await V.json();v({title:oe.error||"Download not available",description:oe.message||"This file cannot be downloaded at this time."});return}const X=await V.blob(),Z=window.URL.createObjectURL(X),W=window.document.createElement("a");W.href=Z,W.download=`${F.title}.txt`,window.document.body.appendChild(W),W.click(),window.URL.revokeObjectURL(Z),window.document.body.removeChild(W),v({title:"Download started",description:`${F.title} is being downloaded.`})}catch{v({title:"Download failed",description:"There was an error downloading the document.",variant:"destructive"})}},G=[{id:"all",name:"All Documents",count:_.length},{id:"policies",name:"Policies",count:_.filter(F=>F.category==="policies").length},{id:"projects",name:"Projects",count:_.filter(F=>F.category==="projects").length},{id:"training",name:"Training",count:_.filter(F=>F.category==="training").length}];return p.jsxs("div",{className:"flex flex-col h-full",children:[p.jsx("header",{className:"bg-card border-b border-border px-6 py-4",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Knowledge Base"}),p.jsx("p",{className:"text-muted-foreground",children:"Search and manage your company's knowledge repository"})]}),p.jsxs("div",{className:"flex space-x-3",children:[p.jsxs(lt,{onClick:()=>E.mutate(),disabled:E.isPending,variant:"outline","data-testid":"button-train-model",children:[p.jsx(fd,{className:"h-4 w-4 mr-2"}),E.isPending?"Training...":"Train Model"]}),p.jsxs(oj,{open:s,onOpenChange:i,children:[p.jsx(aj,{asChild:!0,children:p.jsxs(lt,{"data-testid":"button-upload-document",children:[p.jsx(Ll,{className:"h-4 w-4 mr-2"}),"Upload Document"]})}),p.jsxs(z1,{className:"max-w-2xl",children:[p.jsx(V1,{children:p.jsx(U1,{children:"Upload New Document"})}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx(oi,{htmlFor:"title",children:"Title *"}),p.jsx(rs,{id:"title",placeholder:"Document title",value:a.title,onChange:F=>c(V=>({...V,title:F.target.value})),"data-testid":"input-document-title"})]}),p.jsxs("div",{children:[p.jsx(oi,{htmlFor:"category",children:"Category *"}),p.jsxs(Cd,{value:a.category,onValueChange:F=>c(V=>({...V,category:F})),children:[p.jsx(Hl,{"data-testid":"select-document-category",children:p.jsx(Ed,{placeholder:"Select category"})}),p.jsxs(Wl,{children:[p.jsx(yr,{value:"policies",children:"Policies"}),p.jsx(yr,{value:"projects",children:"Projects"}),p.jsx(yr,{value:"training",children:"Training"})]})]})]})]}),p.jsxs("div",{children:[p.jsx(oi,{htmlFor:"fileType",children:"File Type *"}),p.jsxs(Cd,{value:a.fileType,onValueChange:F=>c(V=>({...V,fileType:F})),children:[p.jsx(Hl,{"data-testid":"select-file-type",children:p.jsx(Ed,{placeholder:"Select file type"})}),p.jsxs(Wl,{children:[p.jsx(yr,{value:"pdf",children:"PDF"}),p.jsx(yr,{value:"doc",children:"Document"}),p.jsx(yr,{value:"presentation",children:"Presentation"}),p.jsx(yr,{value:"spreadsheet",children:"Spreadsheet"}),p.jsx(yr,{value:"text",children:"Text"})]})]})]}),p.jsxs("div",{children:[p.jsx(oi,{htmlFor:"file",children:"Upload File (Optional)"}),p.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-4 text-center",children:[p.jsx("input",{id:"file",type:"file",onChange:N,accept:".pdf,.doc,.docx,.txt,.csv,.xls,.xlsx",className:"hidden","data-testid":"input-file-upload"}),p.jsxs(lt,{type:"button",variant:"outline",onClick:()=>document.getElementById("file")?.click(),"data-testid":"button-choose-file",children:[p.jsx(Ll,{className:"h-4 w-4 mr-2"}),"Choose File"]}),f&&p.jsxs("div",{className:"mt-2 text-sm text-foreground",children:[p.jsx("p",{className:"font-medium",children:f.name}),p.jsxs("p",{className:"text-muted-foreground",children:[(f.size/1024).toFixed(1)," KB"]})]}),p.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Supports: PDF, DOC, DOCX, TXT, CSV, XLS, XLSX (max 10MB)"})]})]}),p.jsxs("div",{children:[p.jsxs(oi,{htmlFor:"content",children:["Content ",!f&&"*"]}),p.jsx(PA,{id:"content",placeholder:f?"File content will be automatically extracted...":"Enter the document content or description...",value:a.content,onChange:F=>c(V=>({...V,content:F.target.value})),className:"min-h-[120px]",disabled:!!f,"data-testid":"textarea-document-content"})]}),p.jsxs("div",{children:[p.jsx(oi,{htmlFor:"tags",children:"Tags"}),p.jsxs("div",{className:"flex space-x-2",children:[p.jsx(rs,{id:"tags",placeholder:"Add a tag",value:u,onChange:F=>h(F.target.value),onKeyPress:F=>F.key==="Enter"&&(F.preventDefault(),k()),"data-testid":"input-add-tag"}),p.jsx(lt,{type:"button",onClick:k,variant:"outline",children:"Add"})]}),a.tags.length>0&&p.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:a.tags.map(F=>p.jsxs(on,{variant:"secondary",className:"flex items-center space-x-1",children:[p.jsx("span",{children:F}),p.jsx(Yd,{className:"h-3 w-3 cursor-pointer",onClick:()=>P(F)})]},F))})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[p.jsx(lt,{variant:"outline",onClick:()=>i(!1),"data-testid":"button-cancel-upload",children:"Cancel"}),p.jsx(lt,{onClick:R,disabled:A.isPending,"data-testid":"button-submit-upload",children:A.isPending?f?.name.toLowerCase().endsWith(".pdf")?"Extracting PDF text...":"Uploading...":"Upload Document"})]})]})]})]})]})]})}),p.jsx("div",{className:"flex-1 overflow-auto p-6",children:p.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[p.jsx(ct,{children:p.jsx(at,{className:"pt-6",children:p.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[p.jsxs("div",{className:"relative flex-1",children:[p.jsx(pm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),p.jsx(rs,{"data-testid":"input-search-documents",type:"search",placeholder:"Search documents, policies, procedures...",value:n,onChange:F=>e(F.target.value),className:"pl-10"})]}),p.jsxs(lt,{variant:"outline","data-testid":"button-filter",children:[p.jsx(dN,{className:"h-4 w-4 mr-2"}),"Filter"]})]})})}),p.jsxs(e2,{value:t,onValueChange:r,children:[p.jsx(l1,{className:"grid w-full grid-cols-4",children:G.map(F=>p.jsxs(c1,{value:F.id,"data-testid":`tab-${F.id}`,className:"flex items-center space-x-2",children:[p.jsx("span",{children:F.name}),p.jsx(on,{variant:"secondary",className:"ml-2",children:F.count})]},F.id))}),G.map(F=>p.jsxs(u1,{value:F.id,className:"mt-6",children:[p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.filter(V=>F.id==="all"||V.category===F.id).map(V=>p.jsxs(ct,{"data-testid":`document-${V.id}`,className:"hover:shadow-md transition-shadow cursor-pointer",onClick:X=>M(V,X),children:[p.jsx(vt,{className:"pb-3",children:p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Nn,{className:"h-5 w-5 text-primary"}),p.jsx(on,{variant:"outline",children:V.fileType})]}),p.jsx(on,{variant:"secondary",children:V.category})]})}),p.jsxs(at,{children:[p.jsx(xt,{className:"text-lg mb-2",children:V.title}),p.jsxs("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-3",children:[V.content.substring(0,150),"..."]}),p.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[p.jsxs("span",{children:["Updated ",new Date(V.updatedAt||"").toLocaleDateString()]}),p.jsx("div",{className:"flex space-x-1",children:V.tags?.slice(0,2).map(X=>p.jsx(on,{variant:"outline",className:"text-xs",children:X},X))})]})]})]},V.id))}),_.filter(V=>F.id==="all"||V.category===F.id).length===0&&p.jsxs("div",{className:"text-center py-12",children:[p.jsx(Nn,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),p.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No documents found"}),p.jsx("p",{className:"text-muted-foreground",children:n?"Try adjusting your search terms":"Upload your first document to get started"})]})]},F.id))]})]})}),y&&p.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>w(null),children:p.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg max-w-6xl max-h-[90vh] w-full mx-4 overflow-hidden flex flex-col",onClick:F=>F.stopPropagation(),children:[p.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Nn,{className:"h-5 w-5"}),p.jsx("span",{className:"font-semibold text-lg",children:y?.title})]}),p.jsx(lt,{variant:"ghost",size:"sm",onClick:()=>w(null),"data-testid":"button-close-document",children:""})]}),y&&p.jsxs("div",{className:"flex-1 overflow-auto space-y-4 p-6",children:[p.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground border-b pb-3",children:[p.jsx(on,{variant:"outline",children:y.fileType}),p.jsx(on,{variant:"secondary",children:y.category}),p.jsxs("span",{children:["Updated: ",new Date(y.updatedAt||"").toLocaleDateString()]})]}),y.tags&&y.tags.length>0&&p.jsx("div",{className:"flex flex-wrap gap-2",children:y.tags.map(F=>p.jsx(on,{variant:"outline",className:"text-xs",children:F},F))}),p.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[p.jsx("h4",{className:"font-medium mb-2",children:"Content"}),y.content.includes("Content will be processed when viewing this document")?p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-center space-x-2 text-blue-600 dark:text-blue-400",children:[p.jsx(Nn,{className:"h-5 w-5"}),p.jsx("span",{className:"font-medium",children:"Uploaded PDF Document"})]}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"This is an uploaded PDF file. The document contains:"}),p.jsx("div",{className:"bg-white dark:bg-gray-800 p-3 rounded border-l-4 border-blue-500",children:p.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[p.jsxs("div",{children:[p.jsx("strong",{children:"File:"})," ",y.title]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Type:"})," PDF Document"]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Size:"})," 97.8 KB"]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Category:"})," ",y.category]})]})}),p.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded border border-blue-200 dark:border-blue-800 mb-4",children:[p.jsx("h5",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:" PDF Document Viewer"}),p.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"File:"})," ",y.title,".pdf"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Size:"})," 97.8 KB  ",p.jsx("strong",{children:"Category:"})," ",y.category]})]})]}),p.jsx("div",{className:"border rounded-lg overflow-hidden bg-gray-50 dark:bg-gray-800",children:p.jsx("iframe",{src:`/api/documents/${y.id}/download`,className:"w-full h-96",title:`PDF Viewer - ${y.title}`,style:{minHeight:"400px"}})})]}):p.jsxs("div",{className:"space-y-3",children:[p.jsx("div",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:y.content}),p.jsx("div",{className:"flex justify-end",children:p.jsxs(lt,{variant:"outline",size:"sm",onClick:()=>$(y),children:[p.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Download as Text"]})})]})]})]}),p.jsx("div",{className:"flex justify-end p-6 border-t",children:p.jsx(lt,{variant:"outline",onClick:()=>w(null),"data-testid":"button-close-document-footer",children:"Close"})})]})})]})}var xc=n=>n.type==="checkbox",Li=n=>n instanceof Date,kn=n=>n==null;const NA=n=>typeof n=="object";var Vt=n=>!kn(n)&&!Array.isArray(n)&&NA(n)&&!Li(n),RA=n=>Vt(n)&&n.target?xc(n.target)?n.target.checked:n.target.value:n,Hj=n=>n.substring(0,n.search(/\.\d+(\.|$)/))||n,DA=(n,e)=>n.has(Hj(e)),Wj=n=>{const e=n.constructor&&n.constructor.prototype;return Vt(e)&&e.hasOwnProperty("isPrototypeOf")},Qg=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function hn(n){let e;const t=Array.isArray(n),r=typeof FileList<"u"?n instanceof FileList:!1;if(n instanceof Date)e=new Date(n);else if(n instanceof Set)e=new Set(n);else if(!(Qg&&(n instanceof Blob||r))&&(t||Vt(n)))if(e=t?[]:{},!t&&!Wj(n))e=n;else for(const s in n)n.hasOwnProperty(s)&&(e[s]=hn(n[s]));else return n;return e}var vh=n=>Array.isArray(n)?n.filter(Boolean):[],zt=n=>n===void 0,he=(n,e,t)=>{if(!e||!Vt(n))return t;const r=vh(e.split(/[,[\].]+?/)).reduce((s,i)=>kn(s)?s:s[i],n);return zt(r)||r===n?zt(n[e])?t:n[e]:r},Zn=n=>typeof n=="boolean",Zg=n=>/^\w*$/.test(n),MA=n=>vh(n.replace(/["|']|\]/g,"").split(/\.|\[/)),dt=(n,e,t)=>{let r=-1;const s=Zg(e)?[e]:MA(e),i=s.length,a=i-1;for(;++r<i;){const c=s[r];let u=t;if(r!==a){const h=n[c];u=Vt(h)||Array.isArray(h)?h:isNaN(+s[r+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;n[c]=u,n=n[c]}};const Td={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Nr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ss={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},IA=We.createContext(null),xh=()=>We.useContext(IA),Gj=n=>{const{children:e,...t}=n;return We.createElement(IA.Provider,{value:t},e)};var jA=(n,e,t,r=!0)=>{const s={defaultValues:e._defaultValues};for(const i in n)Object.defineProperty(s,i,{get:()=>{const a=i;return e._proxyFormState[a]!==Nr.all&&(e._proxyFormState[a]=!r||Nr.all),t&&(t[a]=!0),n[a]}});return s};function qj(n){const e=xh(),{control:t=e.control,disabled:r,name:s,exact:i}=n||{},[a,c]=We.useState(t._formState),u=We.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),h=We.useRef(s);return h.current=s,We.useEffect(()=>t._subscribe({name:h.current,formState:u.current,exact:i,callback:f=>{!r&&c({...t._formState,...f})}}),[t,r,i]),We.useEffect(()=>{u.current.isValid&&t._setValid(!0)},[t]),We.useMemo(()=>jA(a,t,u.current,!1),[a,t])}var es=n=>typeof n=="string",OA=(n,e,t,r,s)=>es(n)?(r&&e.watch.add(n),he(t,n,s)):Array.isArray(n)?n.map(i=>(r&&e.watch.add(i),he(t,i))):(r&&(e.watchAll=!0),t);function Yj(n){const e=xh(),{control:t=e.control,name:r,defaultValue:s,disabled:i,exact:a}=n||{},c=We.useRef(r),u=We.useRef(s);c.current=r,We.useEffect(()=>t._subscribe({name:c.current,formState:{values:!0},exact:a,callback:g=>!i&&f(OA(c.current,t._names,g.values||t._formValues,!1,u.current))}),[t,i,a]);const[h,f]=We.useState(t._getWatch(r,s));return We.useEffect(()=>t._removeUnmounted()),h}function Xj(n){const e=xh(),{name:t,disabled:r,control:s=e.control,shouldUnregister:i}=n,a=DA(s._names.array,t),c=Yj({control:s,name:t,defaultValue:he(s._formValues,t,he(s._defaultValues,t,n.defaultValue)),exact:!0}),u=qj({control:s,name:t,exact:!0}),h=We.useRef(n),f=We.useRef(s.register(t,{...n.rules,value:c,...Zn(n.disabled)?{disabled:n.disabled}:{}})),g=We.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!he(u.errors,t)},isDirty:{enumerable:!0,get:()=>!!he(u.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!he(u.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!he(u.validatingFields,t)},error:{enumerable:!0,get:()=>he(u.errors,t)}}),[u,t]),y=We.useCallback(_=>f.current.onChange({target:{value:RA(_),name:t},type:Td.CHANGE}),[t]),w=We.useCallback(()=>f.current.onBlur({target:{value:he(s._formValues,t),name:t},type:Td.BLUR}),[t,s._formValues]),S=We.useCallback(_=>{const A=he(s._fields,t);A&&_&&(A._f.ref={focus:()=>_.focus(),select:()=>_.select(),setCustomValidity:E=>_.setCustomValidity(E),reportValidity:()=>_.reportValidity()})},[s._fields,t]),v=We.useMemo(()=>({name:t,value:c,...Zn(r)||u.disabled?{disabled:u.disabled||r}:{},onChange:y,onBlur:w,ref:S}),[t,r,u.disabled,y,w,S,c]);return We.useEffect(()=>{const _=s._options.shouldUnregister||i;s.register(t,{...h.current.rules,...Zn(h.current.disabled)?{disabled:h.current.disabled}:{}});const A=(E,k)=>{const P=he(s._fields,E);P&&P._f&&(P._f.mount=k)};if(A(t,!0),_){const E=hn(he(s._options.defaultValues,t));dt(s._defaultValues,t,E),zt(he(s._formValues,t))&&dt(s._formValues,t,E)}return!a&&s.register(t),()=>{(a?_&&!s._state.action:_)?s.unregister(t):A(t,!1)}},[t,s,a,i]),We.useEffect(()=>{s._setDisabledField({disabled:r,name:t})},[r,t,s]),We.useMemo(()=>({field:v,formState:u,fieldState:g}),[v,u,g])}const Kj=n=>n.render(Xj(n));var LA=(n,e,t,r,s)=>e?{...t[n],types:{...t[n]&&t[n].types?t[n].types:{},[r]:s||!0}}:{},Ml=n=>Array.isArray(n)?n:[n],Tb=()=>{let n=[];return{get observers(){return n},next:s=>{for(const i of n)i.next&&i.next(s)},subscribe:s=>(n.push(s),{unsubscribe:()=>{n=n.filter(i=>i!==s)}}),unsubscribe:()=>{n=[]}}},$m=n=>kn(n)||!NA(n);function li(n,e){if($m(n)||$m(e))return n===e;if(Li(n)&&Li(e))return n.getTime()===e.getTime();const t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(const s of t){const i=n[s];if(!r.includes(s))return!1;if(s!=="ref"){const a=e[s];if(Li(i)&&Li(a)||Vt(i)&&Vt(a)||Array.isArray(i)&&Array.isArray(a)?!li(i,a):i!==a)return!1}}return!0}var Tn=n=>Vt(n)&&!Object.keys(n).length,Jg=n=>n.type==="file",Rr=n=>typeof n=="function",kd=n=>{if(!Qg)return!1;const e=n?n.ownerDocument:0;return n instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},FA=n=>n.type==="select-multiple",ey=n=>n.type==="radio",Qj=n=>ey(n)||xc(n),Wp=n=>kd(n)&&n.isConnected;function Zj(n,e){const t=e.slice(0,-1).length;let r=0;for(;r<t;)n=zt(n)?r++:n[e[r++]];return n}function Jj(n){for(const e in n)if(n.hasOwnProperty(e)&&!zt(n[e]))return!1;return!0}function Qt(n,e){const t=Array.isArray(e)?e:Zg(e)?[e]:MA(e),r=t.length===1?n:Zj(n,t),s=t.length-1,i=t[s];return r&&delete r[i],s!==0&&(Vt(r)&&Tn(r)||Array.isArray(r)&&Jj(r))&&Qt(n,t.slice(0,-1)),n}var BA=n=>{for(const e in n)if(Rr(n[e]))return!0;return!1};function Pd(n,e={}){const t=Array.isArray(n);if(Vt(n)||t)for(const r in n)Array.isArray(n[r])||Vt(n[r])&&!BA(n[r])?(e[r]=Array.isArray(n[r])?[]:{},Pd(n[r],e[r])):kn(n[r])||(e[r]=!0);return e}function $A(n,e,t){const r=Array.isArray(n);if(Vt(n)||r)for(const s in n)Array.isArray(n[s])||Vt(n[s])&&!BA(n[s])?zt(e)||$m(t[s])?t[s]=Array.isArray(n[s])?Pd(n[s],[]):{...Pd(n[s])}:$A(n[s],kn(e)?{}:e[s],t[s]):t[s]=!li(n[s],e[s]);return t}var wl=(n,e)=>$A(n,e,Pd(e));const kb={value:!1,isValid:!1},Pb={value:!0,isValid:!0};var zA=n=>{if(Array.isArray(n)){if(n.length>1){const e=n.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return n[0].checked&&!n[0].disabled?n[0].attributes&&!zt(n[0].attributes.value)?zt(n[0].value)||n[0].value===""?Pb:{value:n[0].value,isValid:!0}:Pb:kb}return kb},VA=(n,{valueAsNumber:e,valueAsDate:t,setValueAs:r})=>zt(n)?n:e?n===""?NaN:n&&+n:t&&es(n)?new Date(n):r?r(n):n;const Nb={isValid:!1,value:null};var UA=n=>Array.isArray(n)?n.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,Nb):Nb;function Rb(n){const e=n.ref;return Jg(e)?e.files:ey(e)?UA(n.refs).value:FA(e)?[...e.selectedOptions].map(({value:t})=>t):xc(e)?zA(n.refs).value:VA(zt(e.value)?n.ref.value:e.value,n)}var eO=(n,e,t,r)=>{const s={};for(const i of n){const a=he(e,i);a&&dt(s,i,a._f)}return{criteriaMode:t,names:[...n],fields:s,shouldUseNativeValidation:r}},Nd=n=>n instanceof RegExp,bl=n=>zt(n)?n:Nd(n)?n.source:Vt(n)?Nd(n.value)?n.value.source:n.value:n,Db=n=>({isOnSubmit:!n||n===Nr.onSubmit,isOnBlur:n===Nr.onBlur,isOnChange:n===Nr.onChange,isOnAll:n===Nr.all,isOnTouch:n===Nr.onTouched});const Mb="AsyncFunction";var tO=n=>!!n&&!!n.validate&&!!(Rr(n.validate)&&n.validate.constructor.name===Mb||Vt(n.validate)&&Object.values(n.validate).find(e=>e.constructor.name===Mb)),nO=n=>n.mount&&(n.required||n.min||n.max||n.maxLength||n.minLength||n.pattern||n.validate),Ib=(n,e,t)=>!t&&(e.watchAll||e.watch.has(n)||[...e.watch].some(r=>n.startsWith(r)&&/^\.\w+/.test(n.slice(r.length))));const Il=(n,e,t,r)=>{for(const s of t||Object.keys(n)){const i=he(n,s);if(i){const{_f:a,...c}=i;if(a){if(a.refs&&a.refs[0]&&e(a.refs[0],s)&&!r)return!0;if(a.ref&&e(a.ref,a.name)&&!r)return!0;if(Il(c,e))break}else if(Vt(c)&&Il(c,e))break}}};function jb(n,e,t){const r=he(n,t);if(r||Zg(t))return{error:r,name:t};const s=t.split(".");for(;s.length;){const i=s.join("."),a=he(e,i),c=he(n,i);if(a&&!Array.isArray(a)&&t!==i)return{name:t};if(c&&c.type)return{name:i,error:c};s.pop()}return{name:t}}var rO=(n,e,t,r)=>{t(n);const{name:s,...i}=n;return Tn(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(a=>e[a]===(!r||Nr.all))},sO=(n,e,t)=>!n||!e||n===e||Ml(n).some(r=>r&&(t?r===e:r.startsWith(e)||e.startsWith(r))),iO=(n,e,t,r,s)=>s.isOnAll?!1:!t&&s.isOnTouch?!(e||n):(t?r.isOnBlur:s.isOnBlur)?!n:(t?r.isOnChange:s.isOnChange)?n:!0,oO=(n,e)=>!vh(he(n,e)).length&&Qt(n,e),aO=(n,e,t)=>{const r=Ml(he(n,t));return dt(r,"root",e[t]),dt(n,t,r),n},cd=n=>es(n);function Ob(n,e,t="validate"){if(cd(n)||Array.isArray(n)&&n.every(cd)||Zn(n)&&!n)return{type:t,message:cd(n)?n:"",ref:e}}var zo=n=>Vt(n)&&!Nd(n)?n:{value:n,message:""},Lb=async(n,e,t,r,s,i)=>{const{ref:a,refs:c,required:u,maxLength:h,minLength:f,min:g,max:y,pattern:w,validate:S,name:v,valueAsNumber:_,mount:A}=n._f,E=he(t,v);if(!A||e.has(v))return{};const k=c?c[0]:a,P=X=>{s&&k.reportValidity&&(k.setCustomValidity(Zn(X)?"":X||""),k.reportValidity())},N={},R=ey(a),M=xc(a),$=R||M,G=(_||Jg(a))&&zt(a.value)&&zt(E)||kd(a)&&a.value===""||E===""||Array.isArray(E)&&!E.length,F=LA.bind(null,v,r,N),V=(X,Z,W,oe=Ss.maxLength,K=Ss.minLength)=>{const z=X?Z:W;N[v]={type:X?oe:K,message:z,ref:a,...F(X?oe:K,z)}};if(i?!Array.isArray(E)||!E.length:u&&(!$&&(G||kn(E))||Zn(E)&&!E||M&&!zA(c).isValid||R&&!UA(c).isValid)){const{value:X,message:Z}=cd(u)?{value:!!u,message:u}:zo(u);if(X&&(N[v]={type:Ss.required,message:Z,ref:k,...F(Ss.required,Z)},!r))return P(Z),N}if(!G&&(!kn(g)||!kn(y))){let X,Z;const W=zo(y),oe=zo(g);if(!kn(E)&&!isNaN(E)){const K=a.valueAsNumber||E&&+E;kn(W.value)||(X=K>W.value),kn(oe.value)||(Z=K<oe.value)}else{const K=a.valueAsDate||new Date(E),z=te=>new Date(new Date().toDateString()+" "+te),O=a.type=="time",ee=a.type=="week";es(W.value)&&E&&(X=O?z(E)>z(W.value):ee?E>W.value:K>new Date(W.value)),es(oe.value)&&E&&(Z=O?z(E)<z(oe.value):ee?E<oe.value:K<new Date(oe.value))}if((X||Z)&&(V(!!X,W.message,oe.message,Ss.max,Ss.min),!r))return P(N[v].message),N}if((h||f)&&!G&&(es(E)||i&&Array.isArray(E))){const X=zo(h),Z=zo(f),W=!kn(X.value)&&E.length>+X.value,oe=!kn(Z.value)&&E.length<+Z.value;if((W||oe)&&(V(W,X.message,Z.message),!r))return P(N[v].message),N}if(w&&!G&&es(E)){const{value:X,message:Z}=zo(w);if(Nd(X)&&!E.match(X)&&(N[v]={type:Ss.pattern,message:Z,ref:a,...F(Ss.pattern,Z)},!r))return P(Z),N}if(S){if(Rr(S)){const X=await S(E,t),Z=Ob(X,k);if(Z&&(N[v]={...Z,...F(Ss.validate,Z.message)},!r))return P(Z.message),N}else if(Vt(S)){let X={};for(const Z in S){if(!Tn(X)&&!r)break;const W=Ob(await S[Z](E,t),k,Z);W&&(X={...W,...F(Z,W.message)},P(W.message),r&&(N[v]=X))}if(!Tn(X)&&(N[v]={ref:k,...X},!r))return N}}return P(!0),N};const lO={mode:Nr.onSubmit,reValidateMode:Nr.onChange,shouldFocusError:!0};function cO(n={}){let e={...lO,...n},t={submitCount:0,isDirty:!1,isLoading:Rr(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let s=Vt(e.defaultValues)||Vt(e.values)?hn(e.values||e.defaultValues)||{}:{},i=e.shouldUnregister?{}:hn(s),a={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,h=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let g={...f};const y={array:Tb(),state:Tb()},w=Db(e.mode),S=Db(e.reValidateMode),v=e.criteriaMode===Nr.all,_=I=>q=>{clearTimeout(h),h=setTimeout(I,q)},A=async I=>{if(!e.disabled&&(f.isValid||g.isValid||I)){const q=e.resolver?Tn((await G()).errors):await V(r,!0);q!==t.isValid&&y.state.next({isValid:q})}},E=(I,q)=>{!e.disabled&&(f.isValidating||f.validatingFields||g.isValidating||g.validatingFields)&&((I||Array.from(c.mount)).forEach(J=>{J&&(q?dt(t.validatingFields,J,q):Qt(t.validatingFields,J))}),y.state.next({validatingFields:t.validatingFields,isValidating:!Tn(t.validatingFields)}))},k=(I,q=[],J,me,de=!0,ce=!0)=>{if(me&&J&&!e.disabled){if(a.action=!0,ce&&Array.isArray(he(r,I))){const ve=J(he(r,I),me.argA,me.argB);de&&dt(r,I,ve)}if(ce&&Array.isArray(he(t.errors,I))){const ve=J(he(t.errors,I),me.argA,me.argB);de&&dt(t.errors,I,ve),oO(t.errors,I)}if((f.touchedFields||g.touchedFields)&&ce&&Array.isArray(he(t.touchedFields,I))){const ve=J(he(t.touchedFields,I),me.argA,me.argB);de&&dt(t.touchedFields,I,ve)}(f.dirtyFields||g.dirtyFields)&&(t.dirtyFields=wl(s,i)),y.state.next({name:I,isDirty:Z(I,q),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else dt(i,I,q)},P=(I,q)=>{dt(t.errors,I,q),y.state.next({errors:t.errors})},N=I=>{t.errors=I,y.state.next({errors:t.errors,isValid:!1})},R=(I,q,J,me)=>{const de=he(r,I);if(de){const ce=he(i,I,zt(J)?he(s,I):J);zt(ce)||me&&me.defaultChecked||q?dt(i,I,q?ce:Rb(de._f)):K(I,ce),a.mount&&A()}},M=(I,q,J,me,de)=>{let ce=!1,ve=!1;const et={name:I};if(!e.disabled){if(!J||me){(f.isDirty||g.isDirty)&&(ve=t.isDirty,t.isDirty=et.isDirty=Z(),ce=ve!==et.isDirty);const gt=li(he(s,I),q);ve=!!he(t.dirtyFields,I),gt?Qt(t.dirtyFields,I):dt(t.dirtyFields,I,!0),et.dirtyFields=t.dirtyFields,ce=ce||(f.dirtyFields||g.dirtyFields)&&ve!==!gt}if(J){const gt=he(t.touchedFields,I);gt||(dt(t.touchedFields,I,J),et.touchedFields=t.touchedFields,ce=ce||(f.touchedFields||g.touchedFields)&&gt!==J)}ce&&de&&y.state.next(et)}return ce?et:{}},$=(I,q,J,me)=>{const de=he(t.errors,I),ce=(f.isValid||g.isValid)&&Zn(q)&&t.isValid!==q;if(e.delayError&&J?(u=_(()=>P(I,J)),u(e.delayError)):(clearTimeout(h),u=null,J?dt(t.errors,I,J):Qt(t.errors,I)),(J?!li(de,J):de)||!Tn(me)||ce){const ve={...me,...ce&&Zn(q)?{isValid:q}:{},errors:t.errors,name:I};t={...t,...ve},y.state.next(ve)}},G=async I=>{E(I,!0);const q=await e.resolver(i,e.context,eO(I||c.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return E(I),q},F=async I=>{const{errors:q}=await G(I);if(I)for(const J of I){const me=he(q,J);me?dt(t.errors,J,me):Qt(t.errors,J)}else t.errors=q;return q},V=async(I,q,J={valid:!0})=>{for(const me in I){const de=I[me];if(de){const{_f:ce,...ve}=de;if(ce){const et=c.array.has(ce.name),gt=de._f&&tO(de._f);gt&&f.validatingFields&&E([me],!0);const It=await Lb(de,c.disabled,i,v,e.shouldUseNativeValidation&&!q,et);if(gt&&f.validatingFields&&E([me]),It[ce.name]&&(J.valid=!1,q))break;!q&&(he(It,ce.name)?et?aO(t.errors,It,ce.name):dt(t.errors,ce.name,It[ce.name]):Qt(t.errors,ce.name))}!Tn(ve)&&await V(ve,q,J)}}return J.valid},X=()=>{for(const I of c.unMount){const q=he(r,I);q&&(q._f.refs?q._f.refs.every(J=>!Wp(J)):!Wp(q._f.ref))&&$e(I)}c.unMount=new Set},Z=(I,q)=>!e.disabled&&(I&&q&&dt(i,I,q),!li(Q(),s)),W=(I,q,J)=>OA(I,c,{...a.mount?i:zt(q)?s:es(I)?{[I]:q}:q},J,q),oe=I=>vh(he(a.mount?i:s,I,e.shouldUnregister?he(s,I,[]):[])),K=(I,q,J={})=>{const me=he(r,I);let de=q;if(me){const ce=me._f;ce&&(!ce.disabled&&dt(i,I,VA(q,ce)),de=kd(ce.ref)&&kn(q)?"":q,FA(ce.ref)?[...ce.ref.options].forEach(ve=>ve.selected=de.includes(ve.value)):ce.refs?xc(ce.ref)?ce.refs.length>1?ce.refs.forEach(ve=>(!ve.defaultChecked||!ve.disabled)&&(ve.checked=Array.isArray(de)?!!de.find(et=>et===ve.value):de===ve.value)):ce.refs[0]&&(ce.refs[0].checked=!!de):ce.refs.forEach(ve=>ve.checked=ve.value===de):Jg(ce.ref)?ce.ref.value="":(ce.ref.value=de,ce.ref.type||y.state.next({name:I,values:hn(i)})))}(J.shouldDirty||J.shouldTouch)&&M(I,de,J.shouldTouch,J.shouldDirty,!0),J.shouldValidate&&L(I)},z=(I,q,J)=>{for(const me in q){const de=q[me],ce=`${I}.${me}`,ve=he(r,ce);(c.array.has(I)||Vt(de)||ve&&!ve._f)&&!Li(de)?z(ce,de,J):K(ce,de,J)}},O=(I,q,J={})=>{const me=he(r,I),de=c.array.has(I),ce=hn(q);dt(i,I,ce),de?(y.array.next({name:I,values:hn(i)}),(f.isDirty||f.dirtyFields||g.isDirty||g.dirtyFields)&&J.shouldDirty&&y.state.next({name:I,dirtyFields:wl(s,i),isDirty:Z(I,ce)})):me&&!me._f&&!kn(ce)?z(I,ce,J):K(I,ce,J),Ib(I,c)&&y.state.next({...t}),y.state.next({name:a.mount?I:void 0,values:hn(i)})},ee=async I=>{a.mount=!0;const q=I.target;let J=q.name,me=!0;const de=he(r,J),ce=ve=>{me=Number.isNaN(ve)||Li(ve)&&isNaN(ve.getTime())||li(ve,he(i,J,ve))};if(de){let ve,et;const gt=q.type?Rb(de._f):RA(I),It=I.type===Td.BLUR||I.type===Td.FOCUS_OUT,Ch=!nO(de._f)&&!e.resolver&&!he(t.errors,J)&&!de._f.deps||iO(It,he(t.touchedFields,J),t.isSubmitted,S,w),lo=Ib(J,c,It);dt(i,J,gt),It?(de._f.onBlur&&de._f.onBlur(I),u&&u(0)):de._f.onChange&&de._f.onChange(I);const co=M(J,gt,It),Eh=!Tn(co)||lo;if(!It&&y.state.next({name:J,type:I.type,values:hn(i)}),Ch)return(f.isValid||g.isValid)&&(e.mode==="onBlur"?It&&A():It||A()),Eh&&y.state.next({name:J,...lo?{}:co});if(!It&&lo&&y.state.next({...t}),e.resolver){const{errors:uo}=await G([J]);if(ce(gt),me){const Na=jb(t.errors,r,J),ho=jb(uo,r,Na.name||J);ve=ho.error,J=ho.name,et=Tn(uo)}}else E([J],!0),ve=(await Lb(de,c.disabled,i,v,e.shouldUseNativeValidation))[J],E([J]),ce(gt),me&&(ve?et=!1:(f.isValid||g.isValid)&&(et=await V(r,!0)));me&&(de._f.deps&&L(de._f.deps),$(J,et,ve,co))}},te=(I,q)=>{if(he(t.errors,q)&&I.focus)return I.focus(),1},L=async(I,q={})=>{let J,me;const de=Ml(I);if(e.resolver){const ce=await F(zt(I)?I:de);J=Tn(ce),me=I?!de.some(ve=>he(ce,ve)):J}else I?(me=(await Promise.all(de.map(async ce=>{const ve=he(r,ce);return await V(ve&&ve._f?{[ce]:ve}:ve)}))).every(Boolean),!(!me&&!t.isValid)&&A()):me=J=await V(r);return y.state.next({...!es(I)||(f.isValid||g.isValid)&&J!==t.isValid?{}:{name:I},...e.resolver||!I?{isValid:J}:{},errors:t.errors}),q.shouldFocus&&!me&&Il(r,te,I?de:c.mount),me},Q=I=>{const q={...a.mount?i:s};return zt(I)?q:es(I)?he(q,I):I.map(J=>he(q,J))},fe=(I,q)=>({invalid:!!he((q||t).errors,I),isDirty:!!he((q||t).dirtyFields,I),error:he((q||t).errors,I),isValidating:!!he(t.validatingFields,I),isTouched:!!he((q||t).touchedFields,I)}),Te=I=>{I&&Ml(I).forEach(q=>Qt(t.errors,q)),y.state.next({errors:I?t.errors:{}})},De=(I,q,J)=>{const me=(he(r,I,{_f:{}})._f||{}).ref,de=he(t.errors,I)||{},{ref:ce,message:ve,type:et,...gt}=de;dt(t.errors,I,{...gt,...q,ref:me}),y.state.next({name:I,errors:t.errors,isValid:!1}),J&&J.shouldFocus&&me&&me.focus&&me.focus()},Me=(I,q)=>Rr(I)?y.state.subscribe({next:J=>I(W(void 0,q),J)}):W(I,q,!0),ie=I=>y.state.subscribe({next:q=>{sO(I.name,q.name,I.exact)&&rO(q,I.formState||f,Pa,I.reRenderRoot)&&I.callback({values:{...i},...t,...q})}}).unsubscribe,Ae=I=>(a.mount=!0,g={...g,...I.formState},ie({...I,formState:g})),$e=(I,q={})=>{for(const J of I?Ml(I):c.mount)c.mount.delete(J),c.array.delete(J),q.keepValue||(Qt(r,J),Qt(i,J)),!q.keepError&&Qt(t.errors,J),!q.keepDirty&&Qt(t.dirtyFields,J),!q.keepTouched&&Qt(t.touchedFields,J),!q.keepIsValidating&&Qt(t.validatingFields,J),!e.shouldUnregister&&!q.keepDefaultValue&&Qt(s,J);y.state.next({values:hn(i)}),y.state.next({...t,...q.keepDirty?{isDirty:Z()}:{}}),!q.keepIsValid&&A()},Ue=({disabled:I,name:q})=>{(Zn(I)&&a.mount||I||c.disabled.has(q))&&(I?c.disabled.add(q):c.disabled.delete(q))},Je=(I,q={})=>{let J=he(r,I);const me=Zn(q.disabled)||Zn(e.disabled);return dt(r,I,{...J||{},_f:{...J&&J._f?J._f:{ref:{name:I}},name:I,mount:!0,...q}}),c.mount.add(I),J?Ue({disabled:Zn(q.disabled)?q.disabled:e.disabled,name:I}):R(I,!0,q.value),{...me?{disabled:q.disabled||e.disabled}:{},...e.progressive?{required:!!q.required,min:bl(q.min),max:bl(q.max),minLength:bl(q.minLength),maxLength:bl(q.maxLength),pattern:bl(q.pattern)}:{},name:I,onChange:ee,onBlur:ee,ref:de=>{if(de){Je(I,q),J=he(r,I);const ce=zt(de.value)&&de.querySelectorAll&&de.querySelectorAll("input,select,textarea")[0]||de,ve=Qj(ce),et=J._f.refs||[];if(ve?et.find(gt=>gt===ce):ce===J._f.ref)return;dt(r,I,{_f:{...J._f,...ve?{refs:[...et.filter(Wp),ce,...Array.isArray(he(s,I))?[{}]:[]],ref:{type:ce.type,name:I}}:{ref:ce}}}),R(I,!1,void 0,ce)}else J=he(r,I,{}),J._f&&(J._f.mount=!1),(e.shouldUnregister||q.shouldUnregister)&&!(DA(c.array,I)&&a.action)&&c.unMount.add(I)}}},ut=()=>e.shouldFocusError&&Il(r,te,c.mount),Mt=I=>{Zn(I)&&(y.state.next({disabled:I}),Il(r,(q,J)=>{const me=he(r,J);me&&(q.disabled=me._f.disabled||I,Array.isArray(me._f.refs)&&me._f.refs.forEach(de=>{de.disabled=me._f.disabled||I}))},0,!1))},gn=(I,q)=>async J=>{let me;J&&(J.preventDefault&&J.preventDefault(),J.persist&&J.persist());let de=hn(i);if(y.state.next({isSubmitting:!0}),e.resolver){const{errors:ce,values:ve}=await G();t.errors=ce,de=ve}else await V(r);if(c.disabled.size)for(const ce of c.disabled)dt(de,ce,void 0);if(Qt(t.errors,"root"),Tn(t.errors)){y.state.next({errors:{}});try{await I(de,J)}catch(ce){me=ce}}else q&&await q({...t.errors},J),ut(),setTimeout(ut);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Tn(t.errors)&&!me,submitCount:t.submitCount+1,errors:t.errors}),me)throw me},js=(I,q={})=>{he(r,I)&&(zt(q.defaultValue)?O(I,hn(he(s,I))):(O(I,q.defaultValue),dt(s,I,hn(q.defaultValue))),q.keepTouched||Qt(t.touchedFields,I),q.keepDirty||(Qt(t.dirtyFields,I),t.isDirty=q.defaultValue?Z(I,hn(he(s,I))):Z()),q.keepError||(Qt(t.errors,I),f.isValid&&A()),y.state.next({...t}))},hs=(I,q={})=>{const J=I?hn(I):s,me=hn(J),de=Tn(I),ce=de?s:me;if(q.keepDefaultValues||(s=J),!q.keepValues){if(q.keepDirtyValues){const ve=new Set([...c.mount,...Object.keys(wl(s,i))]);for(const et of Array.from(ve))he(t.dirtyFields,et)?dt(ce,et,he(i,et)):O(et,he(ce,et))}else{if(Qg&&zt(I))for(const ve of c.mount){const et=he(r,ve);if(et&&et._f){const gt=Array.isArray(et._f.refs)?et._f.refs[0]:et._f.ref;if(kd(gt)){const It=gt.closest("form");if(It){It.reset();break}}}}for(const ve of c.mount)O(ve,he(ce,ve))}i=hn(ce),y.array.next({values:{...ce}}),y.state.next({values:{...ce}})}c={mount:q.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!f.isValid||!!q.keepIsValid||!!q.keepDirtyValues,a.watch=!!e.shouldUnregister,y.state.next({submitCount:q.keepSubmitCount?t.submitCount:0,isDirty:de?!1:q.keepDirty?t.isDirty:!!(q.keepDefaultValues&&!li(I,s)),isSubmitted:q.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:de?{}:q.keepDirtyValues?q.keepDefaultValues&&i?wl(s,i):t.dirtyFields:q.keepDefaultValues&&I?wl(s,I):q.keepDirty?t.dirtyFields:{},touchedFields:q.keepTouched?t.touchedFields:{},errors:q.keepErrors?t.errors:{},isSubmitSuccessful:q.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},zr=(I,q)=>hs(Rr(I)?I(i):I,q),kc=(I,q={})=>{const J=he(r,I),me=J&&J._f;if(me){const de=me.refs?me.refs[0]:me.ref;de.focus&&(de.focus(),q.shouldSelect&&Rr(de.select)&&de.select())}},Pa=I=>{t={...t,...I}},fs={control:{register:Je,unregister:$e,getFieldState:fe,handleSubmit:gn,setError:De,_subscribe:ie,_runSchema:G,_getWatch:W,_getDirty:Z,_setValid:A,_setFieldArray:k,_setDisabledField:Ue,_setErrors:N,_getFieldArray:oe,_reset:hs,_resetDefaultValues:()=>Rr(e.defaultValues)&&e.defaultValues().then(I=>{zr(I,e.resetOptions),y.state.next({isLoading:!1})}),_removeUnmounted:X,_disableForm:Mt,_subjects:y,_proxyFormState:f,get _fields(){return r},get _formValues(){return i},get _state(){return a},set _state(I){a=I},get _defaultValues(){return s},get _names(){return c},set _names(I){c=I},get _formState(){return t},get _options(){return e},set _options(I){e={...e,...I}}},subscribe:Ae,trigger:L,register:Je,handleSubmit:gn,watch:Me,setValue:O,getValues:Q,reset:zr,resetField:js,clearErrors:Te,unregister:$e,setError:De,setFocus:kc,getFieldState:fe};return{...fs,formControl:fs}}function uO(n={}){const e=We.useRef(void 0),t=We.useRef(void 0),[r,s]=We.useState({isDirty:!1,isValidating:!1,isLoading:Rr(n.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1,defaultValues:Rr(n.defaultValues)?void 0:n.defaultValues});e.current||(e.current={...n.formControl?n.formControl:cO(n),formState:r},n.formControl&&n.defaultValues&&!Rr(n.defaultValues)&&n.formControl.reset(n.defaultValues,n.resetOptions));const i=e.current.control;return i._options=n,We.useLayoutEffect(()=>i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0}),[i]),We.useEffect(()=>i._disableForm(n.disabled),[i,n.disabled]),We.useEffect(()=>{if(i._proxyFormState.isDirty){const a=i._getDirty();a!==r.isDirty&&i._subjects.state.next({isDirty:a})}},[i,r.isDirty]),We.useEffect(()=>{n.values&&!li(n.values,t.current)?(i._reset(n.values,i._options.resetOptions),t.current=n.values,s(a=>({...a}))):i._resetDefaultValues()},[n.values,i]),We.useEffect(()=>{n.errors&&!Tn(n.errors)&&i._setErrors(n.errors)},[n.errors,i]),We.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),We.useEffect(()=>{n.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[n.shouldUnregister,i]),e.current.formState=jA(r,i),e.current}const Fb=(n,e,t)=>{if(n&&"reportValidity"in n){const r=he(t,e);n.setCustomValidity(r&&r.message||""),n.reportValidity()}},HA=(n,e)=>{for(const t in e.fields){const r=e.fields[t];r&&r.ref&&"reportValidity"in r.ref?Fb(r.ref,t,n):r.refs&&r.refs.forEach(s=>Fb(s,t,n))}},dO=(n,e)=>{e.shouldUseNativeValidation&&HA(n,e);const t={};for(const r in n){const s=he(e.fields,r),i=Object.assign(n[r]||{},{ref:s&&s.ref});if(hO(e.names||Object.keys(n),r)){const a=Object.assign({},he(t,r));dt(a,"root",i),dt(t,r,a)}else dt(t,r,i)}return t},hO=(n,e)=>n.some(t=>t.startsWith(e+"."));var fO=function(n,e){for(var t={};n.length;){var r=n[0],s=r.code,i=r.message,a=r.path.join(".");if(!t[a])if("unionErrors"in r){var c=r.unionErrors[0].errors[0];t[a]={message:c.message,type:c.code}}else t[a]={message:i,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(f){return f.errors.forEach(function(g){return n.push(g)})}),e){var u=t[a].types,h=u&&u[r.code];t[a]=LA(a,e,t,s,h?[].concat(h,r.message):r.message)}n.shift()}return t},pO=function(n,e,t){return t===void 0&&(t={}),function(r,s,i){try{return Promise.resolve(function(a,c){try{var u=Promise.resolve(n[t.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(h){return i.shouldUseNativeValidation&&HA({},i),{errors:{},values:t.raw?r:h}})}catch(h){return c(h)}return u&&u.then?u.then(void 0,c):u}(0,function(a){if(function(c){return Array.isArray(c?.errors)}(a))return{values:{},errors:dO(fO(a.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw a}))}catch(a){return Promise.reject(a)}}},nt;(function(n){n.assertEqual=s=>s;function e(s){}n.assertIs=e;function t(s){throw new Error}n.assertNever=t,n.arrayToEnum=s=>{const i={};for(const a of s)i[a]=a;return i},n.getValidEnumValues=s=>{const i=n.objectKeys(s).filter(c=>typeof s[s[c]]!="number"),a={};for(const c of i)a[c]=s[c];return n.objectValues(a)},n.objectValues=s=>n.objectKeys(s).map(function(i){return s[i]}),n.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&i.push(a);return i},n.find=(s,i)=>{for(const a of s)if(i(a))return a},n.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}n.joinValues=r,n.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(nt||(nt={}));var zm;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(zm||(zm={}));const ye=nt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ks=n=>{switch(typeof n){case"undefined":return ye.undefined;case"string":return ye.string;case"number":return isNaN(n)?ye.nan:ye.number;case"boolean":return ye.boolean;case"function":return ye.function;case"bigint":return ye.bigint;case"symbol":return ye.symbol;case"object":return Array.isArray(n)?ye.array:n===null?ye.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?ye.promise:typeof Map<"u"&&n instanceof Map?ye.map:typeof Set<"u"&&n instanceof Set?ye.set:typeof Date<"u"&&n instanceof Date?ye.date:ye.object;default:return ye.unknown}},le=nt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),mO=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class rr extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)r._errors.push(t(a));else{let c=r,u=0;for(;u<a.path.length;){const h=a.path[u];u===a.path.length-1?(c[h]=c[h]||{_errors:[]},c[h]._errors.push(t(a))):c[h]=c[h]||{_errors:[]},c=c[h],u++}}};return s(this),r}static assert(e){if(!(e instanceof rr))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,nt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}rr.create=n=>new rr(n);const ma=(n,e)=>{let t;switch(n.code){case le.invalid_type:n.received===ye.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case le.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,nt.jsonStringifyReplacer)}`;break;case le.unrecognized_keys:t=`Unrecognized key(s) in object: ${nt.joinValues(n.keys,", ")}`;break;case le.invalid_union:t="Invalid input";break;case le.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${nt.joinValues(n.options)}`;break;case le.invalid_enum_value:t=`Invalid enum value. Expected ${nt.joinValues(n.options)}, received '${n.received}'`;break;case le.invalid_arguments:t="Invalid function arguments";break;case le.invalid_return_type:t="Invalid function return type";break;case le.invalid_date:t="Invalid date";break;case le.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:nt.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case le.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case le.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case le.custom:t="Invalid input";break;case le.invalid_intersection_types:t="Intersection results could not be merged";break;case le.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case le.not_finite:t="Number must be finite";break;default:t=e.defaultError,nt.assertNever(n)}return{message:t}};let WA=ma;function gO(n){WA=n}function Rd(){return WA}const Dd=n=>{const{data:e,path:t,errorMaps:r,issueData:s}=n,i=[...t,...s.path||[]],a={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let c="";const u=r.filter(h=>!!h).slice().reverse();for(const h of u)c=h(a,{data:e,defaultError:c}).message;return{...s,path:i,message:c}},yO=[];function pe(n,e){const t=Rd(),r=Dd({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===ma?void 0:ma].filter(s=>!!s)});n.common.issues.push(r)}class bn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const s of t){if(s.status==="aborted")return Le;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const s of t){const i=await s.key,a=await s.value;r.push({key:i,value:a})}return bn.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const s of t){const{key:i,value:a}=s;if(i.status==="aborted"||a.status==="aborted")return Le;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof a.value<"u"||s.alwaysSet)&&(r[i.value]=a.value)}return{status:e.value,value:r}}}const Le=Object.freeze({status:"aborted"}),Jo=n=>({status:"dirty",value:n}),In=n=>({status:"valid",value:n}),Vm=n=>n.status==="aborted",Um=n=>n.status==="dirty",Ji=n=>n.status==="valid",Gl=n=>typeof Promise<"u"&&n instanceof Promise;function Md(n,e,t,r){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(n)}function GA(n,e,t,r,s){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}var Ee;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e?.message})(Ee||(Ee={}));var Pl,Nl;class as{constructor(e,t,r,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Bb=(n,e)=>{if(Ji(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new rr(n.common.issues);return this._error=t,this._error}}};function Ge(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:s}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(a,c)=>{var u,h;const{message:f}=n;return a.code==="invalid_enum_value"?{message:f??c.defaultError}:typeof c.data>"u"?{message:(u=f??r)!==null&&u!==void 0?u:c.defaultError}:a.code!=="invalid_type"?{message:c.defaultError}:{message:(h=f??t)!==null&&h!==void 0?h:c.defaultError}},description:s}}class Xe{get description(){return this._def.description}_getType(e){return ks(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:ks(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new bn,ctx:{common:e.parent.common,data:e.data,parsedType:ks(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Gl(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const s={common:{issues:[],async:(r=t?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ks(e)},i=this._parseSync({data:e,path:s.path,parent:s});return Bb(s,i)}"~validate"(e){var t,r;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ks(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:s});return Ji(i)?{value:i.value}:{issues:s.common.issues}}catch(i){!((r=(t=i?.message)===null||t===void 0?void 0:t.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(i=>Ji(i)?{value:i.value}:{issues:s.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ks(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(Gl(s)?s:Promise.resolve(s));return Bb(r,i)}refine(e,t){const r=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,i)=>{const a=e(s),c=()=>i.addIssue({code:le.custom,...r(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(u=>u?!0:(c(),!1)):a?!0:(c(),!1)})}refinement(e,t){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof t=="function"?t(r,s):t),!1))}_refinement(e){return new Or({schema:this,typeName:je.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return ss.create(this,this._def)}nullable(){return vi.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Mr.create(this)}promise(){return ya.create(this,this._def)}or(e){return Kl.create([this,e],this._def)}and(e){return Ql.create(this,e,this._def)}transform(e){return new Or({...Ge(this._def),schema:this,typeName:je.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new nc({...Ge(this._def),innerType:this,defaultValue:t,typeName:je.ZodDefault})}brand(){return new ty({typeName:je.ZodBranded,type:this,...Ge(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new rc({...Ge(this._def),innerType:this,catchValue:t,typeName:je.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return wc.create(this,e)}readonly(){return sc.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const vO=/^c[^\s-]{8,}$/i,xO=/^[0-9a-z]+$/,wO=/^[0-9A-HJKMNP-TV-Z]{26}$/i,bO=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,_O=/^[a-z0-9_-]{21}$/i,SO=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,AO=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,CO=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,EO="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Gp;const TO=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,kO=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,PO=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,NO=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,RO=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,DO=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,qA="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",MO=new RegExp(`^${qA}$`);function YA(n){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`),e}function IO(n){return new RegExp(`^${YA(n)}$`)}function XA(n){let e=`${qA}T${YA(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function jO(n,e){return!!((e==="v4"||!e)&&TO.test(n)||(e==="v6"||!e)&&PO.test(n))}function OO(n,e){if(!SO.test(n))return!1;try{const[t]=n.split("."),r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||!s.typ||!s.alg||e&&s.alg!==e)}catch{return!1}}function LO(n,e){return!!((e==="v4"||!e)&&kO.test(n)||(e==="v6"||!e)&&NO.test(n))}class Dr extends Xe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ye.string){const i=this._getOrReturnCtx(e);return pe(i,{code:le.invalid_type,expected:ye.string,received:i.parsedType}),Le}const r=new bn;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),pe(s,{code:le.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),pe(s,{code:le.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const a=e.data.length>i.value,c=e.data.length<i.value;(a||c)&&(s=this._getOrReturnCtx(e,s),a?pe(s,{code:le.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):c&&pe(s,{code:le.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")CO.test(e.data)||(s=this._getOrReturnCtx(e,s),pe(s,{validation:"email",code:le.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Gp||(Gp=new RegExp(EO,"u")),Gp.test(e.data)||(s=this._getOrReturnCtx(e,s),pe(s,{validation:"emoji",code:le.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")bO.test(e.data)||(s=this._getOrReturnCtx(e,s),pe(s,{validation:"uuid",code:le.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")_O.test(e.data)||(s=this._getOrReturnCtx(e,s),pe(s,{validation:"nanoid",code:le.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")vO.test(e.data)||(s=this._getOrReturnCtx(e,s),pe(s,{validation:"cuid",code:le.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")xO.test(e.data)||(s=this._getOrReturnCtx(e,s),pe(s,{validation:"cuid2",code:le.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")wO.test(e.data)||(s=this._getOrReturnCtx(e,s),pe(s,{validation:"ulid",code:le.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),pe(s,{validation:"url",code:le.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),pe(s,{validation:"regex",code:le.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),pe(s,{code:le.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),pe(s,{code:le.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),pe(s,{code:le.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?XA(i).test(e.data)||(s=this._getOrReturnCtx(e,s),pe(s,{code:le.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?MO.test(e.data)||(s=this._getOrReturnCtx(e,s),pe(s,{code:le.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?IO(i).test(e.data)||(s=this._getOrReturnCtx(e,s),pe(s,{code:le.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?AO.test(e.data)||(s=this._getOrReturnCtx(e,s),pe(s,{validation:"duration",code:le.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?jO(e.data,i.version)||(s=this._getOrReturnCtx(e,s),pe(s,{validation:"ip",code:le.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?OO(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),pe(s,{validation:"jwt",code:le.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?LO(e.data,i.version)||(s=this._getOrReturnCtx(e,s),pe(s,{validation:"cidr",code:le.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?RO.test(e.data)||(s=this._getOrReturnCtx(e,s),pe(s,{validation:"base64",code:le.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?DO.test(e.data)||(s=this._getOrReturnCtx(e,s),pe(s,{validation:"base64url",code:le.invalid_string,message:i.message}),r.dirty()):nt.assertNever(i);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(s=>e.test(s),{validation:t,code:le.invalid_string,...Ee.errToObj(r)})}_addCheck(e){return new Dr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ee.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ee.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ee.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ee.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ee.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ee.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ee.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ee.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ee.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ee.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ee.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ee.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ee.errToObj(e)})}datetime(e){var t,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(t=e?.offset)!==null&&t!==void 0?t:!1,local:(r=e?.local)!==null&&r!==void 0?r:!1,...Ee.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Ee.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Ee.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Ee.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...Ee.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Ee.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Ee.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Ee.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Ee.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Ee.errToObj(t)})}nonempty(e){return this.min(1,Ee.errToObj(e))}trim(){return new Dr({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Dr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Dr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Dr.create=n=>{var e;return new Dr({checks:[],typeName:je.ZodString,coerce:(e=n?.coerce)!==null&&e!==void 0?e:!1,...Ge(n)})};function FO(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=t>r?t:r,i=parseInt(n.toFixed(s).replace(".","")),a=parseInt(e.toFixed(s).replace(".",""));return i%a/Math.pow(10,s)}class mi extends Xe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ye.number){const i=this._getOrReturnCtx(e);return pe(i,{code:le.invalid_type,expected:ye.number,received:i.parsedType}),Le}let r;const s=new bn;for(const i of this._def.checks)i.kind==="int"?nt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),pe(r,{code:le.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),pe(r,{code:le.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),pe(r,{code:le.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?FO(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),pe(r,{code:le.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),pe(r,{code:le.not_finite,message:i.message}),s.dirty()):nt.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Ee.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ee.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ee.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ee.toString(t))}setLimit(e,t,r,s){return new mi({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Ee.toString(s)}]})}_addCheck(e){return new mi({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ee.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ee.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ee.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ee.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ee.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ee.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Ee.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ee.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ee.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&nt.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}mi.create=n=>new mi({checks:[],typeName:je.ZodNumber,coerce:n?.coerce||!1,...Ge(n)});class gi extends Xe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ye.bigint)return this._getInvalidInput(e);let r;const s=new bn;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),pe(r,{code:le.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),pe(r,{code:le.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),pe(r,{code:le.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):nt.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return pe(t,{code:le.invalid_type,expected:ye.bigint,received:t.parsedType}),Le}gte(e,t){return this.setLimit("min",e,!0,Ee.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ee.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ee.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ee.toString(t))}setLimit(e,t,r,s){return new gi({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Ee.toString(s)}]})}_addCheck(e){return new gi({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ee.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ee.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ee.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ee.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ee.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}gi.create=n=>{var e;return new gi({checks:[],typeName:je.ZodBigInt,coerce:(e=n?.coerce)!==null&&e!==void 0?e:!1,...Ge(n)})};class ql extends Xe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ye.boolean){const r=this._getOrReturnCtx(e);return pe(r,{code:le.invalid_type,expected:ye.boolean,received:r.parsedType}),Le}return In(e.data)}}ql.create=n=>new ql({typeName:je.ZodBoolean,coerce:n?.coerce||!1,...Ge(n)});class eo extends Xe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ye.date){const i=this._getOrReturnCtx(e);return pe(i,{code:le.invalid_type,expected:ye.date,received:i.parsedType}),Le}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return pe(i,{code:le.invalid_date}),Le}const r=new bn;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),pe(s,{code:le.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),pe(s,{code:le.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):nt.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new eo({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Ee.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Ee.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}eo.create=n=>new eo({checks:[],coerce:n?.coerce||!1,typeName:je.ZodDate,...Ge(n)});class Id extends Xe{_parse(e){if(this._getType(e)!==ye.symbol){const r=this._getOrReturnCtx(e);return pe(r,{code:le.invalid_type,expected:ye.symbol,received:r.parsedType}),Le}return In(e.data)}}Id.create=n=>new Id({typeName:je.ZodSymbol,...Ge(n)});class Yl extends Xe{_parse(e){if(this._getType(e)!==ye.undefined){const r=this._getOrReturnCtx(e);return pe(r,{code:le.invalid_type,expected:ye.undefined,received:r.parsedType}),Le}return In(e.data)}}Yl.create=n=>new Yl({typeName:je.ZodUndefined,...Ge(n)});class Xl extends Xe{_parse(e){if(this._getType(e)!==ye.null){const r=this._getOrReturnCtx(e);return pe(r,{code:le.invalid_type,expected:ye.null,received:r.parsedType}),Le}return In(e.data)}}Xl.create=n=>new Xl({typeName:je.ZodNull,...Ge(n)});class ga extends Xe{constructor(){super(...arguments),this._any=!0}_parse(e){return In(e.data)}}ga.create=n=>new ga({typeName:je.ZodAny,...Ge(n)});class Ui extends Xe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return In(e.data)}}Ui.create=n=>new Ui({typeName:je.ZodUnknown,...Ge(n)});class Ms extends Xe{_parse(e){const t=this._getOrReturnCtx(e);return pe(t,{code:le.invalid_type,expected:ye.never,received:t.parsedType}),Le}}Ms.create=n=>new Ms({typeName:je.ZodNever,...Ge(n)});class jd extends Xe{_parse(e){if(this._getType(e)!==ye.undefined){const r=this._getOrReturnCtx(e);return pe(r,{code:le.invalid_type,expected:ye.void,received:r.parsedType}),Le}return In(e.data)}}jd.create=n=>new jd({typeName:je.ZodVoid,...Ge(n)});class Mr extends Xe{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),s=this._def;if(t.parsedType!==ye.array)return pe(t,{code:le.invalid_type,expected:ye.array,received:t.parsedType}),Le;if(s.exactLength!==null){const a=t.data.length>s.exactLength.value,c=t.data.length<s.exactLength.value;(a||c)&&(pe(t,{code:a?le.too_big:le.too_small,minimum:c?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(pe(t,{code:le.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(pe(t,{code:le.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((a,c)=>s.type._parseAsync(new as(t,a,t.path,c)))).then(a=>bn.mergeArray(r,a));const i=[...t.data].map((a,c)=>s.type._parseSync(new as(t,a,t.path,c)));return bn.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new Mr({...this._def,minLength:{value:e,message:Ee.toString(t)}})}max(e,t){return new Mr({...this._def,maxLength:{value:e,message:Ee.toString(t)}})}length(e,t){return new Mr({...this._def,exactLength:{value:e,message:Ee.toString(t)}})}nonempty(e){return this.min(1,e)}}Mr.create=(n,e)=>new Mr({type:n,minLength:null,maxLength:null,exactLength:null,typeName:je.ZodArray,...Ge(e)});function Go(n){if(n instanceof Rt){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=ss.create(Go(r))}return new Rt({...n._def,shape:()=>e})}else return n instanceof Mr?new Mr({...n._def,type:Go(n.element)}):n instanceof ss?ss.create(Go(n.unwrap())):n instanceof vi?vi.create(Go(n.unwrap())):n instanceof ls?ls.create(n.items.map(e=>Go(e))):n}class Rt extends Xe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=nt.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==ye.object){const h=this._getOrReturnCtx(e);return pe(h,{code:le.invalid_type,expected:ye.object,received:h.parsedType}),Le}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),c=[];if(!(this._def.catchall instanceof Ms&&this._def.unknownKeys==="strip"))for(const h in s.data)a.includes(h)||c.push(h);const u=[];for(const h of a){const f=i[h],g=s.data[h];u.push({key:{status:"valid",value:h},value:f._parse(new as(s,g,s.path,h)),alwaysSet:h in s.data})}if(this._def.catchall instanceof Ms){const h=this._def.unknownKeys;if(h==="passthrough")for(const f of c)u.push({key:{status:"valid",value:f},value:{status:"valid",value:s.data[f]}});else if(h==="strict")c.length>0&&(pe(s,{code:le.unrecognized_keys,keys:c}),r.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const f of c){const g=s.data[f];u.push({key:{status:"valid",value:f},value:h._parse(new as(s,g,s.path,f)),alwaysSet:f in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const h=[];for(const f of u){const g=await f.key,y=await f.value;h.push({key:g,value:y,alwaysSet:f.alwaysSet})}return h}).then(h=>bn.mergeObjectSync(r,h)):bn.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(e){return Ee.errToObj,new Rt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var s,i,a,c;const u=(a=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,t,r).message)!==null&&a!==void 0?a:r.defaultError;return t.code==="unrecognized_keys"?{message:(c=Ee.errToObj(e).message)!==null&&c!==void 0?c:u}:{message:u}}}:{}})}strip(){return new Rt({...this._def,unknownKeys:"strip"})}passthrough(){return new Rt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Rt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Rt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:je.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Rt({...this._def,catchall:e})}pick(e){const t={};return nt.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new Rt({...this._def,shape:()=>t})}omit(e){const t={};return nt.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new Rt({...this._def,shape:()=>t})}deepPartial(){return Go(this)}partial(e){const t={};return nt.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?t[r]=s:t[r]=s.optional()}),new Rt({...this._def,shape:()=>t})}required(e){const t={};return nt.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof ss;)i=i._def.innerType;t[r]=i}}),new Rt({...this._def,shape:()=>t})}keyof(){return KA(nt.objectKeys(this.shape))}}Rt.create=(n,e)=>new Rt({shape:()=>n,unknownKeys:"strip",catchall:Ms.create(),typeName:je.ZodObject,...Ge(e)});Rt.strictCreate=(n,e)=>new Rt({shape:()=>n,unknownKeys:"strict",catchall:Ms.create(),typeName:je.ZodObject,...Ge(e)});Rt.lazycreate=(n,e)=>new Rt({shape:n,unknownKeys:"strip",catchall:Ms.create(),typeName:je.ZodObject,...Ge(e)});class Kl extends Xe{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function s(i){for(const c of i)if(c.result.status==="valid")return c.result;for(const c of i)if(c.result.status==="dirty")return t.common.issues.push(...c.ctx.common.issues),c.result;const a=i.map(c=>new rr(c.ctx.common.issues));return pe(t,{code:le.invalid_union,unionErrors:a}),Le}if(t.common.async)return Promise.all(r.map(async i=>{const a={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}})).then(s);{let i;const a=[];for(const u of r){const h={...t,common:{...t.common,issues:[]},parent:null},f=u._parseSync({data:t.data,path:t.path,parent:h});if(f.status==="valid")return f;f.status==="dirty"&&!i&&(i={result:f,ctx:h}),h.common.issues.length&&a.push(h.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const c=a.map(u=>new rr(u));return pe(t,{code:le.invalid_union,unionErrors:c}),Le}}get options(){return this._def.options}}Kl.create=(n,e)=>new Kl({options:n,typeName:je.ZodUnion,...Ge(e)});const Es=n=>n instanceof Jl?Es(n.schema):n instanceof Or?Es(n.innerType()):n instanceof ec?[n.value]:n instanceof yi?n.options:n instanceof tc?nt.objectValues(n.enum):n instanceof nc?Es(n._def.innerType):n instanceof Yl?[void 0]:n instanceof Xl?[null]:n instanceof ss?[void 0,...Es(n.unwrap())]:n instanceof vi?[null,...Es(n.unwrap())]:n instanceof ty||n instanceof sc?Es(n.unwrap()):n instanceof rc?Es(n._def.innerType):[];class wh extends Xe{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ye.object)return pe(t,{code:le.invalid_type,expected:ye.object,received:t.parsedType}),Le;const r=this.discriminator,s=t.data[r],i=this.optionsMap.get(s);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(pe(t,{code:le.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Le)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const s=new Map;for(const i of t){const a=Es(i.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const c of a){if(s.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);s.set(c,i)}}return new wh({typeName:je.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...Ge(r)})}}function Hm(n,e){const t=ks(n),r=ks(e);if(n===e)return{valid:!0,data:n};if(t===ye.object&&r===ye.object){const s=nt.objectKeys(e),i=nt.objectKeys(n).filter(c=>s.indexOf(c)!==-1),a={...n,...e};for(const c of i){const u=Hm(n[c],e[c]);if(!u.valid)return{valid:!1};a[c]=u.data}return{valid:!0,data:a}}else if(t===ye.array&&r===ye.array){if(n.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<n.length;i++){const a=n[i],c=e[i],u=Hm(a,c);if(!u.valid)return{valid:!1};s.push(u.data)}return{valid:!0,data:s}}else return t===ye.date&&r===ye.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class Ql extends Xe{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=(i,a)=>{if(Vm(i)||Vm(a))return Le;const c=Hm(i.value,a.value);return c.valid?((Um(i)||Um(a))&&t.dirty(),{status:t.value,value:c.data}):(pe(r,{code:le.invalid_intersection_types}),Le)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,a])=>s(i,a)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Ql.create=(n,e,t)=>new Ql({left:n,right:e,typeName:je.ZodIntersection,...Ge(t)});class ls extends Xe{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ye.array)return pe(r,{code:le.invalid_type,expected:ye.array,received:r.parsedType}),Le;if(r.data.length<this._def.items.length)return pe(r,{code:le.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Le;!this._def.rest&&r.data.length>this._def.items.length&&(pe(r,{code:le.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...r.data].map((a,c)=>{const u=this._def.items[c]||this._def.rest;return u?u._parse(new as(r,a,r.path,c)):null}).filter(a=>!!a);return r.common.async?Promise.all(i).then(a=>bn.mergeArray(t,a)):bn.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new ls({...this._def,rest:e})}}ls.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ls({items:n,typeName:je.ZodTuple,rest:null,...Ge(e)})};class Zl extends Xe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ye.object)return pe(r,{code:le.invalid_type,expected:ye.object,received:r.parsedType}),Le;const s=[],i=this._def.keyType,a=this._def.valueType;for(const c in r.data)s.push({key:i._parse(new as(r,c,r.path,c)),value:a._parse(new as(r,r.data[c],r.path,c)),alwaysSet:c in r.data});return r.common.async?bn.mergeObjectAsync(t,s):bn.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof Xe?new Zl({keyType:e,valueType:t,typeName:je.ZodRecord,...Ge(r)}):new Zl({keyType:Dr.create(),valueType:e,typeName:je.ZodRecord,...Ge(t)})}}class Od extends Xe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ye.map)return pe(r,{code:le.invalid_type,expected:ye.map,received:r.parsedType}),Le;const s=this._def.keyType,i=this._def.valueType,a=[...r.data.entries()].map(([c,u],h)=>({key:s._parse(new as(r,c,r.path,[h,"key"])),value:i._parse(new as(r,u,r.path,[h,"value"]))}));if(r.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const u of a){const h=await u.key,f=await u.value;if(h.status==="aborted"||f.status==="aborted")return Le;(h.status==="dirty"||f.status==="dirty")&&t.dirty(),c.set(h.value,f.value)}return{status:t.value,value:c}})}else{const c=new Map;for(const u of a){const h=u.key,f=u.value;if(h.status==="aborted"||f.status==="aborted")return Le;(h.status==="dirty"||f.status==="dirty")&&t.dirty(),c.set(h.value,f.value)}return{status:t.value,value:c}}}}Od.create=(n,e,t)=>new Od({valueType:e,keyType:n,typeName:je.ZodMap,...Ge(t)});class to extends Xe{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ye.set)return pe(r,{code:le.invalid_type,expected:ye.set,received:r.parsedType}),Le;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(pe(r,{code:le.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(pe(r,{code:le.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const i=this._def.valueType;function a(u){const h=new Set;for(const f of u){if(f.status==="aborted")return Le;f.status==="dirty"&&t.dirty(),h.add(f.value)}return{status:t.value,value:h}}const c=[...r.data.values()].map((u,h)=>i._parse(new as(r,u,r.path,h)));return r.common.async?Promise.all(c).then(u=>a(u)):a(c)}min(e,t){return new to({...this._def,minSize:{value:e,message:Ee.toString(t)}})}max(e,t){return new to({...this._def,maxSize:{value:e,message:Ee.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}to.create=(n,e)=>new to({valueType:n,minSize:null,maxSize:null,typeName:je.ZodSet,...Ge(e)});class ia extends Xe{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ye.function)return pe(t,{code:le.invalid_type,expected:ye.function,received:t.parsedType}),Le;function r(c,u){return Dd({data:c,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Rd(),ma].filter(h=>!!h),issueData:{code:le.invalid_arguments,argumentsError:u}})}function s(c,u){return Dd({data:c,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Rd(),ma].filter(h=>!!h),issueData:{code:le.invalid_return_type,returnTypeError:u}})}const i={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof ya){const c=this;return In(async function(...u){const h=new rr([]),f=await c._def.args.parseAsync(u,i).catch(w=>{throw h.addIssue(r(u,w)),h}),g=await Reflect.apply(a,this,f);return await c._def.returns._def.type.parseAsync(g,i).catch(w=>{throw h.addIssue(s(g,w)),h})})}else{const c=this;return In(function(...u){const h=c._def.args.safeParse(u,i);if(!h.success)throw new rr([r(u,h.error)]);const f=Reflect.apply(a,this,h.data),g=c._def.returns.safeParse(f,i);if(!g.success)throw new rr([s(f,g.error)]);return g.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ia({...this._def,args:ls.create(e).rest(Ui.create())})}returns(e){return new ia({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new ia({args:e||ls.create([]).rest(Ui.create()),returns:t||Ui.create(),typeName:je.ZodFunction,...Ge(r)})}}class Jl extends Xe{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Jl.create=(n,e)=>new Jl({getter:n,typeName:je.ZodLazy,...Ge(e)});class ec extends Xe{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return pe(t,{received:t.data,code:le.invalid_literal,expected:this._def.value}),Le}return{status:"valid",value:e.data}}get value(){return this._def.value}}ec.create=(n,e)=>new ec({value:n,typeName:je.ZodLiteral,...Ge(e)});function KA(n,e){return new yi({values:n,typeName:je.ZodEnum,...Ge(e)})}class yi extends Xe{constructor(){super(...arguments),Pl.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return pe(t,{expected:nt.joinValues(r),received:t.parsedType,code:le.invalid_type}),Le}if(Md(this,Pl)||GA(this,Pl,new Set(this._def.values)),!Md(this,Pl).has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return pe(t,{received:t.data,code:le.invalid_enum_value,options:r}),Le}return In(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return yi.create(e,{...this._def,...t})}exclude(e,t=this._def){return yi.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}}Pl=new WeakMap;yi.create=KA;class tc extends Xe{constructor(){super(...arguments),Nl.set(this,void 0)}_parse(e){const t=nt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ye.string&&r.parsedType!==ye.number){const s=nt.objectValues(t);return pe(r,{expected:nt.joinValues(s),received:r.parsedType,code:le.invalid_type}),Le}if(Md(this,Nl)||GA(this,Nl,new Set(nt.getValidEnumValues(this._def.values))),!Md(this,Nl).has(e.data)){const s=nt.objectValues(t);return pe(r,{received:r.data,code:le.invalid_enum_value,options:s}),Le}return In(e.data)}get enum(){return this._def.values}}Nl=new WeakMap;tc.create=(n,e)=>new tc({values:n,typeName:je.ZodNativeEnum,...Ge(e)});class ya extends Xe{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ye.promise&&t.common.async===!1)return pe(t,{code:le.invalid_type,expected:ye.promise,received:t.parsedType}),Le;const r=t.parsedType===ye.promise?t.data:Promise.resolve(t.data);return In(r.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}ya.create=(n,e)=>new ya({type:n,typeName:je.ZodPromise,...Ge(e)});class Or extends Xe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===je.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:a=>{pe(r,a),a.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const a=s.transform(r.data,i);if(r.common.async)return Promise.resolve(a).then(async c=>{if(t.value==="aborted")return Le;const u=await this._def.schema._parseAsync({data:c,path:r.path,parent:r});return u.status==="aborted"?Le:u.status==="dirty"||t.value==="dirty"?Jo(u.value):u});{if(t.value==="aborted")return Le;const c=this._def.schema._parseSync({data:a,path:r.path,parent:r});return c.status==="aborted"?Le:c.status==="dirty"||t.value==="dirty"?Jo(c.value):c}}if(s.type==="refinement"){const a=c=>{const u=s.refinement(c,i);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return c.status==="aborted"?Le:(c.status==="dirty"&&t.dirty(),a(c.value),{status:t.value,value:c.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>c.status==="aborted"?Le:(c.status==="dirty"&&t.dirty(),a(c.value).then(()=>({status:t.value,value:c.value}))))}if(s.type==="transform")if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Ji(a))return a;const c=s.transform(a.value,i);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:c}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>Ji(a)?Promise.resolve(s.transform(a.value,i)).then(c=>({status:t.value,value:c})):a);nt.assertNever(s)}}Or.create=(n,e,t)=>new Or({schema:n,typeName:je.ZodEffects,effect:e,...Ge(t)});Or.createWithPreprocess=(n,e,t)=>new Or({schema:e,effect:{type:"preprocess",transform:n},typeName:je.ZodEffects,...Ge(t)});class ss extends Xe{_parse(e){return this._getType(e)===ye.undefined?In(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ss.create=(n,e)=>new ss({innerType:n,typeName:je.ZodOptional,...Ge(e)});class vi extends Xe{_parse(e){return this._getType(e)===ye.null?In(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}vi.create=(n,e)=>new vi({innerType:n,typeName:je.ZodNullable,...Ge(e)});class nc extends Xe{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===ye.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}nc.create=(n,e)=>new nc({innerType:n,typeName:je.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ge(e)});class rc extends Xe{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Gl(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new rr(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new rr(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}rc.create=(n,e)=>new rc({innerType:n,typeName:je.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ge(e)});class Ld extends Xe{_parse(e){if(this._getType(e)!==ye.nan){const r=this._getOrReturnCtx(e);return pe(r,{code:le.invalid_type,expected:ye.nan,received:r.parsedType}),Le}return{status:"valid",value:e.data}}}Ld.create=n=>new Ld({typeName:je.ZodNaN,...Ge(n)});const BO=Symbol("zod_brand");class ty extends Xe{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class wc extends Xe{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Le:i.status==="dirty"?(t.dirty(),Jo(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Le:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,t){return new wc({in:e,out:t,typeName:je.ZodPipeline})}}class sc extends Xe{_parse(e){const t=this._def.innerType._parse(e),r=s=>(Ji(s)&&(s.value=Object.freeze(s.value)),s);return Gl(t)?t.then(s=>r(s)):r(t)}unwrap(){return this._def.innerType}}sc.create=(n,e)=>new sc({innerType:n,typeName:je.ZodReadonly,...Ge(e)});function $b(n,e){const t=typeof n=="function"?n(e):typeof n=="string"?{message:n}:n;return typeof t=="string"?{message:t}:t}function QA(n,e={},t){return n?ga.create().superRefine((r,s)=>{var i,a;const c=n(r);if(c instanceof Promise)return c.then(u=>{var h,f;if(!u){const g=$b(e,r),y=(f=(h=g.fatal)!==null&&h!==void 0?h:t)!==null&&f!==void 0?f:!0;s.addIssue({code:"custom",...g,fatal:y})}});if(!c){const u=$b(e,r),h=(a=(i=u.fatal)!==null&&i!==void 0?i:t)!==null&&a!==void 0?a:!0;s.addIssue({code:"custom",...u,fatal:h})}}):ga.create()}const $O={object:Rt.lazycreate};var je;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(je||(je={}));const zO=(n,e={message:`Input not instance of ${n.name}`})=>QA(t=>t instanceof n,e),ZA=Dr.create,JA=mi.create,VO=Ld.create,UO=gi.create,eC=ql.create,HO=eo.create,WO=Id.create,GO=Yl.create,qO=Xl.create,YO=ga.create,XO=Ui.create,KO=Ms.create,QO=jd.create,ZO=Mr.create,JO=Rt.create,eL=Rt.strictCreate,tL=Kl.create,nL=wh.create,rL=Ql.create,sL=ls.create,iL=Zl.create,oL=Od.create,aL=to.create,lL=ia.create,cL=Jl.create,uL=ec.create,dL=yi.create,hL=tc.create,fL=ya.create,zb=Or.create,pL=ss.create,mL=vi.create,gL=Or.createWithPreprocess,yL=wc.create,vL=()=>ZA().optional(),xL=()=>JA().optional(),wL=()=>eC().optional(),bL={string:n=>Dr.create({...n,coerce:!0}),number:n=>mi.create({...n,coerce:!0}),boolean:n=>ql.create({...n,coerce:!0}),bigint:n=>gi.create({...n,coerce:!0}),date:n=>eo.create({...n,coerce:!0})},_L=Le;var Rn=Object.freeze({__proto__:null,defaultErrorMap:ma,setErrorMap:gO,getErrorMap:Rd,makeIssue:Dd,EMPTY_PATH:yO,addIssueToContext:pe,ParseStatus:bn,INVALID:Le,DIRTY:Jo,OK:In,isAborted:Vm,isDirty:Um,isValid:Ji,isAsync:Gl,get util(){return nt},get objectUtil(){return zm},ZodParsedType:ye,getParsedType:ks,ZodType:Xe,datetimeRegex:XA,ZodString:Dr,ZodNumber:mi,ZodBigInt:gi,ZodBoolean:ql,ZodDate:eo,ZodSymbol:Id,ZodUndefined:Yl,ZodNull:Xl,ZodAny:ga,ZodUnknown:Ui,ZodNever:Ms,ZodVoid:jd,ZodArray:Mr,ZodObject:Rt,ZodUnion:Kl,ZodDiscriminatedUnion:wh,ZodIntersection:Ql,ZodTuple:ls,ZodRecord:Zl,ZodMap:Od,ZodSet:to,ZodFunction:ia,ZodLazy:Jl,ZodLiteral:ec,ZodEnum:yi,ZodNativeEnum:tc,ZodPromise:ya,ZodEffects:Or,ZodTransformer:Or,ZodOptional:ss,ZodNullable:vi,ZodDefault:nc,ZodCatch:rc,ZodNaN:Ld,BRAND:BO,ZodBranded:ty,ZodPipeline:wc,ZodReadonly:sc,custom:QA,Schema:Xe,ZodSchema:Xe,late:$O,get ZodFirstPartyTypeKind(){return je},coerce:bL,any:YO,array:ZO,bigint:UO,boolean:eC,date:HO,discriminatedUnion:nL,effect:zb,enum:dL,function:lL,instanceof:zO,intersection:rL,lazy:cL,literal:uL,map:oL,nan:VO,nativeEnum:hL,never:KO,null:qO,nullable:mL,number:JA,object:JO,oboolean:wL,onumber:xL,optional:pL,ostring:vL,pipeline:yL,preprocess:gL,promise:fL,record:iL,set:aL,strictObject:eL,string:ZA,symbol:WO,transformer:zb,tuple:sL,undefined:GO,union:tL,unknown:XO,void:QO,NEVER:_L,ZodIssueCode:le,quotelessJson:mO,ZodError:rr});const SL=Gj,tC=C.createContext({}),_l=({...n})=>p.jsx(tC.Provider,{value:{name:n.name},children:p.jsx(Kj,{...n})}),bh=()=>{const n=C.useContext(tC),e=C.useContext(nC),{getFieldState:t,formState:r}=xh(),s=t(n.name,r);if(!n)throw new Error("useFormField should be used within <FormField>");const{id:i}=e;return{id:i,name:n.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...s}},nC=C.createContext({}),qo=C.forwardRef(({className:n,...e},t)=>{const r=C.useId();return p.jsx(nC.Provider,{value:{id:r},children:p.jsx("div",{ref:t,className:Fe("space-y-2",n),...e})})});qo.displayName="FormItem";const Yo=C.forwardRef(({className:n,...e},t)=>{const{error:r,formItemId:s}=bh();return p.jsx(oi,{ref:t,className:Fe(r&&"text-destructive",n),htmlFor:s,...e})});Yo.displayName="FormLabel";const Xo=C.forwardRef(({...n},e)=>{const{error:t,formItemId:r,formDescriptionId:s,formMessageId:i}=bh();return p.jsx(M0,{ref:e,id:r,"aria-describedby":t?`${s} ${i}`:`${s}`,"aria-invalid":!!t,...n})});Xo.displayName="FormControl";const AL=C.forwardRef(({className:n,...e},t)=>{const{formDescriptionId:r}=bh();return p.jsx("p",{ref:t,id:r,className:Fe("text-sm text-muted-foreground",n),...e})});AL.displayName="FormDescription";const Ko=C.forwardRef(({className:n,children:e,...t},r)=>{const{error:s,formMessageId:i}=bh(),a=s?String(s?.message??""):e;return a?p.jsx("p",{ref:r,id:i,className:Fe("text-sm font-medium text-destructive",n),...t,children:a}):null});Ko.displayName="FormMessage";function st(n){const e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function ir(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}function Pn(n,e){const t=st(n);return isNaN(e)?ir(n,NaN):(e&&t.setDate(t.getDate()+e),t)}function Lr(n,e){const t=st(n);if(isNaN(e))return ir(n,NaN);if(!e)return t;const r=t.getDate(),s=ir(n,t.getTime());s.setMonth(t.getMonth()+e+1,0);const i=s.getDate();return r>=i?s:(t.setFullYear(s.getFullYear(),s.getMonth(),r),t)}const ny=6048e5,CL=864e5;let EL={};function bc(){return EL}function cs(n,e){const t=bc(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,s=st(n),i=s.getDay(),a=(i<r?7:0)+i-r;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function no(n){return cs(n,{weekStartsOn:1})}function rC(n){const e=st(n),t=e.getFullYear(),r=ir(n,0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);const s=no(r),i=ir(n,0);i.setFullYear(t,0,4),i.setHours(0,0,0,0);const a=no(i);return e.getTime()>=s.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}function va(n){const e=st(n);return e.setHours(0,0,0,0),e}function Fd(n){const e=st(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function ts(n,e){const t=va(n),r=va(e),s=+t-Fd(t),i=+r-Fd(r);return Math.round((s-i)/CL)}function TL(n){const e=rC(n),t=ir(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),no(t)}function Wm(n,e){const t=e*7;return Pn(n,t)}function kL(n,e){return Lr(n,e*12)}function PL(n){let e;return n.forEach(function(t){const r=st(t);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function NL(n){let e;return n.forEach(t=>{const r=st(t);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function Hn(n,e){const t=va(n),r=va(e);return+t==+r}function ry(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function RL(n){if(!ry(n)&&typeof n!="number")return!1;const e=st(n);return!isNaN(Number(e))}function ic(n,e){const t=st(n),r=st(e),s=t.getFullYear()-r.getFullYear(),i=t.getMonth()-r.getMonth();return s*12+i}function DL(n,e,t){const r=cs(n,t),s=cs(e,t),i=+r-Fd(r),a=+s-Fd(s);return Math.round((i-a)/ny)}function sy(n){const e=st(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}function Wn(n){const e=st(n);return e.setDate(1),e.setHours(0,0,0,0),e}function sC(n){const e=st(n),t=ir(n,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}function iy(n,e){const t=bc(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,s=st(n),i=s.getDay(),a=(i<r?-7:0)+6-(i-r);return s.setDate(s.getDate()+a),s.setHours(23,59,59,999),s}function iC(n){return iy(n,{weekStartsOn:1})}const ML={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},IL=(n,e,t)=>{let r;const s=ML[n];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function qp(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const jL={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},OL={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},LL={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},FL={date:qp({formats:jL,defaultWidth:"full"}),time:qp({formats:OL,defaultWidth:"full"}),dateTime:qp({formats:LL,defaultWidth:"full"})},BL={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},$L=(n,e,t,r)=>BL[n];function Sl(n){return(e,t)=>{const r=t?.context?String(t.context):"standalone";let s;if(r==="formatting"&&n.formattingValues){const a=n.defaultFormattingWidth||n.defaultWidth,c=t?.width?String(t.width):a;s=n.formattingValues[c]||n.formattingValues[a]}else{const a=n.defaultWidth,c=t?.width?String(t.width):n.defaultWidth;s=n.values[c]||n.values[a]}const i=n.argumentCallback?n.argumentCallback(e):e;return s[i]}}const zL={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},VL={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},UL={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},HL={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},WL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},GL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},qL=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},YL={ordinalNumber:qL,era:Sl({values:zL,defaultWidth:"wide"}),quarter:Sl({values:VL,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Sl({values:UL,defaultWidth:"wide"}),day:Sl({values:HL,defaultWidth:"wide"}),dayPeriod:Sl({values:WL,defaultWidth:"wide",formattingValues:GL,defaultFormattingWidth:"wide"})};function Al(n){return(e,t={})=>{const r=t.width,s=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],c=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],u=Array.isArray(c)?KL(c,g=>g.test(a)):XL(c,g=>g.test(a));let h;h=n.valueCallback?n.valueCallback(u):u,h=t.valueCallback?t.valueCallback(h):h;const f=e.slice(a.length);return{value:h,rest:f}}}function XL(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function KL(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function QL(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const s=r[0],i=e.match(n.parsePattern);if(!i)return null;let a=n.valueCallback?n.valueCallback(i[0]):i[0];a=t.valueCallback?t.valueCallback(a):a;const c=e.slice(s.length);return{value:a,rest:c}}}const ZL=/^(\d+)(th|st|nd|rd)?/i,JL=/\d+/i,eF={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},tF={any:[/^b/i,/^(a|c)/i]},nF={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},rF={any:[/1/i,/2/i,/3/i,/4/i]},sF={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},iF={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},oF={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},aF={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},lF={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},cF={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},uF={ordinalNumber:QL({matchPattern:ZL,parsePattern:JL,valueCallback:n=>parseInt(n,10)}),era:Al({matchPatterns:eF,defaultMatchWidth:"wide",parsePatterns:tF,defaultParseWidth:"any"}),quarter:Al({matchPatterns:nF,defaultMatchWidth:"wide",parsePatterns:rF,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Al({matchPatterns:sF,defaultMatchWidth:"wide",parsePatterns:iF,defaultParseWidth:"any"}),day:Al({matchPatterns:oF,defaultMatchWidth:"wide",parsePatterns:aF,defaultParseWidth:"any"}),dayPeriod:Al({matchPatterns:lF,defaultMatchWidth:"any",parsePatterns:cF,defaultParseWidth:"any"})},oC={code:"en-US",formatDistance:IL,formatLong:FL,formatRelative:$L,localize:YL,match:uF,options:{weekStartsOn:0,firstWeekContainsDate:1}};function dF(n){const e=st(n);return ts(e,sC(e))+1}function aC(n){const e=st(n),t=+no(e)-+TL(e);return Math.round(t/ny)+1}function lC(n,e){const t=st(n),r=t.getFullYear(),s=bc(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,a=ir(n,0);a.setFullYear(r+1,0,i),a.setHours(0,0,0,0);const c=cs(a,e),u=ir(n,0);u.setFullYear(r,0,i),u.setHours(0,0,0,0);const h=cs(u,e);return t.getTime()>=c.getTime()?r+1:t.getTime()>=h.getTime()?r:r-1}function hF(n,e){const t=bc(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,s=lC(n,e),i=ir(n,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),cs(i,e)}function cC(n,e){const t=st(n),r=+cs(t,e)-+hF(t,e);return Math.round(r/ny)+1}function ft(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const si={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return ft(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):ft(t+1,2)},d(n,e){return ft(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return ft(n.getHours()%12||12,e.length)},H(n,e){return ft(n.getHours(),e.length)},m(n,e){return ft(n.getMinutes(),e.length)},s(n,e){return ft(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),s=Math.trunc(r*Math.pow(10,t-3));return ft(s,e.length)}},Vo={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Vb={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),s=r>0?r:1-r;return t.ordinalNumber(s,{unit:"year"})}return si.y(n,e)},Y:function(n,e,t,r){const s=lC(n,r),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return ft(a,2)}return e==="Yo"?t.ordinalNumber(i,{unit:"year"}):ft(i,e.length)},R:function(n,e){const t=rC(n);return ft(t,e.length)},u:function(n,e){const t=n.getFullYear();return ft(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return ft(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return ft(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return si.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return ft(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const s=cC(n,r);return e==="wo"?t.ordinalNumber(s,{unit:"week"}):ft(s,e.length)},I:function(n,e,t){const r=aC(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):ft(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):si.d(n,e)},D:function(n,e,t){const r=dF(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):ft(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const s=n.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return ft(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const s=n.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return ft(i,e.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return ft(s,e.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const s=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let s;switch(r===12?s=Vo.noon:r===0?s=Vo.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let s;switch(r>=17?s=Vo.evening:r>=12?s=Vo.afternoon:r>=4?s=Vo.morning:s=Vo.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return si.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):si.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):ft(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):ft(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):si.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):si.s(n,e)},S:function(n,e){return si.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Hb(r);case"XXXX":case"XX":return ji(r);case"XXXXX":case"XXX":default:return ji(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return Hb(r);case"xxxx":case"xx":return ji(r);case"xxxxx":case"xxx":default:return ji(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Ub(r,":");case"OOOO":default:return"GMT"+ji(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Ub(r,":");case"zzzz":default:return"GMT"+ji(r,":")}},t:function(n,e,t){const r=Math.trunc(n.getTime()/1e3);return ft(r,e.length)},T:function(n,e,t){const r=n.getTime();return ft(r,e.length)}};function Ub(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),s=Math.trunc(r/60),i=r%60;return i===0?t+String(s):t+String(s)+e+ft(i,2)}function Hb(n,e){return n%60===0?(n>0?"-":"+")+ft(Math.abs(n)/60,2):ji(n,e)}function ji(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),s=ft(Math.trunc(r/60),2),i=ft(r%60,2);return t+s+e+i}const Wb=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},uC=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},fF=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],s=t[2];if(!s)return Wb(n,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",Wb(r,e)).replace("{{time}}",uC(s,e))},pF={p:uC,P:fF},mF=/^D+$/,gF=/^Y+$/,yF=["D","DD","YY","YYYY"];function vF(n){return mF.test(n)}function xF(n){return gF.test(n)}function wF(n,e,t){const r=bF(n,e,t);if(console.warn(r),yF.includes(n))throw new RangeError(r)}function bF(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const _F=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,SF=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,AF=/^'([^]*?)'?$/,CF=/''/g,EF=/[a-zA-Z]/;function sr(n,e,t){const r=bc(),s=t?.locale??r.locale??oC,i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,c=st(n);if(!RL(c))throw new RangeError("Invalid time value");let u=e.match(SF).map(f=>{const g=f[0];if(g==="p"||g==="P"){const y=pF[g];return y(f,s.formatLong)}return f}).join("").match(_F).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const g=f[0];if(g==="'")return{isToken:!1,value:TF(f)};if(Vb[g])return{isToken:!0,value:f};if(g.match(EF))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:f}});s.localize.preprocessor&&(u=s.localize.preprocessor(c,u));const h={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return u.map(f=>{if(!f.isToken)return f.value;const g=f.value;(!t?.useAdditionalWeekYearTokens&&xF(g)||!t?.useAdditionalDayOfYearTokens&&vF(g))&&wF(g,e,String(n));const y=Vb[g[0]];return y(c,g,s.localize,h)}).join("")}function TF(n){const e=n.match(AF);return e?e[1].replace(CF,"'"):n}function kF(n){const e=st(n),t=e.getFullYear(),r=e.getMonth(),s=ir(n,0);return s.setFullYear(t,r+1,0),s.setHours(0,0,0,0),s.getDate()}function PF(n){return Math.trunc(+st(n)/1e3)}function NF(n){const e=st(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(0,0,0,0),e}function RF(n,e){return DL(NF(n),Wn(n),e)+1}function Gm(n,e){const t=st(n),r=st(e);return t.getTime()>r.getTime()}function dC(n,e){const t=st(n),r=st(e);return+t<+r}function oy(n,e){const t=st(n),r=st(e);return t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth()}function DF(n,e){const t=st(n),r=st(e);return t.getFullYear()===r.getFullYear()}function Yp(n,e){return Pn(n,-e)}function Xp(n,e){const t=st(n),r=t.getFullYear(),s=t.getDate(),i=ir(n,0);i.setFullYear(r,e,15),i.setHours(0,0,0,0);const a=kF(i);return t.setMonth(e,Math.min(s,a)),t}function Gb(n,e){const t=st(n);return isNaN(+t)?ir(n,NaN):(t.setFullYear(e),t)}var Oe=function(){return Oe=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Oe.apply(this,arguments)};function MF(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function hC(n,e,t){for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}function _c(n){return n.mode==="multiple"}function Sc(n){return n.mode==="range"}function _h(n){return n.mode==="single"}var IF={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function jF(n,e){return sr(n,"LLLL y",e)}function OF(n,e){return sr(n,"d",e)}function LF(n,e){return sr(n,"LLLL",e)}function FF(n){return"".concat(n)}function BF(n,e){return sr(n,"cccccc",e)}function $F(n,e){return sr(n,"yyyy",e)}var zF=Object.freeze({__proto__:null,formatCaption:jF,formatDay:OF,formatMonthCaption:LF,formatWeekNumber:FF,formatWeekdayName:BF,formatYearCaption:$F}),VF=function(n,e,t){return sr(n,"do MMMM (EEEE)",t)},UF=function(){return"Month: "},HF=function(){return"Go to next month"},WF=function(){return"Go to previous month"},GF=function(n,e){return sr(n,"cccc",e)},qF=function(n){return"Week n. ".concat(n)},YF=function(){return"Year: "},XF=Object.freeze({__proto__:null,labelDay:VF,labelMonthDropdown:UF,labelNext:HF,labelPrevious:WF,labelWeekNumber:qF,labelWeekday:GF,labelYearDropdown:YF});function KF(){var n="buttons",e=IF,t=oC,r={},s={},i=1,a={},c=new Date;return{captionLayout:n,classNames:e,formatters:zF,labels:XF,locale:t,modifiersClassNames:r,modifiers:s,numberOfMonths:i,styles:a,today:c,mode:"default"}}function QF(n){var e=n.fromYear,t=n.toYear,r=n.fromMonth,s=n.toMonth,i=n.fromDate,a=n.toDate;return r?i=Wn(r):e&&(i=new Date(e,0,1)),s?a=sy(s):t&&(a=new Date(t,11,31)),{fromDate:i?va(i):void 0,toDate:a?va(a):void 0}}var fC=C.createContext(void 0);function ZF(n){var e,t=n.initialProps,r=KF(),s=QF(t),i=s.fromDate,a=s.toDate,c=(e=t.captionLayout)!==null&&e!==void 0?e:r.captionLayout;c!=="buttons"&&(!i||!a)&&(c="buttons");var u;(_h(t)||_c(t)||Sc(t))&&(u=t.onSelect);var h=Oe(Oe(Oe({},r),t),{captionLayout:c,classNames:Oe(Oe({},r.classNames),t.classNames),components:Oe({},t.components),formatters:Oe(Oe({},r.formatters),t.formatters),fromDate:i,labels:Oe(Oe({},r.labels),t.labels),mode:t.mode||r.mode,modifiers:Oe(Oe({},r.modifiers),t.modifiers),modifiersClassNames:Oe(Oe({},r.modifiersClassNames),t.modifiersClassNames),onSelect:u,styles:Oe(Oe({},r.styles),t.styles),toDate:a});return p.jsx(fC.Provider,{value:h,children:n.children})}function wt(){var n=C.useContext(fC);if(!n)throw new Error("useDayPicker must be used within a DayPickerProvider.");return n}function pC(n){var e=wt(),t=e.locale,r=e.classNames,s=e.styles,i=e.formatters.formatCaption;return p.jsx("div",{className:r.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:n.id,children:i(n.displayMonth,{locale:t})})}function JF(n){return p.jsx("svg",Oe({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},n,{children:p.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function mC(n){var e,t,r=n.onChange,s=n.value,i=n.children,a=n.caption,c=n.className,u=n.style,h=wt(),f=(t=(e=h.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&t!==void 0?t:JF;return p.jsxs("div",{className:c,style:u,children:[p.jsx("span",{className:h.classNames.vhidden,children:n["aria-label"]}),p.jsx("select",{name:n.name,"aria-label":n["aria-label"],className:h.classNames.dropdown,style:h.styles.dropdown,value:s,onChange:r,children:i}),p.jsxs("div",{className:h.classNames.caption_label,style:h.styles.caption_label,"aria-hidden":"true",children:[a,p.jsx(f,{className:h.classNames.dropdown_icon,style:h.styles.dropdown_icon})]})]})}function eB(n){var e,t=wt(),r=t.fromDate,s=t.toDate,i=t.styles,a=t.locale,c=t.formatters.formatMonthCaption,u=t.classNames,h=t.components,f=t.labels.labelMonthDropdown;if(!r)return p.jsx(p.Fragment,{});if(!s)return p.jsx(p.Fragment,{});var g=[];if(DF(r,s))for(var y=Wn(r),w=r.getMonth();w<=s.getMonth();w++)g.push(Xp(y,w));else for(var y=Wn(new Date),w=0;w<=11;w++)g.push(Xp(y,w));var S=function(_){var A=Number(_.target.value),E=Xp(Wn(n.displayMonth),A);n.onChange(E)},v=(e=h?.Dropdown)!==null&&e!==void 0?e:mC;return p.jsx(v,{name:"months","aria-label":f(),className:u.dropdown_month,style:i.dropdown_month,onChange:S,value:n.displayMonth.getMonth(),caption:c(n.displayMonth,{locale:a}),children:g.map(function(_){return p.jsx("option",{value:_.getMonth(),children:c(_,{locale:a})},_.getMonth())})})}function tB(n){var e,t=n.displayMonth,r=wt(),s=r.fromDate,i=r.toDate,a=r.locale,c=r.styles,u=r.classNames,h=r.components,f=r.formatters.formatYearCaption,g=r.labels.labelYearDropdown,y=[];if(!s)return p.jsx(p.Fragment,{});if(!i)return p.jsx(p.Fragment,{});for(var w=s.getFullYear(),S=i.getFullYear(),v=w;v<=S;v++)y.push(Gb(sC(new Date),v));var _=function(E){var k=Gb(Wn(t),Number(E.target.value));n.onChange(k)},A=(e=h?.Dropdown)!==null&&e!==void 0?e:mC;return p.jsx(A,{name:"years","aria-label":g(),className:u.dropdown_year,style:c.dropdown_year,onChange:_,value:t.getFullYear(),caption:f(t,{locale:a}),children:y.map(function(E){return p.jsx("option",{value:E.getFullYear(),children:f(E,{locale:a})},E.getFullYear())})})}function nB(n,e){var t=C.useState(n),r=t[0],s=t[1],i=e===void 0?r:e;return[i,s]}function rB(n){var e=n.month,t=n.defaultMonth,r=n.today,s=e||t||r||new Date,i=n.toDate,a=n.fromDate,c=n.numberOfMonths,u=c===void 0?1:c;if(i&&ic(i,s)<0){var h=-1*(u-1);s=Lr(i,h)}return a&&ic(s,a)<0&&(s=a),Wn(s)}function sB(){var n=wt(),e=rB(n),t=nB(e,n.month),r=t[0],s=t[1],i=function(a){var c;if(!n.disableNavigation){var u=Wn(a);s(u),(c=n.onMonthChange)===null||c===void 0||c.call(n,u)}};return[r,i]}function iB(n,e){for(var t=e.reverseMonths,r=e.numberOfMonths,s=Wn(n),i=Wn(Lr(s,r)),a=ic(i,s),c=[],u=0;u<a;u++){var h=Lr(s,u);c.push(h)}return t&&(c=c.reverse()),c}function oB(n,e){if(!e.disableNavigation){var t=e.toDate,r=e.pagedNavigation,s=e.numberOfMonths,i=s===void 0?1:s,a=r?i:1,c=Wn(n);if(!t)return Lr(c,a);var u=ic(t,n);if(!(u<i))return Lr(c,a)}}function aB(n,e){if(!e.disableNavigation){var t=e.fromDate,r=e.pagedNavigation,s=e.numberOfMonths,i=s===void 0?1:s,a=r?i:1,c=Wn(n);if(!t)return Lr(c,-a);var u=ic(c,t);if(!(u<=0))return Lr(c,-a)}}var gC=C.createContext(void 0);function lB(n){var e=wt(),t=sB(),r=t[0],s=t[1],i=iB(r,e),a=oB(r,e),c=aB(r,e),u=function(g){return i.some(function(y){return oy(g,y)})},h=function(g,y){u(g)||(y&&dC(g,y)?s(Lr(g,1+e.numberOfMonths*-1)):s(g))},f={currentMonth:r,displayMonths:i,goToMonth:s,goToDate:h,previousMonth:c,nextMonth:a,isDateDisplayed:u};return p.jsx(gC.Provider,{value:f,children:n.children})}function Ac(){var n=C.useContext(gC);if(!n)throw new Error("useNavigation must be used within a NavigationProvider");return n}function qb(n){var e,t=wt(),r=t.classNames,s=t.styles,i=t.components,a=Ac().goToMonth,c=function(f){a(Lr(f,n.displayIndex?-n.displayIndex:0))},u=(e=i?.CaptionLabel)!==null&&e!==void 0?e:pC,h=p.jsx(u,{id:n.id,displayMonth:n.displayMonth});return p.jsxs("div",{className:r.caption_dropdowns,style:s.caption_dropdowns,children:[p.jsx("div",{className:r.vhidden,children:h}),p.jsx(eB,{onChange:c,displayMonth:n.displayMonth}),p.jsx(tB,{onChange:c,displayMonth:n.displayMonth})]})}function cB(n){return p.jsx("svg",Oe({width:"16px",height:"16px",viewBox:"0 0 120 120"},n,{children:p.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function uB(n){return p.jsx("svg",Oe({width:"16px",height:"16px",viewBox:"0 0 120 120"},n,{children:p.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Bd=C.forwardRef(function(n,e){var t=wt(),r=t.classNames,s=t.styles,i=[r.button_reset,r.button];n.className&&i.push(n.className);var a=i.join(" "),c=Oe(Oe({},s.button_reset),s.button);return n.style&&Object.assign(c,n.style),p.jsx("button",Oe({},n,{ref:e,type:"button",className:a,style:c}))});function dB(n){var e,t,r=wt(),s=r.dir,i=r.locale,a=r.classNames,c=r.styles,u=r.labels,h=u.labelPrevious,f=u.labelNext,g=r.components;if(!n.nextMonth&&!n.previousMonth)return p.jsx(p.Fragment,{});var y=h(n.previousMonth,{locale:i}),w=[a.nav_button,a.nav_button_previous].join(" "),S=f(n.nextMonth,{locale:i}),v=[a.nav_button,a.nav_button_next].join(" "),_=(e=g?.IconRight)!==null&&e!==void 0?e:uB,A=(t=g?.IconLeft)!==null&&t!==void 0?t:cB;return p.jsxs("div",{className:a.nav,style:c.nav,children:[!n.hidePrevious&&p.jsx(Bd,{name:"previous-month","aria-label":y,className:w,style:c.nav_button_previous,disabled:!n.previousMonth,onClick:n.onPreviousClick,children:s==="rtl"?p.jsx(_,{className:a.nav_icon,style:c.nav_icon}):p.jsx(A,{className:a.nav_icon,style:c.nav_icon})}),!n.hideNext&&p.jsx(Bd,{name:"next-month","aria-label":S,className:v,style:c.nav_button_next,disabled:!n.nextMonth,onClick:n.onNextClick,children:s==="rtl"?p.jsx(A,{className:a.nav_icon,style:c.nav_icon}):p.jsx(_,{className:a.nav_icon,style:c.nav_icon})})]})}function Yb(n){var e=wt().numberOfMonths,t=Ac(),r=t.previousMonth,s=t.nextMonth,i=t.goToMonth,a=t.displayMonths,c=a.findIndex(function(S){return oy(n.displayMonth,S)}),u=c===0,h=c===a.length-1,f=e>1&&(u||!h),g=e>1&&(h||!u),y=function(){r&&i(r)},w=function(){s&&i(s)};return p.jsx(dB,{displayMonth:n.displayMonth,hideNext:f,hidePrevious:g,nextMonth:s,previousMonth:r,onPreviousClick:y,onNextClick:w})}function hB(n){var e,t=wt(),r=t.classNames,s=t.disableNavigation,i=t.styles,a=t.captionLayout,c=t.components,u=(e=c?.CaptionLabel)!==null&&e!==void 0?e:pC,h;return s?h=p.jsx(u,{id:n.id,displayMonth:n.displayMonth}):a==="dropdown"?h=p.jsx(qb,{displayMonth:n.displayMonth,id:n.id}):a==="dropdown-buttons"?h=p.jsxs(p.Fragment,{children:[p.jsx(qb,{displayMonth:n.displayMonth,displayIndex:n.displayIndex,id:n.id}),p.jsx(Yb,{displayMonth:n.displayMonth,displayIndex:n.displayIndex,id:n.id})]}):h=p.jsxs(p.Fragment,{children:[p.jsx(u,{id:n.id,displayMonth:n.displayMonth,displayIndex:n.displayIndex}),p.jsx(Yb,{displayMonth:n.displayMonth,id:n.id})]}),p.jsx("div",{className:r.caption,style:i.caption,children:h})}function fB(n){var e=wt(),t=e.footer,r=e.styles,s=e.classNames.tfoot;return t?p.jsx("tfoot",{className:s,style:r.tfoot,children:p.jsx("tr",{children:p.jsx("td",{colSpan:8,children:t})})}):p.jsx(p.Fragment,{})}function pB(n,e,t){for(var r=t?no(new Date):cs(new Date,{locale:n,weekStartsOn:e}),s=[],i=0;i<7;i++){var a=Pn(r,i);s.push(a)}return s}function mB(){var n=wt(),e=n.classNames,t=n.styles,r=n.showWeekNumber,s=n.locale,i=n.weekStartsOn,a=n.ISOWeek,c=n.formatters.formatWeekdayName,u=n.labels.labelWeekday,h=pB(s,i,a);return p.jsxs("tr",{style:t.head_row,className:e.head_row,children:[r&&p.jsx("td",{style:t.head_cell,className:e.head_cell}),h.map(function(f,g){return p.jsx("th",{scope:"col",className:e.head_cell,style:t.head_cell,"aria-label":u(f,{locale:s}),children:c(f,{locale:s})},g)})]})}function gB(){var n,e=wt(),t=e.classNames,r=e.styles,s=e.components,i=(n=s?.HeadRow)!==null&&n!==void 0?n:mB;return p.jsx("thead",{style:r.head,className:t.head,children:p.jsx(i,{})})}function yB(n){var e=wt(),t=e.locale,r=e.formatters.formatDay;return p.jsx(p.Fragment,{children:r(n.date,{locale:t})})}var ay=C.createContext(void 0);function vB(n){if(!_c(n.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return p.jsx(ay.Provider,{value:e,children:n.children})}return p.jsx(xB,{initialProps:n.initialProps,children:n.children})}function xB(n){var e=n.initialProps,t=n.children,r=e.selected,s=e.min,i=e.max,a=function(h,f,g){var y,w;(y=e.onDayClick)===null||y===void 0||y.call(e,h,f,g);var S=!!(f.selected&&s&&r?.length===s);if(!S){var v=!!(!f.selected&&i&&r?.length===i);if(!v){var _=r?hC([],r):[];if(f.selected){var A=_.findIndex(function(E){return Hn(h,E)});_.splice(A,1)}else _.push(h);(w=e.onSelect)===null||w===void 0||w.call(e,_,h,f,g)}}},c={disabled:[]};r&&c.disabled.push(function(h){var f=i&&r.length>i-1,g=r.some(function(y){return Hn(y,h)});return!!(f&&!g)});var u={selected:r,onDayClick:a,modifiers:c};return p.jsx(ay.Provider,{value:u,children:t})}function ly(){var n=C.useContext(ay);if(!n)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return n}function wB(n,e){var t=e||{},r=t.from,s=t.to;return r&&s?Hn(s,n)&&Hn(r,n)?void 0:Hn(s,n)?{from:s,to:void 0}:Hn(r,n)?void 0:Gm(r,n)?{from:n,to:s}:{from:r,to:n}:s?Gm(n,s)?{from:s,to:n}:{from:n,to:s}:r?dC(n,r)?{from:n,to:r}:{from:r,to:n}:{from:n,to:void 0}}var cy=C.createContext(void 0);function bB(n){if(!Sc(n.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return p.jsx(cy.Provider,{value:e,children:n.children})}return p.jsx(_B,{initialProps:n.initialProps,children:n.children})}function _B(n){var e=n.initialProps,t=n.children,r=e.selected,s=r||{},i=s.from,a=s.to,c=e.min,u=e.max,h=function(w,S,v){var _,A;(_=e.onDayClick)===null||_===void 0||_.call(e,w,S,v);var E=wB(w,r);(A=e.onSelect)===null||A===void 0||A.call(e,E,w,S,v)},f={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(f.range_start=[i],a?(f.range_end=[a],Hn(i,a)||(f.range_middle=[{after:i,before:a}])):f.range_end=[i]):a&&(f.range_start=[a],f.range_end=[a]),c&&(i&&!a&&f.disabled.push({after:Yp(i,c-1),before:Pn(i,c-1)}),i&&a&&f.disabled.push({after:i,before:Pn(i,c-1)}),!i&&a&&f.disabled.push({after:Yp(a,c-1),before:Pn(a,c-1)})),u){if(i&&!a&&(f.disabled.push({before:Pn(i,-u+1)}),f.disabled.push({after:Pn(i,u-1)})),i&&a){var g=ts(a,i)+1,y=u-g;f.disabled.push({before:Yp(i,y)}),f.disabled.push({after:Pn(a,y)})}!i&&a&&(f.disabled.push({before:Pn(a,-u+1)}),f.disabled.push({after:Pn(a,u-1)}))}return p.jsx(cy.Provider,{value:{selected:r,onDayClick:h,modifiers:f},children:t})}function uy(){var n=C.useContext(cy);if(!n)throw new Error("useSelectRange must be used within a SelectRangeProvider");return n}function ud(n){return Array.isArray(n)?hC([],n):n!==void 0?[n]:[]}function SB(n){var e={};return Object.entries(n).forEach(function(t){var r=t[0],s=t[1];e[r]=ud(s)}),e}var Fr;(function(n){n.Outside="outside",n.Disabled="disabled",n.Selected="selected",n.Hidden="hidden",n.Today="today",n.RangeStart="range_start",n.RangeEnd="range_end",n.RangeMiddle="range_middle"})(Fr||(Fr={}));var AB=Fr.Selected,As=Fr.Disabled,CB=Fr.Hidden,EB=Fr.Today,Kp=Fr.RangeEnd,Qp=Fr.RangeMiddle,Zp=Fr.RangeStart,TB=Fr.Outside;function kB(n,e,t){var r,s=(r={},r[AB]=ud(n.selected),r[As]=ud(n.disabled),r[CB]=ud(n.hidden),r[EB]=[n.today],r[Kp]=[],r[Qp]=[],r[Zp]=[],r[TB]=[],r);return n.fromDate&&s[As].push({before:n.fromDate}),n.toDate&&s[As].push({after:n.toDate}),_c(n)?s[As]=s[As].concat(e.modifiers[As]):Sc(n)&&(s[As]=s[As].concat(t.modifiers[As]),s[Zp]=t.modifiers[Zp],s[Qp]=t.modifiers[Qp],s[Kp]=t.modifiers[Kp]),s}var yC=C.createContext(void 0);function PB(n){var e=wt(),t=ly(),r=uy(),s=kB(e,t,r),i=SB(e.modifiers),a=Oe(Oe({},s),i);return p.jsx(yC.Provider,{value:a,children:n.children})}function vC(){var n=C.useContext(yC);if(!n)throw new Error("useModifiers must be used within a ModifiersProvider");return n}function NB(n){return!!(n&&typeof n=="object"&&"before"in n&&"after"in n)}function RB(n){return!!(n&&typeof n=="object"&&"from"in n)}function DB(n){return!!(n&&typeof n=="object"&&"after"in n)}function MB(n){return!!(n&&typeof n=="object"&&"before"in n)}function IB(n){return!!(n&&typeof n=="object"&&"dayOfWeek"in n)}function jB(n,e){var t,r=e.from,s=e.to;if(r&&s){var i=ts(s,r)<0;i&&(t=[s,r],r=t[0],s=t[1]);var a=ts(n,r)>=0&&ts(s,n)>=0;return a}return s?Hn(s,n):r?Hn(r,n):!1}function OB(n){return ry(n)}function LB(n){return Array.isArray(n)&&n.every(ry)}function FB(n,e){return e.some(function(t){if(typeof t=="boolean")return t;if(OB(t))return Hn(n,t);if(LB(t))return t.includes(n);if(RB(t))return jB(n,t);if(IB(t))return t.dayOfWeek.includes(n.getDay());if(NB(t)){var r=ts(t.before,n),s=ts(t.after,n),i=r>0,a=s<0,c=Gm(t.before,t.after);return c?a&&i:i||a}return DB(t)?ts(n,t.after)>0:MB(t)?ts(t.before,n)>0:typeof t=="function"?t(n):!1})}function dy(n,e,t){var r=Object.keys(e).reduce(function(i,a){var c=e[a];return FB(n,c)&&i.push(a),i},[]),s={};return r.forEach(function(i){return s[i]=!0}),t&&!oy(n,t)&&(s.outside=!0),s}function BB(n,e){for(var t=Wn(n[0]),r=sy(n[n.length-1]),s,i,a=t;a<=r;){var c=dy(a,e),u=!c.disabled&&!c.hidden;if(!u){a=Pn(a,1);continue}if(c.selected)return a;c.today&&!i&&(i=a),s||(s=a),a=Pn(a,1)}return i||s}var $B=365;function xC(n,e){var t=e.moveBy,r=e.direction,s=e.context,i=e.modifiers,a=e.retry,c=a===void 0?{count:0,lastFocused:n}:a,u=s.weekStartsOn,h=s.fromDate,f=s.toDate,g=s.locale,y={day:Pn,week:Wm,month:Lr,year:kL,startOfWeek:function(_){return s.ISOWeek?no(_):cs(_,{locale:g,weekStartsOn:u})},endOfWeek:function(_){return s.ISOWeek?iC(_):iy(_,{locale:g,weekStartsOn:u})}},w=y[t](n,r==="after"?1:-1);r==="before"&&h?w=PL([h,w]):r==="after"&&f&&(w=NL([f,w]));var S=!0;if(i){var v=dy(w,i);S=!v.disabled&&!v.hidden}return S?w:c.count>$B?c.lastFocused:xC(w,{moveBy:t,direction:r,context:s,modifiers:i,retry:Oe(Oe({},c),{count:c.count+1})})}var wC=C.createContext(void 0);function zB(n){var e=Ac(),t=vC(),r=C.useState(),s=r[0],i=r[1],a=C.useState(),c=a[0],u=a[1],h=BB(e.displayMonths,t),f=s??(c&&e.isDateDisplayed(c))?c:h,g=function(){u(s),i(void 0)},y=function(_){i(_)},w=wt(),S=function(_,A){if(s){var E=xC(s,{moveBy:_,direction:A,context:w,modifiers:t});Hn(s,E)||(e.goToDate(E,s),y(E))}},v={focusedDay:s,focusTarget:f,blur:g,focus:y,focusDayAfter:function(){return S("day","after")},focusDayBefore:function(){return S("day","before")},focusWeekAfter:function(){return S("week","after")},focusWeekBefore:function(){return S("week","before")},focusMonthBefore:function(){return S("month","before")},focusMonthAfter:function(){return S("month","after")},focusYearBefore:function(){return S("year","before")},focusYearAfter:function(){return S("year","after")},focusStartOfWeek:function(){return S("startOfWeek","before")},focusEndOfWeek:function(){return S("endOfWeek","after")}};return p.jsx(wC.Provider,{value:v,children:n.children})}function hy(){var n=C.useContext(wC);if(!n)throw new Error("useFocusContext must be used within a FocusProvider");return n}function VB(n,e){var t=vC(),r=dy(n,t,e);return r}var fy=C.createContext(void 0);function UB(n){if(!_h(n.initialProps)){var e={selected:void 0};return p.jsx(fy.Provider,{value:e,children:n.children})}return p.jsx(HB,{initialProps:n.initialProps,children:n.children})}function HB(n){var e=n.initialProps,t=n.children,r=function(i,a,c){var u,h,f;if((u=e.onDayClick)===null||u===void 0||u.call(e,i,a,c),a.selected&&!e.required){(h=e.onSelect)===null||h===void 0||h.call(e,void 0,i,a,c);return}(f=e.onSelect)===null||f===void 0||f.call(e,i,i,a,c)},s={selected:e.selected,onDayClick:r};return p.jsx(fy.Provider,{value:s,children:t})}function bC(){var n=C.useContext(fy);if(!n)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return n}function WB(n,e){var t=wt(),r=bC(),s=ly(),i=uy(),a=hy(),c=a.focusDayAfter,u=a.focusDayBefore,h=a.focusWeekAfter,f=a.focusWeekBefore,g=a.blur,y=a.focus,w=a.focusMonthBefore,S=a.focusMonthAfter,v=a.focusYearBefore,_=a.focusYearAfter,A=a.focusStartOfWeek,E=a.focusEndOfWeek,k=function(z){var O,ee,te,L;_h(t)?(O=r.onDayClick)===null||O===void 0||O.call(r,n,e,z):_c(t)?(ee=s.onDayClick)===null||ee===void 0||ee.call(s,n,e,z):Sc(t)?(te=i.onDayClick)===null||te===void 0||te.call(i,n,e,z):(L=t.onDayClick)===null||L===void 0||L.call(t,n,e,z)},P=function(z){var O;y(n),(O=t.onDayFocus)===null||O===void 0||O.call(t,n,e,z)},N=function(z){var O;g(),(O=t.onDayBlur)===null||O===void 0||O.call(t,n,e,z)},R=function(z){var O;(O=t.onDayMouseEnter)===null||O===void 0||O.call(t,n,e,z)},M=function(z){var O;(O=t.onDayMouseLeave)===null||O===void 0||O.call(t,n,e,z)},$=function(z){var O;(O=t.onDayPointerEnter)===null||O===void 0||O.call(t,n,e,z)},G=function(z){var O;(O=t.onDayPointerLeave)===null||O===void 0||O.call(t,n,e,z)},F=function(z){var O;(O=t.onDayTouchCancel)===null||O===void 0||O.call(t,n,e,z)},V=function(z){var O;(O=t.onDayTouchEnd)===null||O===void 0||O.call(t,n,e,z)},X=function(z){var O;(O=t.onDayTouchMove)===null||O===void 0||O.call(t,n,e,z)},Z=function(z){var O;(O=t.onDayTouchStart)===null||O===void 0||O.call(t,n,e,z)},W=function(z){var O;(O=t.onDayKeyUp)===null||O===void 0||O.call(t,n,e,z)},oe=function(z){var O;switch(z.key){case"ArrowLeft":z.preventDefault(),z.stopPropagation(),t.dir==="rtl"?c():u();break;case"ArrowRight":z.preventDefault(),z.stopPropagation(),t.dir==="rtl"?u():c();break;case"ArrowDown":z.preventDefault(),z.stopPropagation(),h();break;case"ArrowUp":z.preventDefault(),z.stopPropagation(),f();break;case"PageUp":z.preventDefault(),z.stopPropagation(),z.shiftKey?v():w();break;case"PageDown":z.preventDefault(),z.stopPropagation(),z.shiftKey?_():S();break;case"Home":z.preventDefault(),z.stopPropagation(),A();break;case"End":z.preventDefault(),z.stopPropagation(),E();break}(O=t.onDayKeyDown)===null||O===void 0||O.call(t,n,e,z)},K={onClick:k,onFocus:P,onBlur:N,onKeyDown:oe,onKeyUp:W,onMouseEnter:R,onMouseLeave:M,onPointerEnter:$,onPointerLeave:G,onTouchCancel:F,onTouchEnd:V,onTouchMove:X,onTouchStart:Z};return K}function GB(){var n=wt(),e=bC(),t=ly(),r=uy(),s=_h(n)?e.selected:_c(n)?t.selected:Sc(n)?r.selected:void 0;return s}function qB(n){return Object.values(Fr).includes(n)}function YB(n,e){var t=[n.classNames.day];return Object.keys(e).forEach(function(r){var s=n.modifiersClassNames[r];if(s)t.push(s);else if(qB(r)){var i=n.classNames["day_".concat(r)];i&&t.push(i)}}),t}function XB(n,e){var t=Oe({},n.styles.day);return Object.keys(e).forEach(function(r){var s;t=Oe(Oe({},t),(s=n.modifiersStyles)===null||s===void 0?void 0:s[r])}),t}function KB(n,e,t){var r,s,i,a=wt(),c=hy(),u=VB(n,e),h=WB(n,u),f=GB(),g=!!(a.onDayClick||a.mode!=="default");C.useEffect(function(){var R;u.outside||c.focusedDay&&g&&Hn(c.focusedDay,n)&&((R=t.current)===null||R===void 0||R.focus())},[c.focusedDay,n,t,g,u.outside]);var y=YB(a,u).join(" "),w=XB(a,u),S=!!(u.outside&&!a.showOutsideDays||u.hidden),v=(i=(s=a.components)===null||s===void 0?void 0:s.DayContent)!==null&&i!==void 0?i:yB,_=p.jsx(v,{date:n,displayMonth:e,activeModifiers:u}),A={style:w,className:y,children:_,role:"gridcell"},E=c.focusTarget&&Hn(c.focusTarget,n)&&!u.outside,k=c.focusedDay&&Hn(c.focusedDay,n),P=Oe(Oe(Oe({},A),(r={disabled:u.disabled,role:"gridcell"},r["aria-selected"]=u.selected,r.tabIndex=k||E?0:-1,r)),h),N={isButton:g,isHidden:S,activeModifiers:u,selectedDays:f,buttonProps:P,divProps:A};return N}function QB(n){var e=C.useRef(null),t=KB(n.date,n.displayMonth,e);return t.isHidden?p.jsx("div",{role:"gridcell"}):t.isButton?p.jsx(Bd,Oe({name:"day",ref:e},t.buttonProps)):p.jsx("div",Oe({},t.divProps))}function ZB(n){var e=n.number,t=n.dates,r=wt(),s=r.onWeekNumberClick,i=r.styles,a=r.classNames,c=r.locale,u=r.labels.labelWeekNumber,h=r.formatters.formatWeekNumber,f=h(Number(e),{locale:c});if(!s)return p.jsx("span",{className:a.weeknumber,style:i.weeknumber,children:f});var g=u(Number(e),{locale:c}),y=function(w){s(e,t,w)};return p.jsx(Bd,{name:"week-number","aria-label":g,className:a.weeknumber,style:i.weeknumber,onClick:y,children:f})}function JB(n){var e,t,r=wt(),s=r.styles,i=r.classNames,a=r.showWeekNumber,c=r.components,u=(e=c?.Day)!==null&&e!==void 0?e:QB,h=(t=c?.WeekNumber)!==null&&t!==void 0?t:ZB,f;return a&&(f=p.jsx("td",{className:i.cell,style:s.cell,children:p.jsx(h,{number:n.weekNumber,dates:n.dates})})),p.jsxs("tr",{className:i.row,style:s.row,children:[f,n.dates.map(function(g){return p.jsx("td",{className:i.cell,style:s.cell,role:"presentation",children:p.jsx(u,{displayMonth:n.displayMonth,date:g})},PF(g))})]})}function Xb(n,e,t){for(var r=t?.ISOWeek?iC(e):iy(e,t),s=t?.ISOWeek?no(n):cs(n,t),i=ts(r,s),a=[],c=0;c<=i;c++)a.push(Pn(s,c));var u=a.reduce(function(h,f){var g=t?.ISOWeek?aC(f):cC(f,t),y=h.find(function(w){return w.weekNumber===g});return y?(y.dates.push(f),h):(h.push({weekNumber:g,dates:[f]}),h)},[]);return u}function e4(n,e){var t=Xb(Wn(n),sy(n),e);if(e?.useFixedWeeks){var r=RF(n,e);if(r<6){var s=t[t.length-1],i=s.dates[s.dates.length-1],a=Wm(i,6-r),c=Xb(Wm(i,1),a,e);t.push.apply(t,c)}}return t}function t4(n){var e,t,r,s=wt(),i=s.locale,a=s.classNames,c=s.styles,u=s.hideHead,h=s.fixedWeeks,f=s.components,g=s.weekStartsOn,y=s.firstWeekContainsDate,w=s.ISOWeek,S=e4(n.displayMonth,{useFixedWeeks:!!h,ISOWeek:w,locale:i,weekStartsOn:g,firstWeekContainsDate:y}),v=(e=f?.Head)!==null&&e!==void 0?e:gB,_=(t=f?.Row)!==null&&t!==void 0?t:JB,A=(r=f?.Footer)!==null&&r!==void 0?r:fB;return p.jsxs("table",{id:n.id,className:a.table,style:c.table,role:"grid","aria-labelledby":n["aria-labelledby"],children:[!u&&p.jsx(v,{}),p.jsx("tbody",{className:a.tbody,style:c.tbody,children:S.map(function(E){return p.jsx(_,{displayMonth:n.displayMonth,dates:E.dates,weekNumber:E.weekNumber},E.weekNumber)})}),p.jsx(A,{displayMonth:n.displayMonth})]})}function n4(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var r4=n4()?C.useLayoutEffect:C.useEffect,Jp=!1,s4=0;function Kb(){return"react-day-picker-".concat(++s4)}function i4(n){var e,t=n??(Jp?Kb():null),r=C.useState(t),s=r[0],i=r[1];return r4(function(){s===null&&i(Kb())},[]),C.useEffect(function(){Jp===!1&&(Jp=!0)},[]),(e=n??s)!==null&&e!==void 0?e:void 0}function o4(n){var e,t,r=wt(),s=r.dir,i=r.classNames,a=r.styles,c=r.components,u=Ac().displayMonths,h=i4(r.id?"".concat(r.id,"-").concat(n.displayIndex):void 0),f=r.id?"".concat(r.id,"-grid-").concat(n.displayIndex):void 0,g=[i.month],y=a.month,w=n.displayIndex===0,S=n.displayIndex===u.length-1,v=!w&&!S;s==="rtl"&&(e=[w,S],S=e[0],w=e[1]),w&&(g.push(i.caption_start),y=Oe(Oe({},y),a.caption_start)),S&&(g.push(i.caption_end),y=Oe(Oe({},y),a.caption_end)),v&&(g.push(i.caption_between),y=Oe(Oe({},y),a.caption_between));var _=(t=c?.Caption)!==null&&t!==void 0?t:hB;return p.jsxs("div",{className:g.join(" "),style:y,children:[p.jsx(_,{id:h,displayMonth:n.displayMonth,displayIndex:n.displayIndex}),p.jsx(t4,{id:f,"aria-labelledby":h,displayMonth:n.displayMonth})]},n.displayIndex)}function a4(n){var e=wt(),t=e.classNames,r=e.styles;return p.jsx("div",{className:t.months,style:r.months,children:n.children})}function l4(n){var e,t,r=n.initialProps,s=wt(),i=hy(),a=Ac(),c=C.useState(!1),u=c[0],h=c[1];C.useEffect(function(){s.initialFocus&&i.focusTarget&&(u||(i.focus(i.focusTarget),h(!0)))},[s.initialFocus,u,i.focus,i.focusTarget,i]);var f=[s.classNames.root,s.className];s.numberOfMonths>1&&f.push(s.classNames.multiple_months),s.showWeekNumber&&f.push(s.classNames.with_weeknumber);var g=Oe(Oe({},s.styles.root),s.style),y=Object.keys(r).filter(function(S){return S.startsWith("data-")}).reduce(function(S,v){var _;return Oe(Oe({},S),(_={},_[v]=r[v],_))},{}),w=(t=(e=r.components)===null||e===void 0?void 0:e.Months)!==null&&t!==void 0?t:a4;return p.jsx("div",Oe({className:f.join(" "),style:g,dir:s.dir,id:s.id,nonce:r.nonce,title:r.title,lang:r.lang},y,{children:p.jsx(w,{children:a.displayMonths.map(function(S,v){return p.jsx(o4,{displayIndex:v,displayMonth:S},v)})})}))}function c4(n){var e=n.children,t=MF(n,["children"]);return p.jsx(ZF,{initialProps:t,children:p.jsx(lB,{children:p.jsx(UB,{initialProps:t,children:p.jsx(vB,{initialProps:t,children:p.jsx(bB,{initialProps:t,children:p.jsx(PB,{children:p.jsx(zB,{children:e})})})})})})})}function u4(n){return p.jsx(c4,Oe({},n,{children:p.jsx(l4,{initialProps:n})}))}function _C({className:n,classNames:e,showOutsideDays:t=!0,...r}){return p.jsx(u4,{showOutsideDays:t,className:Fe("p-3",n),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Fe(bm({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Fe(bm({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({className:s,...i})=>p.jsx(sN,{className:Fe("h-4 w-4",s),...i}),IconRight:({className:s,...i})=>p.jsx(iN,{className:Fe("h-4 w-4",s),...i})},...r})}_C.displayName="Calendar";var py="Popover",[SC,Sz]=Br(py,[Ta]),Cc=Ta(),[d4,bi]=SC(py),AC=n=>{const{__scopePopover:e,children:t,open:r,defaultOpen:s,onOpenChange:i,modal:a=!1}=n,c=Cc(e),u=C.useRef(null),[h,f]=C.useState(!1),[g=!1,y]=qi({prop:r,defaultProp:s,onChange:i});return p.jsx(z_,{...c,children:p.jsx(d4,{scope:e,contentId:Ns(),triggerRef:u,open:g,onOpenChange:y,onOpenToggle:C.useCallback(()=>y(w=>!w),[y]),hasCustomAnchor:h,onCustomAnchorAdd:C.useCallback(()=>f(!0),[]),onCustomAnchorRemove:C.useCallback(()=>f(!1),[]),modal:a,children:t})})};AC.displayName=py;var CC="PopoverAnchor",h4=C.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,s=bi(CC,t),i=Cc(t),{onCustomAnchorAdd:a,onCustomAnchorRemove:c}=s;return C.useEffect(()=>(a(),()=>c()),[a,c]),p.jsx(Zd,{...i,...r,ref:e})});h4.displayName=CC;var EC="PopoverTrigger",TC=C.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,s=bi(EC,t),i=Cc(t),a=mt(e,s.triggerRef),c=p.jsx(Ve.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":DC(s.open),...r,ref:a,onClick:ke(n.onClick,s.onOpenToggle)});return s.hasCustomAnchor?c:p.jsx(Zd,{asChild:!0,...i,children:c})});TC.displayName=EC;var my="PopoverPortal",[f4,p4]=SC(my,{forceMount:void 0}),kC=n=>{const{__scopePopover:e,forceMount:t,children:r,container:s}=n,i=bi(my,e);return p.jsx(f4,{scope:e,forceMount:t,children:p.jsx(Is,{present:t||i.open,children:p.jsx(lc,{asChild:!0,container:s,children:r})})})};kC.displayName=my;var xa="PopoverContent",PC=C.forwardRef((n,e)=>{const t=p4(xa,n.__scopePopover),{forceMount:r=t.forceMount,...s}=n,i=bi(xa,n.__scopePopover);return p.jsx(Is,{present:r||i.open,children:i.modal?p.jsx(g4,{...s,ref:e}):p.jsx(y4,{...s,ref:e})})});PC.displayName=xa;var m4=Gi("PopoverContent.RemoveScroll"),g4=C.forwardRef((n,e)=>{const t=bi(xa,n.__scopePopover),r=C.useRef(null),s=mt(e,r),i=C.useRef(!1);return C.useEffect(()=>{const a=r.current;if(a)return Wg(a)},[]),p.jsx(ph,{as:m4,allowPinchZoom:!0,children:p.jsx(NC,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ke(n.onCloseAutoFocus,a=>{a.preventDefault(),i.current||t.triggerRef.current?.focus()}),onPointerDownOutside:ke(n.onPointerDownOutside,a=>{const c=a.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,h=c.button===2||u;i.current=h},{checkForDefaultPrevented:!1}),onFocusOutside:ke(n.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),y4=C.forwardRef((n,e)=>{const t=bi(xa,n.__scopePopover),r=C.useRef(!1),s=C.useRef(!1);return p.jsx(NC,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{n.onCloseAutoFocus?.(i),i.defaultPrevented||(r.current||t.triggerRef.current?.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{n.onInteractOutside?.(i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;t.triggerRef.current?.contains(a)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),NC=C.forwardRef((n,e)=>{const{__scopePopover:t,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:f,...g}=n,y=bi(xa,t),w=Cc(t);return Hg(),p.jsx(hh,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:p.jsx(Sa,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:f,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:h,onDismiss:()=>y.onOpenChange(!1),children:p.jsx(gg,{"data-state":DC(y.open),role:"dialog",id:y.contentId,...w,...g,ref:e,style:{...g.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),RC="PopoverClose",v4=C.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,s=bi(RC,t);return p.jsx(Ve.button,{type:"button",...r,ref:e,onClick:ke(n.onClick,()=>s.onOpenChange(!1))})});v4.displayName=RC;var x4="PopoverArrow",w4=C.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,s=Cc(t);return p.jsx(yg,{...s,...r,ref:e})});w4.displayName=x4;function DC(n){return n?"open":"closed"}var b4=AC,_4=TC,S4=kC,MC=PC;const A4=b4,C4=_4,IC=C.forwardRef(({className:n,align:e="center",sideOffset:t=4,...r},s)=>p.jsx(S4,{children:p.jsx(MC,{ref:s,align:e,sideOffset:t,className:Fe("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",n),...r})}));IC.displayName=MC.displayName;const re=Symbol.for("drizzle:entityKind");function fn(n,e){if(!n||typeof n!="object")return!1;if(n instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,re))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let t=Object.getPrototypeOf(n).constructor;if(t)for(;t;){if(re in t&&t[re]===e[re])return!0;t=Object.getPrototypeOf(t)}return!1}class oc{constructor(e,t){this.table=e,this.config=t,this.name=t.name,this.keyAsName=t.keyAsName,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity}static[re]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}class E4{static[re]="ColumnBuilder";config;constructor(e,t,r){this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:r,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}const oa=Symbol.for("drizzle:Name");class T4{static[re]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,t){this.reference=()=>{const{name:r,columns:s,foreignColumns:i}=e();return{name:r,columns:s,foreignTable:i[0].table,foreignColumns:i}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new k4(e,this)}}class k4{constructor(e,t){this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}static[re]="PgForeignKey";reference;onUpdate;onDelete;getName(){const{name:e,columns:t,foreignColumns:r}=this.reference(),s=t.map(c=>c.name),i=r.map(c=>c.name),a=[this.table[oa],...s,r[0].table[oa],...i];return e??`${a.join("_")}_fk`}}function P4(n,...e){return n(...e)}function N4(n,e){return`${n[oa]}_${e.join("_")}_unique`}function Qb(n,e,t){for(let r=e;r<n.length;r++){const s=n[r];if(s==="\\"){r++;continue}if(s==='"')return[n.slice(e,r).replace(/\\/g,""),r+1];if(!t&&(s===","||s==="}"))return[n.slice(e,r).replace(/\\/g,""),r]}return[n.slice(e).replace(/\\/g,""),n.length]}function jC(n,e=0){const t=[];let r=e,s=!1;for(;r<n.length;){const i=n[r];if(i===","){(s||r===e)&&t.push(""),s=!0,r++;continue}if(s=!1,i==="\\"){r+=2;continue}if(i==='"'){const[u,h]=Qb(n,r+1,!0);t.push(u),r=h;continue}if(i==="}")return[t,r+1];if(i==="{"){const[u,h]=jC(n,r+1);t.push(u),r=h;continue}const[a,c]=Qb(n,r,!1);t.push(a),r=c}return[t,r]}function R4(n){const[e]=jC(n,1);return e}function OC(n){return`{${n.map(e=>Array.isArray(e)?OC(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}class it extends E4{foreignKeyConfigs=[];static[re]="PgColumnBuilder";array(e){return new M4(this.config.name,this,e)}references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e,t){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=t?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:r,actions:s})=>P4((i,a)=>{const c=new T4(()=>{const u=i();return{columns:[e],foreignColumns:[u]}});return a.onUpdate&&c.onUpdate(a.onUpdate),a.onDelete&&c.onDelete(a.onDelete),c.build(t)},r,s))}buildExtraConfigColumn(e){return new D4(e,this.config)}}class Ye extends oc{constructor(e,t){t.uniqueName||(t.uniqueName=N4(e,[t.name])),super(e,t),this.table=e}static[re]="PgColumn"}class D4 extends Ye{static[re]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}}class M4 extends it{static[re]="PgArrayBuilder";constructor(e,t,r){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=r}build(e){const t=this.config.baseBuilder.build(e);return new gy(e,this.config,t)}}class gy extends Ye{constructor(e,t,r,s){super(e,t),this.baseColumn=r,this.range=s,this.size=t.size}size;static[re]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(e){return typeof e=="string"&&(e=R4(e)),e.map(t=>this.baseColumn.mapFromDriverValue(t))}mapToDriverValue(e,t=!1){const r=e.map(s=>s===null?null:fn(this.baseColumn,gy)?this.baseColumn.mapToDriverValue(s,!0):this.baseColumn.mapToDriverValue(s));return t?r:OC(r)}}const Zb=Symbol.for("drizzle:isPgEnum");function I4(n){return!!n&&typeof n=="function"&&Zb in n&&n[Zb]===!0}class LC{static[re]="Subquery";constructor(e,t,r,s=!1){this._={brand:"Subquery",sql:e,selectedFields:t,alias:r,isWith:s}}}const j4={startActiveSpan(n,e){return e()}},aa=Symbol.for("drizzle:ViewBaseConfig"),em=Symbol.for("drizzle:Schema"),Jb=Symbol.for("drizzle:Columns"),e0=Symbol.for("drizzle:ExtraConfigColumns"),tm=Symbol.for("drizzle:OriginalName"),nm=Symbol.for("drizzle:BaseName"),$d=Symbol.for("drizzle:IsAlias"),t0=Symbol.for("drizzle:ExtraConfigBuilder"),FC=Symbol.for("drizzle:IsDrizzleTable");class er{static[re]="Table";static Symbol={Name:oa,Schema:em,OriginalName:tm,Columns:Jb,ExtraConfigColumns:e0,BaseName:nm,IsAlias:$d,ExtraConfigBuilder:t0};[oa];[tm];[em];[Jb];[e0];[nm];[$d]=!1;[FC]=!0;[t0]=void 0;constructor(e,t,r){this[oa]=this[tm]=e,this[em]=t,this[nm]=r}}function BC(n){return typeof n=="object"&&n!==null&&FC in n}function O4(n){return n!=null&&typeof n.getSQL=="function"}function L4(n){const e={sql:"",params:[]};for(const t of n)e.sql+=t.sql,e.params.push(...t.params),t.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...t.typings));return e}class Tr{static[re]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new Ot([this])}}class Ot{constructor(e){this.queryChunks=e}static[re]="SQL";decoder=$C;shouldInlineParams=!1;append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return j4.startActiveSpan("drizzle.buildSQL",t=>{const r=this.buildQueryFromSourceParams(this.queryChunks,e);return t?.setAttributes({"drizzle.query.text":r.sql,"drizzle.query.params":JSON.stringify(r.params)}),r})}buildQueryFromSourceParams(e,t){const r=Object.assign({},t,{inlineParams:t.inlineParams||this.shouldInlineParams,paramStartIndex:t.paramStartIndex||{value:0}}),{casing:s,escapeName:i,escapeParam:a,prepareTyping:c,inlineParams:u,paramStartIndex:h}=r;return L4(e.map(f=>{if(fn(f,Tr))return{sql:f.value.join(""),params:[]};if(fn(f,qm))return{sql:i(f.value),params:[]};if(f===void 0)return{sql:"",params:[]};if(Array.isArray(f)){const g=[new Tr("(")];for(const[y,w]of f.entries())g.push(w),y<f.length-1&&g.push(new Tr(", "));return g.push(new Tr(")")),this.buildQueryFromSourceParams(g,r)}if(fn(f,Ot))return this.buildQueryFromSourceParams(f.queryChunks,{...r,inlineParams:u||f.shouldInlineParams});if(fn(f,er)){const g=f[er.Symbol.Schema],y=f[er.Symbol.Name];return{sql:g===void 0||f[$d]?i(y):i(g)+"."+i(y),params:[]}}if(fn(f,oc)){const g=s.getColumnCasing(f);if(t.invokeSource==="indexes")return{sql:i(g),params:[]};const y=f.table[er.Symbol.Schema];return{sql:f.table[$d]||y===void 0?i(f.table[er.Symbol.Name])+"."+i(g):i(y)+"."+i(f.table[er.Symbol.Name])+"."+i(g),params:[]}}if(fn(f,F4)){const g=f[aa].schema,y=f[aa].name;return{sql:g===void 0||f[aa].isAlias?i(y):i(g)+"."+i(y),params:[]}}if(fn(f,VC)){if(fn(f.value,Ym))return{sql:a(h.value++,f),params:[f],typings:["none"]};const g=f.value===null?null:f.encoder.mapToDriverValue(f.value);if(fn(g,Ot))return this.buildQueryFromSourceParams([g],r);if(u)return{sql:this.mapInlineParam(g,r),params:[]};let y=["none"];return c&&(y=[c(f.encoder)]),{sql:a(h.value++,g),params:[g],typings:y}}return fn(f,Ym)?{sql:a(h.value++,f),params:[f],typings:["none"]}:fn(f,Ot.Aliased)&&f.fieldAlias!==void 0?{sql:i(f.fieldAlias),params:[]}:fn(f,LC)?f._.isWith?{sql:i(f._.alias),params:[]}:this.buildQueryFromSourceParams([new Tr("("),f._.sql,new Tr(") "),new qm(f._.alias)],r):I4(f)?f.schema?{sql:i(f.schema)+"."+i(f.enumName),params:[]}:{sql:i(f.enumName),params:[]}:O4(f)?f.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([f.getSQL()],r):this.buildQueryFromSourceParams([new Tr("("),f.getSQL(),new Tr(")")],r):u?{sql:this.mapInlineParam(f,r),params:[]}:{sql:a(h.value++,f),params:[f],typings:["none"]}}))}mapInlineParam(e,{escapeString:t}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return t(e);if(typeof e=="object"){const r=e.toString();return t(r==="[object Object]"?JSON.stringify(e):r)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new Ot.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}}class qm{constructor(e){this.value=e}static[re]="Name";brand;getSQL(){return new Ot([this])}}const $C={mapFromDriverValue:n=>n},zC={mapToDriverValue:n=>n};({...$C,...zC});class VC{constructor(e,t=zC){this.value=e,this.encoder=t}static[re]="Param";brand;getSQL(){return new Ot([this])}}function Jt(n,...e){const t=[];(e.length>0||n.length>0&&n[0]!=="")&&t.push(new Tr(n[0]));for(const[r,s]of e.entries())t.push(s,new Tr(n[r+1]));return new Ot(t)}(n=>{function e(){return new Ot([])}n.empty=e;function t(u){return new Ot(u)}n.fromList=t;function r(u){return new Ot([new Tr(u)])}n.raw=r;function s(u,h){const f=[];for(const[g,y]of u.entries())g>0&&h!==void 0&&f.push(h),f.push(y);return new Ot(f)}n.join=s;function i(u){return new qm(u)}n.identifier=i;function a(u){return new Ym(u)}n.placeholder=a;function c(u,h){return new VC(u,h)}n.param=c})(Jt||(Jt={}));(n=>{class e{constructor(r,s){this.sql=r,this.fieldAlias=s}static[re]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}}n.Aliased=e})(Ot||(Ot={}));class Ym{constructor(e){this.name=e}static[re]="Placeholder";getSQL(){return new Ot([this])}}const UC=Symbol.for("drizzle:IsDrizzleView");class F4{static[re]="View";[aa];[UC]=!0;constructor({name:e,schema:t,selectedFields:r,query:s}){this[aa]={name:e,originalName:e,schema:t,selectedFields:r,query:s,isExisting:!s,isAlias:!1}}getSQL(){return new Ot([this])}}function B4(n){return typeof n=="object"&&n!==null&&UC in n}oc.prototype.getSQL=function(){return new Ot([this])};er.prototype.getSQL=function(){return new Ot([this])};LC.prototype.getSQL=function(){return new Ot([this])};function $4(n){return n[er.Symbol.Columns]}function z4(n){return n[aa].selectedFields}function an(n,e){return{name:typeof n=="string"&&n.length>0?n:"",config:typeof n=="object"?n:e}}class Sh extends it{static[re]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){const{name:t,...r}=e;this.config.generatedIdentity={type:"always",sequenceName:t,sequenceOptions:r}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:t,...r}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:t,sequenceOptions:r}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}class V4 extends Sh{static[re]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigInt53")}build(e){return new U4(e,this.config)}}class U4 extends Ye{static[re]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}class H4 extends Sh{static[re]="PgBigInt64Builder";constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new W4(e,this.config)}}class W4 extends Ye{static[re]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}function G4(n,e){const{name:t,config:r}=an(n,e);return r.mode==="number"?new V4(t):new H4(t)}class q4 extends it{static[re]="PgBigSerial53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Y4(e,this.config)}}class Y4 extends Ye{static[re]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}class X4 extends it{static[re]="PgBigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new K4(e,this.config)}}class K4 extends Ye{static[re]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}function Q4(n,e){const{name:t,config:r}=an(n,e);return r.mode==="number"?new q4(t):new X4(t)}class Z4 extends it{static[re]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new J4(e,this.config)}}class J4 extends Ye{static[re]="PgBoolean";getSQLType(){return"boolean"}}function HC(n){return new Z4(n??"")}class e3 extends it{static[re]="PgCharBuilder";constructor(e,t){super(e,"string","PgChar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new t3(e,this.config)}}class t3 extends Ye{static[re]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}function n3(n,e={}){const{name:t,config:r}=an(n,e);return new e3(t,r)}class r3 extends it{static[re]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){return new s3(e,this.config)}}class s3 extends Ye{static[re]="PgCidr";getSQLType(){return"cidr"}}function i3(n){return new r3(n??"")}class o3 extends it{static[re]="PgCustomColumnBuilder";constructor(e,t,r){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=t,this.config.customTypeParams=r}build(e){return new a3(e,this.config)}}class a3 extends Ye{static[re]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,t){super(e,t),this.sqlName=t.customTypeParams.dataType(t.fieldConfig),this.mapTo=t.customTypeParams.toDriver,this.mapFrom=t.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return typeof this.mapFrom=="function"?this.mapFrom(e):e}mapToDriverValue(e){return typeof this.mapTo=="function"?this.mapTo(e):e}}function l3(n){return(e,t)=>{const{name:r,config:s}=an(e,t);return new o3(r,s,n)}}class Ec extends it{static[re]="PgDateColumnBaseBuilder";defaultNow(){return this.default(Jt`now()`)}}class c3 extends Ec{static[re]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e){return new u3(e,this.config)}}class u3 extends Ye{static[re]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}class d3 extends Ec{static[re]="PgDateStringBuilder";constructor(e){super(e,"string","PgDateString")}build(e){return new h3(e,this.config)}}class h3 extends Ye{static[re]="PgDateString";getSQLType(){return"date"}}function f3(n,e){const{name:t,config:r}=an(n,e);return r?.mode==="date"?new c3(t):new d3(t)}class p3 extends it{static[re]="PgDoublePrecisionBuilder";constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new m3(e,this.config)}}class m3 extends Ye{static[re]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}function g3(n){return new p3(n??"")}class y3 extends it{static[re]="PgInetBuilder";constructor(e){super(e,"string","PgInet")}build(e){return new v3(e,this.config)}}class v3 extends Ye{static[re]="PgInet";getSQLType(){return"inet"}}function x3(n){return new y3(n??"")}class w3 extends Sh{static[re]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new b3(e,this.config)}}class b3 extends Ye{static[re]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}function yy(n){return new w3(n??"")}class _3 extends it{static[re]="PgIntervalBuilder";constructor(e,t){super(e,"string","PgInterval"),this.config.intervalConfig=t}build(e){return new S3(e,this.config)}}class S3 extends Ye{static[re]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){const e=this.fields?` ${this.fields}`:"",t=this.precision?`(${this.precision})`:"";return`interval${e}${t}`}}function A3(n,e={}){const{name:t,config:r}=an(n,e);return new _3(t,r)}class C3 extends it{static[re]="PgJsonBuilder";constructor(e){super(e,"json","PgJson")}build(e){return new E3(e,this.config)}}class E3 extends Ye{static[re]="PgJson";constructor(e,t){super(e,t)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}function T3(n){return new C3(n??"")}class k3 extends it{static[re]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new P3(e,this.config)}}class P3 extends Ye{static[re]="PgJsonb";constructor(e,t){super(e,t)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}function Ah(n){return new k3(n??"")}class N3 extends it{static[re]="PgLineBuilder";constructor(e){super(e,"array","PgLine")}build(e){return new R3(e,this.config)}}class R3 extends Ye{static[re]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e){const[t,r,s]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(r),Number.parseFloat(s)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}class D3 extends it{static[re]="PgLineABCBuilder";constructor(e){super(e,"json","PgLineABC")}build(e){return new M3(e,this.config)}}class M3 extends Ye{static[re]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){const[t,r,s]=e.slice(1,-1).split(",");return{a:Number.parseFloat(t),b:Number.parseFloat(r),c:Number.parseFloat(s)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}function I3(n,e){const{name:t,config:r}=an(n,e);return!r?.mode||r.mode==="tuple"?new N3(t):new D3(t)}class j3 extends it{static[re]="PgMacaddrBuilder";constructor(e){super(e,"string","PgMacaddr")}build(e){return new O3(e,this.config)}}class O3 extends Ye{static[re]="PgMacaddr";getSQLType(){return"macaddr"}}function L3(n){return new j3(n??"")}class F3 extends it{static[re]="PgMacaddr8Builder";constructor(e){super(e,"string","PgMacaddr8")}build(e){return new B3(e,this.config)}}class B3 extends Ye{static[re]="PgMacaddr8";getSQLType(){return"macaddr8"}}function $3(n){return new F3(n??"")}class z3 extends it{static[re]="PgNumericBuilder";constructor(e,t,r){super(e,"string","PgNumeric"),this.config.precision=t,this.config.scale=r}build(e){return new V3(e,this.config)}}class V3 extends Ye{static[re]="PgNumeric";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}function U3(n,e){const{name:t,config:r}=an(n,e);return new z3(t,r?.precision,r?.scale)}class H3 extends it{static[re]="PgPointTupleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new W3(e,this.config)}}class W3 extends Ye{static[re]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[t,r]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(r)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}class G3 extends it{static[re]="PgPointObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return new q3(e,this.config)}}class q3 extends Ye{static[re]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[t,r]=e.slice(1,-1).split(",");return{x:Number.parseFloat(t),y:Number.parseFloat(r)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}function Y3(n,e){const{name:t,config:r}=an(n,e);return!r?.mode||r.mode==="tuple"?new H3(t):new G3(t)}function X3(n){const e=[];for(let t=0;t<n.length;t+=2)e.push(Number.parseInt(n.slice(t,t+2),16));return new Uint8Array(e)}function n0(n,e){const t=new ArrayBuffer(8),r=new DataView(t);for(let s=0;s<8;s++)r.setUint8(s,n[e+s]);return r.getFloat64(0,!0)}function WC(n){const e=X3(n);let t=0;const r=e[t];t+=1;const s=new DataView(e.buffer),i=s.getUint32(t,r===1);if(t+=4,i&536870912&&(s.getUint32(t,r===1),t+=4),(i&65535)===1){const a=n0(e,t);t+=8;const c=n0(e,t);return t+=8,[a,c]}throw new Error("Unsupported geometry type")}class K3 extends it{static[re]="PgGeometryBuilder";constructor(e){super(e,"array","PgGeometry")}build(e){return new Q3(e,this.config)}}class Q3 extends Ye{static[re]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return WC(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}class Z3 extends it{static[re]="PgGeometryObjectBuilder";constructor(e){super(e,"json","PgGeometryObject")}build(e){return new J3(e,this.config)}}class J3 extends Ye{static[re]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const t=WC(e);return{x:t[0],y:t[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}function e$(n,e){const{name:t,config:r}=an(n,e);return!r?.mode||r.mode==="tuple"?new K3(t):new Z3(t)}class t$ extends it{static[re]="PgRealBuilder";constructor(e,t){super(e,"number","PgReal"),this.config.length=t}build(e){return new n$(e,this.config)}}class n$ extends Ye{static[re]="PgReal";constructor(e,t){super(e,t)}getSQLType(){return"real"}mapFromDriverValue=e=>typeof e=="string"?Number.parseFloat(e):e}function r$(n){return new t$(n??"")}class s$ extends it{static[re]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new i$(e,this.config)}}class i$ extends Ye{static[re]="PgSerial";getSQLType(){return"serial"}}function o$(n){return new s$(n??"")}class a$ extends Sh{static[re]="PgSmallIntBuilder";constructor(e){super(e,"number","PgSmallInt")}build(e){return new l$(e,this.config)}}class l$ extends Ye{static[re]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=e=>typeof e=="string"?Number(e):e}function c$(n){return new a$(n??"")}class u$ extends it{static[re]="PgSmallSerialBuilder";constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new d$(e,this.config)}}class d$ extends Ye{static[re]="PgSmallSerial";getSQLType(){return"smallserial"}}function h$(n){return new u$(n??"")}class f$ extends it{static[re]="PgTextBuilder";constructor(e,t){super(e,"string","PgText"),this.config.enumValues=t.enum}build(e){return new p$(e,this.config)}}class p$ extends Ye{static[re]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}}function Dt(n,e={}){const{name:t,config:r}=an(n,e);return new f$(t,r)}class m$ extends Ec{constructor(e,t,r){super(e,"string","PgTime"),this.withTimezone=t,this.precision=r,this.config.withTimezone=t,this.config.precision=r}static[re]="PgTimeBuilder";build(e){return new g$(e,this.config)}}class g$ extends Ye{static[re]="PgTime";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function y$(n,e={}){const{name:t,config:r}=an(n,e);return new m$(t,r.withTimezone??!1,r.precision)}class v$ extends Ec{static[re]="PgTimestampBuilder";constructor(e,t,r){super(e,"date","PgTimestamp"),this.config.withTimezone=t,this.config.precision=r}build(e){return new x$(e,this.config)}}class x$ extends Ye{static[re]="PgTimestamp";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=e=>new Date(this.withTimezone?e:e+"+0000");mapToDriverValue=e=>e.toISOString()}class w$ extends Ec{static[re]="PgTimestampStringBuilder";constructor(e,t,r){super(e,"string","PgTimestampString"),this.config.withTimezone=t,this.config.precision=r}build(e){return new b$(e,this.config)}}class b$ extends Ye{static[re]="PgTimestampString";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function us(n,e={}){const{name:t,config:r}=an(n,e);return r?.mode==="string"?new w$(t,r.withTimezone??!1,r.precision):new v$(t,r?.withTimezone??!1,r?.precision)}class _$ extends it{static[re]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(Jt`gen_random_uuid()`)}build(e){return new S$(e,this.config)}}class S$ extends Ye{static[re]="PgUUID";getSQLType(){return"uuid"}}function A$(n){return new _$(n??"")}class C$ extends it{static[re]="PgVarcharBuilder";constructor(e,t){super(e,"string","PgVarchar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new E$(e,this.config)}}class E$ extends Ye{static[re]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}function or(n,e={}){const{name:t,config:r}=an(n,e);return new C$(t,r)}class T$ extends it{static[re]="PgBinaryVectorBuilder";constructor(e,t){super(e,"string","PgBinaryVector"),this.config.dimensions=t.dimensions}build(e){return new k$(e,this.config)}}class k$ extends Ye{static[re]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}}function P$(n,e){const{name:t,config:r}=an(n,e);return new T$(t,r)}class N$ extends it{static[re]="PgHalfVectorBuilder";constructor(e,t){super(e,"array","PgHalfVector"),this.config.dimensions=t.dimensions}build(e){return new R$(e,this.config)}}class R$ extends Ye{static[re]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(t=>Number.parseFloat(t))}}function D$(n,e){const{name:t,config:r}=an(n,e);return new N$(t,r)}class M$ extends it{static[re]="PgSparseVectorBuilder";constructor(e,t){super(e,"string","PgSparseVector"),this.config.dimensions=t.dimensions}build(e){return new I$(e,this.config)}}class I$ extends Ye{static[re]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}}function j$(n,e){const{name:t,config:r}=an(n,e);return new M$(t,r)}class O$ extends it{static[re]="PgVectorBuilder";constructor(e,t){super(e,"array","PgVector"),this.config.dimensions=t.dimensions}build(e){return new L$(e,this.config)}}class L$ extends Ye{static[re]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(t=>Number.parseFloat(t))}}function F$(n,e){const{name:t,config:r}=an(n,e);return new O$(t,r)}function B$(){return{bigint:G4,bigserial:Q4,boolean:HC,char:n3,cidr:i3,customType:l3,date:f3,doublePrecision:g3,inet:x3,integer:yy,interval:A3,json:T3,jsonb:Ah,line:I3,macaddr:L3,macaddr8:$3,numeric:U3,point:Y3,geometry:e$,real:r$,serial:o$,smallint:c$,smallserial:h$,text:Dt,time:y$,timestamp:us,uuid:A$,varchar:or,bit:P$,halfvec:D$,sparsevec:j$,vector:F$}}const Xm=Symbol.for("drizzle:PgInlineForeignKeys"),r0=Symbol.for("drizzle:EnableRLS");class s0 extends er{static[re]="PgTable";static Symbol=Object.assign({},er.Symbol,{InlineForeignKeys:Xm,EnableRLS:r0});[Xm]=[];[r0]=!1;[er.Symbol.ExtraConfigBuilder]=void 0}function $$(n,e,t,r,s=n){const i=new s0(n,r,s),a=typeof e=="function"?e(B$()):e,c=Object.fromEntries(Object.entries(a).map(([f,g])=>{const y=g;y.setName(f);const w=y.build(i);return i[Xm].push(...y.buildForeignKeys(w,i)),[f,w]})),u=Object.fromEntries(Object.entries(a).map(([f,g])=>{const y=g;y.setName(f);const w=y.buildExtraConfigColumn(i);return[f,w]})),h=Object.assign(i,c);return h[er.Symbol.Columns]=c,h[er.Symbol.ExtraConfigColumns]=u,Object.assign(h,{enableRLS:()=>(h[s0.Symbol.EnableRLS]=!0,h)})}const io=(n,e,t)=>$$(n,e,t,void 0),Nt={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function $t(n,e){return e.includes(n.columnType)}function z$(n){return"enumValues"in n&&Array.isArray(n.enumValues)&&n.enumValues.length>0}const V$=Rn.union([Rn.string(),Rn.number(),Rn.boolean(),Rn.null()]),U$=Rn.union([V$,Rn.record(Rn.any()),Rn.array(Rn.any())]),H$=Rn.custom(n=>n instanceof Buffer);function GC(n,e){const t=e?.zodInstance??Rn,r=e?.coerce??{};let s;return z$(n)&&(s=n.enumValues.length?t.enum(n.enumValues):t.string()),s||($t(n,["PgGeometry","PgPointTuple"])?s=t.tuple([t.number(),t.number()]):$t(n,["PgGeometryObject","PgPointObject"])?s=t.object({x:t.number(),y:t.number()}):$t(n,["PgHalfVector","PgVector"])?(s=t.array(t.number()),s=n.dimensions?s.length(n.dimensions):s):$t(n,["PgLine"])?s=t.tuple([t.number(),t.number(),t.number()]):$t(n,["PgLineABC"])?s=t.object({a:t.number(),b:t.number(),c:t.number()}):$t(n,["PgArray"])?(s=t.array(GC(n.baseColumn,t)),s=n.size?s.length(n.size):s):n.dataType==="array"?s=t.array(t.any()):n.dataType==="number"?s=W$(n,t,r):n.dataType==="bigint"?s=G$(n,t,r):n.dataType==="boolean"?s=r===!0||r.boolean?t.coerce.boolean():t.boolean():n.dataType==="date"?s=r===!0||r.date?t.coerce.date():t.date():n.dataType==="string"?s=q$(n,t,r):n.dataType==="json"?s=U$:n.dataType==="custom"?s=t.any():n.dataType==="buffer"&&(s=H$)),s||(s=t.any()),s}function W$(n,e,t){let r=n.getSQLType().includes("unsigned"),s,i,a=!1;$t(n,["MySqlTinyInt","SingleStoreTinyInt"])?(s=r?0:Nt.INT8_MIN,i=r?Nt.INT8_UNSIGNED_MAX:Nt.INT8_MAX,a=!0):$t(n,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(s=r?0:Nt.INT16_MIN,i=r?Nt.INT16_UNSIGNED_MAX:Nt.INT16_MAX,a=!0):$t(n,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(s=r?0:Nt.INT24_MIN,i=r?Nt.INT24_UNSIGNED_MAX:Nt.INT24_MAX,a=$t(n,["MySqlMediumInt","SingleStoreMediumInt"])):$t(n,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(s=r?0:Nt.INT32_MIN,i=r?Nt.INT32_UNSIGNED_MAX:Nt.INT32_MAX,a=!0):$t(n,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(s=r?0:Nt.INT48_MIN,i=r?Nt.INT48_UNSIGNED_MAX:Nt.INT48_MAX):$t(n,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(r=r||$t(n,["MySqlSerial","SingleStoreSerial"]),s=r?0:Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,a=!0):$t(n,["MySqlYear","SingleStoreYear"])?(s=1901,i=2155,a=!0):(s=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER);let c=t===!0||t?.number?e.coerce.number():e.number();return c=c.min(s).max(i),a?c.int():c}function G$(n,e,t){const r=n.getSQLType().includes("unsigned"),s=r?0n:Nt.INT64_MIN,i=r?Nt.INT64_UNSIGNED_MAX:Nt.INT64_MAX;return(t===!0||t?.bigint?e.coerce.bigint():e.bigint()).min(s).max(i)}function q$(n,e,t){if($t(n,["PgUUID"]))return e.string().uuid();let r,s,i=!1;$t(n,["PgVarchar","SQLiteText"])?r=n.length:$t(n,["MySqlVarChar","SingleStoreVarChar"])?r=n.length??Nt.INT16_UNSIGNED_MAX:$t(n,["MySqlText","SingleStoreText"])&&(n.textType==="longtext"?r=Nt.INT32_UNSIGNED_MAX:n.textType==="mediumtext"?r=Nt.INT24_UNSIGNED_MAX:n.textType==="text"?r=Nt.INT16_UNSIGNED_MAX:r=Nt.INT8_UNSIGNED_MAX),$t(n,["PgChar","MySqlChar","SingleStoreChar"])&&(r=n.length,i=!0),$t(n,["PgBinaryVector"])&&(s=/^[01]+$/,r=n.dimensions);let a=t===!0||t?.string?e.coerce.string():e.string();return a=s?a.regex(s):a,r&&i?a.length(r):r?a.max(r):a}function qC(n){return BC(n)?$4(n):z4(n)}function YC(n,e,t,r){const s={};for(const[i,a]of Object.entries(n)){if(!fn(a,oc)&&!fn(a,Ot)&&!fn(a,Ot.Aliased)&&typeof a=="object"){const g=BC(a)||B4(a)?qC(a):a;s[i]=YC(g,e[i]??{},t,r);continue}const c=e[i];if(c!==void 0&&typeof c!="function"){s[i]=c;continue}const u=fn(a,oc)?a:void 0,h=u?GC(u,r):Rn.any(),f=typeof c=="function"?c(h):h;t.never(u)||(s[i]=f,u&&(t.nullable(u)&&(s[i]=s[i].nullable()),t.optional(u)&&(s[i]=s[i].optional())))}return Rn.object(s)}const Y$={never:n=>n?.generated?.type==="always"||n?.generatedIdentity?.type==="always",optional:n=>!n.notNull||n.notNull&&n.hasDefault,nullable:n=>!n.notNull},oo=(n,e)=>{const t=qC(n);return YC(t,{},Y$)},XC=io("users",{id:or("id").primaryKey().default(Jt`gen_random_uuid()`),username:Dt("username").notNull().unique(),password:Dt("password").notNull(),role:Dt("role").notNull().default("hr"),createdAt:us("created_at").default(Jt`now()`)}),Tc=io("employees",{id:or("id").primaryKey().default(Jt`gen_random_uuid()`),name:Dt("name").notNull(),email:Dt("email").notNull().unique(),department:Dt("department").notNull(),position:Dt("position").notNull(),startDate:us("start_date").notNull(),status:Dt("status").notNull().default("active"),onboardingStage:Dt("onboarding_stage").notNull().default("Pre-boarding"),avatarUrl:Dt("avatar_url"),createdAt:us("created_at").default(Jt`now()`)}),X$=io("onboarding_progress",{id:or("id").primaryKey().default(Jt`gen_random_uuid()`),employeeId:or("employee_id").notNull().references(()=>Tc.id),stage:Dt("stage").notNull(),completionPercentage:yy("completion_percentage").notNull().default(0),tasks:Ah("tasks").$type().notNull().default([]),lastUpdated:us("last_updated").default(Jt`now()`)}),K$=io("documents",{id:or("id").primaryKey().default(Jt`gen_random_uuid()`),title:Dt("title").notNull(),content:Dt("content").notNull(),fileType:Dt("file_type").notNull(),category:Dt("category").notNull(),tags:Ah("tags").$type().notNull().default([]),uploadedBy:or("uploaded_by").references(()=>XC.id),createdAt:us("created_at").default(Jt`now()`),updatedAt:us("updated_at").default(Jt`now()`)}),Q$=io("chat_messages",{id:or("id").primaryKey().default(Jt`gen_random_uuid()`),employeeId:or("employee_id").references(()=>Tc.id),message:Dt("message").notNull(),response:Dt("response"),isFromAI:HC("is_from_ai").notNull().default(!1),timestamp:us("timestamp").default(Jt`now()`)}),Z$=io("knowledge_queries",{id:or("id").primaryKey().default(Jt`gen_random_uuid()`),query:Dt("query").notNull(),results:Ah("results").$type().notNull().default([]),employeeId:or("employee_id").references(()=>Tc.id),timestamp:us("timestamp").default(Jt`now()`)}),J$=io("employee_documents",{id:or("id").primaryKey().default(Jt`gen_random_uuid()`),employeeId:or("employee_id").notNull().references(()=>Tc.id),fileName:Dt("file_name").notNull(),fileType:Dt("file_type").notNull(),fileSize:yy("file_size").notNull(),mimeType:Dt("mime_type").notNull(),fileData:Dt("file_data").notNull(),uploadedAt:us("uploaded_at").default(Jt`now()`)});oo(XC).omit({id:!0,createdAt:!0});const ez=oo(Tc).omit({id:!0,createdAt:!0});oo(X$).omit({id:!0,lastUpdated:!0});oo(K$).omit({id:!0,createdAt:!0,updatedAt:!0});oo(Q$).omit({id:!0,timestamp:!0});oo(Z$).omit({id:!0,timestamp:!0});oo(J$).omit({id:!0,uploadedAt:!0});const tz=ez.extend({startDate:Rn.date({required_error:"Start date is required"})});function nz(){const[n,e]=C.useState(!1),[t,r]=C.useState([]),s=ba(),{toast:i}=Hd(),a=uO({resolver:pO(tz),defaultValues:{name:"",email:"",department:"",position:"",status:"active"}}),c=v=>new Promise((_,A)=>{const E=new FileReader;E.readAsDataURL(v),E.onload=()=>{const P=E.result.split(",")[1];_(P)},E.onerror=A}),u=v=>{switch(v.toLowerCase().split(".").pop()){case"pdf":return"resume";case"doc":case"docx":return"document";case"jpg":case"jpeg":case"png":return"photo";case"txt":return"text";default:return"other"}},h=Ol({mutationFn:async v=>{const _={...v,startDate:v.startDate.toISOString()},E=await(await ca("POST","/api/employees",_)).json();if(t.length>0)for(const k of t){const P=await c(k.file);await ca("POST",`/api/employees/${E.id}/documents`,{fileName:k.name,fileType:u(k.name),fileSize:k.size,mimeType:k.file.type,fileData:P})}return E},onSuccess:v=>{s.invalidateQueries({queryKey:["/api/employees"]}),i({title:"Employee created successfully",description:`${v.name} has been added to the onboarding system.`}),a.reset(),r([])},onError:v=>{i({title:"Failed to create employee",description:"Please check your input and try again.",variant:"destructive"})}}),f=v=>{h.mutate(v)},g=v=>{const _=v.target.files;_&&(Array.from(_).forEach(A=>{if(A.size>10*1024*1024){i({title:"File too large",description:`${A.name} is too large. Maximum size is 10MB.`,variant:"destructive"});return}if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","image/jpeg","image/png","text/plain"].includes(A.type)){i({title:"File type not supported",description:`${A.name} is not a supported file type. Please upload PDF, DOC, DOCX, JPG, PNG, or TXT files.`,variant:"destructive"});return}const k={file:A,name:A.name,size:A.size,type:A.type};r(P=>[...P,k])}),v.target.value="")},y=v=>{r(_=>_.filter((A,E)=>E!==v))},w=v=>{if(v===0)return"0 Bytes";const _=1024,A=["Bytes","KB","MB"],E=Math.floor(Math.log(v)/Math.log(_));return parseFloat((v/Math.pow(_,E)).toFixed(2))+" "+A[E]},S=["Engineering","Product","Design","Marketing","Sales","Human Resources","Finance","Operations"];return p.jsxs("div",{className:"flex flex-col h-full",children:[p.jsx("header",{className:"bg-card border-b border-border px-6 py-4",children:p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx(vN,{className:"h-8 w-8 text-primary"}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Add New Employee"}),p.jsx("p",{className:"text-muted-foreground",children:"Start the AI-powered onboarding process"})]})]})}),p.jsx("div",{className:"flex-1 overflow-auto p-6",children:p.jsxs("div",{className:"max-w-2xl mx-auto",children:[p.jsxs(ct,{children:[p.jsx(vt,{children:p.jsx(xt,{children:"Employee Information"})}),p.jsx(at,{children:p.jsx(SL,{...a,children:p.jsxs("form",{onSubmit:a.handleSubmit(f),className:"space-y-6",children:[p.jsx(_l,{control:a.control,name:"name",render:({field:v})=>p.jsxs(qo,{children:[p.jsx(Yo,{children:"Full Name"}),p.jsx(Xo,{children:p.jsx(rs,{"data-testid":"input-employee-name",placeholder:"Enter employee's full name",...v})}),p.jsx(Ko,{})]})}),p.jsx(_l,{control:a.control,name:"email",render:({field:v})=>p.jsxs(qo,{children:[p.jsx(Yo,{children:"Email Address"}),p.jsx(Xo,{children:p.jsx(rs,{"data-testid":"input-employee-email",type:"email",placeholder:"employee@cognizant.com",...v})}),p.jsx(Ko,{})]})}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsx(_l,{control:a.control,name:"department",render:({field:v})=>p.jsxs(qo,{children:[p.jsx(Yo,{children:"Department"}),p.jsxs(Cd,{onValueChange:v.onChange,defaultValue:v.value,children:[p.jsx(Xo,{children:p.jsx(Hl,{"data-testid":"select-department",children:p.jsx(Ed,{placeholder:"Select department"})})}),p.jsx(Wl,{children:S.map(_=>p.jsx(yr,{value:_,children:_},_))})]}),p.jsx(Ko,{})]})}),p.jsx(_l,{control:a.control,name:"position",render:({field:v})=>p.jsxs(qo,{children:[p.jsx(Yo,{children:"Position"}),p.jsx(Xo,{children:p.jsx(rs,{"data-testid":"input-employee-position",placeholder:"e.g., Software Engineer",...v})}),p.jsx(Ko,{})]})})]}),p.jsx(_l,{control:a.control,name:"startDate",render:({field:v})=>p.jsxs(qo,{className:"flex flex-col",children:[p.jsx(Yo,{children:"Start Date"}),p.jsxs(A4,{open:n,onOpenChange:e,children:[p.jsx(C4,{asChild:!0,children:p.jsx(Xo,{children:p.jsxs(lt,{"data-testid":"button-select-start-date",variant:"outline",className:`w-full pl-3 text-left font-normal ${!v.value&&"text-muted-foreground"}`,children:[v.value?sr(v.value,"PPP"):p.jsx("span",{children:"Pick a start date"}),p.jsx(uc,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),p.jsx(IC,{className:"w-auto p-0",align:"start",children:p.jsx(_C,{mode:"single",selected:v.value,onSelect:_=>{v.onChange(_),e(!1)},disabled:_=>_<new Date,initialFocus:!0})})]}),p.jsx(Ko,{})]})}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"Documents (Optional)"}),p.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Upload resume, certificates, or other relevant documents for the new employee."})]}),p.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-6 text-center",children:[p.jsx(Ll,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("p",{className:"text-sm text-muted-foreground",children:"Click the button below to upload files"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Supports: PDF, DOC, DOCX, JPG, PNG, TXT (max 10MB each)"})]}),p.jsxs("div",{className:"mt-4",children:[p.jsx("input",{type:"file",multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.txt",onChange:g,className:"hidden",id:"file-upload-input","data-testid":"input-file-upload"}),p.jsx(lt,{type:"button",variant:"outline",asChild:!0,children:p.jsx("label",{htmlFor:"file-upload-input",className:"cursor-pointer","data-testid":"button-browse-files",children:"Browse Files"})})]})]}),t.length>0&&p.jsxs("div",{className:"space-y-2",children:[p.jsx("h4",{className:"text-sm font-medium text-foreground",children:"Uploaded Files"}),t.map((v,_)=>p.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx(Nn,{className:"h-5 w-5 text-primary"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-medium text-foreground",children:v.name}),p.jsxs("p",{className:"text-xs text-muted-foreground",children:[w(v.size),"  ",u(v.name)]})]})]}),p.jsx(lt,{type:"button",variant:"ghost",size:"sm",onClick:()=>y(_),"data-testid":`button-remove-file-${_}`,children:p.jsx(Yd,{className:"h-4 w-4"})})]},_))]})]}),p.jsxs("div",{className:"flex justify-end space-x-4",children:[p.jsx(lt,{type:"button",variant:"outline",onClick:()=>a.reset(),"data-testid":"button-cancel",children:"Cancel"}),p.jsx(lt,{type:"submit",disabled:h.isPending,"data-testid":"button-add-onboarding",children:h.isPending?"Adding...":"Add Onboarding"})]})]})})})]}),p.jsxs(ct,{className:"mt-6",children:[p.jsx(vt,{children:p.jsx(xt,{children:"What happens next?"})}),p.jsx(at,{children:p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"AI will automatically prepare personalized onboarding documents"})]}),p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Welcome email will be sent with login credentials and first-day information"})]}),p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Equipment and workspace setup will be automatically initiated"})]}),p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Role-specific training modules will be curated based on department and position"})]})]})})]})]})})]})}function rz(){const[n,e]=C.useState("540dd7fe-a72e-4a86-a996-e61ee9eb10c9"),{data:t=[]}=tr({queryKey:["/api/employees"]});return p.jsxs("div",{className:"flex flex-col h-full",children:[p.jsx("header",{className:"bg-card border-b border-border px-6 py-4",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"AI Assistant"}),p.jsx("p",{className:"text-muted-foreground",children:"Chat with the AI to get help with onboarding questions"})]}),p.jsx("div",{className:"w-64",children:p.jsxs(Cd,{value:n,onValueChange:e,children:[p.jsx(Hl,{children:p.jsx(Ed,{placeholder:"Select employee"})}),p.jsxs(Wl,{children:[p.jsx(yr,{value:"540dd7fe-a72e-4a86-a996-e61ee9eb10c9",children:"John Smith (Demo)"}),t.map(r=>p.jsx(yr,{value:r.id,children:r.name},r.id))]})]})})]})}),p.jsx("div",{className:"flex-1 overflow-auto p-6",children:p.jsx("div",{className:"max-w-4xl mx-auto",children:p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[p.jsx("div",{className:"lg:col-span-2",children:p.jsx("div",{className:"h-[800px]",children:p.jsx(iS,{})})}),p.jsxs("div",{className:"space-y-6",children:[p.jsxs(ct,{children:[p.jsx(vt,{children:p.jsx(xt,{children:"AI Capabilities"})}),p.jsxs(at,{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("h4",{className:"text-sm font-medium text-foreground mb-2",children:"What I can help with:"}),p.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[p.jsx("li",{children:" Company policies and procedures"}),p.jsx("li",{children:" Development environment setup"}),p.jsx("li",{children:" Project technical documentation"}),p.jsx("li",{children:" Security requirements and training"}),p.jsx("li",{children:" Onboarding process guidance"}),p.jsx("li",{children:" Remote work policies"}),p.jsx("li",{children:" General industry best practices"})]})]}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-sm font-medium text-foreground mb-2",children:"How I work:"}),p.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["1. ",p.jsx("strong",{children:"First"}),": I search your uploaded documents for company-specific information"]}),p.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["2. ",p.jsx("strong",{children:"Then"}),": If no relevant info is found, I provide general industry guidance"]}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Powered by open source Llama 3.1 model with intelligent context prioritization"})]})]})]}),p.jsxs(ct,{children:[p.jsx(vt,{children:p.jsx(xt,{children:"Sample Questions"})}),p.jsx(at,{children:p.jsx("div",{className:"space-y-3",children:["How do I set up my development environment?","What are the security requirements?","Tell me about the remote work policy","What's included in Project Alpha?","How do I access company policies?"].map((r,s)=>p.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg text-sm cursor-pointer hover:bg-muted/50 transition-colors",children:['"',r,'"']},s))})})]})]})]})})})]})}function sz(){const{data:n=[],isLoading:e}=tr({queryKey:["/api/employees"]}),{data:t=[]}=tr({queryKey:["/api/employee-documents"]}),r=n.filter(c=>{const u=c.onboardingProgress?.[0];return u?u.completionPercentage<100:c.onboardingStage!=="Completed"}),s=c=>t.filter(u=>u.employeeId===c),i=c=>{switch(c){case"pre-boarding":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"first-day":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"training":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"integration":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},a=c=>c.split("-").map(u=>u.charAt(0).toUpperCase()+u.slice(1)).join(" ");return e?p.jsxs("div",{className:"flex flex-col h-full",children:[p.jsx("header",{className:"bg-card border-b border-border px-6 py-4",children:p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx(zi,{className:"h-8 w-8 text-primary"}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Onboarding in Progress"}),p.jsx("p",{className:"text-muted-foreground",children:"Track employees currently in onboarding"})]})]})}),p.jsx("div",{className:"flex-1 flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),p.jsx("p",{className:"text-muted-foreground",children:"Loading onboarding data..."})]})})]}):p.jsxs("div",{className:"flex flex-col h-full",children:[p.jsx("header",{className:"bg-card border-b border-border px-6 py-4",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx(zi,{className:"h-8 w-8 text-primary"}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Onboarding in Progress"}),p.jsx("p",{className:"text-muted-foreground",children:"Track employees currently in onboarding"})]})]}),p.jsxs("div",{className:"text-right",children:[p.jsx("p",{className:"text-2xl font-bold text-primary",children:r.length}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Onboarding"})]})]})}),p.jsx("div",{className:"flex-1 overflow-auto p-6",children:r.length===0?p.jsxs("div",{className:"text-center py-12",children:[p.jsx(zi,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),p.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No Active Onboarding"}),p.jsx("p",{className:"text-muted-foreground",children:"All employees have completed their onboarding process."})]}):p.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:r.map(c=>{const u=c.onboardingProgress?.[0],h=s(c.id);return p.jsxs(ct,{className:"hover:shadow-lg transition-shadow",children:[p.jsx(vt,{className:"pb-3",children:p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{children:[p.jsx(xt,{className:"text-lg","data-testid":`employee-name-${c.id}`,children:c.name}),p.jsx("p",{className:"text-sm text-muted-foreground",children:c.position}),p.jsx("p",{className:"text-xs text-muted-foreground",children:c.department})]}),p.jsx(on,{className:i(u?.stage||c.onboardingStage),"data-testid":`stage-${c.id}`,children:a(u?.stage||c.onboardingStage)})]})}),p.jsxs(at,{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsx("span",{className:"text-sm font-medium text-foreground",children:"Progress"}),p.jsxs("span",{className:"text-sm text-muted-foreground","data-testid":`progress-${c.id}`,children:[u?.completionPercentage||0,"%"]})]}),p.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 dark:bg-gray-700",children:p.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${u?.completionPercentage||0}%`}})})]}),p.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[p.jsx(uc,{className:"h-4 w-4"}),p.jsxs("span",{children:["Started: ",sr(new Date(c.startDate),"MMM dd, yyyy")]})]}),u?.lastUpdated&&p.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[p.jsx(ua,{className:"h-4 w-4"}),p.jsxs("span",{children:["Updated: ",sr(new Date(u.lastUpdated),"MMM dd")]})]}),p.jsxs("div",{className:"border-t pt-3",children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Nn,{className:"h-4 w-4 text-muted-foreground"}),p.jsx("span",{className:"text-sm font-medium text-foreground",children:"Documents"})]}),p.jsx(on,{variant:"secondary","data-testid":`document-count-${c.id}`,children:h.length})]}),h.length>0?p.jsxs("div",{className:"space-y-2",children:[h.slice(0,3).map((f,g)=>p.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded text-sm",children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Nn,{className:"h-3 w-3 text-primary"}),p.jsx("span",{className:"truncate max-w-[150px]",title:f.fileName,children:f.fileName})]}),p.jsx("span",{className:"text-xs text-muted-foreground uppercase",children:f.fileType})]},f.id)),h.length>3&&p.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["+",h.length-3," more documents"]})]}):p.jsx("p",{className:"text-xs text-muted-foreground",children:"No documents uploaded"})]}),p.jsxs(lt,{variant:"outline",size:"sm",className:"w-full","data-testid":`view-details-${c.id}`,onClick:()=>{window.location.href=`/employees/${c.id}`},children:["View Details",p.jsx(ZP,{className:"h-3 w-3 ml-1"})]})]})]},c.id)})})})]})}function iz(){const{id:n}=m0(),[,e]=g0(),{data:t,isLoading:r}=tr({queryKey:["/api/employees",n]}),{data:s=[]}=tr({queryKey:["/api/employees",n,"documents"]}),{data:i}=tr({queryKey:["/api/employees",n,"progress"]}),a=u=>{switch(u){case"pre-boarding":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"first-day":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"training":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"integration":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},c=u=>u.split("-").map(h=>h.charAt(0).toUpperCase()+h.slice(1)).join(" ");return r?p.jsxs("div",{className:"flex flex-col h-full",children:[p.jsx("header",{className:"bg-card border-b border-border px-6 py-4",children:p.jsx("div",{className:"flex items-center space-x-3",children:p.jsxs(lt,{variant:"ghost",size:"sm",onClick:()=>e("/onboarding-list"),"data-testid":"button-back",children:[p.jsx(Cp,{className:"h-4 w-4 mr-2"}),"Back to List"]})})}),p.jsx("div",{className:"flex-1 flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),p.jsx("p",{className:"text-muted-foreground",children:"Loading employee details..."})]})})]}):t?p.jsxs("div",{className:"flex flex-col h-full",children:[p.jsx("header",{className:"bg-card border-b border-border px-6 py-4",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsxs(lt,{variant:"ghost",size:"sm",onClick:()=>e("/onboarding-list"),"data-testid":"button-back",children:[p.jsx(Cp,{className:"h-4 w-4 mr-2"}),"Back to List"]}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold text-foreground",children:t.name}),p.jsxs("p",{className:"text-muted-foreground",children:[t.position,"  ",t.department]})]})]}),p.jsx(on,{className:a(i?.stage||t.onboardingStage),"data-testid":"employee-stage",children:c(i?.stage||t.onboardingStage)})]})}),p.jsx("div",{className:"flex-1 overflow-auto p-6",children:p.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[p.jsxs(ct,{children:[p.jsx(vt,{children:p.jsxs(xt,{className:"flex items-center space-x-2",children:[p.jsx(u_,{className:"h-5 w-5"}),p.jsx("span",{children:"Employee Information"})]})}),p.jsx(at,{children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx(fN,{className:"h-4 w-4 text-muted-foreground"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-medium text-foreground",children:"Email"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:t.email})]})]}),p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx(nN,{className:"h-4 w-4 text-muted-foreground"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-medium text-foreground",children:"Department"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:t.department})]})]})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx(tN,{className:"h-4 w-4 text-muted-foreground"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-medium text-foreground",children:"Position"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:t.position})]})]}),p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx(uc,{className:"h-4 w-4 text-muted-foreground"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-medium text-foreground",children:"Start Date"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:sr(new Date(t.startDate),"MMMM dd, yyyy")})]})]})]})]})})]}),i&&p.jsxs(ct,{children:[p.jsx(vt,{children:p.jsxs(xt,{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(ua,{className:"h-5 w-5"}),p.jsx("span",{children:"Onboarding Progress"})]}),p.jsxs("span",{className:"text-sm font-medium",children:[i.completionPercentage,"% Complete"]})]})}),p.jsxs(at,{className:"space-y-4",children:[p.jsx(fa,{value:i.completionPercentage,className:"h-3"}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"font-medium text-foreground",children:"Tasks"}),i.tasks.map((u,h)=>p.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-muted",children:[u.completed?p.jsx(pd,{className:"h-4 w-4 text-green-600"}):p.jsx(l_,{className:"h-4 w-4 text-muted-foreground"}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:`text-sm ${u.completed?"line-through text-muted-foreground":"text-foreground"}`,children:u.name}),u.description&&p.jsx("p",{className:"text-xs text-muted-foreground",children:u.description})]})]},u.id))]}),i.lastUpdated&&p.jsxs("p",{className:"text-sm text-muted-foreground",children:["Last updated: ",sr(new Date(i.lastUpdated),"MMM dd, yyyy 'at' h:mm a")]})]})]}),p.jsxs(ct,{children:[p.jsx(vt,{children:p.jsxs(xt,{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Nn,{className:"h-5 w-5"}),p.jsx("span",{children:"Documents"})]}),p.jsxs(on,{variant:"secondary",children:[s.length," files"]})]})}),p.jsx(at,{children:s.length>0?p.jsx("div",{className:"space-y-3",children:s.map(u=>p.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx(Nn,{className:"h-5 w-5 text-primary"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-medium text-foreground",children:u.fileName}),p.jsxs("p",{className:"text-xs text-muted-foreground",children:[(u.fileSize/1024).toFixed(1)," KB  ",u.fileType,"  ",sr(new Date(u.uploadedAt),"MMM dd, yyyy")]})]})]}),p.jsx(on,{variant:"outline",className:"text-xs",children:u.fileType.toUpperCase()})]},u.id))}):p.jsxs("div",{className:"text-center py-8",children:[p.jsx(Nn,{className:"h-12 w-12 text-muted-foreground mx-auto mb-3"}),p.jsx("p",{className:"text-muted-foreground",children:"No documents uploaded yet"})]})})]})]})})]}):p.jsxs("div",{className:"flex flex-col h-full",children:[p.jsx("header",{className:"bg-card border-b border-border px-6 py-4",children:p.jsx("div",{className:"flex items-center space-x-3",children:p.jsxs(lt,{variant:"ghost",size:"sm",onClick:()=>e("/onboarding-list"),"data-testid":"button-back",children:[p.jsx(Cp,{className:"h-4 w-4 mr-2"}),"Back to List"]})})}),p.jsx("div",{className:"flex-1 flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"Employee Not Found"}),p.jsx("p",{className:"text-muted-foreground",children:"The employee you're looking for doesn't exist."})]})})]})}function oz(){const{data:n=[]}=tr({queryKey:["/api/employees"]}),{data:e}=tr({queryKey:["/api/onboarding/stats"]}),t=n.length,r=n.filter(u=>u.onboardingStage==="Completed").length,s=n.filter(u=>u.onboardingStage!=="Completed").length,i=n.reduce((u,h)=>(u[h.department]=(u[h.department]||0)+1,u),{}),a=n.reduce((u,h)=>(u[h.onboardingStage]=(u[h.onboardingStage]||0)+1,u),{}),c=t>0?r/t*100:0;return p.jsxs("div",{className:"flex flex-col h-full",children:[p.jsx("header",{className:"bg-card border-b border-border px-6 py-4",children:p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx(fm,{className:"h-8 w-8 text-primary"}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Analytics Dashboard"}),p.jsx("p",{className:"text-muted-foreground",children:"Insights into onboarding performance and trends"})]})]})}),p.jsx("div",{className:"flex-1 overflow-auto p-6",children:p.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[p.jsxs(ct,{children:[p.jsxs(vt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[p.jsx(xt,{className:"text-sm font-medium",children:"Total Employees"}),p.jsx(zi,{className:"h-4 w-4 text-muted-foreground"})]}),p.jsxs(at,{children:[p.jsx("div",{className:"text-2xl font-bold","data-testid":"metric-total-employees",children:t}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Active in system"})]})]}),p.jsxs(ct,{children:[p.jsxs(vt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[p.jsx(xt,{className:"text-sm font-medium",children:"In Progress"}),p.jsx(ua,{className:"h-4 w-4 text-muted-foreground"})]}),p.jsxs(at,{children:[p.jsx("div",{className:"text-2xl font-bold","data-testid":"metric-in-progress",children:s}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently onboarding"})]})]}),p.jsxs(ct,{children:[p.jsxs(vt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[p.jsx(xt,{className:"text-sm font-medium",children:"Completed"}),p.jsx(pd,{className:"h-4 w-4 text-muted-foreground"})]}),p.jsxs(at,{children:[p.jsx("div",{className:"text-2xl font-bold","data-testid":"metric-completed",children:r}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Fully onboarded"})]})]}),p.jsxs(ct,{children:[p.jsxs(vt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[p.jsx(xt,{className:"text-sm font-medium",children:"Completion Rate"}),p.jsx(nd,{className:"h-4 w-4 text-muted-foreground"})]}),p.jsxs(at,{children:[p.jsxs("div",{className:"text-2xl font-bold","data-testid":"metric-completion-rate",children:[c.toFixed(1),"%"]}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Overall success rate"})]})]})]}),p.jsxs(ct,{children:[p.jsx(vt,{children:p.jsx(xt,{children:"Department Distribution"})}),p.jsx(at,{children:p.jsx("div",{className:"space-y-4",children:Object.entries(i).map(([u,h])=>p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-sm font-medium",children:u}),p.jsxs(on,{variant:"secondary",children:[h," employees"]})]}),p.jsx(fa,{value:t>0?h/t*100:0,className:"h-2"})]},u))})})]}),p.jsxs(ct,{children:[p.jsx(vt,{children:p.jsx(xt,{children:"Onboarding Stage Distribution"})}),p.jsx(at,{children:p.jsx("div",{className:"space-y-4",children:Object.entries(a).map(([u,h])=>p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-sm font-medium",children:u}),p.jsxs(on,{variant:"outline",children:[h," employees"]})]}),p.jsx(fa,{value:t>0?h/t*100:0,className:"h-2"})]},u))})})]}),p.jsxs(ct,{children:[p.jsx(vt,{children:p.jsxs(xt,{className:"flex items-center space-x-2",children:[p.jsx(uc,{className:"h-5 w-5"}),p.jsx("span",{children:"Recent Activity"})]})}),p.jsx(at,{children:p.jsxs("div",{className:"space-y-4",children:[n.slice(0,5).map(u=>p.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center",children:p.jsx("span",{className:"text-xs font-medium text-primary-foreground",children:u.name.split(" ").map(h=>h[0]).join("").slice(0,2)})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-medium",children:u.name}),p.jsxs("p",{className:"text-xs text-muted-foreground",children:[u.department,"  ",u.position]})]})]}),p.jsx(on,{variant:"outline",children:u.onboardingStage})]},u.id)),n.length===0&&p.jsxs("div",{className:"text-center py-8",children:[p.jsx("p",{className:"text-muted-foreground",children:"No employees added yet"}),p.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Add your first employee to see analytics data"})]})]})})]}),p.jsxs(ct,{children:[p.jsx(vt,{children:p.jsx(xt,{children:"Performance Insights"})}),p.jsx(at,{children:p.jsx("div",{className:"space-y-4",children:p.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-950 rounded-lg border border-blue-200 dark:border-blue-800",children:[p.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"AI Recommendations"}),p.jsxs("div",{className:"space-y-2 text-sm text-blue-800 dark:text-blue-200",children:[c<50&&p.jsx("p",{children:" Consider reviewing onboarding processes to improve completion rates"}),s>r&&p.jsx("p",{children:" Focus on supporting employees currently in the onboarding pipeline"}),Object.keys(i).length>0&&p.jsxs("p",{children:[" ",Object.keys(i)[0]," department has the most new hires"]}),t===0&&p.jsx("p",{children:" Start by adding your first employee to begin tracking onboarding metrics"})]})]})})})]})]})})]})}function az(){return p.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:p.jsx(ct,{className:"w-full max-w-md mx-4",children:p.jsxs(at,{className:"pt-6",children:[p.jsxs("div",{className:"flex mb-4 gap-2",children:[p.jsx(aN,{className:"h-8 w-8 text-red-500"}),p.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),p.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function lz(){const[n]=g0(),e=[{name:"Dashboard",href:"/",icon:fm,current:n==="/"},{name:"New Employee",href:"/new-employee",icon:zi,current:n==="/new-employee"},{name:"Onboarding List",href:"/onboarding-list",icon:yN,current:n==="/onboarding-list"},{name:"Knowledge Base",href:"/knowledge-base",icon:eN,current:n==="/knowledge-base"},{name:"AI Assistant",href:"/ai-assistant",icon:td,current:n==="/ai-assistant"},{name:"Analytics",href:"/analytics",icon:fm,current:n==="/analytics"},{name:"Settings",href:"/settings",icon:gN,current:n==="/settings"}];return p.jsxs("aside",{className:"w-64 bg-card border-r border-border flex-shrink-0 flex flex-col",children:[p.jsx("div",{className:"p-6 border-b border-border",children:p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("div",{className:"w-10 h-10 bg-primary rounded-lg flex items-center justify-center",children:p.jsx(fd,{className:"h-6 w-6 text-primary-foreground"})}),p.jsxs("div",{children:[p.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Pod 42 AI"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Onboarding Platform"})]})]})}),p.jsx("nav",{className:"flex-1 p-4 space-y-2",children:e.map(t=>{const r=t.icon;return p.jsx(wk,{href:t.href,children:p.jsxs("span",{"data-testid":`nav-${t.name.toLowerCase().replace(/\s+/g,"-")}`,className:`
                  flex items-center space-x-3 px-3 py-2 rounded-md transition-colors cursor-pointer
                  ${t.current?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-muted hover:text-foreground"}
                `,children:[p.jsx(r,{className:"w-5 h-5"}),p.jsx("span",{className:t.current?"font-medium":"",children:t.name})]})},t.name)})}),p.jsx("div",{className:"p-4 border-t border-border bg-card",children:p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsxs(th,{className:"w-10 h-10",children:[p.jsx(wg,{src:"https://github.com/shadcn.png",alt:"User avatar"}),p.jsx(nh,{children:"SJ"})]}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:"Sarah Johnson"}),p.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"HR Manager"})]}),p.jsx(lt,{variant:"ghost",size:"icon",className:"h-8 w-8",children:p.jsx(uN,{className:"h-4 w-4"})})]})})]})}function cz(){return p.jsxs("div",{className:"flex h-screen bg-background",children:[p.jsx(lz,{}),p.jsx("main",{className:"flex-1 overflow-hidden",children:p.jsxs(bk,{children:[p.jsx(ti,{path:"/",component:LI}),p.jsx(ti,{path:"/knowledge-base",component:Uj}),p.jsx(ti,{path:"/new-employee",component:nz}),p.jsx(ti,{path:"/onboarding-list",component:sz}),p.jsx(ti,{path:"/employees/:id",component:iz}),p.jsx(ti,{path:"/ai-assistant",component:rz}),p.jsx(ti,{path:"/analytics",component:oz}),p.jsx(ti,{component:az})]})})]})}function uz(){return p.jsx(zk,{client:eP,children:p.jsxs(ED,{children:[p.jsx(eR,{}),p.jsx(cz,{})]})})}ZT.createRoot(document.getElementById("root")).render(p.jsx(uz,{}));
